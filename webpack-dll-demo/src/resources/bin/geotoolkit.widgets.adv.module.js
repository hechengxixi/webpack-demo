/* tslint:disable */
/* eslint-disable */
/**
 * Copyright: Copyright (c) 2016 by INT, Inc.  All rights reserved.<br>
 * Company: INT, Inc. <br>
 * INT PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 */
import {_geo} from './geotoolkit.adv.module.js';
import {controls} from './geotoolkit.controls.adv.module.js';
import {data} from './geotoolkit.data.adv.module.js';
import {pdf} from './geotoolkit.pdf.adv.module.js';

export let widgets = (function (_geo) {var _geo=_geo||{};_geo.geotoolkit.oa=_geo.geotoolkit.oa||{};_geo.geotoolkit.oa.data=_geo.geotoolkit.oa.data||{};_geo.geotoolkit.oa.animation=_geo.geotoolkit.oa.animation||{};_geo.geotoolkit.oa.animation.Dd=_geo.geotoolkit.oa.animation.Dd||{};_geo.geotoolkit.oa.ia=_geo.geotoolkit.oa.ia||{};_geo.geotoolkit.oa.Ff=_geo.geotoolkit.oa.Ff||{};_geo.geotoolkit.oa.Kc=_geo.geotoolkit.oa.Kc||{};_geo.geotoolkit.oa.Sd=_geo.geotoolkit.oa.Sd||{};_geo.geotoolkit.oa.Yf=_geo.geotoolkit.oa.Yf||{};
_geo.geotoolkit.oa.Bb=function(){function b(){}b.pg=function(a,b){var d=Array.isArray(a)?a:[a];d.forEach(function(a){if(null!=a)for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])})};return b}();_geo.geotoolkit.oa.Yf.$={mDb:"ItemChanged"};_geo.geotoolkit.oa.Yf.jba={fza:"visiblerange",Voa:"scale",PQ:"custom"};
_geo.geotoolkit.oa.Yf.Phc=function(){function b(a,b){this.Zua=a;this.options=b;this.direction=[];!0===b.vertical&&this.direction.push(_geo.geotoolkit.util.Mb.$b);!0===b.horizontal&&this.direction.push(_geo.geotoolkit.util.Mb.ic);this.actions={}}b.prototype.Mk=function(){return this.direction};b.prototype.jb=function(){return this.options};b.prototype.connect=function(a){if(this.Zua instanceof _geo.geotoolkit.util.EventDispatcher)for(var b in this.actions)this.actions.hasOwnProperty(b)&&this.actions[b].connect(this.options.events,
this.Zua,a)};b.prototype.disconnect=function(a){if(this.Zua instanceof _geo.geotoolkit.util.EventDispatcher)for(var b in this.actions)this.actions.hasOwnProperty(b)&&this.actions[b].disconnect(this.options.events,this.Zua,a)};return b}();
_geo.geotoolkit.oa.Yf.vF=function(){function b(a){this.name=a}b.prototype.getName=function(){return this.name};b.prototype.connect=function(a,b,d){if(b instanceof _geo.geotoolkit.util.EventDispatcher)for(var e=0;e<a.length;++e)b.kb(a[e],d)};b.prototype.disconnect=function(a,b,d){if(b instanceof _geo.geotoolkit.util.EventDispatcher)for(var e=0;e<a.length;++e)b.kb(a[e],d)};b.prototype.getData=function(a,b,d){return(d=d[this.getName()])&&d.getdata?d.getdata.call(a,a,b):null};b.prototype.setData=function(a,
b,d,e){return(e=e[this.getName()])&&e.setdata?e.setdata.call(this,b,a,d):null};return b}();
_geo.geotoolkit.oa.Yf.YT=function(){function b(){_geo.geotoolkit.oa.Yf.vF.call(this,_geo.geotoolkit.oa.Yf.jba.fza)}_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Yf.vF);b.prototype.getData=function(a,b,d){var e=_geo.geotoolkit.oa.Yf.vF.prototype.getData.call(this,a,b,d);null==e&&"function"===typeof a.Nb&&(a=a.Nb(),null!=a&&(b=b===_geo.geotoolkit.util.Mb.ic,e=d.orientation===_geo.geotoolkit.util.Mb.$b?new _geo.geotoolkit.util.Range(b?a.sa():a.qa(),b?a.za():a.wa()):new _geo.geotoolkit.util.Range(b?a.qa():
a.sa(),b?a.wa():a.za())));return e};return b}();
_geo.geotoolkit.oa.Yf.O6=function(){function b(){_geo.geotoolkit.oa.Yf.vF.call(this,_geo.geotoolkit.oa.Yf.jba.Voa)}_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Yf.vF);b.prototype.getData=function(a,b,d){var e=_geo.geotoolkit.oa.Yf.vF.prototype.getData.call(this,a,b,d);null===e&&"function"===typeof a.Yb&&(e=a.Yb(),null!=e&&(a=b===_geo.geotoolkit.util.Mb.ic,d=d.orientation===_geo.geotoolkit.util.Mb.$b,e=a?new _geo.geotoolkit.util.Ga(d?e.Ab():e.Pb(),0,0,1,d?e.ti():e.Th(),0):new _geo.geotoolkit.util.Ga(1,
0,0,d?e.Pb():e.Ab(),0,d?e.Th():e.ti())));return e};return b}();
_geo.geotoolkit.oa.Yf.Mha=function(){function b(){this.actions={};this.BW(new _geo.geotoolkit.oa.Yf.YT);this.BW(new _geo.geotoolkit.oa.Yf.O6);this.BW(new _geo.geotoolkit.oa.Yf.vF(_geo.geotoolkit.oa.Yf.jba.PQ))}function a(a,b){for(;null!=b;){if(a[b])return a[b];b=_geo.geotoolkit.myc(b)}return null}var g="*",d=null;b.prototype.BW=function(a,b){if(a){var d=a.getName();void 0===this.actions[d]&&(this.actions[d]={});void 0===b&&(b=g);this.actions[d][b]=a}};b.prototype.cWb=function(b,c){var d=this.actions[b];
if(d){var k=a(d,c);return k?k:d[g]}return null};b.Za=function(){null==d&&(d=new b);return d};return b}();
_geo.geotoolkit.oa.Yf.Ehb=function(){function b(a){_geo.geotoolkit.util.EventDispatcher.call(this);this.options=_geo.geotoolkit.Ca(a,{mode:[_geo.geotoolkit.oa.Yf.jba.fza],registry:null},!0);this.bld=this.options.registry?this.options.registry:_geo.geotoolkit.oa.Yf.Mha.Za();this.items=[];this.bSb=this.$6b=!1}_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.widgets.sync.ViewSynchronizer");b.prototype.connect=function(a,b){if(a instanceof _geo.geotoolkit.util.EventDispatcher){for(var d=
_geo.geotoolkit.Ca(b,{sender:!0,receiver:!0,vertical:!1,horizontal:!1,events:[_geo.geotoolkit.scene.Node.$.eO,_geo.geotoolkit.scene.Node.$.ss],orientation:_geo.geotoolkit.util.Mb.$b,typename:"function"===typeof a.getClassName?a.getClassName():""},!0),e=new _geo.geotoolkit.oa.Yf.Phc(a,d),c=this.options.mode,f=0;f<c.length;++f){var k=this.bld.cWb(c[f],d.typename);k&&(e.actions[k.getName()]=k)}this.items.push(e);!0===d.sender&&e.connect(this.lJc.bind(this))}return this};b.prototype.send=function(a,b){a&&
(void 0!==a.vertical&&this.spc(a.vertical,_geo.geotoolkit.util.Mb.$b,b),void 0!==a.horizontal&&this.spc(a.horizontal,_geo.geotoolkit.util.Mb.ic,b))};b.prototype.spc=function(a,b,d){if(a){for(var e=0;e<this.items.length;++e)if(-1!==this.items[e].direction.indexOf(b)){var c=this.items[e].actions[d];c&&c.setData(this.items[e].Zua,a,b,this.items[e].options)}this.Ja(_geo.geotoolkit.oa.Yf.$.mDb,this,{data:a,action:d,orientation:b})}};b.prototype.wQ=function(a,b){if(this.$6b)return this;this.$6b=!0;var d=
this.indexOf(a);if(-1!==d){var d=this.items[d],e=d.actions[b];if(null!=e)for(var c=0;c<d.direction.length;++c){var f=e.getData(d.Zua,d.direction[c],d.options);if(f){for(var k=0;k<this.items.length;++k)if(this.items[k]!==d&&-1!==this.items[k].direction.indexOf(d.direction[c])){var h=this.items[k].actions[b];h&&h.setData(this.items[k].Zua,f,d.direction[c],this.items[k].options)}this.Ja(_geo.geotoolkit.oa.Yf.$.mDb,this,{data:f,action:b,orientation:d.direction[c]})}}}this.$6b=!1;return this};b.prototype.lJc=
function(a,b){if(!this.bSb){this.bSb=!0;for(var d=this.options.mode,e=0;e<d.length;++e)this.wQ(b,d[e]);this.bSb=!1}};b.prototype.indexOf=function(a){for(var b=-1,d=0;d<this.items.length;++d)if(this.items[d].Zua===a){b=d;break}return b};b.prototype.disconnect=function(a){a=this.indexOf(a);-1!==a&&(!0===this.items[a].options.sender&&this.items[a].disconnect(this.lJc.bind(this)),this.items.splice(a,1))};return b}();
_geo.geotoolkit.oa.Ff.ue=function(){function b(){_geo.geotoolkit.Bd.ue.call(this);this.Kma()}function a(){this.map={};this.y$={};this.ot("linestyle","geotoolkit.attributes.LineStyle");this.ot("fillstyle","geotoolkit.attributes.FillStyle");this.ot("imagepattern","geotoolkit.attributes.ImagePattern");this.ot("textstyle","geotoolkit.attributes.TextStyle")}function g(a){return"string"==typeof a&&a.match(/^#href\(.*\)$/)?/^#href\((.*)\)$/.exec(a)[1]:null}var d="cg_type",e=null;a.Za=function(){null==e&&
(e=new a);return e};a.prototype.ot=function(a,b){this.map[a]=b;this.y$[b]=a};a.prototype.ssb=function(){return this.map};a.prototype.Ev=function(a){a=null!=a&&"function"==typeof a.getClassName?a.getClassName():null;return null!=a?null!=this.y$[a]?this.y$[a]:a:null};a.prototype.i5a=function(a){a=null!=this.map[a]?this.map[a]:a;return null!=a?_geo.geotoolkit.E8a(a):null};var c={save:function(b,c){var e=a.Za().Ev(b);null!=e&&c.gc(d,e);e=c.LE(b);null!=e&&c.gc("cg_id",e);var e="function"==typeof b.ka?
b.ka():b,f;for(f in e)if(e.hasOwnProperty(f)&&"cg_id"!==f&&"undefined"!=typeof e[f]){var g=e[f];if("object"==typeof g&&null!==g){var r=c.LE(g);null==r?c.ge(f,g):c.gc(f,"#href("+r+")")}else"function"!=typeof g&&c.gc(f,g)}c.im()},load:function(b,c){var e=null!=c?c:null;if(null==e){var f=b.getValue(d),p=b.HM();null!=f&&(e=null!=p&&a.Za().Ev(p)===f?p:a.Za().i5a(f));null==e&&(e={})}var r="function"===typeof e.ja?{}:e;b.Ax(function(a,b){var c=b.getValue(),d=g(c);null==d?r[a]=c:null!=b.cn(d)?r[a]=b.cn(d):
b.kQ(d,function(b){r[a]=b;"function"===typeof e.ja&&e.ja(r)})});"function"===typeof e.ja&&e.ja(r);f=b.getValue("cg_id");null!=f&&b.gq(f,e);return e}};_geo.geotoolkit.fa(b,_geo.geotoolkit.Bd.ue);_geo.geotoolkit.da(b,"geotoolkit.widgets.templates.Registry");b.prototype.Kma=function(){this.Jq("geotoolkit.widgets.BaseWidget",{save:function(a,b){b.gc("type",a.getClassName());b.ge("data",a.getData({"no-data":!0}));b.im()},load:function(a){var b=a.cn("#widget");b&&(a=a.getValue("data"),null!=a&&b.setData(a));
return b}});var b=a.Za().ssb(),d;for(d in b)b.hasOwnProperty(d)&&this.Jq(d,c);this.Jq("default",c)};var f=null;b.lq=function(){null==f&&(f=new _geo.geotoolkit.oa.Ff.ue);return f};return b}();
_geo.geotoolkit.oa.Ff.Deb=function(){function b(){_geo.geotoolkit.Bd.ue.call(this);this.Kma()}function a(){this.map={};this.y$={};this.ot("linestyle","geotoolkit.attributes.LineStyle");this.ot("fillstyle","geotoolkit.attributes.FillStyle");this.ot("imagepattern","geotoolkit.attributes.ImagePattern");this.ot("textstyle","geotoolkit.attributes.TextStyle");this.ot("histogramtickgenerator","geotoolkit.controls.axis.HistogramTickGenerator")}function g(a){return"string"==typeof a&&a.match(/^#href\(.*\)$/)?
/^#href\((.*)\)$/.exec(a)[1]:null}var d="cg_type",e=null;a.Za=function(){null==e&&(e=new a);return e};a.prototype.ot=function(a,b){this.map[a]=b;this.y$[b]=a};a.prototype.ssb=function(){return this.map};a.prototype.Ev=function(a){a=null!=a&&"function"==typeof a.getClassName?a.getClassName():null;return null!=a?null!=this.y$[a]?this.y$[a]:a:null};a.prototype.i5a=function(a){a=null!=this.map[a]?this.map[a]:a;return null!=a?_geo.geotoolkit.E8a(a):null};var c={save:function(b,c){var e=a.Za().Ev(b);null!=
e&&c.gc(d,e);e=c.LE(b);null!=e&&c.gc("cg_id",e);var e="function"==typeof b.ka?b.ka():b,f;for(f in e)if(e.hasOwnProperty(f)&&"cg_id"!==f&&"undefined"!=typeof e[f]){var g=e[f];if("object"==typeof g&&null!==g){var r=c.LE(g);null==r?c.ge(f,g):c.gc(f,"#href("+r+")")}else"function"!=typeof g&&c.gc(f,g)}b instanceof _geo.geotoolkit.scene.Node&&!e.hasOwnProperty("visible")&&c.gc("visible",!0);c.im()},load:function(b,c){var e=null!=c?c:null;if(null==e){var f=b.getValue(d),p=b.HM();null!=f&&(e=null!=p&&a.Za().Ev(p)===
f?p:a.Za().i5a(f));null==e&&(e={})}var r="function"===typeof e.ja?{}:e;b.Ax(function(a,b){var c=b.getValue(),d=g(c);null==d?r[a]=c:null!=b.cn(d)?r[a]=b.cn(d):b.kQ(d,function(b){r[a]=b;"function"===typeof e.ja&&e.ja(r)})});"function"===typeof e.ja&&e.ja(r);f=b.getValue("cg_id");null!=f&&b.gq(f,e);return e}};_geo.geotoolkit.fa(b,_geo.geotoolkit.Bd.ue);_geo.geotoolkit.da(b,"geotoolkit.widgets.templates.HistogramRegistry");b.prototype.Kma=function(){this.Jq("geotoolkit.widgets.Histogram",{save:function(a,
b){for(var c=b.qK("histograms","array"),d=_geo.geotoolkit.selection.from(a.Mc()).He('node => id(node) == "hplot_layer"').tm(),e,f=0;f<d.Uc();++f)e=a.zA(f),c.ge(f,e);c.im();b.ge("xaxis",a.Zo.x.ka());b.ge("xlogaxis",a.Zo.xlog.ka());b.ge("yaxis",a.Zo.y.ka());b.ge("xgrid",a.Vx.x.ka());b.ge("xloggrid",a.Vx.xlog.ka());b.ge("ygrid",a.Vx.y.ka());b.ge("xlabel",a.Pi.x.ka());b.ge("ylabel",a.Pi.y.ka());b.ge("header",a.kla());b.im()},load:function(a){var b=a.cn("#widget");b&&(_geo.geotoolkit.selection.from(b.Mc()).He('node => id(node) == "hplot_layer"').tm().jh(),
a.Ax(function(a,b){"histograms"===a&&b.Ax(function(a,b){b.Ed("geotoolkit.controls.shapes.Histogram")})}),b.Zo.x.ja(a.getValue("xaxis")),b.Zo.xlog.ja(a.getValue("xlogaxis")),b.Zo.y.ja(a.getValue("yaxis")),b.Vx.x.ja(a.getValue("xgrid")),b.Vx.xlog.ja(a.getValue("xloggrid")),b.Vx.y.ja(a.getValue("ygrid")),b.Pi.x.ja(a.getValue("xlabel")),b.Pi.y.ja(a.getValue("ylabel")),b.$ma(a.getValue("header")),b.awb());return b}});this.Jq("geotoolkit.controls.shapes.Histogram",{save:function(a,b){var c=a;b.gc("name",
c.getName());b.gc("id",c.od());b.gc("accumulatedmode",c.Xsa());b.gc("histogrammode",c.OUb());b.gc("autogradient",c.cta());b.gc("binspacing",c.Zqb());b.gc("verticalscaling",c.CXb());b.gc("frequencytype",c.mEa());b.ge("linestyle",c.Xa(),"linestyle");b.ge("fillstyle",c.sb(),"fillstyle");b.ge("highlightstyle",c.U6a(),"fillstyle");b.gc("autobin",c.qub());c.qub()||b.gc("bincount",c.CP());var d=c.xOb();b.gc("autolimits",!d);d&&(b.gc("minimum",c.Tc()),b.gc("maximum",c.ad()));b.im()},load:function(a){var b=
a.cn("#widget"),c=null;b&&(c=b.Xra(),c.yb(a.getValue("name")),c.Kd(a.getValue("id")),c.E1b(a.getValue("accumulatedmode")),c.u3b(a.getValue("histogrammode")),c.Wma(a.getValue("autogradient")),c.$1b(a.getValue("binspacing")),c.v6b(a.getValue("verticalscaling")),c.j3b(a.getValue("frequencytype")),a.getValue("autobin")?c.d1b():c.gT(a.getValue("bincount")),c.ua(a.Ed("linestyle","linestyle")),c.ta(a.Ed("fillstyle","fillstyle")),c.Gab(a.Ed("fillstyle","highlightstyle")),a.getValue("autolimits")?c.vwb():
c.r6b(a.getValue("minimum"),a.getValue("maximum")));return c}});this.Jq("default",c)};var f=null;b.Za=function(){null==f&&(f=new _geo.geotoolkit.oa.Ff.Deb);return f};return b}();
_geo.geotoolkit.oa.Ff.UDb=function(){function b(){_geo.geotoolkit.Bd.ue.call(this);this.Kma()}_geo.geotoolkit.fa(b,_geo.geotoolkit.Bd.ue);_geo.geotoolkit.da(b,"geotoolkit.widgets.templates.MultiHistogramsRegistry");b.prototype.Kma=function(){var a=[_geo.geotoolkit.ea.Oa.Yc,_geo.geotoolkit.ea.Oa.Rc,_geo.geotoolkit.ea.Oa.pd];this.Jq("geotoolkit.widgets.MultiHistograms",{save:function(a,b){b.gc("type","multihistogram");var c=a.ka();b.gc("axiswidth",c.axiswidth);b.gc("axisheight",c.axisheight);b.gc("autoannotationsize",
c.autoannotationsize);b.ge("header",a.Qj(),"geotoolkit.scene.shapes.Text");b.ge("bounds",a.ga(),"geotoolkit.util.Rect");b.ge("tools",a.a_());for(var f=b.qK("histograms","array"),g=a.Lrb(),c=0;c<g.length;c++)f.ge(c,{hist:g[c],widget:a},"histogram");f.im();f=b.qK("groups","array");g=a.CUb();for(c=0;c<g.length;c++)f.ge(c,{id:g[c],widget:a},"group");f.im();b.im()},load:function(a){var b=a.cn("#widget");if(b){var c={axiswidth:a.getValue("axiswidth"),axisheight:a.getValue("axisheight"),autoannotationsize:a.getValue("autoannotationsize")};
b.setOptions(c);b.p5(a.Ed("geotoolkit.scene.shapes.Text","header"));b.Ea(a.Ed("geotoolkit.util.Rect","bounds"));b.Dx(a.getValue("tools"));a.Ax(function(a,b){"histograms"===a&&b.Ax(function(a,b){b.Ed("histogram")})});a.Ax(function(a,b){"groups"===a&&b.Ax(function(a,b){b.Ed("group")})})}return b}});this.Jq("group",{save:function(a,b){var c=a.widget,f=a.id,g={id:f,models:c.mRa(f,!1,!0),location:c.CVb(f)},h=b.VI(g);c.gI(f,g.location)&&h.ge("axis",c.gI(f,g.location),"axis");h.im()},load:function(a){var b=
a.cn("#widget"),c=a.getValue("models"),f=a.getValue("id"),g=a.getValue("location");a=a.Ed("axis","axis");b.uPa(c,g,a,f)}});this.Jq("histogram",{save:function(b,e){var c=b.hist,f=c.od(),k=b.widget,f={id:f},f=e.VI(f);f.ge("shape",c,"geotoolkit.controls.shapes.Histogram");k.gI(c,a[0])&&f.ge(a[0],k.gI(c,a[0]),"axis");k.gI(c,a[1])&&f.ge(a[1],k.gI(c,a[1]),"axis");k.gI(c,a[2])&&f.ge(a[2],k.gI(c,a[2]),"axis");f.im()},load:function(b){var e=b.cn("#widget"),c=b.getValue("id"),f=b.Ed("geotoolkit.controls.shapes.Histogram",
"shape"),c=e.Xra(f.ka(),{xaxis:null,yaxis:null},c),f=b.Ed("axis",a[0]),k=b.Ed("axis",a[1]);b=b.Ed("axis",a[2]);f&&e.Z3a(a[0],f,c);k&&e.Z3a(a[1],k,c);b&&e.Z3a(a[2],b,c)}});this.Jq("axis",{save:function(a,b){b.gc("length",a.length);b.gc("flip",a.flip);b.gc("accumulative",a.accumulative);var c=(new _geo.geotoolkit.axis.ng).ja(a);b.ge("axis",c,"geotoolkit.axis.Axis");b.im()},load:function(a){var b={};b.length=a.getValue("length");b.flip=a.getValue("flip");b.accumulative=a.getValue("accumulative");(a=
a.Ed("geotoolkit.axis.Axis","axis"))&&(b=_geo.geotoolkit.Ca(b,a.ka()));return b}})};var a=null;b.Za=function(){null==a&&(a=new _geo.geotoolkit.oa.Ff.UDb);return a};return b}();
_geo.geotoolkit.oa.Kc.Bb=function(){function b(){}var a="M j, Y H:i:s",g="Arial",d={small:"9px",medium:"10px",large:"14px"},e=d.small+" "+g,c=d.medium+" "+g,f=d.large+" "+g,k="#6b6b6b",h={maximumfractiondigits:2,round:!0},l={MAJOR:{color:"#c4c4c4",width:1,pixelsnapmode:{x:!0,y:!0}},MINOR:{color:"#ededed",width:1,pixelsnapmode:{x:!0,y:!0}},EDGE:{color:"#c4c4c4",width:1,pixelsnapmode:{x:!0,y:!0}}};_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.Util");b.tXa=0;b.qZa=1;b.PFc=function(){return _geo.geotoolkit.Sb({automodellimitsmode:!0,
cursor:{linestyle:new _geo.geotoolkit.attributes.Aa({color:"rgba(237, 28, 36, 0.75)",width:1,pattern:_geo.geotoolkit.attributes.Aa.qH.RYa})},margin:[8,8,8,8],title:{visible:!0,height:40,text:"",font:f,color:k,padding:[0,0,0,0],centered:!1},legends:{alignwithcentermodel:!0,direction:_geo.geotoolkit.ea.rJa.le.qF,height:25,position:_geo.geotoolkit.oa.DL.KJa.dr,visible:!0,width:100,linestyle:null,fillstyle:null,margintext:5,marginbottom:5,autocolorlabel:!0,legendoptions:{formatter:new _geo.geotoolkit.util.NumberFormat(h),
margintext:2,font:"bold 12px Arial",height:25,internalpadding:4,linestyle:new _geo.geotoolkit.attributes.Aa({color:"rgba(128, 128, 128, 1)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new _geo.geotoolkit.attributes.Fa({color:"rgba(250, 250, 250, 0.95)"}),fixedwidth:null,labelcolor:k}},lastupdatedate:{visible:!0,followcursor:!1,font:"bold "+c,color:k,formatter:a},curve:{linestyle:{},visible:!0,autoscale:!0,min:null,max:null,neatlimits:!1,neatlimitscenteredonzero:!1,unit:""},curvelimits:{visible:!0,
margin:5,width:60,font:"bold "+c},curvesymbol:{visible:!0,width:8,height:8,type:"circle"},modelgrid:{horizontaltickgenerator:(new _geo.geotoolkit.axis.Zv).Dh("MAJOR",new _geo.geotoolkit.attributes.Aa(l.MAJOR)).Dh("MINOR",new _geo.geotoolkit.attributes.Aa(l.MINOR)).Dh("EDGE",new _geo.geotoolkit.attributes.Aa(l.EDGE)).Wab(20),verticaltickgenerator:(new _geo.geotoolkit.axis.ZG(0,0)).Dh("MAJOR",new _geo.geotoolkit.attributes.Aa(l.MAJOR)).Dh("MINOR",new _geo.geotoolkit.attributes.Aa(l.MINOR)).Dh("EDGE",
new _geo.geotoolkit.attributes.Aa(l.EDGE)).Tg("EDGE",!1).Tg("MINOR",!1).Tg("MAJOR",!1),horizontalvisibility:{MAJOR:!0,MINOR:!1,EDGE:!1},verticalvisibility:{MAJOR:!1,MINOR:!1,EDGE:!1}},modelaxis:{visible:!0,tickgenerator:null,baselinestyle:new _geo.geotoolkit.attributes.Aa(k)},southaxis:{visible:!0,height:20,font:"bold "+c,color:k,tickgenerator:(new _geo.geotoolkit.axis.ZG(0,0)).Tg("EDGE",!1).xo("EDGE",!1).Dh("MAJOR",null).Tg("MINOR",!1).xo("MINOR",!1)},visiblerange:{visible:!0,height:20,font:"bold "+
c,color:k,formatter:a},scrollbar:{type:_geo.geotoolkit.oa.DL.Gha.Hcb,visible:!0,height:30,options:{font:"bold "+e,color:k,tickgenerator:null,formatter:"M j, Y",scrollbar:{autohide:!1}}},viewcache:!0,intervalbuttons:{visible:!0,intervals:{"1h":36E5,"8h":288E5,"1d":864E5,"1w":6048E5,"1m":2592E6}},scrolltonowbutton:{visible:!1},tooltips:{visible:!0,linestyle:new _geo.geotoolkit.attributes.Aa({color:"rgba(175,175,175,0.5)",width:3}),fillstyle:new _geo.geotoolkit.attributes.Fa({color:"rgba(255,255,255, 0.85)"}),
symbollinestyle:new _geo.geotoolkit.attributes.Aa({color:"rgba(225,225,225, 0.95)",width:2}),selectionradius:30,tooltipoptions:{formatter:new _geo.geotoolkit.util.NumberFormat(h),margintext:4,font:"12px Arial",textcolor:"black",symbolsize:10,internalpadding:2,externalpadding:5,linestyle:null,fillstyle:null,fixedwidth:null,nanvisibility:!0,index:{visible:!1,color:"black",symbol:null,name:"Time",indextext:"",unittext:""},singlerow:!1}},cursorselectionlimit:25,timezone:_geo.geotoolkit.axis.$T.UTC},b.jXb())};
b.jXb=function(){return{curveaxis:{visible:!1,compact:!1,position:"right",autolabelrotation:!1,autocoloraxis:!0,autocolorlabel:!0,titlevisible:!0,textcolor:k,axiscolor:k,labeltext:null,axiswidth:40,textwidth:20,font:c,axisvisible:!0,titlerotateangle:-Math.PI/2,tickgeneratoroptions:{edge:{tickvisible:!0,labelvisible:!0},major:{tickvisible:!1,labelvisible:!1},minor:{tickvisible:!1,labelvisible:!1}}}}};b.ngd=function(){return _geo.geotoolkit.Sb({id:null,name:"",curve:{data:null,properties:{linestyle:{},
visible:!0,autoscale:!0,min:null,max:null,neatlimits:!1,neatlimitscenteredonzero:!1,spline:!1,unit:"",values:{visible:!1,anchor:_geo.geotoolkit.util.Da.Gg,color:"#757575",font:"12px Roboto",format:new _geo.geotoolkit.util.NumberFormat,fillstyle:_geo.geotoolkit.attributes.Fa.ug,linestyle:_geo.geotoolkit.attributes.Aa.ug}}},curvesymbol:{visible:!0,width:8,height:8,type:"circle",fillstyle:null},curvelimits:{visible:!0,margin:5,width:60,font:"bold 10px Arial"},legenditem:{formatter:new _geo.geotoolkit.util.NumberFormat(h),
margintext:2,font:"bold 12px Arial",height:25,internalpadding:4,linestyle:new _geo.geotoolkit.attributes.Aa({color:"rgba(128, 128, 128, 1)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new _geo.geotoolkit.attributes.Fa({color:"rgba(250, 250, 250, 0.95)"}),fixedwidth:null,autocolorlabel:!0,labelcolor:k},tooltipitem:{formatter:new _geo.geotoolkit.util.NumberFormat(h),margintext:4,font:"12px Arial",textcolor:"black",symbolsize:10,internalpadding:2,externalpadding:5,linestyle:null,fillstyle:null,fixedwidth:null,
nanvisibility:!0}},b.jXb())};b.ogd=function(){return _geo.geotoolkit.Sb({id:null,min:0,max:1,curveids:[],curveaxis:{visible:!0},sharelimits:!0},b.jXb())};b.rFc=function(a,b){for(var c=null,d=0;null==c;)-1===a.indexOf(b+d.toString())&&(c=b+d.toString()),d+=1;return c};b.Nsb=function(a){switch(a){case "cross":a=_geo.geotoolkit.scene.shapes.hc.BWa;break;case "diamond":a=_geo.geotoolkit.scene.shapes.hc.gJa;break;case "plus":a=_geo.geotoolkit.scene.shapes.hc.sfc;break;case "square":a=_geo.geotoolkit.scene.shapes.hc.Zoa;
break;case "star":a=_geo.geotoolkit.scene.shapes.hc.zhc;break;case "triangle":a=_geo.geotoolkit.scene.shapes.hc.gpa;break;default:a=_geo.geotoolkit.scene.shapes.hc.Hz;break}return a};b.wg=function(a,b,c){var d=a.hi(_geo.geotoolkit.oa.Kc.Bb.tXa),e=a.hi(_geo.geotoolkit.oa.Kc.Bb.qZa);a=d.toArray();var e=e.toArray(),f=[],g=[];c-=b;for(var h=0;h<d.getLength();h++)g.push((e[h]-b)/c),f.push((new _geo.geotoolkit.data.nX(a[h],g[h],0,!0,h)).R_(e[h]));return{ED:f,ikd:g,indices:a,values:e}};b.findIndex=function(a,
b,c){var d=0;--c;if(0<=c)for(var e=c;d<=e;){c=d+e>>1;if(1E-10>=Math.abs(a[c].getPosition()-b))return c;a[c].getPosition()<b?d=c+1:e=c-1}return~d};b.cs=function(a,c,d){var e=0<a.length&&a[a.length-1].getPosition()<a[0].getPosition();e&&a.reverse();c=b.findIndex(a,c,a.length);0>c&&(c=~c);0<c&&c--;d=b.findIndex(a,d,a.length);0>d&&(d=~d,d>=a.length&&(d=a.length-1));d<a.length&&d++;e&&a.reverse();return new _geo.geotoolkit.util.Range(c,d)};b.wqb=function(a,b,c){null==c&&(c=!1);var d,e;if((0,window.isNaN)(a))return null;
d=_geo.geotoolkit.util.Math.findIndex(a,b,0,b.length-1,function(a,b){return Math.abs(a.getPosition()-b)<_geo.geotoolkit.util.Math.Jc?0:a.getPosition()<b?-1:1});if(0>d){e=d=~d;if(!1===c)for(;e<b.length&&(0,window.isNaN)(b[e].getValue());)++e;--d;if(!1===c)for(;0<=d&&(0,window.isNaN)(b[d].getValue());)--d;d=0<=d&&e<b.length?b[d].getPosition()+b[e].getPosition()>2*a?d:e:0>d&&e<b.length?e:0<=d&&e>=b.length?d:0}return d};return b}();
_geo.geotoolkit.oa.Kc.Ggb=function(){function b(a){_geo.geotoolkit.ea.Ip.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.ea.Ip);b.prototype.zb=function(a){if(!a)throw Error("Invalid layout area");_geo.geotoolkit.ea.Ip.prototype.zb.call(this,a);return this};b.prototype.bn=function(a){a=0<this.PJ.length||null===a?this.PJ:a;return Array.isArray(a)?_geo.geotoolkit.util.Iterator.Zm(a):a};b.prototype.Pl=function(a,b){var d=null!==this.Nq()?this.Nq():a,e=this.bn(b);return null===e?a:!d||0>=d.aa()?null:
d};b.prototype.ea=function(a,b){var d=this.Nq()?this.Nq():a,e=this.bn(b);if(!e||!d||0>=d.aa())return this;e.forEach(function(a){a.Ea(d)});return this};return b}();
_geo.geotoolkit.oa.Kc.xF=function(){function b(){_geo.geotoolkit.util.EventDispatcher.call(this);this.nd=this._id=this.vLa=this.us=this.YZa=this.Je=null}var a="curveaxisgroup",g=-1;_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.TimeSeriesObjectBase");b.$={Vna:"axispositionchanged",AIa:"axisupdated"};b.prototype.Cg=function(b){if(null==b||null==b.id)throw Error("TimeSeriesObject requires a unique id for initialization");b=_geo.geotoolkit.Sb(b,
{});this.la=_geo.geotoolkit.Sb(b,this.la);this._id=this.la.id;this.Je=(new _geo.geotoolkit.axis.ng).Kd(this._id);this.Je.Zfa(g*Math.PI/2);this.us=(new _geo.geotoolkit.oa.Kc.khb).Kd(a).Sa(new _geo.geotoolkit.util.Rect(0,0,1,1)).va(this.Je);b=(0,window.isFinite)(this.la.curveaxis.titlerotateangle)?this.la.curveaxis.titlerotateangle:g*Math.PI/2;this.vLa=(new _geo.geotoolkit.oa.Kc.khb).Kd(a).Sa(new _geo.geotoolkit.util.Rect(0,0,1,1)).va([this.YZa=(new _geo.geotoolkit.scene.shapes.Text({ax:.5,ay:.5,alignment:_geo.geotoolkit.util.Da.lb})).Gj(_geo.geotoolkit.scene.shapes.Text.jf.Vs).rotate(b,
.5,.5).Kd(this._id)]);this.zN(this.la.curveaxis);return this};b.prototype.od=function(){return this._id};b.prototype.Uh=function(){return{id:this._id,name:this.nd,axis:this.Je,Iob:this.YZa,hsa:this.us,VOa:this.vLa,y8c:this.la.position}};b.prototype.gI=function(){return this.la.curveaxis};b.prototype.zN=function(a){null==a&&(a={});var e=this.la.curveaxis.position,c=this.la.curveaxis.axiswidth;a!==this.la.curveaxis&&(a=_geo.geotoolkit.Sb(a,{}),this.la.curveaxis=_geo.geotoolkit.Sb(a,this.la.curveaxis));
a=this.la.curveaxis;var f=this.Je,g=this.ws,h=this.YZa,l=this.us,n=this.vLa;if(null==f)return this;var p=a.textcolor;null!=g&&(p=!0===a.autocolorlabel&&null!=g.Xa()?g.Xa().ac():a.textcolor);var r=l.ib(),t="left"===a.position?_geo.geotoolkit.util.Da.Ng:_geo.geotoolkit.util.Da.We,q=null;null!=a.title&&(null!=a.title.anchor&&(t=a.title.anchor),null!=a.title.offset&&(q=a.title.offset));f.jna(!0===a.compact&&a.titlevisible).rwa(new _geo.geotoolkit.attributes.eb({font:a.font,color:p})).qwa(t).wyb(q);"left"===
a.position?f.du(_geo.geotoolkit.axis.qd.Bk.$c):f.du(_geo.geotoolkit.axis.qd.Bk.wd);h.ja({textStyle:new _geo.geotoolkit.attributes.eb({font:a.font,color:p}),alignment:_geo.geotoolkit.util.Da.lb}).Ka(a.titlevisible);f.vm("left"===a.position?_geo.geotoolkit.axis.qd.Pf.$c:_geo.geotoolkit.axis.qd.Pf.wd);f.iC(a.autolabelrotation);f.Ka(a.axisvisible);t=a.textcolor;null!=g&&(t=!0===a.autocoloraxis&&null!=g.Xa()?g.Xa().ac():a.axiscolor);a.baselinestyle?a.baselinestyle instanceof _geo.geotoolkit.attributes.Aa?
f.cea().ja(a.baselinestyle.ka()):f.cea().ja(a.baselinestyle):f.cea().setColor(t);h.Ib().setColor(p);null!=f.xa()&&f.Sa(f.xa().clone().qb(a.axiswidth));l.Ul(a.axiswidth);n.Ul(a.textwidth);var m,u;for(u in a.tickgeneratoroptions)a.tickgeneratoroptions.hasOwnProperty(u)&&(t=a.tickgeneratoroptions[u],h=f.Fe(),q=!0===a.autocoloraxis&&null!=g&&null!=g.Xa()?g.Xa().ac():a.axiscolor,m=p,null!=h.Kj(u.toUpperCase())&&h.Kj(u.toUpperCase()).setColor(q),null!=h.Al(u.toUpperCase())&&h.Al(u.toUpperCase()).setColor(m),
h.Tg(u.toUpperCase(),t.tickvisible),h.xo(u.toUpperCase(),t.labelvisible),a.tickgeneratoroptions.hasOwnProperty("format")&&(t=a.tickgeneratoroptions.format,t instanceof _geo.geotoolkit.util.hJ?h.cu(u,t):"function"===typeof t&&h.Qs(t)));u=null==this.hCa?this.la.curveaxis.visible:!1;l.Ka(u);l=n.ib();n.Ka(!1===a.compact&&a.titlevisible&&a.visible&&u);e!==this.la.curveaxis.position?this.Ja(b.$.Vna,this,{id:this._id,oldposition:e,axisposition:this.la.curveaxis.position}):r===this.la.curveaxis.visible&&
c===this.la.curveaxis.axiswidth&&l===n.ib()||this.Ja(b.$.AIa,this,this);void 0!==a.microposition&&(e={top:void 0!==a.microposition.top?a.microposition.top:1,bottom:void 0!==a.microposition.bottom?a.microposition.bottom:0},this.us.FD(1-e.top,1-e.bottom),this.vLa.FD(1-e.top,1-e.bottom));return this};b.prototype.dispose=function(){null!=this.Je&&this.Je.dispose();null!=this.YZa&&this.YZa.dispose();null!=this.us&&this.us.dispose();null!=this.vLa&&this.vLa.dispose();_geo.geotoolkit.util.EventDispatcher.prototype.dispose.call(this)};
return b}();
_geo.geotoolkit.oa.Kc.wF=function(){function b(a){_geo.geotoolkit.oa.Kc.xF.call(this);this.GU=this.ws=this.nd=this.j7c=this._id=null;this.LO={top:null,bottom:null};this.jY={top:null,bottom:null};this.hCa=this.bKb=this.eBa=this.cBa=this.UY=this.CAa=this.gg=this.Mpa=null;this.la=_geo.geotoolkit.oa.Kc.Bb.ngd();this.Cg(a)}var a="#6b6b6b",g=_geo.geotoolkit.oa.Kc.Bb.tXa,d=_geo.geotoolkit.oa.Kc.Bb.qZa,e=-1;_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Kc.xF);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.TimeSeriesObject");b.$=
{Vna:"axispositionchanged",dfb:"legenditemchanged",Odb:"curveaxischanged",Kxa:"dataset",MJa:"limitsupdated",vDb:"legendvaluechanged"};b.prototype.Cg=function(a){_geo.geotoolkit.oa.Kc.xF.prototype.Cg.call(this,a);if(null==a||null==a.id)throw Error("TimeSeriesObject requires a unique id for initialization");a=_geo.geotoolkit.Sb(a,{});this.la=_geo.geotoolkit.Sb(a,this.la);this._id=this.la.id;this.nd=this.la.name;this.j7c=this.la.uri;a={markervisible:this.la.curve.properties.markervisible,marker:this.la.curve.properties.marker,
decimationSpacing:this.la.curve.properties.decimationspacing,spline:this.la.curve.properties.spline,values:this.la.curve.properties.values};this.ws=(new _geo.geotoolkit.oa.Kc.uH(a)).Kd(this._id).yb(this.nd);this.GU=(new _geo.geotoolkit.scene.Group).mk(!0).Ka(!1);this.gg=(new _geo.geotoolkit.scene.shapes.Symbol).kk(!1);this.Mpa=(new _geo.geotoolkit.oa.Kc.khb).zk("100%").va((new _geo.geotoolkit.axis.ng).yb("curvelimitsaxis").Kd(this._id)).yb("curvelimitsgroup");a=new _geo.geotoolkit.oa.Kc.VKa({color:null,
symbol:this.gg,name:this.nd,indextext:"",valuetext:"",unittext:""});this.kqc=new _geo.geotoolkit.oa.Kc.mhb(a);this.CAa=new _geo.geotoolkit.oa.Kc.lhb(this);this.setData(this.la.curve.data);this.$fa(this.la.curve.properties);this.GUa(this.la.curvesymbol);this.UTa(this.la.curvelimits);this.zN(this.la.curveaxis);this.Mab(this.la.legenditem);this.zyb(this.la.tooltipitem);return this};b.prototype.IQc=function(a){this.hCa=a;this.gIa();return this};b.prototype.xtb=function(){return this.hCa};b.prototype.uEa=
function(){null==this.cBa&&(this.cBa=function(a,b,d){a=null!=d?d.name:null;"state"===a&&(a=d.value.range.changes,a===_geo.geotoolkit.data.xq.bm.tIa||a===_geo.geotoolkit.data.xq.bm.Mya)&&(d=this.lBc(d.value.range),this.ws.ma(d),this.gIa())}.bind(this));return this.cBa};b.prototype.fFa=function(){null==this.eBa&&(this.eBa=function(a,b,e){a=null!=e?e.name:null;"unit"===a?null!=this.getData()&&null!=this.getData().hi(d)&&null!=this.getData().hi(d).Tb()&&(this.la.curve.properties.unit=this.getData().hi(d).Tb().be(),
this.ecb(),this.gIa(),this.ws.ma()):"state"===a&&(a=e.value.range.changes,a===_geo.geotoolkit.data.$.vf&&(e=this.lBc(e.value.range),this.ws.ma(e),this.gIa()))}.bind(this));return this.eBa};b.prototype.lBc=function(a){var b,d;d=this.getData().hi(g);b=null==a.from||(0,window.isNaN)(a.from)?null:a.from;a=null==a.amount||(0,window.isNaN)(a.amount)?null:a.amount;if(null==b||null==a)return null;b=0<b?b-1:0;a=Math.min(b+a+1,d.getLength()-1);b=d.getValue(b);d=d.getValue(a);if(null==b||null==d)return null;
a=this.ws.getParent().xa().clone();a.zb(b,a.qa(),d,a.wa());return a};b.prototype.QKc=function(a,b,d){if(a!==_geo.geotoolkit.oa.DL.H0.Ub&&a!==_geo.geotoolkit.oa.DL.H0.Zf)return this;this.LO[a]=b;this.jY[a]=d;this.CAa.uh();return this};b.prototype.getData=function(){return this.la.curve.data};b.prototype.setData=function(a){if(null==a)return this;var e=this.la.curve.data;this.la.curve.data=a;null!=this.UY&&(this.UY.hi(d).hb(_geo.geotoolkit.data.Yl.$.Hn,this.fFa()),this.UY.hi(g).hb(_geo.geotoolkit.data.Yl.$.Hn,
this.uEa()));null!=this.la.curve.data&&(this.UY=new _geo.geotoolkit.data.lu(this.la.curve.data),this.UY.hi(g).Fl("ms"),this.UY.hi(d).Fl(null),this.UY.hi(d).kb(_geo.geotoolkit.data.Yl.$.Hn,this.fFa()),this.UY.hi(g).kb(_geo.geotoolkit.data.Yl.$.Hn,this.uEa()));null!=this.ws&&this.ws.setData(this.UY);this.gIa();this.Ja(b.$.Kxa,this,{old:e,"new":a});return this};b.prototype.Uh=function(){return _geo.geotoolkit.Ca(_geo.geotoolkit.oa.Kc.xF.prototype.Uh.call(this),{curve:this.ws,symbol:this.gg,xPa:this.Mpa,
CM:this.LO,tqb:this.jY,Nid:this.CAa,kzb:this.kqc,Yla:this.GU})};b.prototype.$fa=function(a){null==a&&(a={});a!==this.la.curve.properties&&(a=_geo.geotoolkit.Sb(a,{}),this.la.curve.properties=_geo.geotoolkit.Sb(a,this.la.curve.properties));var b=this.la.curve.properties,e=this.Uh();null!=e&&(e=e.curve,a=_geo.geotoolkit.util.zf.Za().Tb(a.unit),null!=a&&null!=this.getData()&&null!=this.getData().hi(d)&&!1===(null==this.getData().hi(d).Tb()||this.getData().hi(d).Tb().NI(a))&&(this.getData().hi(d).Fl(a),
this.UY.hi(d).Fl(a)),"boolean"===typeof b.visible&&e.Ka(b.visible),void 0!==b.name&&e.yb(b.name),"boolean"===typeof b.curvevisible&&e.y2b(b.curvevisible),this.gIa(),void 0!==b.linestyle&&(null!=e.Xa()&&e.Kq(e.Xa(),_geo.geotoolkit.scene.Node.$.Wc,this.yVb()),null!=b.linestyle?(a=_geo.geotoolkit.attributes.Aa.ab(b.linestyle),e.ua(a)):e.ua(null),null!=e.Xa()&&(e.Wj(e.Xa(),_geo.geotoolkit.scene.Node.$.Wc,this.yVb()),this.yVb().call(this))),void 0!==b.microposition&&(a={top:void 0!==b.microposition.top?
b.microposition.top:1,bottom:void 0!==b.microposition.bottom?b.microposition.bottom:0},e.FD(a.top,a.bottom),this.Mpa.FD(1-a.top,1-a.bottom)),void 0!==b.logarithmicscale&&e.N_(b.logarithmicscale),void 0!==b.interpolationtype&&e.mC(b.interpolationtype),void 0!==b.borderlinestyle&&e.fF(b.borderlinestyle),this.ecb());this.ws.ma();return this};b.prototype.ecb=function(){var a=null,a=this.Uh();if(null!=this.gI().labeltext)a=this.gI().labeltext;else{if(null==a)return this;a=a.curve;if(null==a)return this;
a=[a.getName()];null!=this.getData()&&null!=this.getData().hi(d)&&null!=this.getData().hi(d).Tb()&&(a.push(" ("),a.push(this.getData().hi(d).Tb().be()),a.push(")"));a=a.join("")}if(null!=a){var b=this.Uh();null!=b&&(null!=b.axis&&b.axis.mp(a),null!=b.Iob&&b.Iob.ja({text:a}))}return this};b.prototype.Ml=function(){var a=this.getData().hi(g),b=this.getData().hi(d),e=new _geo.geotoolkit.util.Rect(a.Ug(),b.Ug(),a.Ih(),b.Ih());!0===this.la.curve.properties.neatlimits&&(b=_geo.geotoolkit.util.Math.Hs(b.Ug(),
b.Ih(),!1,this.la.curve.properties.neatlimitscenteredonzero),e=new _geo.geotoolkit.util.Rect(a.Ug(),b.gb(),a.Ih(),b.nb()));return e};b.prototype.gIa=function(){var a=this.la.curve.properties;if(null!=this.ws){if(null!=this.GU){var d=this.GU.Cr(),g=new _geo.geotoolkit.util.Rect(this.GU.xa()),h;null!=this.hCa&&this.hCa.RWb()?(a=this.hCa.Ug(),h=this.hCa.Ih(),g.zb(g.sa(),a,g.za(),h)):!0===a.autoscale?(a=this.Ml(),null!=a&&(!(0,window.isFinite)(a.getY())||(0,window.isNaN)(a.getY())||!(0,window.isFinite)(a.ba())||
(0,window.isNaN)(a.ba())||0>=a.ba()?(g.setY(-.5),g.Db(1)):(g.setY(a.getY()),g.Db(a.ba())),d=!1)):(0,window.isNaN)(a.min)||(0,window.isNaN)(a.max)||(g.zb(g.sa(),a.min,g.za(),a.max),d=a.max<=a.min?!0:!1);g.Pj(this.GU.xa())||this.GU.Sa(g);this.GU.Cr()!==d&&(this.GU.mk(d),this.GU.ma());this.ws.BN(d?g.wa():g.qa());this.ws.UI(d?g.qa():g.wa());d=this.Uh();null!=d&&null!=d.axis&&d.axis.Zfa(e*Math.PI/2);this.ws.Ja(_geo.geotoolkit.oa.Kc.uH.$.LJa,this.ws,null)}this.Ja(b.$.MJa,this,this)}};b.prototype.Ls=function(){var a=
this.Uh();if(null!=a){var b={id:a.id},d=a.curve;b.name=d.getName();var e=null==this.GU?null:this.GU.xa();b.autoscale=this.la.curve.properties.autoscale;b.neatlimits=this.la.curve.properties.neatlimits;b.neatlimitscenteredonzero=this.la.curve.properties.neatlimitscenteredonzero;b.visible=d.ib();b.unit=this.la.curve.properties.unit;b.flip=null==this.GU?null:this.GU.Cr();b.max=null==e?null:b.flip?e.qa():e.wa();b.min=null==e?null:b.flip?e.wa():e.qa();b.axisposition=a.y8c;b.linestyle=this.la.curve.properties.linestyle;
b.microposition=this.la.curve.properties.microposition;b.interpolationtype=this.la.curve.properties.interpolationtype;b.logarithmicscale=this.la.curve.properties.logarithmicscale;b.borderlinestyle=this.la.curve.properties.borderlinestyle;return b}return null};b.prototype.GUa=function(a){null==a&&(a={});a!==this.la.curvesymbol&&(this.la.curvesymbol=_geo.geotoolkit.Sb(a,this.la.curvesymbol));a=this.la.curvesymbol;var b=_geo.geotoolkit.oa.Kc.Bb.Nsb(a.type),d=_geo.geotoolkit.attributes.Fa.ab(this.ws.Xa().ac());
null!=a.fillstyle&&(d=a.fillstyle);this.gg.ja({ax:0,ay:0,alignment:_geo.geotoolkit.util.Da.lb,width:a.width,height:a.height,sizeIsInDeviceSpace:!0,fillstyle:d});this.gg.WA(b);return this};b.prototype.KEc=function(){return this.la.curvesymbol};b.prototype.ETb=function(){return this.la.curvelimits};b.prototype.UTa=function(a){null==a&&(a={});a!==this.la.curvelimits&&(a=_geo.geotoolkit.Sb(a,{}),this.la.curvelimits=_geo.geotoolkit.Sb(a,this.la.curvelimits));a=this.la.curvelimits;var d;d=null!=this.ws&&
null!=this.ws.Xa()&&null!=this.ws.Xa().ac()?this.ws.Xa().ac():"rgba(0, 0, 0, 0)";this.Mpa.Ul(a.width).Ka(a.visible);var e=this.Mpa.vc(0);e.fT(null);e=e.Fe();e.Dh("EDGE",null);e.Dh("MAJOR",null);e.Dh("MINOR",null);e.um("MAJOR",null);e.um("MINOR",null);e.um("EDGE",new _geo.geotoolkit.attributes.eb({font:a.font,color:d}));this.Ja(b.$.Odb,this,this.Mpa);return this};b.prototype.yVb=function(){null==this.bKb&&(this.bKb=function(){this.zN({});this.UTa({});this.Mab({});this.GUa({})}.bind(this));return this.bKb};
b.prototype.OBc=function(){return this.la.legenditem};b.prototype.Mab=function(c){null==c&&(c={});c!==this.la.legenditem&&(c=_geo.geotoolkit.Sb(c,{}),c=_geo.geotoolkit.Sb(c,{}),this.la.legenditem=_geo.geotoolkit.Sb(c,this.la.legenditem));!0===this.la.legenditem.autocolorlabel?this.la.legenditem.labelcolor=null:this.la.legenditem.labelcolor||(this.la.legenditem.labelcolor=a);this.CAa.setOptions(this.la.legenditem);this.Ja(b.$.dfb,this,this.CAa);return this};b.prototype.zyb=function(a){null==a&&(a=
{});a!==this.la.tooltipitem&&(a=_geo.geotoolkit.Sb(a,{}),this.la.tooltipitem=_geo.geotoolkit.Sb(a,this.la.tooltipitem));this.kqc.setOptions(this.la.tooltipitem);return this};b.prototype.hFc=function(){return this.la.tooltipitem};b.prototype.e4b=function(a){this.K4c=a;this.Ja(b.$.vDb,this);return this};b.prototype.Qed=function(){return this.K4c};b.prototype.dispose=function(){null!=this.CAa&&this.CAa.dispose();null!=this.Mpa&&this.Mpa.dispose();null!=this.gg&&this.gg.dispose();null!=this.jY&&["top",
"bottom"].forEach(function(a){null!=this.jY[a]&&null!=this.jY[a].dispose&&this.jY[a]instanceof _geo.geotoolkit.oa.Kc.epa&&this.jY[a].dispose()}.bind(this));null!=this.UY&&(this.UY.hi(d).hb(_geo.geotoolkit.data.Yl.$.Hn,this.fFa()),this.UY.hi(g).hb(_geo.geotoolkit.data.Yl.$.Hn,this.uEa()));null!=this.ws&&this.ws.dispose();_geo.geotoolkit.oa.Kc.xF.prototype.dispose.call(this)};return b}();
_geo.geotoolkit.oa.Kc.JFb=function(){function b(a){_geo.geotoolkit.oa.Kc.xF.call(this);this._objects=[];this.hh=null;this.la=_geo.geotoolkit.oa.Kc.Bb.ogd();this.Cg(a)}var a=-1;_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Kc.xF);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.TimeSeriesObjectGroup");b.prototype.Cg=function(a){_geo.geotoolkit.oa.Kc.xF.prototype.Cg.call(this,a);this.zN(this.la.curveaxis);this.yzb();this.dcb();return this};b.prototype.BN=function(a){this.la.min=a;this.yzb();this.T7b();
this.dcb();return this};b.prototype.Ug=function(){return this.la.min};b.prototype.UI=function(a){this.la.max=a;this.yzb();this.T7b();this.dcb();return this};b.prototype.Ih=function(){return this.la.max};b.prototype.eQc=function(a){this.la.sharelimits=a;this.yzb();this.T7b();this.dcb();return this};b.prototype.RWb=function(){return this.la.sharelimits};b.prototype.T7b=function(){this._objects.forEach(function(a){a.gIa()})};b.prototype.zN=function(a){_geo.geotoolkit.oa.Kc.xF.prototype.zN.call(this,
a);this.dcb();return this};b.prototype.checkValidity=function(a){if(Array.isArray(a)){for(var b=!1,e=0;e<a.length&&(b=this.checkValidity(a[e]),!1!==b);e++);return b}if(null==a||null==a.xtb||null!=a.xtb())return!1;null==this.hh&&null!=a.Ls&&null!=a.Ls()&&(this.hh=a.Ls().unit);return this.hh instanceof _geo.geotoolkit.util.ar?this.hh.NI(a.Ls().unit):a.Ls().unit instanceof _geo.geotoolkit.util.ar?a.Ls().unit.NI(this.hh):_geo.geotoolkit.util.zf.Za().Tb(this.hh).NI(a.Ls().unit)};b.prototype.ge=function(a){var b=
this.checkValidity(a);if(!1===b)return this;if(Array.isArray(a))for(b=0;b<a.length;b++)this.ge(a[b]);null!=a&&a instanceof _geo.geotoolkit.oa.Kc.wF&&-1===this._objects.indexOf(a)&&(a.IQc(this),this._objects.push(a),a.zN({}));this.ecb();return this};b.prototype.I$a=function(a){if(Array.isArray(a))for(var b=a.length;-1<b;b--)this.I$a(a[b]);a instanceof _geo.geotoolkit.oa.Kc.wF&&-1!==this._objects.indexOf(a)&&(b=this._objects.indexOf(a),a.IQc(null),this._objects.splice(b,1),a.zN({}));this.ecb();return this};
b.prototype.get=function(){return this._objects};b.prototype.gnd=function(){this.I$a(this._objects);return this};b.prototype.ecb=function(){var a=null,a=this.Uh();if(null!=this.gI().labeltext)a=this.gI().labeltext;else{if(null==a)return this;var b=[];this._objects.forEach(function(a){a=a.Uh();null!=a&&null!=a.curve&&null!=a.curve.getName&&b.push(a.curve.getName())});var a=b.join(", "),e=this.hh instanceof _geo.geotoolkit.util.ar?this.hh.be():this.hh;null!=this.hh&&(a+=" ("+e+")")}null!=a&&(e=this.Uh(),
null!=e&&(null!=e.axis&&e.axis.mp(a),null!=e.Iob&&e.Iob.ja({text:a})));return this};b.prototype.dcb=function(){var b=this.Ug(),d=this.Ih(),e=this.Uh();null!=e&&(e.hsa.mk(b<d),e.axis.Zfa(a*Math.PI/2));return this};b.prototype.yzb=function(){var a=this.Uh();null!=a&&(a.hsa.Sa(new _geo.geotoolkit.util.Rect(0,this.Ug(),1,this.Ih())),a.axis.Sa(new _geo.geotoolkit.util.Rect(0,this.Ug(),1,this.Ih())));return this};return b}();
_geo.geotoolkit.oa.Kc.ZT=function(){function b(a){this.Zw=this.Tr=this.JL=this.Rb=null;_geo.geotoolkit.scene.shapes.Shape.call(this,a);this.Sqa={top:1,bottom:0}}_geo.geotoolkit.fa(b,_geo.geotoolkit.scene.shapes.Shape);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.TimeSeriesShape");b.$={Wub:"micropositionChanged"};b.prototype.Oi=function(){var a=this.ga();if(null==a)return this;this.Rb=new _geo.geotoolkit.util.Rect(a.sa(),this.Sqa.bottom,a.za(),this.Sqa.top);this.JL=null;this.h0();return this};
b.prototype.ee=function(){if(null!=this.JL)return this.JL;var a=this.ga();if(null==a)return null;var b=new _geo.geotoolkit.util.Rect(a.sa(),0,a.za(),1);a.isEmpty()||b.isEmpty()||(this.JL=_geo.geotoolkit.util.Ga.hf(b,a,!1,!1,!1));return this.JL};b.prototype.mb=function(){var a=this.Yb(),b=this.ee();return null==b?a:null==a?b:_geo.geotoolkit.util.Ga.multiply(a,b)};b.prototype.FD=function(a,g){var d,e;0<=a&&1>=a&&0<=g&&1>=g?(e=Math.min(a,g),d=Math.max(a,g)):(e=0,d=1);if(this.Sqa.top!==d||this.Sqa.bottom!==
e)this.Sqa.top=d,this.Sqa.bottom=e,this.Ja(b.$.Wub,this,null);this.Pa();return this};b.prototype.SQa=function(){return{top:this.Sqa.top,bottom:this.Sqa.bottom}};b.prototype.fF=function(a){if(this.Tr===a)return this;null!=this.Tr&&this.Kq(this.Tr,_geo.geotoolkit.scene.Node.$.Wc,this.nc());this.Tr=_geo.geotoolkit.attributes.Aa.ab(a);this.Ri(this.ga());null!=this.Tr&&this.Wj(this.Tr,_geo.geotoolkit.scene.Node.$.Wc,this.nc());return this};b.prototype.jz=function(){return this.Tr};b.prototype.nc=function(){null===
this.Zw&&(this.Zw=function(a,b,d){return this.Ri()}.bind(this));return this.Zw};b.prototype.render=function(a){a=a.qc(new _geo.geotoolkit.util.Ga);var b=this.ga();null!=b&&null!=this.Tr&&(a.ta(null),a.ua(this.Tr,b),a.zc(b))};return b}();
_geo.geotoolkit.oa.Kc.khb=function(){function b(a){this.t1a=null;_geo.geotoolkit.scene.Group.call(this,a);this.kNa={top:1,bottom:0}}_geo.geotoolkit.fa(b,_geo.geotoolkit.scene.Group);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.TimeSeriesGroup");b.prototype.Ea=function(a){_geo.geotoolkit.scene.Group.prototype.Ea.call(this,a);this.Oi();return this};b.prototype.Oi=function(){this.t1a=null;this.h0();return this};b.prototype.Wed=function(a){if(!a)return null;var b=this.kNa.top,d=this.kNa.bottom,
e=a.sa(),c=a.za(),f=a.qa();a=a.wa();return new _geo.geotoolkit.util.Rect(e,f+(a-f)*d,c,f+(a-f)*b)};b.prototype.ee=function(){var a=_geo.geotoolkit.scene.Group.prototype.ee.call(this);if(null!==this.t1a)return this.t1a;var b=this.ga();if(null==b)return null;var d=this.Wed(b);null===d||d.isEmpty()||b.isEmpty()||(b=_geo.geotoolkit.util.Ga.hf(b,d,!1,!1,!1),this.t1a=null===a?b:_geo.geotoolkit.util.Ga.multiply(b,a));return this.t1a};b.prototype.FD=function(a,b){var d,e;0<=a&&1>=a&&0<=b&&1>=b?(e=Math.min(a,
b),d=Math.max(a,b)):(e=0,d=1);if(this.kNa.top!==d||this.kNa.bottom!==e)this.kNa.top=d,this.kNa.bottom=e;this.Pa();return this};b.prototype.Pa=function(a,b){_geo.geotoolkit.scene.Group.prototype.Pa.call(this,a,b);this.Oi();return this};return b}();
_geo.geotoolkit.oa.Kc.VKa=function(){function b(a){_geo.geotoolkit.util.EventDispatcher.call(this);this.Ba=null;this.setData(a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.TimeSeriesTooltipObject");b.$={Iy:"change"};b.prototype.setData=function(a){null==a&&(a={});this.Ba=_geo.geotoolkit.Ca(a,{id:a.id,color:a.color,name:a.name,indextext:a.indextext,valuetext:a.valuetext,unittext:a.unittext});this.Ja(b.$.Iy,this,null);return this};b.prototype.getData=
function(){return this.Ba};return b}();
_geo.geotoolkit.oa.Kc.BCb=function(){function b(a){null==a&&(a={});a=_geo.geotoolkit.Ca(a,{group:a.group,layer:a.manipulatorlayer,name:"groupTool"});this.dc=a.group;this.Eh=new _geo.geotoolkit.selection.am;this.WF=5;this.wB=2;var b={pointerdown:this.xf.bind(this),pointermove:this.Wd.bind(this),pointerup:this.Ae.bind(this),layer:a.layer};_geo.geotoolkit.controls.ia.fc.call(this,b,a.name);this.YR=new _geo.geotoolkit.controls.Zb.hba(null,this.Qb);this.YR.kc(this.Qb.mb());this.YR.register(this.dc.getClassName(),
new _geo.geotoolkit.controls.Zb.GW.lXa)}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.ia.fc);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.GroupTool");b.prototype.xf=function(a){var b=a.il(),d=this.qG(a),e=d?this.WF:this.wB;this.Wia=!1;var c=null,f=this.Qe(this.Qb,a),k=this.Eh.select(this.Qb,f.x,f.y,e);if(k&&0<k.length)for(d=k.length-1;1<=d;d--){var h=k[d];if("function"===typeof h.hz){c=h.hz();c.Er(h);c.setPosition(f.x,f.y);this.cf=c;this.Wia=!0;a.stopPropagation(!0);return}}f=this.Qe(b,a);
b=this.Eh.select(b,f.x,f.y,e);b=null==b?null:b.filter(function(a){return a===this.dc}.bind(this));f=this.Qe(this.Qb,a);if(b&&0<b.length)for(d=b.length-1;0<=d;d--)if(c=this.YR.hz(b[d])){c.lk(b[d]);c.setPosition(f.x,f.y);this.YR.eT(c);this.cf=c;this.Wia=!0;a.stopPropagation(!0);return}this.cf=c;this.YR.eT(null)};b.prototype.Wd=function(a){if(this.cf){var b=this.Qe(this.Qb,a);this.cf.move(b.x,b.y);this.cf.Ob().ma();a.stopPropagation(!0,!0)}};b.prototype.Ae=function(a){this.cf&&(a.stopPropagation(!0),
this.cf.setPosition(null),this.cf=null)};return b}();
_geo.geotoolkit.oa.Kc.h1=function(){function b(a,b,c,f){_geo.geotoolkit.data.oaa.call(this);this.NR=[];this.ix=[];this.a8b=!0===f;this.data=a;this.timeStamp=-1;this.Hg=null;this.mw=[];this.jW=this.nW=0;this.hq=b;this.interpolation=null!=c?c:null;this.NF=!0;this.Bqa=0}var a=_geo.geotoolkit.oa.Kc.Bb.tXa,g=_geo.geotoolkit.oa.Kc.Bb.qZa;_geo.geotoolkit.fa(b,_geo.geotoolkit.data.oaa);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.ScaledData");b.prototype.LG=function(a){this.NF=!0;this.timeStamp=-1;
this.hq=a;return this};b.prototype.setInterpolation=function(a){this.NF=!0;this.timeStamp=-1;this.interpolation=null!=a?a:null;return this};b.prototype.Bp=function(){return this.data};b.prototype.lD=function(){return this.data.hi(a).Ug()};b.prototype.kD=function(){return this.data.hi(a).Ih()};b.prototype.Tc=function(){return this.data.hi(g).Ug()};b.prototype.ad=function(){return this.data.hi(g).Ih()};b.prototype.wg=function(){this.vP();return null!=this.Hg?this.Hg:[]};b.prototype.getLength=function(){this.vP();
return null!=this.Hg?this.Hg.length:0};b.prototype.gn=function(){return!0};b.prototype.sh=function(){return _geo.geotoolkit.data.bk.lF};b.prototype.wP=function(a){return null!=this.hq?this.hq.fz(a):a};b.prototype.uM=function(a){return null!=this.hq?this.hq.reverse(a):a};b.prototype.Sj=function(){return this.timeStamp};b.prototype.mrb=function(){return this.data.hi(a).Sj()};b.prototype.vP=function(){if(this.mrb()!==this.timeStamp||!this.Hg){var b=this.data.hi(a),e=this.data.hi(g),c;if(null==e||null==
b||1>e.getLength()||1>b.getLength())this.Hg=[];else{null==this.Hg&&(this.Hg=[]);var f=this.mw.length,k,h=this.Bqa;if(this.NF)for(k=0;k<f;k++)c=e.getValue(k),this.mw[k].setPosition(b.getValue(k)),this.mw[k].setValue(c),this.mw[k].R_(c),this.mw[k].ns(0),this.mw[k].Fx(!0),this.mw[k].uUa(k);for(k=f;k<b.getLength();k++)c=e.getValue(k),this.mw.push(new _geo.geotoolkit.data.nX(b.getValue(k),c,0,!0,k));f>b.getLength()&&this.mw.splice(b.getLength(),f-b.getLength());if(null!=this.interpolation){if(k=new _geo.geotoolkit.data.moa(this.mw),
e=new _geo.geotoolkit.data.moa,c=this.mw.length-h,this.NF&&(h=0,c=this.mw.length),0!==c&&this.interpolation.Vn(h,c,k,e))if(this.Bqa=e.hsb(),f=e.wg(),this.NF)this.Hg=f,this.nW=e.rt(),this.jW=e.Pu();else{for(k=this.Hg.length-1;0<=k;k--)if(this.Hg[k].Br()===h){h=k;break}c=Math.min(this.Hg.length,f.length+h);for(k=h;k<c;k++)this.Hg[k]=f[k-h];if(k<this.Hg.length)this.Hg.splice(k,this.Hg.length-k);else for(k=c-h;k<f.length;k++)this.Hg.push(f[k]);this.nW=Math.min(this.nW,e.rt());this.jW=Math.max(this.jW,
e.Pu())}}else if(this.NF)for(h=0,this.Hg=[],k=0;k<this.mw.length;k++)this.Hg[k]=this.mw[k].clone();else for(k=h=this.Hg.length;k<this.mw.length;k++)this.Hg.push(this.mw[k].clone());if(null!=this.hq)for(k=h=this.NF?0:h;k<this.Hg.length;++k)c=this.hq.fz(this.Hg[k].getValue()),this.a8b&&(0,window.isNaN)(c)&&!(0,window.isNaN)(this.Hg[k].YM())?this.Hg[k].setValue(0):this.Hg[k].setValue(c);if(this.NF){h=this.ix?this.ix.length:0;e=this.Hg.length;this.ix=this.ix||[];this.NR=this.NR||[];for(k=0;k<e;++k)this.ix[k]=
this.Hg[k].getValue(),this.NR[k]=this.Hg[k].getPosition();h>e&&(this.ix.splice(e,h-e),this.NR.splice(e,h-e))}else if(h=this.ix?this.ix.length:0,e=this.Hg.length,h<e)for(this.ix=this.ix||[],this.NR=this.NR||[],k=h;k<e;++k)this.ix[k]=this.Hg[k].getValue(),this.NR[k]=this.Hg[k].getPosition();this.timeStamp=b.Sj();this.NF=!1}}};b.prototype.e_=function(){return this.ix};b.prototype.UZ=function(){return this.NR};b.prototype.cs=function(a,b){if(null==this.Hg&&(this.vP(),null==this.Hg))throw Error("scaled is empty");
return this.ZUb(this.Hg,a,b)};b.prototype.ZUb=function(a,e,c){if(null==a)throw Error("samples is empty");var f=0<a.length&&a[a.length-1].getPosition()<a[0].getPosition();f&&a.reverse();e=b.findIndex(a,e,a.length);0>e&&(e=~e);0<e&&e--;c=b.findIndex(a,c,a.length);0>c&&(c=~c,c>=a.length&&(c=a.length-1));c<a.length&&c++;f&&a.reverse();return new _geo.geotoolkit.util.Range(e,c)};b.findIndex=function(a,b,c){var f=0;--c;if(0<=c)for(var g=c;f<=g;){c=f+g>>1;if(1E-10>=Math.abs(a[c].getPosition()-b))return c;
a[c].getPosition()<b?f=c+1:g=c-1}return~f};b.prototype.rt=function(){return this.nW};b.prototype.CN=function(a){this.nW=a;return this};b.prototype.Pu=function(){return this.jW};b.prototype.AN=function(a){this.jW=a;return this};b.prototype.getValue=function(a){this.vP();var b=this.wg();return this.gFa(a,b)};b.prototype.gFa=function(a,b){this.vP();if(null==b||0===b.length||b[0].getPosition()>a||b[b.length-1].getPosition()<a||a<this.lD()||a>this.kD())return Number.NaN;if(b[0].getPosition()===a)return b[0].getValue();
if(b[b.length-1].getPosition()===a)return b[b.length-1].getValue();for(var c=1;c<b.length;++c)if(!(b[c].getPosition()<a))return b[c].getPosition()===a?b[c].getValue():this.yla(b,a,c-1,c);return Number.NaN};b.prototype.yla=function(a,b,c,f){if(b<a[c].getPosition()||b>a[f].getPosition())return Number.NaN;var g=a[f].getValue()-a[c].getValue();0===g?a=a[f].getValue():(f=a[f].getPosition()-a[c].getPosition(),a=a[c].getValue()+(b-a[c].getPosition())*g/f);return a};b.prototype.ka=function(){var a=_geo.geotoolkit.Ac(this);
a.data=this.data;a.scaledsamples=this.wg();a.minwraplevel=this.rt();a.maxwraplevel=this.Pu();a.conversion=this.hq;a.interpolation=this.interpolation;return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);_geo.geotoolkit.Cc(this,a);a.hasOwnProperty("data")&&(this.data=a.data);a.hasOwnProperty("scaledsamples")&&(this.Hg=a.scaledsamples);a.hasOwnProperty("minwraplevel")&&this.CN(a.minwraplevel);a.hasOwnProperty("maxwraplevel")&&this.AN(a.maxwraplevel);a.hasOwnProperty("conversion")&&
this.LG(a.conversion);a.hasOwnProperty("interpolation")&&(this.interpolation=a.interpolation);return this};b.prototype.LS=function(){return this.Sj()!==this.mrb()};return b}();
_geo.geotoolkit.oa.Kc.uH=function(){function b(a){this.fi=this.xh=this.Ba=this.Rb=null;a=_geo.geotoolkit.Ca(a,{data:null!=a.data?a.data:null,linestyle:null!=a.linestyle?a.linestyle:{},markervisible:null!=a.markervisible?a.markervisible:!1,curvevisible:null!=a.curvevisible?a.curvevisible:!0,marker:null!=a.marker?a.marker:null,decimationSpacing:"number"===typeof a.decimationSpacing?a.decimationSpacing:1,spline:null!=a.spline?a.spline:!1,values:null!=a.values?a.values:null});_geo.geotoolkit.oa.Kc.ZT.call(this,
a);this.eBa=this.cBa=this.jLb=null;this.lw=_geo.geotoolkit.data.sF.Zs.XN;this.Au=!0;this.oG=_geo.geotoolkit.data.Rm.pi.xj;this.BD=this.Ef=null;this.OFa=this.MS=!1;this.setData(a.data);this.dnc=a.markervisible;this.BHb=a.curvevisible;this.nQb(a.marker);this.m3c=1<=a.decimationSpacing?a.decimationSpacing:1;this.Gpc=a.spline;this.gd=a.values.visible;this.TMb=(new _geo.geotoolkit.scene.Group).pe(new _geo.geotoolkit.ea.ol).Sa(new _geo.geotoolkit.util.Rect(0,0,100,100)).ta(a.values.fillstyle).ua(a.values.linestyle);
this.J3a=(new _geo.geotoolkit.scene.shapes.Text({textstyle:{color:a.values.color,font:a.values.font}})).Cd(a.values.anchor).pb({left:5,top:5,width:90,height:90});this.TMb.va(this.J3a);this.i5c=a.values.format}var a=_geo.geotoolkit.oa.Kc.Bb.tXa,g=_geo.geotoolkit.oa.Kc.Bb.qZa,d=1E-5;_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Kc.ZT);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.TimeSeriesLine");b.$={vf:"updated",LJa:"limitschanged"};b.prototype.lcb=function(a){this.Oi();var b=this.ga();return this.OD(b,
!!a)};b.prototype.Ug=function(){return this.xh};b.prototype.BN=function(a){this.xh!==a&&(this.xh=a,this.lcb());return this};b.prototype.Ih=function(){return this.fi};b.prototype.UI=function(a){this.fi!==a&&(this.fi=a,this.lcb());return this};b.prototype.gF=function(a){this.lw=a;return this};b.prototype.nC=function(a){this.Au=a;return this};b.prototype.wg=function(){var a=this.V7a();return a?a.wg():[]};b.prototype.rRa=function(){var a=this.V7a(),b=a.wg();return{values:a.e_(),indices:a.UZ(),samples:b}};
b.prototype.getData=function(){return this.Ba};b.prototype.setData=function(b){null!=this.Ba&&(this.Ba.hb(_geo.geotoolkit.data.$.vf,this.y6a()),this.Ba.hi(a).hb(_geo.geotoolkit.data.Yl.$.Hn,this.uEa()),this.Ba.hi(g).hb(_geo.geotoolkit.data.Yl.$.Hn,this.fFa()));this.Ba=b;null!=this.Ba&&(this.Ba.kb(_geo.geotoolkit.data.$.vf,this.y6a()),this.Ba.hi(a).kb(_geo.geotoolkit.data.Yl.$.Hn,this.uEa()),this.Ba.hi(g).kb(_geo.geotoolkit.data.Yl.$.Hn,this.fFa()));this.jF();this.lcb();return this};b.prototype.GE=
function(){return this.oG};b.prototype.mC=function(a){if(a){var b=a.toLowerCase();if("linear"===b)a=_geo.geotoolkit.data.Rm.pi.xj;else if("middlestep"===b)a=_geo.geotoolkit.data.Rm.pi.EX;else if("endstep"===b)a=_geo.geotoolkit.data.Rm.pi.rX;else if("startstep"===b)a=_geo.geotoolkit.data.Rm.pi.tO;else throw Error("Interpolation type "+a+" is not defined!");a!==this.oG&&(this.oG=a,this.op=!0,this.ma())}return this};b.prototype.OD=function(a,b){var d=this.ga();if(!d||d.isEmpty())return this;null!==this.Ba&&
(this.op=!b,this.ma(a));return this};b.prototype.$Ta=function(a){this.OFa!==a&&(this.OFa=a,this.op=!0,this.ma());return this};b.prototype.bla=function(){return this.OFa};b.prototype.jN=function(){return this.MS};b.prototype.N_=function(a){this.MS!==a&&(this.MS=a,this.op=!0,this.ma());return this};b.prototype.y5b=function(a){this.Ef=a;this.BD=new _geo.geotoolkit.data.sF(this.Ef);this.BD.nC(this.Au);this.BD.gF(this.lw);return this};b.prototype.V7a=function(a){"undefined"===typeof a&&(a=this.Au);return!0===
a?this.BD:this.Ef};b.prototype.V7b=function(a){a=a.Ra();var b=this.Au;this.BD.bbb(a);this.BD.nC(b);this.BD.gF(this.lw);this.BD.wg()};b.prototype.jF=function(){if(null!=this.Ba&&(null==this.Ef||this.Ef.Bp()!==this.Ba||this.op)){var a=null,a=this.xh,b=this.fi,f=this.SQa(),g=f.bottom,f=f.top,a=this.MS?a>=d?new _geo.geotoolkit.data.XQ(1,10,_geo.geotoolkit.util.Math.log10(a),_geo.geotoolkit.util.Math.log10(b),g,f,d,new _geo.geotoolkit.data.ZJa(_geo.geotoolkit.util.Math.log10(a),_geo.geotoolkit.util.Math.log10(b))):
b>=d?new _geo.geotoolkit.data.XQ(1,10,_geo.geotoolkit.util.Math.log10(d),_geo.geotoolkit.util.Math.log10(b),g,f,d,new _geo.geotoolkit.data.ZJa(_geo.geotoolkit.util.Math.log10(d),_geo.geotoolkit.util.Math.log10(b))):new _geo.geotoolkit.data.XQ(1,10,Number.NaN,Number.NaN,g,f,d,new _geo.geotoolkit.data.ZJa(Number.NaN,Number.NaN)):new _geo.geotoolkit.data.ZJa(a,b),b=new _geo.geotoolkit.data.Xga;this.oG===_geo.geotoolkit.data.Rm.pi.EX?b.W2(new _geo.geotoolkit.data.Rm(_geo.geotoolkit.data.Rm.pi.EX)):this.oG===
_geo.geotoolkit.data.Rm.pi.rX?b.W2(new _geo.geotoolkit.data.Rm(_geo.geotoolkit.data.Rm.pi.rX)):this.oG===_geo.geotoolkit.data.Rm.pi.tO&&b.W2(new _geo.geotoolkit.data.Rm(_geo.geotoolkit.data.Rm.pi.tO));g=this.Ba;0===b.aW.length&&(b=null);null!=this.Ef&&this.Ef.Bp()===g?this.Ef.LG(a).setInterpolation(b):(a=new _geo.geotoolkit.oa.Kc.h1(g,a,b,this.jN()&&this.bla()),this.y5b(a));this.op=!1}};b.prototype.jvb=function(){this.lcb()};b.prototype.Uu=function(a){this.lcb(!1)};b.prototype.y6a=function(){null==
this.jLb&&(this.jLb=function(){this.Uu()}.bind(this));return this.jLb};b.prototype.uEa=function(){null==this.cBa&&(this.cBa=function(a,b,d){a=null!=d?d.name:null;"unit"===a?this.jvb():"state"===a&&this.Uu(d.value)}.bind(this));return this.cBa};b.prototype.fFa=function(){null==this.eBa&&(this.eBa=function(a,b,d){a=null!=d?d.name:null;"unit"===a?this.jvb():"state"===a&&this.Uu(d.value)}.bind(this));return this.eBa};b.prototype.Oi=function(){this.Rb=null;if(null!=this.Ba&&!1!==this.ib()){var a=(this.Ef.Tc()-
this.xh)/(this.fi-this.xh),b=(this.Ef.ad()-this.xh)/(this.fi-this.xh);this.Rb=new _geo.geotoolkit.util.Rect(this.Ef.lD(),a,this.Ef.kD(),b);_geo.geotoolkit.oa.Kc.ZT.prototype.Oi.call(this)}};b.prototype.ga=function(){return null!=this.Rb?this.Rb.Mi():null};b.prototype.ie=function(a){if(!this.ib())return!1;var b=this.ga();if(!b)return!0;var d=b.aa(),g=b.ba();if(g<=Number.MIN_VALUE&&d<=Number.MIN_VALUE)return!1;if(g>Number.MIN_VALUE&&d>Number.MIN_VALUE)return _geo.geotoolkit.scene.shapes.Shape.bW(b,
this.Yb(),a.qj());(d=this.Yb())&&(b=d.ob(b));var h=a.qj();a=Math.max(h.sa(),b.sa());d=Math.min(h.za(),b.za());g=Math.max(h.qa(),b.qa());b=Math.min(h.wa(),b.wa());return!(d<a||b<g)};b.prototype.y2b=function(a){this.BHb=a;return this};b.prototype.izc=function(){return this.BHb};b.prototype.render=function(a){_geo.geotoolkit.oa.Kc.ZT.prototype.render.call(this,a);if(!(!1===this.ib()||null==this.Xa()||null==this.Ba||0>=this.Ba.Zj())){a=null!=this.mb()?a.qc(this.mb()):a;var b=this.Xa();a.ua(b);var d=a.$e(),
g=a.Ra(),h=a.ema(b),d=_geo.geotoolkit.util.Rect.I9(d,h,h),l=g.qe(d);this.jF();this.V7b(a);var n=this.V7a(),g=n.e_(),d=n.UZ(),h=n.wg();if(null!=g&&null!=d&&null!=h){var p=-1,r=-1,l=n.cs(l.sa(),l.za()),t=l.gb(),l=l.nb();if(this.BHb){for(n=t;n<l;n++)(0,window.isNaN)(g[n])&&-1===p||(-1===p&&(p=n),(0,window.isNaN)(g[n])&&(this.Gpc?(p=new _geo.geotoolkit.scene.shapes.Spline(d.slice(p,r+1),g.slice(p,r+1)),p.ua(b),p.render(a)):a.xn(d,g,p,r),p=r+1),r=n);-1!==p&&-1!==r&&p!==r&&(this.Gpc?(n=Array.prototype.slice.call(d,
p,r+1),r=Array.prototype.slice.call(g,p,r+1),p=new _geo.geotoolkit.scene.shapes.Spline(n,r),p.ua(b),p.render(a)):a.xn(d,g,p,r))}if(this.dnc||this.gd)for(n=t;n<l;n++)0===n%this.m3c&&(this.dnc&&(this.anc.yc(d[n],g[n]),this.anc.render(a)),this.gd&&(this.J3a.yc(d[n],g[n]),this.J3a.yFa=!0,b=h[n].nvb,this.J3a.jc(this.i5c.format(b)),b=this.J3a.getBoundingBox(a),b=new _geo.geotoolkit.util.Rect({x:d[n]+b.aa()/5,y:g[n]+b.ba()/5,width:6*b.aa()/5,height:6*b.ba()/5}),this.TMb.Ea(b),this.TMb.render(a)))}}};b.prototype.nQb=
function(a){a=_geo.geotoolkit.Ca(a,{alignment:_geo.geotoolkit.util.Da.lb,width:7,height:7,sizeIsInDeviceSpace:!0,painter:_geo.geotoolkit.scene.shapes.hc.BWa,linestyle:new _geo.geotoolkit.attributes.Aa({color:"black"}),fillstyle:new _geo.geotoolkit.attributes.Fa({color:"black"})});this.yud={width:a.width,height:a.height};this.anc=new _geo.geotoolkit.scene.shapes.Symbol(a);return this};b.prototype.dispose=function(){null!=this.Ba&&(this.Ba.hb(_geo.geotoolkit.data.$.vf,this.y6a()),this.Ba.hi(a).hb(_geo.geotoolkit.data.Yl.$.Hn,
this.uEa()),this.Ba.hi(g).hb(_geo.geotoolkit.data.Yl.$.Hn,this.fFa()));_geo.geotoolkit.scene.shapes.Shape.prototype.dispose.call(this)};return b}();
_geo.geotoolkit.oa.Kc.rKa=function(){function b(a,g,d){_geo.geotoolkit.util.EventDispatcher.call(this);a=_geo.geotoolkit.Ca({},{value:null!=a?a:Number.MIN_VALUE,originalCurve:null!=g?g:null,type:null!=d?d:b.fv.Ox});this.g5c=this.hA=null;this.uk=a.value;this.Pp=a.type;this.h2=a.originalCurve;this.Gmc=this.Zw=this.Hkc=this.Ba=null;null!=this.h2&&this.h2.kb(_geo.geotoolkit.oa.Kc.uH.$.LJa,this.nc());this.UG()}_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.ReferenceLine");
b.fv={Ub:"top",Ox:"value",Zf:"bottom"};b.prototype.UG=function(){var a=this.h2.Ug(),g=this.h2.Ih(),d=this.xa();this.Gmc=d.clone();d=new _geo.geotoolkit.util.Rect(d.sa(),a,d.za(),g);d=_geo.geotoolkit.util.Rect.I9(d,2,2);a=(g=g<=a)?d.wa():d.qa();g=g?d.qa():d.wa();switch(this.Pp){case b.fv.Ub:this.uk=g;break;case b.fv.Zf:this.uk=a;break}a=d.sa();d=d.za();null==this.Ba?(this.Ba=new _geo.geotoolkit.data.vh({cols:[{type:"number",data:[a,d]},{type:"number",data:[this.uk,this.uk]}]}),this.Hkc=new _geo.geotoolkit.data.lu(this.Ba)):
(this.Ba.sTa(0,2),this.Ba.oob([[a,this.uk],[d,this.uk]]));this.hA=this.Rb=null};b.prototype.wg=function(){var a=this.xa();null!=a&&a.Pj(this.Gmc)||this.UG();null==this.hA&&null!=this.Ba&&(a=_geo.geotoolkit.oa.Kc.Bb.wg(this.Ba,this.h2.Ug(),this.h2.Ih()),this.hA=a.ED,this.g5c=a.ikd);return this.hA};b.prototype.Oi=function(){this.Rb=null;if(null!=this.Ba&&null!=this.h2){var a=this.Ba.hi(_geo.geotoolkit.oa.Kc.Bb.tXa),b=this.Ba.hi(_geo.geotoolkit.oa.Kc.Bb.qZa),d=this.h2.Ug(),e=this.h2.Ih(),c=(b.Ug()-d)/
(e-d),b=(b.Ih()-d)/(e-d);this.Rb=new _geo.geotoolkit.util.Rect(a.Ug(),c,a.Ih(),b)}};b.prototype.ga=function(){null==this.Rb&&this.Oi();return null!=this.Rb?this.Rb.Mi():null};b.prototype.getData=function(){return this.Hkc};b.prototype.xa=function(){return this.h2.getParent().xa()};b.prototype.nc=function(){null==this.Zw&&(this.Zw=function(a,b,d){this.hA=null;this.UG()}.bind(this));return this.Zw};b.prototype.dispose=function(){null!=this.h2&&this.h2.hb(_geo.geotoolkit.oa.Kc.uH.$.LJa,this.nc());_geo.geotoolkit.util.EventDispatcher.prototype.dispose.call(this)};
return b}();
_geo.geotoolkit.oa.Kc.epa=function(){function b(a,b,d){this.Hmd=a;this.ED=new e(a);this.tr=-1;this.l5a=d;this.aC=b;this.re=!0;this.minValue=0;this.maxValue=1;this.wIc=-1E-10;this.mIc=1+1E-10}function a(a,b,d,e){this.ui=new g(a,b);this.Tj=new g(d,e);this.empty=!1}function g(a,b){this.qq=a;this.eI=this.Zu=b;this.jq=null}function d(a,b,e,g,l){_geo.geotoolkit.oa.Kc.ZT.call(this);a=_geo.geotoolkit.Ca(a,{curve1:a instanceof _geo.geotoolkit.oa.Kc.uH?a:null,curve2:b instanceof _geo.geotoolkit.oa.Kc.uH||b instanceof
_geo.geotoolkit.oa.Kc.rKa?b:null,fillstyle:e instanceof _geo.geotoolkit.attributes.Fa?e:null,positivefillstyle:g instanceof _geo.geotoolkit.attributes.Fa?g:null,negativefillstyle:l instanceof _geo.geotoolkit.attributes.Fa?l:null,filltype:null});null==a.filltype&&(a.filltype=null!=a.negativefillstyle?null!=a.positivefillstyle?d.Xg.F0:d.Xg.Ft:null!=a.positivefillstyle?d.Xg.qu:d.Xg.fR);switch(a.filltype){case d.Xg.fR:null==a.fillstyle&&(a.fillstyle=null);null==a.negativefillstyle&&(a.negativefillstyle=
a.fillstyle);null==a.positivefillstyle&&(a.positivefillstyle=a.fillstyle);break;case d.Xg.F0:null==a.fillstyle&&(a.fillstyle=null);null==a.negativefillstyle&&(a.negativefillstyle=null);null==a.positivefillstyle&&(a.positivefillstyle=null);break;case d.Xg.Ft:null==a.negativefillstyle&&(a.negativefillstyle=null!=a.fillstyle?a.fillstyle:null);null==a.positivefillstyle&&(a.positivefillstyle=a.negativefillstyle);null==a.fillstyle&&(a.fillstyle=a.negativefillstyle);break;case d.Xg.qu:null==a.positivefillstyle&&
(a.positivefillstyle=null!=a.fillstyle?a.fillstyle:null);null==a.negativefillstyle&&(a.negativefillstyle=a.positivefillstyle);null==a.fillstyle&&(a.fillstyle=a.positivefillstyle);break}this.Ke=a.fillstyle;this.xB=a.positivefillstyle;this.nE=a.negativefillstyle;this.FH=null==a.filltype?null:a.filltype;this.ta(null!=a.fillstyle?a.fillstyle:null);this.GO=a.curve1;this.uia=a.curve2;this.Wj(this.Ke,_geo.geotoolkit.scene.Node.$.Wc,this.nc());this.Wj(this.nE,_geo.geotoolkit.scene.Node.$.Wc,this.nc());this.Wj(this.xB,
_geo.geotoolkit.scene.Node.$.Wc,this.nc());this.jJc=function(a,b,c){null!==this.GO&&b===this.GO&&(a=this.GO.SQa(),this.FD(a.top,a.bottom))}.bind(this);this.GO.kb(_geo.geotoolkit.oa.Kc.ZT.$.Wub,this.jJc);a=this.GO.SQa();this.FD(a.top,a.bottom)}_geo.geotoolkit.fa(d,_geo.geotoolkit.oa.Kc.ZT);_geo.geotoolkit.da(d,"geotoolkit.widgets.timeseries.TimeSeriesFill");d.Xg={fR:"single",F0:"dual",qu:"positive",Ft:"negative",yYa:"positiveandnegative"};g.prototype={reset:function(){this.qq=null;this.eI=this.Zu=
-1;this.jq=null}};a.prototype={Cg:function(a,b,d,e){this.ui.qq=a;this.ui.Zu=b;this.ui.eI=b;this.Tj.qq=d;this.Tj.Zu=e;this.Tj.eI=e;this.empty=!1},oSa:function(a,b){var d=-1===this.ui.Zu?this.ui.qq.y:a[this.ui.Zu],e=-1===this.Tj.Zu?this.Tj.qq.y:b[this.Tj.Zu];return d<=e},O9:function(a,b){var d=-1===this.ui.Zu?this.ui.qq.x:a[this.ui.Zu],e=-1===this.Tj.Zu?this.Tj.qq.x:b[this.Tj.Zu];return d<=e},reset:function(){this.empty=!0;this.ui.reset();this.Tj.reset()}};var e=function(){function a(b){this.hA=b;this.Oj=
b.length;this.Sk=1>this.Oj?1:b[b.length-1].getPosition()<b[0].getPosition()?-1:1;this.cud=1>this.Oj?0:b[0].getPosition();this.Pud=1>this.Oj?0:b[b.length-1].getPosition()}a.prototype.getLength=function(){return this.Oj};a.prototype.get=function(a){return 1===this.Sk?this.hA[a]:this.hA[this.Oj-1-a]};return a}();b.JVb=function(a,b,d){var e=b.x;b=b.y;var g=d.x,n=d.y;d=n-b;0!==d&&(n=b+(a-e)*d/(g-e));return n};b.prototype={kq:function(){return this.tr},sab:function(a){this.tr!==a&&(this.tr=a,-1!==this.tr&&
(this.gu=this.ED.get(this.tr).getPosition(),this.Ut=this.ED.get(this.tr+1).getPosition(),this.Dz=this.getValue(this.tr),this.eG=this.getValue(this.tr+1)))},Ea:function(a,b){this.minValue=a;this.maxValue=b},getValue:function(a){return(0,window.isNaN)(this.ED.get(a).getValue())?Number.NaN:this.ED.get(a).getValue()},Ra:function(){return this.aC},reset:function(a,b,d){this.l5a=0;this.next(a,b);0<this.tr&&!(0,window.isNaN)(this.ED.get(this.tr-1).getValue())&&this.sab(this.tr-1)},next:function(a,b){var d=
!0;this.Ep=null;if(!this.re)return d;if(-1===this.tr){var e=_geo.geotoolkit.oa.Kc.Bb.cs(this.Hmd,a,b).gb();this.tr=e-1}if(-1<this.tr&&this.ED.get(this.tr).getPosition()>b)return this.re=!1,d;for(e=this.tr+1;e<this.ED.Oj-1;e++)if(!(this.ED.get(e+1).getPosition()<a))if((0,window.isNaN)(this.ED.get(e).getValue())||(0,window.isNaN)(this.ED.get(e+1).getValue()))d=!1;else return this.sab(e),d;this.re=!1;return d},FEa:function(a){var b=this.gu,d=this.Dz,e=this.Ut,g=this.eG;if(a<b||a>e)throw Error("Target depth should be inside Samples range ["+
b+" <= "+a+" => "+e);var n=g-d;0!==n&&(g=d+(a-b)*n/(e-b));return new _geo.geotoolkit.util.na(a,g)},Vab:function(a){this.Ep=this.FEa(a)},NGc:function(a){return!(a.Ut<this.gu||a.gu>this.Ut)},intersect:function(a){var b=null!=this.Ep?this.Ep.x:this.gu,d=null!=this.Ep?this.Ep.y:this.Dz,e=null!=a.Ep?a.Ep.x:a.gu,g=null!=a.Ep?a.Ep.y:a.Dz,b=this.uQb(b,d,this.Ut,this.eG,e,g,a.Ut,a.eG);return null!=b?(this.Ep=b,a.Ep=b,!0):!1},uQb:function(a,b,d,e,g,n,p,r){if(a===d&&g===p)return a=Math.min(b,e),b=Math.max(b,
e),e=Math.min(n,r),n=Math.max(n,r),b<=e||n<=a?null:new _geo.geotoolkit.util.na(g,(b+e)/2);var t=(r-n)*(d-a)-(p-g)*(e-b);if(0!==t){var q=((d-a)*(b-n)-(e-b)*(a-g))/t;if(q<this.wIc||q>this.mIc)return null;q=((p-g)*(b-n)-(r-n)*(a-g))/t;return q<this.wIc||q>this.mIc?null:new _geo.geotoolkit.util.na(a+q*(d-a),b+q*(e-b))}return null}};d.prototype.S3=function(){return this.FH};d.prototype.J_=function(a){this.FH=a;this.cQ();return this};d.prototype.sb=function(){return this.Ke};d.prototype.ta=function(a,b){if(this.Ke===
a)return this;this.Ke=_geo.geotoolkit.attributes.Fa.ph(this,this.Ke,a,b,this.nc());this.Pa().ma();return this};d.prototype.CK=function(){return this.xB};d.prototype.uQ=function(a,b){if(this.xB===a)return this;this.xB=_geo.geotoolkit.attributes.Fa.ph(this,this.xB,a,b,this.nc());this.Pa().ma();return this};d.prototype.BK=function(){return this.nE};d.prototype.tQ=function(a,b){if(this.xB===a)return this;this.nE=_geo.geotoolkit.attributes.Fa.ph(this,this.nE,a,b,this.nc());this.Pa().ma();return this};
d.prototype.xva=function(c,d,e){var g=this.GO.wg(),l=this.uia.wg(),n=new b(g,this.getParent().ee(),0),p=new b(l,this.getParent().ee(),0);n.reset(d,e,0);p.reset(d,e,0);for(var r=null;n.re&&p.re;){for(var t=!0;n.re&&p.re&&t;){for(;n.re&&n.Ut<p.gu;)n.next(d,e);for(t=!1;p.re&&p.Ut<n.gu;)p.next(d,e),t=!0}if(!n.re||!p.re)break;if(null==r||!0===r.empty)n.gu!==p.gu?n.gu<p.gu?(n.Vab(p.gu),null==r?r=new a(n.Ep,n.kq(),null,p.kq()):r.Cg(n.Ep,n.kq(),null,p.kq())):(p.Vab(n.gu),null==r?r=new a(null,n.kq(),p.Ep,
p.kq()):r.Cg(null,n.kq(),p.Ep,p.kq())):null==r?r=new a(null,n.kq(),null,p.kq()):r.Cg(null,n.kq(),null,p.kq());else{n.intersect(p)&&(r.ui.jq=n.Ep,r.Tj.jq=p.Ep,this.NGa(c,r,g,l),r=new a(n.Ep,n.kq()+1,p.Ep,p.kq()+1));t=!1;if(n.Ut===p.Ut){r.ui.eI=n.kq()+1;r.Tj.eI=p.kq()+1;var t=n.next(d,e),q=p.next(d,e),t=!t||!q}else if(n.Ut<p.Ut){if(r.ui.eI=n.kq()+1,q=n.Ut,(t=!n.next(d,e))||!n.re)r.Tj.jq=p.FEa(q)}else if(r.Tj.eI=p.kq()+1,q=p.Ut,(t=!p.next(d,e))||!p.re)r.ui.jq=n.FEa(q);t&&(r.empty||this.NGa(c,r,g,l),
r.reset())}}null==r||r.empty||this.NGa(c,r,g,l)};d.prototype.NGa=function(a,b,d,e){if(this.Xa()&&this.Xa().Ol()){var g=this.Xa(),n=this.sb(),p=this.BK(),r=this.CK();this.pf=null;this.OGa(a,b,d,e);this.pf=g;this.V4=this.J4=this.fillStyle=null;this.OGa(a,b,d,e);this.fillStyle=n;this.J4=p;this.V4=r}else this.OGa(a,b,d,e)};d.prototype.OGa=function(a,f,g,h){var l=new _geo.geotoolkit.util.na(0,0);g=new e(g);h=new e(h);var n=new _geo.geotoolkit.util.na(Number.NaN,Number.POSITIVE_INFINITY),p=new _geo.geotoolkit.util.na(Number.NaN,
Number.POSITIVE_INFINITY);a.ua(this.Xa());a.beginPath();null!=f.ui.qq?(l.x=f.ui.qq.x,l.y=f.ui.qq.y):(l.x=g.get(f.ui.Zu).getPosition(),l.y=g.get(f.ui.Zu).getValue(),l.y<n.y&&(n.x=l.x,n.y=l.y));a.moveTo(l.x,l.y);var r,t;for(t=null!=f.ui.qq?f.ui.Zu:f.ui.Zu+1;t<=f.ui.eI;t++)r=g.get(t),l.x=r.getPosition(),l.y=r.getValue(),null!=f.ui.qq&&f.ui.qq.x>l.x||null!=f.ui.jq&&f.ui.jq.x<l.x||(l.y<n.y&&(n.x=l.x,n.y=l.y),a.lineTo(l.x,l.y));null!=f.ui.jq&&(l.x=f.ui.jq.x,l.y=f.ui.jq.y,a.lineTo(l.x,l.y));null!=f.Tj.jq&&
(l.x=f.Tj.jq.x,l.y=f.Tj.jq.y,a.lineTo(l.x,l.y));for(t=f.Tj.eI;t>=f.Tj.Zu;t--)g=h.get(t),l.x=g.getPosition(),l.y=g.getValue(),null!=f.Tj.qq&&f.Tj.qq.x>l.x||null!=f.Tj.jq&&f.Tj.jq.x<l.x||(l.y<p.y&&(p.x=l.x,p.y=l.y),a.lineTo(l.x,l.y));null!=f.Tj.qq&&(l.x=f.Tj.qq.x,l.y=f.Tj.qq.y,a.lineTo(l.x,l.y));a.closePath();(0,window.isNaN)(n.x)&&(0,window.isNaN)(p.x)?f=this.sb():this.P8===d.Xg.fR?f=this.NM(0):((0,window.isNaN)(n.x)&&(n.x=p.x,n.y=b.JVb(p.x,f.ui.qq,f.ui.jq)),(0,window.isNaN)(p.x)&&(p.x=n.x,p.y=b.JVb(n.x,
f.Tj.qq,f.Tj.jq)),f=n.y<=p.y?this.NM(-1):this.NM(1));f&&(a.ta(f,this.ga()),a.si(),a.kp(null));this.pf&&a.stroke()};d.prototype.ga=function(){var a=null!=this.GO?this.GO.ga():null,b=null!=this.uia?this.uia.ga():null,d=Math.min(null!=a?a.sa():Number.POSITIVE_INFINITY,null!=b?b.sa():Number.POSITIVE_INFINITY),a=Math.max(null!=a?a.za():Number.NEGATIVE_INFINITY,null!=b?b.za():Number.NEGATIVE_INFINITY);return(0,window.isFinite)(d)&&(0,window.isFinite)(a)?(b=this.SQa(),new _geo.geotoolkit.util.Rect(d,b.bottom,
a,b.top)):null};d.prototype.NM=function(a){return 0===a?this.sb():-1===a?this.FH===d.Xg.qu?null:this.nE:this.FH===d.Xg.Ft?null:this.xB};d.prototype.render=function(a){_geo.geotoolkit.oa.Kc.ZT.prototype.render.call(this,a);a=null!=this.mb()?a.qc(this.mb()):a;var b=a.$e(),d=a.Ra();0!==d.CV()&&(b=_geo.geotoolkit.util.Rect.I9(b,2,0),b=d.qe(b),this.GO instanceof _geo.geotoolkit.oa.Kc.uH?this.GO.jF():this.GO.UG(),this.uia instanceof _geo.geotoolkit.oa.Kc.uH?this.uia.jF():this.uia.UG(),d=b.sa(),b=b.za(),
this.xva(a,d,b))};d.prototype.dispose=function(){null!=this.GO&&this.GO.hb(_geo.geotoolkit.oa.Kc.ZT.$.Wub,this.jJc);_geo.geotoolkit.oa.Kc.ZT.prototype.dispose.call(this)};return d}();
_geo.geotoolkit.oa.Kc.saa=function(){function b(b){_geo.geotoolkit.scene.shapes.Shape.call(this,b);null==b&&(b={});this.la=_geo.geotoolkit.Ca(b,{id:null!=b.id?b.id:"",point:null!=b.point?b.point:new _geo.geotoolkit.util.na(0,0),label:null!=b.label?b.label:"",symbol:null!=b.symbol?b.symbol:null,linestyle:null!=b.linestyle?b.linestyle:g.clone(),textbackground:null!=b.textbackground?b.textbackground:d.clone(),fillstyle:null!=b.fillstyle?b.fillstyle:e.clone(),textstyle:null!=b.textstyle?b.textstyle:a.clone(),
symbolsize:null!=b.symbolsize?b.symbolsize:10,timeseriesobject:null!=b.timeseriesobject?b.timeseriesobject:null});this._id=this.la.id;this.ZJb=this.gg=this.Ce=null;this.gda=this.la.timeseriesobject;null!==this.gda&&this.gda.kb(_geo.geotoolkit.oa.Kc.wF.$.MJa,this.lsb());this.CGc();this.DGc()}var a=new _geo.geotoolkit.attributes.eb({font:"12px Arial",color:"black"}),g=new _geo.geotoolkit.attributes.Aa({color:"black",width:1,pixelsnapmode:{x:!0,y:!0}}),d=new _geo.geotoolkit.attributes.Fa({color:"transparent"}),
e=new _geo.geotoolkit.attributes.Fa({color:"transparent"});_geo.geotoolkit.fa(b,_geo.geotoolkit.scene.shapes.Shape);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.Annotation");b.prototype.CGc=function(){this.Ce=new _geo.geotoolkit.scene.shapes.Text({sizeisindevicespace:!0});this.Ce.Gj(_geo.geotoolkit.scene.shapes.Text.jf.Vs);this.Ce.Cd(_geo.geotoolkit.util.Da.Og)};b.prototype.DGc=function(){null!=this.la.symbol&&(this.gg=new _geo.geotoolkit.scene.shapes.Symbol({sizeisindevicespace:!0,painter:this.la.symbol}),
this.gg.Cd(_geo.geotoolkit.util.Da.lb))};b.prototype.lsb=function(){null==this.ZJb&&(this.ZJb=function(){if(null!=this.gda){var a=this.gda.Uh();if(null!=a.curve&&null!=a.curve.getData()){var b=this.la.point.getX(),d=a.curve,e=d.getData(),d=e.hi(0).toArray(),e=e.hi(1).toArray(),b=d.indexOf(b),e=e[b],b=d[b],d=a.Yla.xa(),e=a.Yla.Cr()?(e-d.qa())/d.ba():(d.wa()-e)/d.ba();this.setOptions({point:new _geo.geotoolkit.util.na(b,e)})}}}.bind(this));return this.ZJb};b.prototype.update=function(){var a=this.la.point,
b=this.Ya(),d=.01,e=null!=this.la.linestyle?this.la.linestyle.aa():1;null!=b&&(d=b.xk(new _geo.geotoolkit.util.xc(0,5+e)).ba());b=_geo.geotoolkit.util.Da.Og;.1<a.getY()&&(b=_geo.geotoolkit.util.Da.Ei,d*=-1);null==this.gg&&null!=this.la.symbol&&this.DGc();null!=this.gg&&null!=this.la.symbol?(this.gg.yc(a.clone()),this.gg.WA(this.la.symbol),this.gg.ua(this.la.linestyle),this.gg.ta(this.la.fillstyle),this.gg.setSize(this.la.symbolsize,this.la.symbolsize)):this.gg=null;null==this.Ce&&""!==this.la.label&&
this.CGc();null!=this.Ce&&""!==this.la.label?(this.Ce.jc(this.la.label),this.Ce.yc(a.clone().setY(a.getY()+d)),this.Ce.wb(this.la.textstyle),this.Ce.ta(this.la.textbackground),this.Ce.Cd(b)):this.Ce=null;return this};b.prototype.setOptions=function(a){if(null==a)return this;this.la=_geo.geotoolkit.Ca(a,this.la);null!=a.timeseriesobject&&(null!=this.gda&&this.gda.hb(_geo.geotoolkit.oa.Kc.wF.$.MJa,this.lsb()),this.gda=this.la.timeseriesobject,this.gda.kb(_geo.geotoolkit.oa.Kc.wF.$.MJa,this.lsb()));
this.update();return this};b.prototype.jb=function(){return this.la};b.prototype.ja=function(a){return this.setOptions(a)};b.prototype.ka=function(){return this.jb()};b.prototype.render=function(a){null!=this.gg&&this.gg.render(a);null!=this.Ce&&this.Ce.render(a)};b.prototype.dispose=function(){null!=this.gda&&this.gda.hb(_geo.geotoolkit.oa.Kc.wF.$.MJa,this.lsb());_geo.geotoolkit.util.EventDispatcher.prototype.dispose.call(this)};return b}();
_geo.geotoolkit.oa.Kc.PVa=function(){function b(b){_geo.geotoolkit.scene.shapes.Shape.call(this,b);null==b&&(b={});this.la=_geo.geotoolkit.Ca(b,{id:null!=b.id?b.id:"",point:null!=b.point?b.point:new _geo.geotoolkit.util.na(0,0),text:null!=b.text?b.text:"",textvisible:null!=b.textvisible?b.textvisible:!0,linevisible:null!=b.linevisible?b.linevisible:!0,linestyle:null!=b.linestyle?b.linestyle:g,fillstyle:null!=b.fillstyle?b.fillstyle:d,textstyle:null!=b.textstyle?b.textstyle:a,alignment:null!=b.alignment?
b.alignment:_geo.geotoolkit.util.Da.Og,angle:null!=b.angle?b.angle:0});this.xu=this.Ce=null;this.Cg()}var a=new _geo.geotoolkit.attributes.eb({font:"12px Arial",color:"black"}),g=new _geo.geotoolkit.attributes.Aa({color:"black",width:1,pixelsnapmode:{x:!0,y:!0}}),d=new _geo.geotoolkit.attributes.Fa({color:"transparent"});_geo.geotoolkit.fa(b,_geo.geotoolkit.scene.shapes.Shape);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.AnnotationLine");b.prototype.setOptions=function(a){if(null==a)return this;
this.la=_geo.geotoolkit.Ca(a,this.la);this.update();return this};b.prototype.jb=function(){return this.la};b.prototype.ja=function(a){return this.setOptions(a)};b.prototype.ka=function(){return this.jb()};b.prototype.Cg=function(){var a=this.la.point;this.Ce=(new _geo.geotoolkit.scene.shapes.Text({text:this.la.text,ax:a.getX(),ay:a.getY(),fillstyle:this.la.fillstyle,textstyle:this.la.textstyle,alignment:this.la.alignment})).Ka(this.la.textvisible);this.Ce.Td(_geo.geotoolkit.util.Ga.dn(this.la.angle,
this.Ce.uA(),this.Ce.ny()));this.xu=(new _geo.geotoolkit.scene.shapes.Line({from:new _geo.geotoolkit.util.na(a.getX(),0),to:new _geo.geotoolkit.util.na(a.getX(),1),linestyle:this.la.linestyle})).Ka(this.la.linevisible).yb("annotation")};b.prototype.update=function(){var a=this.la.point;null!=this.Ce&&(this.Ce.jc(this.la.text),this.Ce.pq(a.getX()),this.Ce.Wq(a.getY()),this.Ce.Cd(this.la.alignment),this.Ce.wb(this.la.textstyle),this.Ce.ta(this.la.fillstyle),this.Ce.Td(_geo.geotoolkit.util.Ga.dn(this.la.angle,
this.Ce.uA(),this.Ce.ny())),this.Ce.Ka(this.la.textvisible));null!=this.xu&&(this.xu.Dw(new _geo.geotoolkit.util.na(a.getX(),0),_geo.geotoolkit.util.na(a.getX(),1)),this.xu.ua(this.la.linestyle),this.xu.Ka(this.la.linevisible))};b.prototype.render=function(a){this.xu&&this.la.linevisible&&this.xu.render(a);this.Ce&&this.la.textvisible&&this.Ce.render(a)};return b}();
_geo.geotoolkit.oa.Kc.lhb=function(){function b(a,b){_geo.geotoolkit.controls.shapes.kH.call(this,a);this.Ce=this.xu=this.E1=null;this.jY=[];this.Lqa=this.$h=this.P2=null;this.GH="9px Arial";this.HH=this.MJb=this.iAa=this.Ke=this.To=this.ve=null;null==b&&(b={});var d=_geo.geotoolkit.Ca(b,{formatter:b.formatter instanceof _geo.geotoolkit.util.hJ?b.formatter:null,margintext:null!=b.margintext?b.margintext:2,font:null!=b.font?b.font:this.GH,height:null!=b.height?b.height:20,internalpadding:null!=b.internalpadding?
b.internalpadding:4,linestyle:null!=b.linestyle?b.linestyle:new _geo.geotoolkit.attributes.Aa({color:"rgba(128, 128, 128, 0.5)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:null!=b.fillstyle?b.fillstyle:new _geo.geotoolkit.attributes.Fa({color:"rgba(250, 250, 250, 0.95)"}),fixedwidth:b.fixedwidth,labelcolor:null});this.Cg();this.setOptions(d)}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.shapes.kH);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.TimeSeriesLineLegendItem");b.prototype.Cg=function(){this.Ad(!0);
this.Qf(!0);this.B8a();this.uh();this.Ed().kb(_geo.geotoolkit.oa.Kc.wF.$.vDb,this.ki())};b.prototype.setOptions=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);var b=_geo.geotoolkit.Ca(a,{});b.linestyle=null;b.fillstyle=null;_geo.geotoolkit.Cc(this,b);a.hasOwnProperty("height")&&a.height&&(this.$h=a.height);a.hasOwnProperty("formatter")&&a.formatter&&(this.HH=a.formatter);a.hasOwnProperty("margintext")&&null!=a.margintext&&(this.Lqa=a.margintext);a.hasOwnProperty("font")&&null!=a.font&&
(this.GH=a.font);a.hasOwnProperty("internalpadding")&&null!=a.internalpadding&&(this.ve=a.internalpadding);a.hasOwnProperty("linestyle")&&void 0!==a.linestyle&&(this.To=_geo.geotoolkit.attributes.Aa.ab(a.linestyle));a.hasOwnProperty("fillstyle")&&void 0!==a.fillstyle&&(this.Ke=_geo.geotoolkit.attributes.Fa.ab(a.fillstyle));a.hasOwnProperty("fixedwidth")&&void 0!==a.fixedwidth&&(this.iAa=a.fixedwidth);a.hasOwnProperty("labelcolor")&&void 0!==a.labelcolor&&(this.MJb=a.labelcolor);this.uh();return this};
b.prototype.ja=function(a){return this.setOptions(a)};b.prototype.B8a=function(){var a=[];this.jh();this.E1=new _geo.geotoolkit.scene.shapes.lc;a.push(this.E1);this.xu=new _geo.geotoolkit.scene.shapes.Line;a.push(this.xu);a.push(this.Ce=new _geo.geotoolkit.scene.shapes.Text);this.va(a)};b.prototype.S5a=function(a){return null!=this.HH?this.HH.format(a):a};b.prototype.uh=function(){var a=this.$h,b=a,d=this.ve,e=d/2,c=2*d,f=this.Ed(),k=f.Uh(),h=this.Ed().Ls().unit instanceof _geo.geotoolkit.util.ar?
this.Ed().Ls().unit.be():this.Ed().Ls().unit,l=k.name,n=null==this.Ed().Ls()||null==this.Ed().Ls().unit?"":" ("+h+")",p=null==k.curve?null:f.Qed(),f=null==k.curve?null:k.curve.Xa().ac();null==k.curve||k.curve.Xa().clone();h=k.CM;k=new _geo.geotoolkit.attributes.eb({color:"black",font:this.GH});p=this.S5a(p);l+=null==p?"":" "+p;l+=null==n?"":n;n=null!=this.iAa?this.iAa:_geo.geotoolkit.renderer.TextMetrics.measureText(l,k).aa()+b+c+2*this.Lqa;this.Ul(n).zk(a).Qf(!0);this.E1.zb(new _geo.geotoolkit.util.Rect(e,
e,n-e,a-e)).ua(this.To).ta(this.Ke);var r=1;this.jY.forEach(function(a){r=this.nq(a);this.removeChild(a)}.bind(this));this.jY=[];null!=h&&(e=(a-c+1)/2,n=null,n=null==h.top?null:h.top.fillstyle,n=(new _geo.geotoolkit.scene.shapes.lc({left:d,top:d+0*e,width:b-c,height:e})).ua(null).ta(n),this.oh(r,n),this.jY.push(n),n=null==h.bottom?null:h.bottom.fillstyle,c=(new _geo.geotoolkit.scene.shapes.lc({left:d,top:d+1*e,width:b-c,height:e})).ua(null).ta(n),this.oh(r,c),this.jY.push(c));null!=this.xu&&this.xu.Dw({from:new _geo.geotoolkit.util.na(d,
a/2),to:new _geo.geotoolkit.util.na(b-d,a/2)}).ua(new _geo.geotoolkit.attributes.Aa({color:f}));null!=this.Ce&&(this.Ce.ja({text:l,ax:b+this.Lqa,ay:a/2,textstyle:k}),this.Ce.Cd(_geo.geotoolkit.util.Da.We));null==this.MJb?this.Ce.Ib().setColor(f):this.Ce.Ib().setColor(this.MJb)};b.prototype.ki=function(){null==this.P2&&(this.P2=function(a,b,d){this.uh()}.bind(this));return this.P2};b.prototype.dispose=function(){null!=this.Ed()&&this.Ed().hb(_geo.geotoolkit.oa.Kc.wF.$.vDb,this.ki());_geo.geotoolkit.controls.shapes.kH.prototype.dispose.call(this)};
return b}();
_geo.geotoolkit.oa.Kc.mhb=function(){function b(a,b){_geo.geotoolkit.controls.shapes.kH.call(this,a);this.Ce=this.gg=this.xu=this.E1=null;this.jY=[];this.HH=null;this.Lqa=0;this.GH="12px Arial";this.eqc=this.nd="";this.uk=this.$h=this.Zba=this.bV=0;this.zNb=!0;this.qqa=this.iAa=0;this.Ke=this.To=null;this.Dnc=!0;this.rlc=this.BSb.bind(this);this.R2a=!1;null==b&&(b={});var d=_geo.geotoolkit.Ca(b,{formatter:b.formatter instanceof _geo.geotoolkit.util.hJ?b.formatter:null,margintext:null!=b.margintext?
b.margintext:2,font:null!=b.font?b.font:this.GH,textcolor:null!=b.textcolor?b.textcolor:"black",symbolsize:null!=b.symbolsize?b.symbolsize:0,height:null!=b.height?b.height:20,internalpadding:null!=b.internalpadding?b.internalpadding:4,externalpadding:null!=b.externalpadding?b.externalpadding:4,valuevisible:null!=b.valuevisible?b.valuevisible:!0,linestyle:null!=b.linestyle?b.linestyle:new _geo.geotoolkit.attributes.Aa({color:"rgba(0, 0, 0, 0)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:null!=b.fillstyle?
b.fillstyle:new _geo.geotoolkit.attributes.Fa({color:"rgba(0, 0, 0, 0)"}),fixedwidth:b.fixedwidth,nanvisibility:null!=b.nanvisibility?b.nanvisibility:!0,formatdatahandler:null,singlerow:null!=b.singlerow?b.singlerow:!1});this.Cg();this.setOptions(d)}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.shapes.kH);_geo.geotoolkit.da(b,"geotoolkit.widgets.timeseries.TimeSeriesTooltipLegendItem");b.prototype.Cg=function(){this.Ad(!0);this.Qf(!1);this.B8a();this.uh()};b.prototype.setOptions=function(a){if(null==
a)return this;a=_geo.geotoolkit.rc(a);var b=_geo.geotoolkit.Ca(a,{});b.linestyle=null;b.fillstyle=null;_geo.geotoolkit.Cc(this,b);a.hasOwnProperty("height")&&(this.$h=a.height);a.formatter&&(this.HH=a.formatter);null!=a.margintext&&(this.Lqa=a.margintext);null!=a.font&&(this.GH=a.font);null!=a.textcolor&&(this.eqc=a.textcolor);null!=a.symbolsize&&(this.bV=a.symbolsize);null!=a.externalpadding&&(this.Zba=a.externalpadding);null!=a.internalpadding&&(this.qqa=a.internalpadding);null!=a.linestyle&&(this.To=
_geo.geotoolkit.attributes.Aa.ab(a.linestyle));null!=a.fillstyle&&(this.Ke=_geo.geotoolkit.attributes.Fa.ab(a.fillstyle));void 0!==a.fixedwidth&&(this.iAa=a.fixedwidth);void 0!==a.valuevisible&&(this.zNb=a.valuevisible);void 0!==a.nanvisibility&&(this.Dnc=a.nanvisibility);a.formatdatahandler&&(this.rlc=a.formatdatahandler);a.hasOwnProperty("singlerow")&&(this.R2a=a.singlerow);this.uh();return this};b.prototype.ja=function(a){return this.setOptions(a)};b.prototype.B8a=function(){this.ve=10;var a=[];
this.jh();a.push(this.gg=new _geo.geotoolkit.scene.shapes.Symbol({alignment:_geo.geotoolkit.util.Da.lb,width:this.bV,height:this.bV,sizeIsInDeviceSpace:!0}));a.push(this.nd=new _geo.geotoolkit.scene.shapes.Text);a.push(this.uk=new _geo.geotoolkit.scene.shapes.Text);this.va(this.E1=new _geo.geotoolkit.scene.shapes.lc);this.va(a)};b.prototype.S5a=function(a){return null!=this.HH?this.HH.format(a):a};b.prototype.BSb=function(a){return{id:a.id,name:a.name,symbol:a.symbol,valuetext:this.S5a(a.valuetext),
unittext:a.unittext}};b.prototype.uh=function(){var a=0,b=0,d=0,e,c,f=this.rlc(this.Ed().getData()),k=null!=this.gg&&null!=f.symbol?this.bV:0,h=new _geo.geotoolkit.attributes.eb({color:this.eqc,font:this.GH}),l=this.Zba+this.qqa;null!=this.nd&&(c=f.name,this.R2a&&(c+=" - "+f.valuetext,c+=f.unittext),e=_geo.geotoolkit.renderer.TextMetrics.measureText(c,h),a=k>e.ba()?k:e.ba(),d+=a,b=e.aa(),this.nd.ja({text:c,ax:l+k+(0!==k?this.Lqa:0),ay:l+a/2,textstyle:h}),this.nd.Cd(_geo.geotoolkit.util.Da.We));null!=
this.gg&&null!=f.symbol&&(this.gg.ja({ax:l+k/2,ay:l+d/2,alignment:_geo.geotoolkit.util.Da.lb,width:k,height:k,sizeIsInDeviceSpace:!0,painter:f.symbol.MP().getClassName(),linestyle:f.symbol.Xa(),fillstyle:f.symbol.sb()}),b+=this.Lqa+k);d+=this.Lqa;this.uk.Ka(this.R2a?!1:this.zNb);null==this.uk||!0!==this.zNb||this.R2a||(c="",f.valuetext&&(c+=f.valuetext),f.unittext&&(c+=f.unittext),e=_geo.geotoolkit.renderer.TextMetrics.measureText(c,h),a=e.ba(),b=e.aa()>b?e.aa():b,this.uk.ja({text:c,ax:l,ay:l+d+a/
2,textstyle:h}),d+=e.ba(),this.uk.Cd(_geo.geotoolkit.util.Da.We),!1===this.Dnc&&(0,window.isNaN)(f.valuetext)?this.Ka(!1):this.Ka(!0));b=null!=this.iAa?this.iAa-2*(this.Zba+this.qqa):b;this.E1.zb(new _geo.geotoolkit.util.Rect(this.Zba,this.Zba,this.Zba+b+2*this.qqa,this.Zba+d+2*this.qqa)).ua(this.To).ta(this.Ke);b+=2*(this.Zba+this.qqa);d=this.R2a?d+(this.Zba+this.qqa):d+2*(this.Zba+this.qqa);this.Ul(b).zk(d).Qf(!0);this.Ja(_geo.geotoolkit.controls.shapes.kH.$.Iy,this)};return b}();
_geo.geotoolkit.oa.Vgc=function(){function b(a){this.la={pos:void 0!==a.pos?a.pos:"right",thumbwidth:void 0!==a.thumbwidth?a.thumbwidth:20,thumbsize:void 0!==a.thumbsize?a.thumbsize:null,thumbminsize:void 0!==a.thumbminsize?a.thumbminsize:30};this.Bja=this.yp=this.eq=null;"top"===this.la.pos.toLowerCase()||"bottom"===this.la.pos.toLowerCase()?this.kE=!0:this.kE=!1;this.Cg()}_geo.geotoolkit.da(b,"geotoolkit.widgets.ScrollBar");b.prototype.Cg=function(){function a(c){e=!1;_geo.geotoolkit.controls.util.Xp.SZ("pointermove").forEach(function(a){window.removeEventListener(a,
b,!0)});_geo.geotoolkit.controls.util.Xp.SZ("pointerup").forEach(function(b){window.removeEventListener(b,a,!0)});null!=d.Bja&&d.Bja(0,0,d.la.pos);c.stopPropagation();c.preventDefault()}function b(a){if(e){var g=0,g=d.kE?a.clientX:a.clientY,h=g-c,h=d.vg+h;c=g;0<=h&&h+d.jgd()<=d.Htb()&&(d.vg=h,d.DQc(h),d.ZQc(h*d.PKb));a.stopPropagation();a.preventDefault()}}this.Cja=window.document.createElement("div");this.Ai=window.document.createElement("div");this.Ai.className="scrollbar_track";this.nM=window.document.createElement("div");
this.nM.className="scrollbar_thumb";this.Ai.appendChild(this.nM);this.Cja.appendChild(this.Ai);this.Cja.style.position="absolute";this.Ai.style.position="absolute";this.Ai.style.left="0px";this.Ai.style.top="0px";this.Ai.style.right="0px";this.Ai.style.bottom="0px";this.Ai.style.border="1px solid gray";this.nM.style.border="1px outset black";this.nM.style.left="1px";this.nM.style.top="1px";this.kE?(this.nM.style.bottom="1px",this.Cja.style.height=this.la.thumbwidth+"px","top"===this.la.pos.toLowerCase()?
this.Cja.style.top="0px":this.Cja.style.bottom="0px"):(this.nM.style.right="1px",this.Cja.style.width=this.la.thumbwidth+"px","left"===this.la.pos.toLowerCase()?this.Cja.style.left="0px":this.Cja.style.right="0px");var d=this,e=!1,c=0;_geo.geotoolkit.controls.util.Xp.SZ("pointerdown").forEach(function(f){this.nM.addEventListener(f,function(f){e=!0;c=d.kE?f.clientX:f.clientY;d.ZQc(d.vg*d.PKb);_geo.geotoolkit.controls.util.Xp.SZ("pointermove").forEach(function(a){window.addEventListener(a,b,!0)});_geo.geotoolkit.controls.util.Xp.SZ("pointerup").forEach(function(b){window.addEventListener(b,
a,!0)})},!1)}.bind(this))};b.prototype.es=function(){return this.Cja};b.prototype.jT=function(a,b){if(null!=a&&null!=b)if(this.eq=new _geo.geotoolkit.util.Rect(a),this.yp=new _geo.geotoolkit.util.Rect(b),this.IEa()>this.FXb()&&0!==this.Htb()-this.XMb-2){this.nM.style.visibility="visible";var d=0;null!=this.la.thumbsize?d=this.la.thumbsize:(d=this.Htb()/this.IEa()*this.FXb(),d<this.la.thumbminsize&&(d=this.la.thumbminsize));this.XMb=Math.floor(d);this.PKb=(this.IEa()-this.FXb())/(this.Htb()-this.XMb-
2);this.vg=Math.round(this.ygd()/this.PKb);this.Npd(this.XMb);this.DQc(this.vg)}else this.nM.style.visibility="hidden";else this.nM.style.visibility="hidden"};b.prototype.FXb=function(){return this.kE?this.yp.aa():this.yp.ba()};b.prototype.IEa=function(){return this.kE?this.eq.aa():this.eq.ba()};b.prototype.jgd=function(){return this.kE?this.nM.offsetWidth:this.nM.offsetHeight};b.prototype.Htb=function(){return this.kE?this.Ai.offsetWidth:this.Ai.offsetHeight};b.prototype.Npd=function(a){this.kE?
this.nM.style.width=a+"px":this.nM.style.height=a+"px"};b.prototype.DQc=function(a){this.kE?this.nM.style.left=a+"px":this.nM.style.top=a+"px"};b.prototype.ygd=function(){return this.kE?this.yp.sa()-this.eq.sa():this.yp.qa()-this.eq.qa()};b.prototype.ZQc=function(a){this.kE?this.translate(this.yp.sa()-this.eq.sa()-a,0):this.translate(0,this.yp.qa()-this.eq.qa()-a)};b.prototype.translate=function(a,b){if(0!==a||0!==b)null!=this.Bja&&this.Bja(a,b,this.la.pos),this.yp.setX(this.yp.getX()-a),this.yp.setY(this.yp.getY()-
b)};b.prototype.kyb=function(a){this.Bja=a};return b}();
_geo.geotoolkit.oa.Wgc=function(){function b(a){this.la={pos:void 0!==a.pos?a.pos:"right",manual:void 0!==a.manual?a.manual:!1,scrollenabled:void 0!==a.scrollenabled?a.scrollenabled:!1,autohide:void 0!==a.autohide?a.autohide:!1,thumbwidth:void 0!==a.thumbwidth?a.thumbwidth:20,thumbsize:void 0!==a.thumbsize?a.thumbsize:null,thumbminsize:void 0!==a.thumbminsize?a.thumbminsize:30,cornersize:void 0!==a.cornersize?a.cornersize:a.thumbwidth?a.thumbwidth:20};!0===this.la.manual&&(this.la.scrollenabled=!1);
this.lo={};this.SHb={};this.Bja=this.FNb=this.yp=this.eq=null;this.Cg()}var a=.375;_geo.geotoolkit.da(b,"geotoolkit.widgets.ScrollPanel");b.prototype.Cg=function(){function b(a,c,e){d.la.manual?null!=d.Bja&&d.Bja(a*d.SHb[e],c*d.SHb[e]):(d.yp.setX(d.yp.getX()-a),d.yp.setY(d.yp.getY()-c),d.Iq.style.left=-d.yp.getX()+"px",d.Iq.style.top=-d.yp.getY()+"px")}var d=this;this.iBa=_geo.geotoolkit.window.document.createElement("div");this.iBa.className="overview";this.x7=_geo.geotoolkit.window.document.createElement("div");
this.x7.style.position="absolute";this.x7.style.left="0px";this.x7.style.right="0px";this.x7.style.top="0px";this.x7.style.bottom="0px";this.x7.style.overflow="hidden";this.la.manual?this.Iq=this.iBa:(this.Iq=_geo.geotoolkit.window.document.createElement("div"),this.Iq.appendChild(this.iBa),this.iBa.addEventListener("DOMSubtreeModified",function(){d.vi()},!1),this.la.scrollenabled&&("onmousewheel"in this.Iq?this.Iq.addEventListener("mousewheel",function(b){d.Iq.style.top=-(-(0,window.parseInt)(_geo.geotoolkit.window.getComputedStyle(d.Iq).top)-
Math.round(a*b.wheelDelta))+"px";d.vi()}):this.Iq.addEventListener("wheel",function(b){d.Iq.style.top=-(-(0,window.parseInt)(_geo.geotoolkit.window.getComputedStyle(d.Iq).top)-Math.round(-40*a*b.deltaY))+"px";d.vi()})));this.x7.appendChild(this.Iq);for(var e=this.la.pos.split(" "),c,f=0;f<e.length;++f)0<=["left","right","top","bottom"].indexOf(e[f].toLowerCase())&&(c=e[f].toLowerCase(),void 0===this.lo[c]&&(this.lo[c]=new _geo.geotoolkit.oa.Vgc({pos:c,thumbwidth:this.la.thumbwidth,thumbsize:this.la.thumbsize,
thumbminsize:this.la.thumbminsize}),this.lo[c].kyb(b),this.x7.appendChild(this.lo[c].es())));this.Iq.style.position="absolute";this.Iq.style.left="0px";this.Iq.style.right="0px";this.Iq.style.top="0px";this.Iq.style.bottom="0px";for(c in this.lo)this.lo.hasOwnProperty(c)&&(this.Iq.style[c]=this.la.autohide?0:this.la.thumbwidth+"px","left"===c||"right"===c?(this.lo[c].es().style.top="0px",this.lo[c].es().style.bottom="0px",this.lo.top&&(this.lo[c].es().style.top=this.la.cornersize+"px"),this.lo.bottom&&
(this.lo[c].es().style.bottom=this.la.cornersize+"px")):(this.lo[c].es().style.left="0px",this.lo[c].es().style.right="0px",this.lo.left&&(this.lo[c].es().style.left=this.la.cornersize+"px"),this.lo.right&&(this.lo[c].es().style.right=this.la.cornersize+"px")),this.la.autohide&&(this.lo[c].es().style.visibility="hidden"))};b.prototype.Uka=function(){return this.x7};b.prototype.cDc=function(){return this.iBa};b.prototype.jT=function(a,b,e){var c;if(null!=a&&null!=b&&null!=e)for(c in this.eq=new _geo.geotoolkit.util.Rect(a),
this.yp=new _geo.geotoolkit.util.Rect(b),this.FNb=new _geo.geotoolkit.util.Rect(e),this.lo)this.lo.hasOwnProperty(c)&&(this.SHb[c]="top"===c||"bottom"===c?this.FNb.aa()/this.yp.aa():this.FNb.ba()/this.yp.ba());for(c in this.lo)this.lo.hasOwnProperty(c)&&this.lo[c].jT(a,b);return this};b.prototype.vi=function(){var a;this.eq=new _geo.geotoolkit.util.Rect(0,0,this.iBa.offsetWidth,this.iBa.offsetHeight);if(this.la.autohide){var b=new _geo.geotoolkit.util.Rect(0,0,this.x7.offsetWidth,this.x7.offsetHeight);
for(a in this.lo)this.lo.hasOwnProperty(a)&&(this.Iq.style[a]="0px",this.lo[a].es().style.visibility="hidden");this.eq.aa()<=b.aa()&&this.eq.ba()<=b.ba()?this.yp=b:(this.eq.aa()>b.aa()&&(this.lo.top&&(this.lo.top.es().style.visibility="visible",this.Iq.style.top=this.la.thumbwidth+"px"),this.lo.bottom&&(this.lo.bottom.es().style.visibility="visible",this.Iq.style.bottom=this.la.thumbwidth+"px"),b.Db(this.Iq.offsetHeight)),this.eq.ba()>b.ba()&&(this.lo.left&&(this.lo.left.es().style.visibility="visible",
this.Iq.style.left=this.la.thumbwidth+"px"),this.lo.right&&(this.lo.right.es().style.visibility="visible",this.Iq.style.right=this.la.thumbwidth+"px"),b.qb(this.Iq.offsetWidth)),this.eq.aa()>b.aa()&&(this.lo.top&&(this.lo.top.es().style.visibility="visible",this.Iq.style.top=this.la.thumbwidth+"px"),this.lo.bottom&&(this.lo.bottom.es().style.visibility="visible",this.Iq.style.bottom=this.la.thumbwidth+"px"),b.Db(this.Iq.offsetHeight)),this.yp=b,this.yp.setX(-(0,window.parseInt)(_geo.geotoolkit.window.getComputedStyle(this.Iq).left)),
this.yp.setY(-(0,window.parseInt)(_geo.geotoolkit.window.getComputedStyle(this.Iq).top)))}else this.yp=new _geo.geotoolkit.util.Rect(-(0,window.parseInt)(_geo.geotoolkit.window.getComputedStyle(this.Iq).left),-(0,window.parseInt)(_geo.geotoolkit.window.getComputedStyle(this.Iq).top),this.Iq.offsetWidth,this.Iq.offsetHeight);this.yp.getX()<this.eq.getX()&&this.yp.setX(this.eq.getX());this.yp.getY()<this.eq.getY()&&this.yp.setY(this.eq.getY());this.yp.za()>this.eq.za()&&this.yp.setX(Math.max(this.eq.getX(),
Math.round(this.eq.za()-this.yp.aa())));this.yp.wa()>this.eq.wa()&&this.yp.setY(Math.max(this.eq.getY(),Math.round(this.eq.wa()-this.yp.ba())));this.Iq.style.left=-this.yp.getX()+"px";this.Iq.style.top=-this.yp.getY()+"px";for(a in this.lo)this.lo.hasOwnProperty(a)&&this.lo[a].jT(this.eq,this.yp)};b.prototype.kyb=function(a){this.Bja=a;return this};return b}();
_geo.geotoolkit.oa.Qm=function(){function b(a){a=_geo.geotoolkit.Ca(a,{bounds:new _geo.geotoolkit.util.Rect(0,0,300,300)});a.hasOwnProperty("children")&&delete a.children;_geo.geotoolkit.scene.Group.call(this,a);this.$z=new _geo.geotoolkit.controls.ia.Xl(this,"compositeTool")}_geo.geotoolkit.Me.uXa.fnd(function(a){var b=a.getRoot();return null!=b&&b instanceof _geo.geotoolkit.oa.Qm?(new _geo.geotoolkit.controls.ia.KFb(a,!0)).add(b.ld()):null});_geo.geotoolkit.fa(b,_geo.geotoolkit.scene.Group);_geo.geotoolkit.da(b,
"geotoolkit.widgets.BaseWidget");b.prototype.Sg=function(){return this};b.prototype.nVa=function(){return _geo.geotoolkit.util.zf.Za()};b.prototype.rr=function(a){this.$z.add(a);return this};b.prototype.gz=function(a){this.$z.remove(a);return this};b.prototype.ld=function(){return this.$z};b.prototype.KUa=function(a){this.$z=a;return this};b.prototype.xg=function(a){return null==a||1>a.length?null:this.$z.xg(a)};b.prototype.GK=function(a){return null==a?null:this.$z.GK(a)};b.prototype.nN=function(){return this.$z.nN()};
b.prototype.dispose=function(){this.uz()||(this.$z.dispose(),this.$z=null,_geo.geotoolkit.scene.Group.prototype.dispose.call(this))};b.prototype.vD=function(a,b){var d=new _geo.geotoolkit.Bd.lha(b||_geo.geotoolkit.oa.Ff.ue.lq()),d=d.sV(a);d.gq("#widget",this);d.Ed(this.getClassName(),"template")};b.prototype.OI=function(a){a=new _geo.geotoolkit.Bd.lha(a||_geo.geotoolkit.oa.Ff.ue.lq());return a.IW("template",this)};b.prototype.getData=function(a){return{}};b.prototype.ka=function(){var a=_geo.geotoolkit.scene.Group.prototype.ka.call(this);
a.hasOwnProperty("children")&&delete a.children;return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);a.hasOwnProperty("children")&&delete a.children;_geo.geotoolkit.scene.Group.prototype.ja.call(this,a);return this};return b}();
_geo.geotoolkit.oa.Sd.Fga=function(){function b(a){_geo.geotoolkit.util.EventDispatcher.call(this);this.hl=a;this.jP=!0;this.pR=!1}_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);b.$={Jha:"StateChanged"};b.prototype.dispose=function(){var a=this;_geo.geotoolkit.util.EventDispatcher.prototype.dispose.call(this);for(var b in a)a.hasOwnProperty(b)&&"object"===typeof a[b]&&(a[b]=null)};b.prototype.UP=function(){return this.hl};b.prototype.Uu=function(a){this.Ja(_geo.geotoolkit.oa.Sd.Fga.$.Jha,
this,a);return this};b.prototype.ib=function(){return this.jP};b.prototype.Ka=function(a){if(this.jP===a)return this;this.jP=a;this.Uu("Visible");return this};b.prototype.dUb=function(){return this.pR};b.prototype.cc=function(a){if(this.pR===a)return this;this.pR=a;this.Uu("Enabled");return this};return b}();
_geo.geotoolkit.oa.Sd.pXa=function(){function b(){}b.prototype.getName=_geo.geotoolkit.Ia;b.prototype.yb=_geo.geotoolkit.Ia;b.prototype.me=_geo.geotoolkit.Ia;b.prototype.jc=_geo.geotoolkit.Ia;b.prototype.be=_geo.geotoolkit.Ia;b.prototype.bl=_geo.geotoolkit.Ia;b.prototype.pj=_geo.geotoolkit.Ia;b.prototype.yc=_geo.geotoolkit.Ia;b.prototype.SP=_geo.geotoolkit.Ia;b.prototype.fu=_geo.geotoolkit.Ia;b.prototype.jb=_geo.geotoolkit.Ia;b.prototype.setOptions=_geo.geotoolkit.Ia;return b}();
_geo.geotoolkit.oa.Sd.saa=function(){function b(a){_geo.geotoolkit.util.EventDispatcher.call(this);a=_geo.geotoolkit.Ca(a,{name:"",text:"",target:null,anchor:null,options:null},!0);this.nd=a.name;this.Lb=a.text;this.kA=a.target;this.C1=a.anchor;this.gg=a.symbol;this.la=a.options}_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.sg(b,_geo.geotoolkit.oa.Sd.pXa);b.prototype.getName=function(){return this.nd};b.prototype.yb=function(a){if(this.nd===a)return this;this.nd=a;this.Ja(_geo.geotoolkit.util.EventDispatcher.$.Hn,
this);return this};b.prototype.me=function(){return this.Lb};b.prototype.jc=function(a){if(this.Lb===a)return this;this.Lb=a;this.Ja(_geo.geotoolkit.util.EventDispatcher.$.Hn,this);return this};b.prototype.be=function(){return this.gg};b.prototype.bl=function(a){if(this.gg===a)return this;this.gg=a;this.Ja(_geo.geotoolkit.util.EventDispatcher.$.Hn,this,"Symbol");return this};b.prototype.pj=function(){return this.C1};b.prototype.yc=function(a){if(this.C1.AM(a))return this;this.C1=a;this.Ja(_geo.geotoolkit.util.EventDispatcher.$.Hn,
this);return this};b.prototype.SP=function(){return this.kA};b.prototype.fu=function(a){if(this.kA===a)return this;this.kA=a;this.Ja(_geo.geotoolkit.util.EventDispatcher.$.Hn,this);return this};b.prototype.jb=function(){return this.la};b.prototype.setOptions=function(a){if(this.la===a)return this;this.la=_geo.geotoolkit.Ca(a,this.la||{});this.Ja(_geo.geotoolkit.util.EventDispatcher.$.Hn,this,"Options");return this};b.ab=function(a){return _geo.geotoolkit.Pk(a,_geo.geotoolkit.oa.Sd.pXa)?a:new _geo.geotoolkit.oa.Sd.saa(a)};
return b}();_geo.geotoolkit.oa.Sd.o0=function(){function b(a){this.Epa=!1;this.hw=a}b.prototype.cancel=function(){this.Epa=!0;return this};b.prototype.tz=function(){return this.Epa};b.prototype.vb=function(){return this.hw};b.prototype.dHa=function(a){this.hw=a;return this};return b}();
_geo.geotoolkit.oa.Sd.Bt=function(){function b(a,b){_geo.geotoolkit.oa.Sd.Fga.call(this,a);this.Rd=_geo.geotoolkit.util.Mb.$b;this.a7=this.Klb=this.Qb=this.fP=this.Xo=null;b=_geo.geotoolkit.Ca(b,{overlay:null,cancreate:!0,candelete:!0,canedit:!0,canmove:!0});this.rLb=b.overlay;this.Cg();this.setOptions(b);this.Dlb=function(){this.oGa()}.bind(this);this.Mc().kb(_geo.geotoolkit.scene.Node.$.eO,this.Dlb);_geo.geotoolkit.window.addEventListener("resize",this.Dlb)}var a=new _geo.geotoolkit.util.xc(150,
50),g=new _geo.geotoolkit.util.dm(-10,-10);_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Sd.Fga);_geo.geotoolkit.da(b,"geotoolkit.widgets.overlays.AnnotationOverlay");b.$={r$b:"CreateAnnotation",mgc:"RemoveAnnotation",ZWa:"EditAnnotation",xxa:"ChangeActiveAnnotation"};b.prototype.dispose=function(){this.Mc().hb(_geo.geotoolkit.scene.Node.$.eO,this.Dlb);this.fP.dispose();this.Xo.dispose();this.Klb.dispose();_geo.geotoolkit.window.removeEventListener("resize",this.Dlb);_geo.geotoolkit.oa.Sd.Fga.prototype.dispose.call(this)};
b.prototype.Cg=function(){null==this.rLb&&(this.rLb=_geo.geotoolkit.selection.from(this.UP()).He(function(a){return a instanceof _geo.geotoolkit.scene.og}).He(function(a){return"overlays"===a.getName()}).tm());this.rLb.va([this.Xo=(new _geo.geotoolkit.scene.og({name:"overlay-annotations"})).va([this.fP=new _geo.geotoolkit.scene.og({name:"overlay-annotation-shapes"})])]);this.Sg()};b.prototype.Mc=function(){return this.UP().Mc()};b.prototype.AA=function(){return this.Xo};b.prototype.Sg=function(){this.UP().xg("overlay").add([this.Klb=
(new _geo.geotoolkit.controls.ia.Xl(this.Xo)).cc(!0).add([this.a7=(new _geo.geotoolkit.oa.Sd.JQ(this)).cc(!1).addListener("AnnotationChanged",function(){var a=new _geo.geotoolkit.oa.Sd.o0(this.fD());this.Ja(_geo.geotoolkit.oa.Sd.Bt.$.xxa,this,a)}.bind(this)).addListener("AnnotationEdited",function(){var a=new _geo.geotoolkit.oa.Sd.o0(this.fD());this.Ja(_geo.geotoolkit.oa.Sd.Bt.$.ZWa,this,a)}.bind(this))])])};b.prototype.oGa=function(){_geo.geotoolkit.selection.from(this.fP).He(function(a){return a instanceof
_geo.geotoolkit.oa.Sd.vC}).select(function(a){a.uh()})};b.prototype.Uu=function(a){_geo.geotoolkit.oa.Sd.Fga.prototype.Uu.call(this,a);this.Xo.Ka(this.ib());this.a7.cc(this.dUb());return this};b.prototype.Pka=function(a){return _geo.geotoolkit.selection.from(this.fP).He(function(a){return a instanceof _geo.geotoolkit.oa.Sd.vC}).He(function(b){return b.vb()===a}).tm()};b.prototype.setOptions=function(a){this.la=_geo.geotoolkit.Ca(a,this.la);this.a7.setOptions(this.la);return this};b.prototype.jb=function(){return this.la};
b.prototype.Zja=function(b){if(null===b)throw Error("annotation can not be null");if(!0!==this.la.cancreate)return null;var e=null;!1===_geo.geotoolkit.Pk(b,_geo.geotoolkit.oa.Sd.pXa)&&(e=_geo.geotoolkit.Ca(b.options,{frame:a.clone(),offset:new _geo.geotoolkit.util.na(g.getX()-a.aa()/2,g.getY()-a.ba()/2)}),b.options=e);e=new _geo.geotoolkit.oa.Sd.o0(b);this.Ja(_geo.geotoolkit.oa.Sd.Bt.$.r$b,this,e);if(e.tz())return null;b=_geo.geotoolkit.oa.Sd.saa.ab(b);if(null!=this.Pka(b))throw Error("annotation already exist");
this.fP.va([(new _geo.geotoolkit.oa.Sd.vC(b)).setOrientation(this.Rd)]);return b};b.prototype.MBa=function(a){this.fP.MBa(a);return this};b.prototype.uMa=function(){return this.fP.uMa()};b.prototype.t$=function(a){a=this.Pka(a);if(null==a||!0!==this.la.candelete)return this;var b=new _geo.geotoolkit.oa.Sd.o0(a.vb());this.Ja(_geo.geotoolkit.oa.Sd.Bt.$.mgc,this,b);if(b.tz())return this;this.a7.fD()===a&&this.a7.f5(null);this.fP.removeChild(a);b.dHa(this.fD());this.Ja(_geo.geotoolkit.oa.Sd.Bt.$.xxa,
this,b);return this};b.prototype.Uda=function(a){if(null==a)return this.a7.Uda(null),this;a=this.Pka(a);if(null==a||!0!==this.la.canedit)return this;var b=new _geo.geotoolkit.oa.Sd.o0(a.vb());this.Ja(_geo.geotoolkit.oa.Sd.Bt.$.ZWa,this,b);if(b.tz())return this;this.a7.Uda(a);return this};b.prototype.fMc=function(a){this.Pka(a);return this};b.prototype.byc=function(a){var b=[];_geo.geotoolkit.selection.from(this.fP).He(function(a){return a instanceof _geo.geotoolkit.oa.Sd.vC}).select(function(a){b.push(a.vb())});
return _geo.geotoolkit.util.Iterator.Zm(b,a)};b.prototype.fD=function(){var a=this.a7.fD();return null!=a?a.vb():null};b.prototype.f5=function(a){if(this.fD()===a)return this;var b=new _geo.geotoolkit.oa.Sd.o0(a);this.Ja(_geo.geotoolkit.oa.Sd.Bt.$.xxa,this,b);if(b.tz())return this;a=this.Pka(a);this.a7.f5(a);b.dHa(this.fD());this.Ja(_geo.geotoolkit.oa.Sd.Bt.$.xxa,this,b);return this};b.prototype.setOrientation=function(a){if(this.Rd===a)return this;this.Rd=a;_geo.geotoolkit.selection.from(this.fP).He(function(a){return a instanceof
_geo.geotoolkit.oa.Sd.vC}).B_().forEach(function(b){b.setOrientation(a)});return this};b.Jma=function(a,b){_geo.geotoolkit.oa.Sd.vC.Jma(a,b)};b.yd=function(a){return _geo.geotoolkit.oa.Sd.vC.yd(a)};return b}();
_geo.geotoolkit.oa.Sd.vC=function(){function b(a,c){this.hw=a;this.gLb=null;this.hw instanceof _geo.geotoolkit.util.EventDispatcher&&(this.gLb=function(a,b,c){"Symbol"===c&&this.Fob(b.be());"Options"===c&&this.ysc(b.jb());this.uh().ma()}.bind(this),this.hw.kb(_geo.geotoolkit.util.EventDispatcher.$.Hn,this.gLb));c=c||a.jb();var f=_geo.geotoolkit.Ca(c,{offset:null,frame:null,radius:0,orientation:_geo.geotoolkit.util.Mb.$b,visible:!0,linestyle:{color:g,width:1,pixelsnapmode:{x:!0,y:!0}},fillstyle:d,
cssclass:"AnnotationShape"},!0);_geo.geotoolkit.scene.shapes.rl.call(this,f);this.Ka(f.visible);this.ud=f.offset;this.aca=f.frame;this.fg=Math.abs(f.radius);this.Rd=f.orientation;this.qHb=1;this.m0a=b.hXa.VEb;this.Lf=null;this.Lb=(new _geo.geotoolkit.scene.shapes.Text({text:a.me(),ax:0,ay:0,width:150,height:50,textStyle:new _geo.geotoolkit.attributes.eb({color:"black",alignment:"left",font:"12px Arial",baseLine:"top"}),alignment:_geo.geotoolkit.util.Da.Gg,sizeIsInDeviceSpace:!0})).Cd(_geo.geotoolkit.util.Da.Gg).Gj(_geo.geotoolkit.scene.shapes.Text.jf.V6).Dy(!0);
this.bBa=this.kv=null;this.SLa=(new _geo.geotoolkit.scene.Group).Qf(!0).va([this.rHb=(new _geo.geotoolkit.scene.Group).Ad(!0).va([this.Kja=(new _geo.geotoolkit.scene.Group).Ad(!0).Ea(new _geo.geotoolkit.util.Rect(0,0,16,16)).Ka(!1),this.Lb])]);this.rHb.ee=function(){var a=this.ga();if(null==a||this.Rd!==_geo.geotoolkit.util.Mb.ic)return _geo.geotoolkit.scene.Group.prototype.ee.call(this);a=this.getParent().xa().ba();return _geo.geotoolkit.util.Ga.multiply(_geo.geotoolkit.util.Ga.kj(0,a),_geo.geotoolkit.util.Ga.dn(-Math.PI/
2,0,0))}.bind(this.rHb);this.T_a=this.GZa=this.cia=this.EZa=this.W6=this.Rb=null;this.Fob(a.be());this.ysc(a.jb())}var a={},g="#1565c0",d="#fdd835";_geo.geotoolkit.fa(b,_geo.geotoolkit.scene.shapes.rl);_geo.geotoolkit.da(b,"geotoolkit.widgets.overlays.AnnotationShape");b.$={veb:"GeometryChanged"};b.hXa={None:"none",ghc:"simple-arrow",VEb:"rectangle-callouts",OZc:"oval-callouts",UUc:"cloud-callouts"};b.prototype.dispose=function(){this.hw instanceof _geo.geotoolkit.util.EventDispatcher&&this.hw.hb(_geo.geotoolkit.util.EventDispatcher.$.Hn,
this.gLb);this.Fob(null);if(null!=this.Lf){if(Array.isArray(this.Lf))for(var a=0;a<this.Lf.length;a++)this.Lf[a].dispose();else this.Lf.dispose();this.Lf=null}null!=this.SLa&&(this.SLa.dispose(),this.SLa=null);_geo.geotoolkit.scene.shapes.rl.prototype.dispose.call(this)};b.prototype.vb=function(){return this.hw};b.prototype.Yk=function(){return this.Rd};b.prototype.setOrientation=function(a){if(this.Rd===a)return this;this.ma();this.Rd=a;this.rHb.Rd=a;a=this.ud.clone();var b=this.aca.clone();this.Rd===
_geo.geotoolkit.util.Mb.ic?this.ud.bb(a.y,-1*a.x):this.ud.bb(-1*a.y,a.x);this.aca.setSize(b.height,b.width);this.uh().ma();return this};b.prototype.jc=function(a){if(this.me()===a)return this;this.ma();this.hw.jc(a);this.uh().ma();return this};b.prototype.me=function(){return this.hw.me()};b.prototype.Fob=function(a){null!=this.kv&&null!=this.bBa&&(this.kv.hb(_geo.geotoolkit.scene.shapes.Image.$.Ws,this.bBa),this.bBa=null);this.Kja.jh().Sa(null).Ka(!1);this.kv=null;if(null==a)return this;if("string"==
typeof a||a instanceof _geo.geotoolkit.scene.shapes.Image)this.x4(a);else if(a instanceof _geo.geotoolkit.scene.Group)this.Kja.va(a).Ea(new _geo.geotoolkit.util.Rect(0,0,a.ga().aa(),a.ga().ba())).Sa(a.ga().clone()).Ka(!0);else{var b=a.width,d=a.height;null!=a.url&&"string"==typeof a.url?this.x4(a.url,b,d,a.keepaspectratio):null!=a.node&&a.node instanceof _geo.geotoolkit.scene.Node&&(a.node instanceof _geo.geotoolkit.scene.shapes.Image?this.x4(a.node,b,d,a.keepaspectratio):this.Kja.va(a.node).Ea(new _geo.geotoolkit.util.Rect(0,
0,b,d)).Sa(new _geo.geotoolkit.util.Rect(0,0,b,d)).Ka(!0))}this.Kja.ib()&&this.uh().ma();return this};b.prototype.x4=function(a,b,d,g){var h=null;this.kv=h=a instanceof _geo.geotoolkit.scene.shapes.Image?a.clone().Cd(_geo.geotoolkit.util.Da.Gg).yc(0,0).Ss(!1):new _geo.geotoolkit.scene.shapes.Image({x:0,y:0,alignment:_geo.geotoolkit.util.Da.Gg,url:a,sizeisindevicespace:!1});this.Kja.va(this.kv);var l=function(){b=b||this.kv.aa();d=d||this.kv.aa();this.Kja.Ea(new _geo.geotoolkit.util.Rect(0,0,b,d)).Sa(new _geo.geotoolkit.util.Rect(0,
0,this.kv.aa(),this.kv.ba())).Ka(!0);if(!1!==g&&(b!==this.kv.aa()||d!==this.kv.ba())){var a=this.kv.aa()/this.kv.ba(),e=b/d,a=e>a?new _geo.geotoolkit.util.xc(this.kv.aa()*d/this.kv.ba(),d):new _geo.geotoolkit.util.xc(b,this.kv.ba()*b/this.kv.aa());this.kv.setSize(a.aa(),a.ba());this.Kja.Sa(null)}this.uh().ma()}.bind(this);!1===h.loaded?(this.bBa=function(){this.kv.hb(_geo.geotoolkit.scene.shapes.Image.$.Ws,this.bBa);this.bBa=null;l()}.bind(this),this.kv.kb(_geo.geotoolkit.scene.shapes.Image.$.Ws,
this.bBa)):l()};b.prototype.be=function(){return this.hw.be()};b.prototype.bl=function(a){if(this.be()===a)return this;this.ma();this.hw.bl(a);this.Fob(a).uh().ma();return this};b.prototype.SP=function(){return this.hw.SP()};b.prototype.fu=function(a){if(this.SP()===a)return this;this.hw.fu(a);this.uh().ma();return this};b.prototype.Bn=function(){return this.ud};b.prototype.lp=function(a){if(null!=this.ud&&this.ud.AM(a,_geo.geotoolkit.util.Math.Jc))return this;this.ma();this.ud=_geo.geotoolkit.util.na.ab(a);
null!=this.hw&&this.hw.setOptions({offset:this.ud});this.uh().ma();return this};b.prototype.Bn=function(){return this.ud};b.prototype.r2b=function(a){if(this.qHb===a)return this;this.ma();this.qHb=a;this.uh().ma();return this};b.prototype.wTb=function(){return this.qHb};b.prototype.pj=function(){return this.hw.pj()};b.prototype.yc=function(a){if(null!=this.pj()&&this.pj().AM(a,_geo.geotoolkit.util.Math.Jc))return this;this.ma();this.hw.yc(a);this.uh().ma();return this};b.prototype.Un=function(a,b){var d=
new _geo.geotoolkit.selection.am;if(a instanceof _geo.geotoolkit.util.Rect){var g=[a.sa(),a.za(),a.za(),a.sa()],h=[a.qa(),a.qa(),a.wa(),a.wa()];return d.select(this.getRoot(),g,h,!0).filter(function(a){return!(a instanceof _geo.geotoolkit.scene.Node)&&a.visual===this}.bind(this))}return d.select(this.getRoot(),a.x,a.y,b?b:10).filter(function(a){return!(a instanceof _geo.geotoolkit.scene.Node)&&a.visual===this}.bind(this))};b.prototype.render=function(a){function b(a){-1===h.indexOf(this)&&h.push(this)}
var d=null!=this.mb()?a.qc(this.mb()):a;this.yk(d);if(a instanceof _geo.geotoolkit.renderer.rL)null==this.T_a&&(this.uh(a.Ra()),this.T_a={path:this.Lf,textarea:this.SLa});else if(null==this.Rb||null!=this.T_a)this.T_a=null,this.uh();var g=a.Gd(),h=g?[]:null;if(null!=this.Lf)if(Array.isArray(this.Lf))for(var l=0;l<this.Lf.length;l++)g?a.ls(this.Lf[l],b.bind(this.Lf[l])):this.Lf[l].render(d);else this.Lf.render(d);this.SLa.render(d);d.Gd()&&(a.ta(_geo.geotoolkit.attributes.Fa.Ui),a.ua(null),a.zc(this.iHb));
this.hk(d);g&&0<h.length&&a.bp({visual:this,paths:h})};b.prototype.ga=function(){null==this.Rb&&this.uh();return this.Rb};b.prototype.uh=function(b){if(null!=this.T_a)return this;var c=this.SP(),d=this.pj();if(null==this.getParent()||null==d||null==c||null==c.Ya()||null==this.ud||null==this.aca)return this;this.Lb.jc(this.hw.me());var g=c.Ya(),c=this.Ya();if(null!=b)var h=_geo.geotoolkit.util.Ga.divide(b,this.Ya()),c=_geo.geotoolkit.util.Ga.multiply(h,c),g=_geo.geotoolkit.util.Ga.multiply(h,g);var d=
g.cb(d),g=this.aca.clone(),g=new _geo.geotoolkit.util.xc(g.width/2,g.height/2),l=d.clone().bb(d.getX()+this.ud.getX(),d.getY()+this.ud.getY()),h=new _geo.geotoolkit.util.Rect(l.x-g.width,l.y-g.height,l.x+g.width,l.y+g.height),g=h.clone().fe(-4),n=new _geo.geotoolkit.util.na(Number.NaN,Number.NaN),p=new _geo.geotoolkit.util.na(Number.NaN,Number.NaN),p=h.Lda(d,l,n,p),l=0!==p?n:l,n=n=null;a.hasOwnProperty(this.m0a)&&(n=a[this.m0a]);null==n&&(n=_geo.geotoolkit.oa.Sd.yIa.CUc.wad);p=_geo.geotoolkit.Ca(this.la,
this.ka(),!0);p.annotation=this.hw;n=n.call(this,b,d,l,h,p);this.Lf=null!=n?n.geometry:null;b=null;if(null!=this.Lf)for(var p=Array.isArray(this.Lf)?this.Lf:[this.Lf],r=null,t=0;t<p.length;t++)r=p[t].ga(),null!=c&&(r=c.qe(r),p[t].yd().transform(c.Vd())),b=null==b?r:b.clone().union(r);n=null!=n?n.clip:null;p=null;null!=n&&(p=new _geo.geotoolkit.attributes.Jx(c?n.transform(c.Vd()):n));this.ms(p);this.iHb=null!=c?c.qe(h):h;this.Rb=null!=b?b.union(this.iHb):this.iHb;this.W6=h;this.cia=g;this.SLa.Ea(g.clone()).Td(null!=
c?c.Vd():null).Sa(new _geo.geotoolkit.util.Rect(0,0,g.aa(),g.ba()));c=0;!1===this.Kja.ib()?this.Lb.yc(0,0):(c=this.Kja.ga().aa()+2,this.Lb.yc(c,0),g.setX(g.getX()+c).qb(g.aa()-c));this.Rd===_geo.geotoolkit.util.Mb.$b?this.Lb.kT(g.aa(),g.ba()):this.Lb.kT(g.ba()-c,g.aa()+c);this.GZa={"top-left":new _geo.geotoolkit.util.na(this.cia.sa(),this.cia.qa()),"top-right":new _geo.geotoolkit.util.na(this.cia.za(),this.cia.qa()),"bottom-right":new _geo.geotoolkit.util.na(this.cia.za(),this.cia.wa()),"bottom-left":new _geo.geotoolkit.util.na(this.cia.sa(),
this.cia.wa())};this.EZa={anchor:d,offset:l,center:new _geo.geotoolkit.util.na(this.W6.Pc(),this.W6.Qc()),"top-left":new _geo.geotoolkit.util.na(this.W6.sa(),this.W6.qa()),"top-right":new _geo.geotoolkit.util.na(this.W6.za(),this.W6.qa()),"bottom-right":new _geo.geotoolkit.util.na(this.W6.za(),this.W6.wa()),"bottom-left":new _geo.geotoolkit.util.na(this.W6.sa(),this.W6.wa())};this.k_b();return this};b.prototype.k_b=function(){this.Ja(b.$.veb,this)};b.prototype.yTb=function(a){if(void 0===a)return this.EZa;
var b={},d;for(d in this.EZa)this.EZa.hasOwnProperty(d)&&(b[d]=a.Ue(this.EZa[d]));return b};b.prototype.iXb=function(a){if(void 0===a)return this.GZa;var b={},d;for(d in this.GZa)this.GZa.hasOwnProperty(d)&&(b[d]=a.Ue(this.GZa[d]));return b};b.prototype.SMc=function(a,b){this.ma();this.aca.setSize(a,b);this.uh().ma();return this};b.prototype.Grb=function(){return this.aca};b.prototype.kxb=function(a){if(null!=this.aca&&this.aca.YRb(a,_geo.geotoolkit.util.Math.Jc))return this;this.ma();this.aca=_geo.geotoolkit.util.xc.ab(a);
null!=this.hw&&this.hw.setOptions({frame:this.aca});this.uh().ma();return this};b.prototype.Iea=function(){return this.fg};b.prototype.XI=function(a){if(null==a)throw Error("radius can not be null");if(this.fg===a)return this;this.ma();this.fg=a;this.uh().ma();return this};b.prototype.zAc=function(){return this.m0a};b.prototype.l3b=function(a){if(this.m0a===a)return this;this.ma();this.m0a=a;this.uh().ma();return this};b.prototype.ysc=function(a){this.la=a;this.ja(a);return this};b.prototype.ka=function(){var a=
_geo.geotoolkit.scene.shapes.rl.prototype.ka.call(this);a.textstyle=this.Lb.Ib();a.connectorsize=this.wTb();a.radius=this.Iea();a.frame=this.Grb();a.offset=this.Bn();return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);_geo.geotoolkit.Cc(this,a);a.hasOwnProperty("textstyle")&&this.Lb.wb(a.textstyle).Pa();a.hasOwnProperty("connectorsize")&&this.r2b(a.connectorsize);a.hasOwnProperty("geometrytype")&&this.l3b(a.geometrytype);a.hasOwnProperty("radius")&&this.XI(a.radius);
a.hasOwnProperty("frame")&&this.kxb(a.frame);a.hasOwnProperty("offset")&&this.lp(a.offset);return this};b.Jma=function(b,c){a[b]=c};b.yd=function(b){return a[b]};b.Jma(b.hXa.None,function(){return null});return b}();
_geo.geotoolkit.oa.Sd.JQ=function(){function b(b,c){var f={pointerdown:this.xf.bind(this),pointermove:[{callback:this.Wd.bind(this),object:null}],pointerup:[{callback:this.Ae.bind(this),object:null},{callback:this.Ae.bind(this),object:_geo.geotoolkit.window,enabled:!1}],dblclick:this.acd};_geo.geotoolkit.controls.ia.fc.call(this,f,"annotation");this.Eh=new _geo.geotoolkit.selection.am;this.nj=null;this.NZa=b;this.hl=this.NZa.UP();this.Xo=this.NZa.AA();this.Qb=null;this.Xo.va([this.Qb=new _geo.geotoolkit.scene.og({name:"overlay-annotation-manipulator",
dynamic_layer:!0})]);this.Jd=new _geo.geotoolkit.util.na(0,0);this.Af=new _geo.geotoolkit.util.na(0,0);this.Jj=new _geo.geotoolkit.util.na(0,0);this.f8=new d({centerx:0,centery:0,radiusx:4,radiusy:4,linestyle:{color:"#1565c0",width:1,pixelsnapmode:{x:!0,y:!0}},fillstyle:"#C1E3E8",visible:!1});this.Jb={anchor:this.f8.clone().ta("#8BE73D"),"top-left":this.f8.clone(),"top-right":this.f8.clone(),"bottom-left":this.f8.clone(),"bottom-right":this.f8.clone()};this.f8.ta(a);this.Qb.va([this.f8]);for(var g in this.Jb)this.Jb.hasOwnProperty(g)&&
this.Qb.va(this.Jb[g]);this.Xza=!1;this.jd=this.iv=this.wGb=null;this.ohd();c=_geo.geotoolkit.Ca(c,{cancreate:!0,candelete:!0,canedit:!0,canmove:!0});this.setOptions(c);this.coc=function(a,b,c){this.bka(!1);this.Rh()}.bind(this)}var a="#fdd835",g=new _geo.geotoolkit.util.Ga,d=function(){function a(b,d,e,g,l,n,p){b=_geo.geotoolkit.Ca(b,{centerx:"number"==typeof b?b:0,centery:"number"==typeof d?d:0,radiusx:"number"==typeof e?e:10,radiusy:"number"==typeof g?g:10,visible:"boolean"==typeof l?l:!0,linestyle:n instanceof
_geo.geotoolkit.attributes.Aa?n:null,fillstyle:p instanceof _geo.geotoolkit.attributes.Fa?p:null},!0);this.Xe=new _geo.geotoolkit.util.na(b.centerx,b.centery);this.fg=new _geo.geotoolkit.util.xc(b.radiusx,b.radiusy);d=this.Xe.x-this.fg.width;e=this.Xe.y-this.fg.height;g=this.Xe.x+this.fg.width;l=this.Xe.y+this.fg.height;this.Um=!1;_geo.geotoolkit.scene.shapes.nn.call(this,d,e,g,l,0,0,b.visible,b.linestyle,b.fillstyle)}_geo.geotoolkit.fa(a,_geo.geotoolkit.scene.shapes.nn);_geo.geotoolkit.da(a,"geotoolkit.widgets.overlays.AnnotationTool-Handle");
a.prototype.clone=function(){return new a({centerx:this.Xe.x,centery:this.Xe.y,radiusx:this.fg.width,radiusy:this.fg.height,visible:this.ib(),linestyle:this.Xa(),fillstyle:this.sb()})};a.prototype.uwd=function(){return this.Um};a.prototype.setActive=function(a){if(this.Um===a)return this;this.Um=a;this.ma();return this};a.prototype.Wu=function(a){if(this.Xe.AM(a,_geo.geotoolkit.util.Math.Jc))return this;this.ma();this.Xe.x=a.x;this.Xe.y=a.y;var b=_geo.geotoolkit.util.Ec.oc(this.fg.aa(),0,this.Ya()),
d=_geo.geotoolkit.util.Ec.oc(0,this.fg.ba(),this.Ya());a=this.Xe.x-b;var e=this.Xe.y-d,b=this.Xe.x+b,d=this.Xe.y+d;this.zb(a,e,b,d);this.Pa();this.ma();return this};a.prototype.getCenter=function(){return this.Xe};a.prototype.render=function(a){a=null!=this.mb()?a.qc(this.mb()):a;this.yk(a);var b=_geo.geotoolkit.util.Ec.oc(this.fg.aa(),0,a.Ra()),d=_geo.geotoolkit.util.Ec.oc(0,this.fg.ba(),a.Ra());a.ta(this.sb(),this.bounds);a.ua(this.Xa());a.po(this.Xe.x-b,this.Xe.y-d,2*b,2*d);this.hk(a)};return a}();
_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.ia.fc);_geo.geotoolkit.da(b,"geotoolkit.widgets.overlays.AnnotationTool");b.prototype.dispose=function(){this.f5(null);this.rp.removeEventListener("keydown",this.Yza);this.dk.parentNode&&this.dk.parentNode.removeChild(this.dk);this.dk=null;this.Qb.dispose();_geo.geotoolkit.controls.ia.fc.prototype.dispose.call(this)};b.prototype.setOptions=function(a){this.la=_geo.geotoolkit.Ca(a,this.la);return this};b.prototype.jb=function(){return this.la};b.prototype.ohd=
function(){this.dk=_geo.geotoolkit.window.document.createElement("div");this.dk.style.position="absolute";this.dk.style.display="none";this.dk.style.border="0px solid transparent";this.dk.style.backgroundColor="transparent";this.dk.style.pointerEvents="none";this.dk.style.overflow="hidden";_geo.geotoolkit.window.document.body.appendChild(this.dk);this.ek=_geo.geotoolkit.window.document.createElement("div");this.ek.style.position="absolute";this.ek.style.border="0px solid transparent";this.ek.className=
"geotoolkit-inlinecontainer";this.ek.style.pointerEvents="all";this.dk.appendChild(this.ek);this.rp=_geo.geotoolkit.window.document.createElement("textarea");this.rp.className="geotoolkit-inlineeditor";this.rp.style.position="absolute";this.rp.style.resize="none";this.rp.style.border="0px solid transparent !important";this.rp.style.boxShadow="none";this.rp.style.borderWidth="0px";this.rp.style.borderColor="transparent";this.rp.style.borderStyle="inset";this.rp.style.outline="0px";this.rp.style.fontFamily=
"sans-serif";this.rp.style.fontSize="smaller";this.rp.style.lineHeight="normal";this.rp.style.backgroundColor=a;this.Yza=function(a){"Escape"===a.key||27===a.keyCode?this.lFa(!1):!0!==a.ctrlKey||"Enter"!==a.key&&13!==a.keyCode||this.lFa(!0)}.bind(this);this.rp.addEventListener("keydown",this.Yza);this.ek.appendChild(this.rp)};b.prototype.lFa=function(a){if(!1===this.Xza)return this;this.dk.style.display="none";this.Xza=!1;!0===a&&null!=this.iv&&this.iv.jc(this.rp.value.replace(/\n/g,"<br/>"));return this};
b.prototype.jsc=function(){null!=this.iv&&this.iv.uh();this.bka(!1);this.Rh();return this};b.prototype.bka=function(b){if(null==this.nj)return this;if(null==this.iv)return this.dk.style.display="none",this;var c=this.EZ(this.nj.hD()),d=this.iv.getParent(),k=d.Ya(),d=k.ob(d.Nb()),k=this.iv.iXb(g),k=new _geo.geotoolkit.util.Rect({x:k["top-left"].getX(),y:k["top-left"].getY(),width:k["bottom-right"].getX()-k["top-left"].getX(),height:k["bottom-right"].getY()-k["top-left"].getY()});this.dk.style.left=
d.sa()+c.x+"px";this.dk.style.top=d.qa()+c.y+"px";this.dk.style.width=d.aa()+"px";this.dk.style.height=d.ba()+"px";this.ek.style.left=Math.round(k.getX()-d.sa())+"px";this.ek.style.top=Math.round(k.getY()-d.qa())+"px";this.ek.style.width=Math.round(k.aa())+"px";this.ek.style.height=Math.round(k.ba())+"px";this.ek.style.transform="rotate(0deg)";this.rp.style.width=Math.round(k.aa())+"px";this.rp.style.height=Math.round(k.ba())+"px";!1!==b&&(this.dk.style.display="block",this.rp.focus(),null!=this.fD()&&
null!=this.fD().sb()&&null!=this.fD().sb().ac&&null!=this.fD().sb().ac()?this.rp.style.backgroundColor=this.fD().sb().ac():this.rp.style.backgroundColor=a);return this};b.prototype.Xn=function(){this.Qb.Ka(this.isEnabled());!1===this.isEnabled()&&(this.f8.Ka(!1),this.lFa(!1).E_(null).Er(null).f5(null));_geo.geotoolkit.controls.ia.fc.prototype.Xn.call(this)};b.prototype.Rh=function(){if(null==this.iv)for(var a in this.Jb)this.Jb.hasOwnProperty(a)&&this.Jb[a].Ka(!1);else{a=this.iv.Ya();a=this.iv.yTb(a);
for(var b in a)a.hasOwnProperty(b)&&this.Jb.hasOwnProperty(b)&&this.Jb[b].Wu(a[b]).Ka(!0)}};b.prototype.UP=function(){return this.hl};b.prototype.f5=function(a){if(this.iv===a)return this;this.lFa(!0);var b=this.iv;this.iv=a;null!=b&&b.hb(_geo.geotoolkit.oa.Sd.vC.$.veb,this.coc).uh();this.fireEvent("AnnotationChanged");null!=this.iv&&this.iv.uh().kb(_geo.geotoolkit.oa.Sd.vC.$.veb,this.coc);null==this.iv&&this.Er(null);this.Rh();return this};b.prototype.fD=function(){return this.iv};b.prototype.Er=
function(a){if(this.jd===a)return this;null!=this.jd&&this.jd.setActive(!1);this.jd=a;null!=this.jd&&(this.lFa(!0),this.jd.setActive(!0));return this};b.prototype.S8=function(){return this.wGb};b.prototype.E_=function(a){if(this.wGb===a)return this;this.wGb=a;return this};b.prototype.Yda=function(a){return this.Xo};b.prototype.acd=function(a){if(!1===this.isEnabled()||null==this.iv)return this;a.stopPropagation(!0,!0);this.nj=a.ii();this.NZa.Uda(this.iv.vb());return this};b.prototype.gHc=function(){return this.Xza};
b.prototype.Uda=function(a){if(null==a)return this.Xza&&this.lFa(!0),this;if(a===this.iv&&!0===this.Xza)return this;this.Xza&&this.lFa(!0);this.f5(a);this.rp.value=this.iv.me().replace(/<br>/g,"\n").replace(/<br\/>/g,"\n");this.bka(!0);this.Xza=!0;return this};b.prototype.Wd=function(a){var b=this.Qe(this.Xo,a),f=null;if(this.wf()){if(!0===this.la.canmove){a.stopPropagation(!0,!0);var b=this.Xo.Ya().cb(b),f=b.x-this.Jj.x,g=b.y-this.Jj.y;if(this.jd){if(this.jd===this.Jb.anchor){f=this.Yda(a);this.E_(f);
if(null==f)return;g=this.Qe(f,a);this.iv.fu(f).yc(g)}else{var h=this.iv.Grb().clone();a=h.aa();var h=h.ba(),l=this.iv.Bn().clone();l.bb(l.getX()+f/2,l.getY()+g/2);this.jd===this.Jb["top-left"]?(a-=f,h-=g):this.jd===this.Jb["top-right"]?(a+=f,h-=g):this.jd===this.Jb["bottom-left"]?(a-=f,h+=g):this.jd===this.Jb["bottom-right"]&&(a+=f,h+=g);var n=this.Jb,p=function(a,b){var c=n[a];n[a]=n[b];n[b]=c};0>=a&&(0>f&&(p("top-right","top-left"),p("bottom-right","bottom-left")),0<f&&(p("top-left","top-right"),
p("bottom-left","bottom-right")));0>=h&&(0>g&&(p("top-right","bottom-right"),p("top-left","bottom-left")),0<g&&(p("bottom-right","top-right"),p("bottom-left","top-left")));this.iv.lp(l).kxb({width:a,height:h})}this.fireEvent("AnnotationEdited")}else a=this.iv.Bn().clone(),a.x+=f,a.y+=g,this.iv.lp(a);this.Jj=b.clone();this.iv.uh();this.bka(!1);this.Rh()}}else{f=this.Yda(a);this.E_(f);f=this.Qe(this.Xo,a);f=this.Eh.select(this.Xo,f.x,f.y,2);a=g=null;for(h=f.length-1;0<=h;h--)if(f[h]!==this.f8&&(f[h]instanceof
d&&(a=f[h]),f[h]instanceof _geo.geotoolkit.oa.Sd.vC)){g=f[h];break}this.f8.Wu(b).Ka(null==g&&null===a&&null!==this.la&&!0===this.la.cancreate)}};b.prototype.Ae=function(a){for(var b=this.Qe(this.Xo,a),d=this.Eh.select(this.Xo,b.x,b.y,2),g,b=d.length-1;0<=b;b--)if(d[b]instanceof _geo.geotoolkit.oa.Sd.vC&&d[b]===this.fD()){g=d[b];break}if(null!=g&&(g=g.Un(a.jm(),5),null!=g&&0<g.length))for(b=0;b<g.length;b++)for(var d=g[b],h=0;h<d.paths.length;h++)d.paths[h].Ja("click",d.paths[h]);this.wf()&&this.stop(a)};
b.prototype.xf=function(a){if(!1!==this.isEnabled()){for(var b=a.jm(),b=this.Eh.select(this.Xo.getRoot(),b.x,b.y,2),f,g,h=b.length-1;0<=h;h--)b[h]!==this.f8&&(b[h]instanceof d&&(g=b[h]),b[h]instanceof _geo.geotoolkit.oa.Sd.vC&&null==f&&(f=b[h]));this.Er(g);null==g&&this.f5(f);null!=this.iv?(this.start(a),a=this.Qe(this.Xo,a),this.Xo.Ya().cb(a,a),this.Jd=a.clone(),this.Jj=a.clone()):null!=this.S8()&&(a=this.Qe(this.S8(),a),f=this.NZa.Zja({target:this.S8(),anchor:a,text:"Anchor : "+a.toString()}),null!=
f&&this.NZa.f5(f))}};b.prototype.start=function(a){a.stopPropagation();this.setActive(!0);_geo.geotoolkit.controls.ia.fc.Mi(a.ii(),this);this.Yq(!0);return this};b.prototype.stop=function(){this.setActive(!1);_geo.geotoolkit.controls.ia.fc.UW(this);this.Yq(!1);return this};b.prototype.Yq=function(a){this.Yu("pointerup",a,_geo.geotoolkit.window);return this};return b}();_geo.geotoolkit.oa.Sd.yIa=_geo.geotoolkit.oa.Sd.yIa||{};
_geo.geotoolkit.oa.Sd.yIa.CUc=function(){function b(a,b,d,e,c){var f=(new _geo.geotoolkit.scene.shapes.Path).ua(c.linestyle).ta(c.fillstyle),k=Math.abs(c.radius);e.aa()/2<k&&(k=e.aa()/2);e.ba()/2<k&&(k=e.ba()/2);var h=c.connectorsize;c=e.contains(b.x,b.y);var l=b.getX(),n=b.getY();b=d.getX();d=d.getY();if(c)f.moveTo(e.getX()+k,e.getY()).lineTo(e.za()-k,e.getY()),0<k&&f.arcTo(e.za(),e.qa(),e.za(),e.qa()+k,k),f.lineTo(e.za(),e.wa()-k),0<k&&f.arcTo(e.za(),e.wa(),e.za()-k,e.wa(),k),f.lineTo(e.getX()+
k,e.getY()+e.ba()),0<k&&f.arcTo(e.sa(),e.wa(),e.sa(),e.wa()-k,k),f.lineTo(e.getX(),e.getY()+k),0<k&&f.arcTo(e.sa(),e.qa(),e.sa()+k,e.qa(),k),f.close();else{var p={position:"top",value:e.qa(),QA:e.sa(),zx:e.za(),wN:k,iQ:k},r={position:"right",value:e.za(),QA:e.qa(),zx:e.wa(),wN:k,iQ:k},t={position:"bottom",value:e.wa(),QA:e.za(),zx:e.sa(),wN:k,iQ:k};e={position:"left",value:e.sa(),QA:e.wa(),zx:e.qa(),wN:k,iQ:k};p.next=r;r.next=t;t.next=e;e.next=p;var k=h/2,q=null,h=function(a,b,c){var d=b.czb,e=Math.min(b.QA,
b.zx),f=Math.max(b.QA,b.zx),g=b.QA<b.zx?b.wN:b.iQ,h=b.QA<b.zx?b.iQ:b.wN,k=Math.min(b.$F,b.sM),l=Math.max(b.$F,b.sM),p=null,n=null;e+g<k&&l<f-h||(k<e+g&&(g=Math.max(k-e,0),k<e&&(p=d<e?e-k:null,k=e,g=null)),l>f-h&&(h=Math.max(f-l,0),l>f&&(n=d>f?l-f:null,l=f,h=null)),b.QA<b.zx?(b.$F=k,b.wN=g,b.sM=l,b.iQ=h):(b.$F=l,b.wN=h,b.sM=k,b.iQ=g),d=function(a,b,c,d){return Math.min(b+c,d)},e=function(a,b,c,d){return Math.max(d,b-c)},null!=p&&("top"===b.position||"right"===b.position?(b.$F=null,b.QA=null,a.$F="left"===
a.position?d(a,a.zx,p,a.QA-a.wN):e(a,a.zx,p,a.QA+a.wN)):(b.sM=null,b.zx=null,c.sM="left"===c.position?e(c,c.QA,p,c.zx+c.iQ):d(c,c.QA,p,c.zx-c.iQ))),null!=n&&("top"===b.position||"right"===b.position?(b.sM=null,b.zx=null,c.sM="right"===c.position?d(c,c.QA,n,c.zx-c.iQ):e(c,c.QA,n,c.zx+c.iQ)):(b.$F=null,b.QA=null,a.$F="right"===a.position?e(a,a.zx,n,a.QA+a.wN):d(a,a.zx,n,a.QA-a.wN))),a.iQ=b.wN,null==b.QA&&(a.zx=null),c.wN=b.iQ,null==b.zx&&(c.QA=null))},q=[];Math.abs(d-p.value)<_geo.geotoolkit.util.Math.Jc?
(q=p,q.czb=l,q.VOb=b,q.$F=b-k,q.sM=b+k,h(e,p,r),q=[p,r,t,e]):Math.abs(b-r.value)<_geo.geotoolkit.util.Math.Jc?(q=r,q.czb=n,q.VOb=d,q.$F=d-k,q.sM=d+k,h(p,r,t),q=[r,t,e,p]):Math.abs(d-t.value)<_geo.geotoolkit.util.Math.Jc?(q=t,q.czb=l,q.VOb=b,q.$F=b+k,q.sM=b-k,h(r,t,e),q=[t,e,p,r]):(q=e,q.czb=n,q.VOb=d,q.$F=d+k,q.sM=d-k,h(t,e,p),q=[e,p,r,t]);b=function(a){f.moveTo(l,n);a=a[0];null!=a.sM&&("top"===a.position||"bottom"===a.position?f.lineTo(a.sM,a.value):f.lineTo(a.value,a.sM));var b=a,c=b.next;do b!==
a&&null!=b.$F&&("top"===b.position||"bottom"===b.position?f.lineTo(b.$F,b.value):f.lineTo(b.value,b.$F)),0<b.iQ?"top"===b.position||"bottom"===b.position?f.arcTo(b.zx,b.value,b.zx,c.QA+("right"===c.position?1:-1)*c.wN,b.iQ):f.arcTo(b.value,b.zx,c.QA+("top"===c.position?1:-1)*c.wN,b.zx,b.iQ):null!=b.zx&&("top"===b.position||"bottom"===b.position?f.lineTo(b.zx,b.value):f.lineTo(b.value,b.zx)),c!==a&&null!=c.sM&&("top"===c.position||"bottom"===c.position?f.lineTo(c.sM,c.value):f.lineTo(c.value,c.sM)),
b=c,c=b.next;while(b!==a);"top"===a.position||"right"===a.position?a.QA+a.wN<a.$F&&("top"===a.position?f.lineTo(a.$F,a.value):f.lineTo(a.value,a.$F)):a.QA+a.wN>a.$F&&("bottom"===a.position?f.lineTo(a.$F,a.value):f.lineTo(a.value,a.$F));f.lineTo(l,n);return f};b(q)}b=f.ga();d=null;!1===c&&null==a&&(null!=this.Xa()&&(b=b.fe(this.Xa().aa())),d=(new _geo.geotoolkit.renderer.bf).moveTo(b.sa(),b.qa()).lineTo(b.za(),b.qa()).lineTo(b.za(),b.wa()).lineTo(b.sa(),b.wa()).lineTo(b.sa(),b.qa()).moveTo(l-1,n-1).lineTo(l+
1,n-1).lineTo(l+1,n+1).lineTo(l-1,n+1).lineTo(l-1,n-1).close());return{geometry:f,clip:d}}_geo.geotoolkit.oa.Sd.Bt.Jma(_geo.geotoolkit.oa.Sd.vC.hXa.VEb,b);return{wad:b}}();_geo.geotoolkit.oa.Sd.yIa=_geo.geotoolkit.oa.Sd.yIa||{};
_geo.geotoolkit.oa.Sd.yIa.fsd=function(){function b(a,b,d,e,c){a=null;e=e.contains(b.x,b.y);if(!1===e){a=(new _geo.geotoolkit.scene.shapes.Path).ua(c.linestyle).ta(c.fillstyle);var f=c.connectorsize||10;c=b.clone();var k=f*Math.tan(Math.PI/6);e=c.clone().setX(c.getX()-f).setY(c.getY()-k);k=c.clone().setX(c.getX()-f).setY(c.getY()+k);f=c.clone().setX(c.getX()-f);b=Math.atan2(d.getY()-b.getY(),d.getX()-b.getX())-Math.PI;b=_geo.geotoolkit.util.Ga.dn(b,c.getX(),c.getY());var h=b.Ue(d);if(f.getX()<h.getX()&&
h.getX()<c.getX()||f.getX()>h.getX()&&h.getX()>c.getX())d=b.cb(f);b.cb(e,e);b.cb(f,f);b.cb(k,k);a.moveTo(d.getX(),d.getY()).lineTo(f.getX(),f.getY()).lineTo(e.getX(),e.getY()).lineTo(c.getX(),c.getY()).lineTo(k.getX(),k.getY()).lineTo(f.getX(),f.getY()).close()}return{geometry:a,clip:null}}_geo.geotoolkit.oa.Sd.Bt.Jma(_geo.geotoolkit.oa.Sd.vC.hXa.ghc,b)}();
_geo.geotoolkit.oa.animation.Dd.sUc=function(){function b(a){_geo.geotoolkit.animation.Dd.nl.call(this,a);this.wUa(_geo.geotoolkit.animation.Zk.RVa.Za())}_geo.geotoolkit.fa(b,_geo.geotoolkit.animation.Dd.nl);_geo.geotoolkit.da(b,"geotoolkit.widgets.animation.effects.BubbleChartSize");b.prototype.Vh=function(a,b){return"s-data"===a.attributeName&&b instanceof _geo.geotoolkit.oa.nL};b.prototype.ep=function(a){return(a=a.getData())?a.s.data:null};b.prototype.apply=function(a){a.setData({s:{data:this.hea()}})};
_geo.geotoolkit.animation.Dd.ue.Za().cF(b);return b}();
_geo.geotoolkit.oa.animation.Dd.Psd=function(){function b(a){_geo.geotoolkit.animation.Dd.nl.call(this,a)}var a=function(){function a(){_geo.geotoolkit.animation.Zk.GQ.call(this)}var b=null;_geo.geotoolkit.fa(a,_geo.geotoolkit.animation.Zk.GQ);a.prototype.Dl=function(a,b,d,e){a=e(a.x.length,b.x.length);var g=Math.floor(a);d={x:b.x.slice(0,g),y:b.y.map(function(a){return a.slice(0,g)})};if(g!==a){a-=g;var n=b.x[g-1],p=b.x[g];d.x.push(n+(p-n)*a);for(e=0;e<b.y.length;e++)n=b.y[e][g-1],p=b.y[e][g],n+=
(p-n)*a,d.y[e].push(n)}return d};a.prototype.clone=function(a){return{x:a.x.slice(),y:a.y.map(function(a){return a.slice()})}};a.Za=function(){null==b&&(b=new a);return b};return a}(),g=function(){function b(){_geo.geotoolkit.animation.Zk.GQ.call(this)}var e=null;_geo.geotoolkit.fa(b,a);b.prototype.Dl=function(a,b,d,e){d=d||{x:[],y:[]};if(a.x.length===b.x.length){for(var g=0;g<a.x.length;++g)d.x[g]=e(a.x[g],b.x[g]);for(g=0;g<a.y.length;++g){d.y[g]=d.y[g]||[];for(var n=0;n<a.x.length;++n)d.y[g][n]=
e(a.y[g][n],b.y[g][n])}return d}if(0===a.x.length){for(a=0;a<b.x.length;++a)d.x[a]=b.x[a];for(a=0;a<b.y.length;++a)for(d.y[a]=d.y[a]||[],g=0;g<b.x.length;++g)d.y[a][g]=e(0,b.y[a][g]);return d}return null};b.Za=function(){null==e&&(e=new b);return e};return b}();_geo.geotoolkit.fa(b,_geo.geotoolkit.animation.Dd.nl);_geo.geotoolkit.da(b,"geotoolkit.widgets.animation.effects.LineChartData");b.prototype.Vh=function(a,b){return"data"===a.attributeName&&b instanceof _geo.geotoolkit.controls.shapes.u6&&
("vertical"===a.type||"horizontal"===a.type)};b.prototype.ep=function(b){"horizontal"===this.Pp&&this.wUa(a.Za());"vertical"===this.Pp&&this.wUa(g.Za());return(b=b.getData())&&Array.isArray(b.x)&&Array.isArray(b.y)?{x:b.x,y:b.y}:null};b.prototype.apply=function(a){a.setData(this.hea())};_geo.geotoolkit.animation.Dd.ue.Za().cF(b);return b}();
_geo.geotoolkit.oa.animation.Dd.A1c=function(){function b(a){_geo.geotoolkit.animation.Dd.nl.call(this,a);this.VC=_geo.geotoolkit.animation.Zk.Wcb.Za()}_geo.geotoolkit.fa(b,_geo.geotoolkit.animation.Dd.nl);_geo.geotoolkit.da(b,"geotoolkit.widgets.animation.effects.TimeSeriesData");b.prototype.Vh=function(a,b){return"data"===a.attributeName&&b instanceof _geo.geotoolkit.oa.DL};b.prototype.ep=function(a){for(var b=a.BV(),d=[],e=0;e<b.length;e++)a.x6a(b[e]).z6a().Av()>e+1?d[e]=a.x6a(b[e]).z6a().hi(e+
1).data.data:d[e]=d[e-1].slice();return d};b.prototype.apply=function(a){for(var b=a.BV(),d=[],e=[],c=0;c<this.hea().length;c++){d[c]=new _geo.geotoolkit.data.vh({cols:[{type:"number",data:a.x6a(b[c]).z6a().hi(0).data.data},{type:"number",data:this.hea()[c]}]});e[c]=new _geo.geotoolkit.data.lu(d[c]);var f=a.HA(b[c]);null!=f&&f.setData(e[c])}};_geo.geotoolkit.animation.Dd.ue.Za().cF(b);return b}();
_geo.geotoolkit.oa.animation.Dd.dUc=function(){function b(a){_geo.geotoolkit.animation.Dd.nl.call(this,a);this.wUa(_geo.geotoolkit.animation.Zk.Wcb.Za())}_geo.geotoolkit.fa(b,_geo.geotoolkit.animation.Dd.nl);_geo.geotoolkit.da(b,"geotoolkit.widgets.animation.effects.BarChartWidgetValue");b.prototype.Vh=function(a,b){return"datasets"===a.attributeName&&b instanceof _geo.geotoolkit.oa.rAb};b.prototype.ep=function(a){a=a.getData();return null==a?null:a.datasets.map(function(a){return a.values})};b.prototype.apply=
function(a){a.setData({datasets:this.hea().map(function(a){return{values:a}})})};_geo.geotoolkit.animation.Dd.ue.Za().cF(b);return b}();
_geo.geotoolkit.oa.Wg=function(){function b(a){a=_geo.geotoolkit.Ca(a,{fillstyle:"white"});_geo.geotoolkit.oa.Qm.call(this,a);this.U_a=this.JO=this.kf=this.Ze=null;this.va(this.J9(a));this.nr=null;this.YPc(a.tools);this.Sg();this.Dx(a.tools);this.ta(a.fillstyle||a.backgroundfillstyle);a.hasOwnProperty("backgroundfillstyle")&&_geo.geotoolkit.warn('AnnotatedWidget(properties["backgroundfillstyle"]) deprecated since 2.6, use properties["fillstyle"]');this.wm()}function a(a,b){var d=a.vb(b);if(d)return d.Sc()&&
d.Sc().Ala()===_geo.geotoolkit.ea.Rr.QT?"auto":d.mf()}function g(a,b){var d=a.vb(b);if(d)return d.Sc()&&d.Sc().Ala()===_geo.geotoolkit.ea.Rr.LX?"auto":d.yl()}function d(a,b,d){for(var e=null,e=null,g=0;g<b.length;g++)e=b[g],e=a.vb(e),void 0!==d.constraint?e.Ad(!0).pb(d):e.pb(d)}var e="#757575";_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Qm);_geo.geotoolkit.sg(b,_geo.geotoolkit.scene.exports.uoa);_geo.geotoolkit.da(b,"geotoolkit.widgets.AnnotatedWidget");b.$={Gfb:"ModelVisibleLimitsChanged"};b.rVc=15;
b.sVc=15;b.prototype.J9=function(a){null==a&&(a={});a=_geo.geotoolkit.Ca(a,{model:new _geo.geotoolkit.scene.Group,north:void 0,south:void 0,east:void 0,west:void 0,annotationssizes:{}});a.annotations&&(a.annotations.west&&(a.west=a.annotations.west.item,a.annotationssizes.west=a.annotations.west.size),a.annotations.north&&(a.north=a.annotations.north.item,a.annotationssizes.north=a.annotations.north.size),a.annotations.south&&(a.south=a.annotations.south.item,a.annotationssizes.south=a.annotations.south.size),
a.annotations.east&&(a.east=a.annotations.east.item,a.annotationssizes.east=a.annotations.east.size));this.cd=a.model;var b=new _geo.geotoolkit.attributes.Aa(e),b=_geo.geotoolkit.attributes.Aa.ab(a.border)||b;this.cd.va([(new _geo.geotoolkit.scene.og).Kd("manipulator_layer").va((new _geo.geotoolkit.scene.shapes.uq).MTa("visible-bounds").ua(b.Yd({x:!0,y:!0}))),this.Xo=new _geo.geotoolkit.scene.og({name:"overlays",cssclass:"overlay"})]);this.tb=(new _geo.geotoolkit.scene.Wp(a)).Kd("annotated_node").pb({left:0,
top:0,right:0,bottom:0}).vQ(function(a,b){return _geo.geotoolkit.scene.Wi.Oma(a,b)});this.tb.$Ua();this.al(a.annotationssizes);a=(new _geo.geotoolkit.scene.Group).Kd(a.applicationId).Ad(!0).pe(new _geo.geotoolkit.ea.ol).va(this.tb);this.tb.yTa();return a};b.prototype.Nuc=function(a,b){if(null!=this.tb){var d=this.tb.vb(a);if(null!=d&&null!=d.Le()){var e=-1,g=0;d.Le().bn().forEach(function(a){a===b&&(e=g);g++});-1!==e&&e!==g-1&&(d.Le().remove(b),d.Le().add(b))}}};b.prototype.NTc=function(a){null!=
this.tb&&(this.tb.os(a),this.wm())};b.prototype.Ea=function(a){var b=this.ga();if(null!=b&&b.Pj(a,_geo.geotoolkit.util.Math.Jc))return this;_geo.geotoolkit.scene.Group.prototype.Ea.call(this,a);a=this.ga();if(null!=b&&null!=a&&b.aa()===a.aa()&&b.ba()===a.ba())return this;this.Kv();return this};b.prototype.Kv=function(){this.Nuc(_geo.geotoolkit.ea.Oa.Yc,this.kf);this.Nuc(_geo.geotoolkit.ea.Oa.pd,this.Ze);null!=this.tb&&this.tb.xb();return this};b.prototype.rQ=function(a){this.tb.rQ(a);return this};
b.prototype.Sg=function(){this.QNa=!0;var a=_geo.geotoolkit.selection.from(this.tb).He('node => id(node) == "manipulator_layer"').B_()[0];this.or=new _geo.geotoolkit.controls.ia.TN(a);this.xp=(new _geo.geotoolkit.controls.ia.ei).cc(!0).addListener(_geo.geotoolkit.controls.ia.ei.$.YE,function(a,b){var c=b.Mk();this.$A(c.x,c.y);this.or.Qwa(!0)}.bind(this));this.qw=(new _geo.geotoolkit.controls.ia.Selection(a)).cc(!1).addListener(_geo.geotoolkit.controls.ia.fc.$.Uu,function(a){a.isEnabled()?(a.UEa()===
_geo.geotoolkit.controls.ia.eR.yq&&this.xp.cc(!1),this.fM.cc(!1)):a.UEa()===_geo.geotoolkit.controls.ia.eR.yq&&this.xp.cc(!0)}.bind(this)).Bz(function(a){return a}).addListener(_geo.geotoolkit.controls.ia.Selection.$.EI,function(){}).IHa(_geo.geotoolkit.controls.ia.eR.yq);this.fM=(new _geo.geotoolkit.controls.ia.yq(a)).cc(!1).addListener(_geo.geotoolkit.controls.ia.fc.$.Uu,function(a){a.isEnabled()?(null==this.nr&&this.Sma(),this.xp.cc(!1),this.qw.cc(!1)):(null!=this.nr&&(this.qw.cc(this.nr.selection),
this.nr=null),this.xp.cc(!0))}.bind(this)).addListener(_geo.geotoolkit.controls.ia.yq.$.au,function(a,b){var c=b.getArea();this.tb.os(c);this.wm()}.bind(this));this.OF=(new _geo.geotoolkit.controls.ia.ew(a,_geo.geotoolkit.controls.ia.AL.gza)).cc(!1).addListener(_geo.geotoolkit.controls.ia.ew.$.aF,function(a){this.Sma();this.or.cc(!1);this.fM.cc(!1);this.qw.cc(!1);this.xp.cc(!1)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.ew.$.pGa,function(a,b){this.os(b.Nb());this.wm()}.bind(this)).addListener(_geo.geotoolkit.controls.ia.ew.$.au,
function(a){null!=this.nr&&(this.or.cc(this.nr.Epb),this.fM.cc(this.nr.p1b),this.qw.cc(this.nr.selection),this.xp.cc(this.nr.tvb),this.nr=null)}.bind(this));this.rr([this.xY=(new _geo.geotoolkit.controls.ia.Xl(a,"manipulatorTools")).add([this.or,(new _geo.geotoolkit.controls.ia.Xl(this.Xo)).yb("overlay"),this.fM,this.qw,this.OF,this.xp])])};b.prototype.Cl=function(){};b.prototype.os=function(a){this.Byb(a);return this};b.prototype.$A=function(a,b){this.tb.$A(a,b);this.wm();return this};b.prototype.vt=
function(a,b,d,e){this.tb.vt(a,b,d,e);this.wm();return this};b.prototype.jC=function(a){this.tb.Mc().Sa(a);this.wm();return this};b.prototype.FM=function(){return null!=this.tb&&null!=this.tb.Mc()?this.tb.Mc().xa():null};b.prototype.n8a=function(a){var b=this.Mc();if(!b)return null;var d=b.getParent(),e=b.xa(),g=null;null!=d&&null!=d.xa()&&(b=b.Ya(),g=null==b?new _geo.geotoolkit.util.Rect(d.om()):b.qe(d.om()));if(null!=e&&null!=g)a||g.intersect(e);else return e;return g};b.prototype.Byb=function(a){this.tb.os(a);
this.wm();return this};b.prototype.wm=function(){var a=this.cd.xa(),b=this.cd.Nb();this.kf.Sa(a,b,this.cd.MA());this.Ze.Sa(a,b,this.cd.Cr());this.Cl();this.Ja(_geo.geotoolkit.oa.Wg.$.Gfb,this,b.clone());return this};b.prototype.al=function(a){if(null==a)return this;var b=_geo.geotoolkit.ea.Oa,e=!1;null!=a.west&&(d(this.tb,[b.Rc,b.pu,b.Sw],{constraint:"auto"===a.west?_geo.geotoolkit.ea.Rr.LX:void 0,width:"auto"===a.west?void 0:a.west}),e=!0);null!=a.east&&(d(this.tb,[b.pd,b.Oy,b.Nx],{constraint:"auto"===
a.east?_geo.geotoolkit.ea.Rr.LX:void 0,width:"auto"===a.east?void 0:a.east}),e=!0);null!=a.north&&(d(this.tb,[b.Se,b.Oy,b.pu],{constraint:"auto"===a.north?_geo.geotoolkit.ea.Rr.QT:void 0,height:"auto"===a.north?void 0:a.north}),e=!0);null!=a.south&&(d(this.tb,[b.Yc,b.Nx,b.Sw],{constraint:"auto"===a.south?_geo.geotoolkit.ea.Rr.QT:void 0,height:"auto"===a.south?void 0:a.south}),e=!0);!0===e&&this.tb.xb();this.ma();return this};b.prototype.aea=function(){return{west:g(this.tb,_geo.geotoolkit.ea.Oa.Rc),
east:g(this.tb,_geo.geotoolkit.ea.Oa.pd),north:a(this.tb,_geo.geotoolkit.ea.Oa.Se),south:a(this.tb,_geo.geotoolkit.ea.Oa.Yc)}};b.prototype.eHa=function(a){a&&this.tb.eHa(a)&&this.Kv();return this};b.prototype.MOa=function(a,b){null!=this.uo(a)&&this.U0b(a);b.location=b.location?b.location:a;_geo.geotoolkit.scene.Wp.wM(this.tb,b)};b.prototype.uo=function(a){a=this.vb(a);for(var b,d,e=0;e<a.Uc();e++)if((d=this.vc(e))&&"function"==typeof d.vc&&d.vc(0)instanceof _geo.geotoolkit.scene.shapes.Text){b=d.vc(0);
break}return b};b.prototype.JQc=function(a,b){var d=this.uo(a);d&&d.ja(b);return this};b.prototype.U0b=function(a){var b=this.uo(a);this.tb.removeItem(b.getParent(),a)};b.prototype.nt=function(a,b,d){var e;a instanceof _geo.geotoolkit.axis.ng&&null!=a.getParent()&&this.tb.removeItem(a.getParent(),b);a instanceof _geo.geotoolkit.axis.ng?(e=new _geo.geotoolkit.scene.Group,e.Ad(!0),e.va(a),a.Ea(e.xa()),this.tb.Yr(e,b)):(b=_geo.geotoolkit.Ca(a,{location:b,connect:!1}),e=_geo.geotoolkit.scene.Wp.pK(this.tb,
b),a=e.axis,a.ja(b),e=e.group);d&&this.tb.connect(a,d);return{axis:a,group:e}};b.prototype.Lma=function(a){var b=a.getParent(),b=b.getParent(),d=b.Le();null!==d&&d.remove(a);b.removeChild(a);this.tb.Pa();this.tb.disconnect(a)};b.prototype.connect=function(a,b,d,e){this.tb.connect(a,b,d,e);return this};b.prototype.disconnect=function(a){this.tb.disconnect(a);return this};b.prototype.JN=function(){this.vt(1.25,1.25);return this};b.prototype.KN=function(){this.vt(.8,.8);return this};b.prototype.Mc=function(){return this.cd};
b.prototype.R8=function(){this.tb.os(this.cd.xa());this.wm();return this};b.prototype.pan=function(a,b){this.$A(a,b);this.wm();return this};b.prototype.vQ=function(a){this.tb.vQ(a);return this};b.prototype.vb=function(a){return this.tb.vb(a)};b.prototype.oS=function(a){var b={paperformat:null,top:.5,bottom:.5,left:1,right:1,units:"in",scaling:_geo.geotoolkit.scene.exports.Fha.SVa,keepaspectratio:!0,continuous:!1,drawwesttoeast:!0},d={footer:null,header:null,documentheader:null,output:"PDF Output",
printsettings:{},modellimits:null,imagecompression:null,streamcompression:!0,scale:null},e={mode:_geo.geotoolkit.ub.Dt.maa,quality:1,speed:_geo.geotoolkit.ub.XT.rha},g=_geo.geotoolkit.Ca(a||{},d,!0);g.printsettings=_geo.geotoolkit.Ca(g.printsettings,b,!0);g.imagecompression=_geo.geotoolkit.Ca(g.imagecompression,e,!0);g.scale||(g.scale={x:Math.abs(this.tb.Mc().Ya().Ab()),y:Math.abs(this.tb.Mc().Ya().Pb())});null==g.printsettings.paperformat&&(a=_geo.geotoolkit.util.zf.Za().Tb("px"),a=_geo.geotoolkit.scene.exports.HX.Za().TZ("Letter",
a,_geo.geotoolkit.scene.exports.lO.a1),g.printsettings.paperformat=a);this.Mt={};g.modellimits&&this.cga(g.modellimits);this.mHa(g.scale);this.ap();a=this.RB(g);a=new _geo.geotoolkit.scene.exports.Document(a,g.header,g.footer,!0);var n=new _geo.geotoolkit.scene.exports.Dya,b=new _geo.geotoolkit.util.stream.n1;Array.isArray(g.embededfonts)&&(d=g.embededfonts,d.forEach(function(a){n.Fka(a.subType,a.fontName,a.fontWeight,a.fontStyle,a.fontBase64EncodedFile,a.encoding)}));g.imagecompression&&n.gga(g.imagecompression.mode,
g.imagecompression.quality,g.imagecompression.speed);n.U_(g.streamcompression);return n.EPa(a,g.printsettings,b).then(function(a){this.Go();a.save(g.output,g.save)}.bind(this),function(a){this.Go();throw a;}.bind(this))};b.prototype.LM=function(){return this.JO?this.JO:this.tb.Mc().xa()};b.prototype.cga=function(a){this.JO=a;return this};b.prototype.cla=function(){return this.U_a};b.prototype.mHa=function(a){this.U_a=a;return this};b.prototype.ap=function(){this.Mt=this.Mt||{};var a=[];_geo.geotoolkit.selection.from(this).He(function(a){return null!=
a&&(null!=a.getName()&&-1!==a.getName().indexOf("manipulator")||a instanceof _geo.geotoolkit.controls.ia.scroll.tba||a instanceof _geo.geotoolkit.controls.ia.scroll.l6||null!=a.od()&&"string"===typeof a.od()&&-1!==a.od().indexOf("manipulator"))}).select(function(b){b.ib()&&(a.push(b),b.Ka(!1))});this.xb();this.Mt.layers=a;this.Mt.prevHScrollVisibility=!1;this.Mt.prevVScrollVisibility=!1;null!=this.kf&&(this.Mt.prevHScrollVisibility=this.kf.ib(),this.kf.Ka(!1));null!=this.Ze&&(this.Mt.prevVScrollVisibility=
this.Ze.ib(),this.Ze.Ka(!1));var b=this.LM();this.Mt.prevLimits=this.tb.Mc().Nb();this.tb.Mc().os(b);this.tb.f0();return this};b.prototype.Go=function(){null!=this.kf&&this.kf.Ka(this.Mt.prevHScrollVisibility);null!=this.Ze&&this.Ze.Ka(this.Mt.prevVScrollVisibility);this.tb.Mc().os(this.Mt.prevLimits);this.tb.f0();this.tb.xb();for(var a=this.Mt.layers,b=0;b<a.length;b++)a[b].Ka(!0);this.xb()};b.prototype.RB=function(a){var b=this.cla()?this.cla():{x:Math.abs(this.tb.Mc().Ya().Ab()),y:Math.abs(this.tb.Mc().Ya().Pb())};
a=a||{};a.scale=_geo.geotoolkit.Ca(a.scale,b,!0);var d=b=0,e=[];if(null!=a.documentheader){var g=a.documentheader,n=g.ga(),p=n.ba(),n=new _geo.geotoolkit.scene.exports.Nr(g,n.clone());n.Ea(new _geo.geotoolkit.util.Rect(0,0,g.ga().aa(),p));e.push(n);d+=p}p=this.tb.Mc().Ya();g=Math.abs(p.Ab());p=Math.abs(p.Pb());a=_geo.geotoolkit.util.Ga.km(a.scale.x/g,a.scale.y/p);a=this.Gld(e,a,d);b+=a.aa();d+=a.ba();return new _geo.geotoolkit.scene.exports.Axa(e,new _geo.geotoolkit.scene.exports.Uxa(b,d))};b.prototype.Gld=
function(a,b,d){var e,g,n,p,r,t,q,m=0,u=0,v=0,w=0,x=_geo.geotoolkit.util.Ga.km(b.Ab(),1);n=_geo.geotoolkit.util.Ga.km(1,b.Pb());e=this.tb.vb(_geo.geotoolkit.ea.Oa.Se);null!=e&&0!==e.ga().ba()&&(g=new _geo.geotoolkit.scene.exports.Nr(e,e.ga()),w=x.transform(e.ga()),w=w.ba(),a.push(g));e=this.tb.vb(_geo.geotoolkit.ea.Oa.Rc);null!=e&&0!==e.ga().aa()&&(q=new _geo.geotoolkit.scene.exports.Nr(e,e.ga()),m=n.transform(e.ga()),m=m.aa(),a.push(q));var A=this.tb.vb(_geo.geotoolkit.ea.Oa.lb);e=new _geo.geotoolkit.scene.exports.Nr(A,
A.ga());A=b.transform(A.ga());a.push(e);b=A.aa();A=A.ba();r=this.tb.vb(_geo.geotoolkit.ea.Oa.pd);null!=r&&0!==r.ga().aa()&&(t=new _geo.geotoolkit.scene.exports.Nr(r,r.ga()),u=n.transform(r.ga()),u=u.aa(),a.push(t));n=this.tb.vb(_geo.geotoolkit.ea.Oa.Yc);null!=n&&0!==n.ga().ba()&&(p=new _geo.geotoolkit.scene.exports.Nr(n,n.ga()),v=x.transform(n.ga()),v=v.ba(),a.push(p));a=m;x=w;n=a+b;r=x+A;b=a+b+u;A=x+A+v;null!=g&&g.Ea(new _geo.geotoolkit.util.Rect(a,d,n,w+d));null!=q&&q.Ea(new _geo.geotoolkit.util.Rect(0,
x+d,m,r+d));e.Ea(new _geo.geotoolkit.util.Rect(a,x+d,n,r+d));null!=p&&p.Ea(new _geo.geotoolkit.util.Rect(a,r+d,n,r+v+d));null!=t&&t.Ea(new _geo.geotoolkit.util.Rect(n,x+d,n+u,r+d));return new _geo.geotoolkit.util.Rect(0,0,b,A)};b.prototype.Dx=function(a){if(null==a)return this;(a.hasOwnProperty("horizontalscroll")||a.hasOwnProperty("verticalscroll"))&&this.YPc(a);null!=a.crosshair&&this.or.Rs(a.crosshair);null!=a.panning&&null!=a.panning.enabled&&this.xp.cc(a.panning.enabled);null!=a.rubberbandzoom&&
this.fM.Rs(a.rubberbandzoom);null!=a.selection&&(this.qw.Rs(a.selection),null!=a.selection.resetselection&&(this.QNa=a.selection.resetselection));return this};b.prototype.o6c=function(a){var b=this.cd.xa(),d=this.cd.Nb(),e,g;e=_geo.geotoolkit.controls.ia.scroll.tba.getClassName();null!=a&&null!=a.verticalscroll&&null!=a.verticalscroll.type&&(e=a.verticalscroll.type);g="VerticalScroll";null!=a&&null!=a.verticalscroll&&null!=a.verticalscroll.name&&(g=a.verticalscroll.name);null!=this.Ze&&e!==this.Ze.getClassName()&&
(this.gz(this.Ze.ld()),this.tb.removeItem(this.Ze,_geo.geotoolkit.ea.Oa.pd),this.Ze=null);null==this.Ze&&(this.Ze=_geo.geotoolkit.controls.ia.scroll.sJ.Za().es(e,{name:g,modellimits:b,visiblelimits:d}),b=function(a,b){var c=this.cd.Nb(),d=b.Nb(),c=(c.qa()-d.qa())*this.cd.Ya().Pb();this.pan(0,c);this.wm()}.bind(this),this.Ze.addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.tt,b).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.Yn,b),this.tb.Yr(this.Ze,_geo.geotoolkit.ea.Oa.pd),this.rr([this.Ze.ld()]));
null!=a&&null!=a.verticalscroll&&(null!=a.verticalscroll.visible&&this.Ze.Ka(a.verticalscroll.visible),null!=a.verticalscroll.options&&this.Ze.ja(a.verticalscroll.options),this.tb.vb(_geo.geotoolkit.ea.Oa.pd).xb());this.Ze.mk(this.cd.Cr())};b.prototype.l6c=function(a){var b=this.cd.xa(),d=this.cd.Nb(),e,g;e=_geo.geotoolkit.controls.ia.scroll.l6.getClassName();null!=a&&null!=a.horizontalscroll&&null!=a.horizontalscroll.type&&(e=a.horizontalscroll.type);g="HorizontalScroll";null!=a&&null!=a.horizontalscroll&&
null!=a.horizontalscroll.name&&(g=a.horizontalscroll.name);null!=this.kf&&e!==this.kf.getClassName()&&(this.gz(this.kf.ld()),this.tb.removeItem(this.kf,_geo.geotoolkit.ea.Oa.Yc),this.kf=null);null==this.kf&&(this.kf=_geo.geotoolkit.controls.ia.scroll.sJ.Za().es(e,{name:g,modellimits:b,visiblelimits:d}),b=function(a,b){var c=this.cd.Nb(),d=b.Nb(),c=(c.sa()-d.sa())*this.cd.Ya().Ab();this.pan(c,0);this.wm()}.bind(this),this.kf.addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.tt,b).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.Yn,
b),this.tb.Yr(this.kf,_geo.geotoolkit.ea.Oa.Yc),this.rr([this.kf.ld()]));this.kf.Nv(this.cd.MA());null!=a&&null!=a.horizontalscroll&&(null!=a.horizontalscroll.visible&&this.kf.Ka(a.horizontalscroll.visible),null!=a.horizontalscroll.options&&this.kf.ja(a.horizontalscroll.options),this.tb.vb(_geo.geotoolkit.ea.Oa.Yc).xb())};b.prototype.YPc=function(a){this.o6c(a);this.l6c(a);var b=this.kf.mf(),d=this.Ze.yl();null!=a&&null!=a.horizontalscroll&&null!=a.horizontalscroll.size&&(b=a.horizontalscroll.size);
null!=a&&null!=a.verticalscroll&&null!=a.verticalscroll.size&&(d=a.verticalscroll.size);this.Ze.pb({width:d,right:0,bottom:b,top:0});this.kf.pb({left:0,right:d,bottom:0,height:b});return this};b.prototype.a_=function(){var a={tools:{}};null!=this.Ze&&(a.tools.verticalscroll={},a.tools.verticalscroll.visible=this.Ze.ib(),a.tools.verticalscroll.size=this.kf.yl(),a.tools.verticalscroll.type=this.Ze.getClassName(),a.tools.verticalscroll.options=this.Ze.jb());null!=this.kf&&(a.tools.horizontalscroll={},
a.tools.horizontalscroll.visible=this.kf.ib(),a.tools.verticalscroll.size=this.kf.mf(),a.tools.horizontalscroll.type=this.kf.getClassName(),a.tools.horizontalscroll.options=this.kf.jb());null!=this.xp&&(a.tools.panning={},a.tools.panning.enabled=this.xp.isEnabled());return a};b.prototype.ka=function(){var a=_geo.geotoolkit.oa.Qm.prototype.ka.call(this);a.annotationssizes=this.aea();return _geo.geotoolkit.Ca(this.getData(),a)};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);
_geo.geotoolkit.oa.Qm.prototype.ja.call(this,a);a.hasOwnProperty("backgroundfillstyle")&&(_geo.geotoolkit.warn('AnnotatedWidget::setProperties(properties["backgroundfillstyle"]) deprecated since 2.6, use properties["fillstyle"]'),this.ta(a.backgroundfillstyle));a.hasOwnProperty("annotationssizes")&&this.al(a.annotationssizes);this.setData(a);return this};b.prototype.getData=function(a){return this.a_()};b.prototype.setData=function(a){if(null==a)return this;this.Dx(a.tools);return this};b.prototype.Sma=
function(){this.nr={Epb:this.or.isEnabled(),p1b:this.fM.isEnabled(),selection:this.qw.isEnabled(),VJc:this.OF.isEnabled(),tvb:this.xp.isEnabled()};return this};return b}();
_geo.geotoolkit.oa.d6=function(){function b(a){null==a&&(a={});var b=15,f=25,g=15,p=30,r=15,t=10,q=f+p+r,m=50;a.viewcachesize=a.viewcache||null!=a.viewcachesize?_geo.geotoolkit.Ca(a.viewcachesize,{width:256,height:256}):null;a.border=_geo.geotoolkit.Ca(a.border,{color:"transparent"},!0);b={bounds:a.bounds,border:a.border,north:null,south:null,west:null,east:null,viewcache:!0,viewcachesize:a.viewcachesize,annotationssizes:{north:b+f,west:b+p+f,south:b+p+g+f,east:b+g+q+t}};b=_geo.geotoolkit.Ca(a,b);
b.x=_geo.geotoolkit.Ca(b.x,{neatlimits:!1,minspan:m});b.y=_geo.geotoolkit.Ca(b.y,{neatlimits:!1,minspan:m});b.z=_geo.geotoolkit.Ca(b.z,{neatlimits:!1,minspan:m});this.wNa=this.wkd.bind(this);this.YF=b.viewcache;this.hr={};null!=b.viewcachesize&&(this.YF=!0,this.hr=b.viewcachesize);this.Slb=null;_geo.geotoolkit.oa.Wg.call(this,b);this.vOa=!1;m=this.Dn();this.ke(!1);this.tb.$Ua();this.iw={x:new _geo.geotoolkit.axis.Tna({orientation:_geo.geotoolkit.axis.xd.ic,neatlimits:b.x.neatlimits}),y:new _geo.geotoolkit.axis.Tna({orientation:_geo.geotoolkit.axis.xd.$b,
neatlimits:b.y.neatlimits}),z:null};this.tu={x:null,y:null,z:null};this.GHb=this.ava.bind(this);this.TZa={x:!1,y:!1,z:!1};this.s7={x:null,y:null,z:null};this.FF={x:[],y:[],z:[]};this.Vw={x:!1,y:!1,z:!1};this.gl={x:null,y:null,z:null};this.lv={x:0,y:0,z:0};this.zu={x:1,y:1,z:1};this.tR={x:null,y:null};this.B1a={x:!1,y:!1,z:!1};this.lg=_geo.geotoolkit.scene.Wp.wM(this.tb,{location:_geo.geotoolkit.ea.Oa.Se,text:"",textstyle:{font:d}}).text;this.lg.xe("crossplot-title");g=_geo.geotoolkit.scene.Wp.pK(this.tb,
{location:_geo.geotoolkit.ea.Oa.Yc,connect:!0,title:{text:"",visible:!1,textstyle:new _geo.geotoolkit.attributes.eb({color:e,font:c}),alignment:_geo.geotoolkit.util.Da.Ei}}).axis;g.xe("crossplot-horizontal-axis");g.yz(this.iw.x);var q=null!=b.x&&null!=b.x.axis&&null!=b.x.axis.title?null:_geo.geotoolkit.scene.Wp.wM(this.tb,{location:_geo.geotoolkit.ea.Oa.Yc,text:"x"}).text,u=null!=b.y&&null!=b.y.axis&&null!=b.y.axis.title?null:_geo.geotoolkit.scene.Wp.wM(this.tb,{location:_geo.geotoolkit.ea.Oa.Rc,
text:"y"}).text,v=_geo.geotoolkit.scene.Wp.pK(this.tb,{location:_geo.geotoolkit.ea.Oa.Rc,connect:!0,autolabelrotation:!0,autolabelrotationangle:-Math.PI/2,title:{text:"",visible:!1,textstyle:new _geo.geotoolkit.attributes.eb({color:e,font:c}),alignment:_geo.geotoolkit.util.Da.We}}).axis;v.xe("crossplot-vertical-axis");v.yz(this.iw.y);var w=_geo.geotoolkit.Ca(null!=b.z&&null!=b.z.axis?b.z.axis.title:null,{text:"",visible:!1,textstyle:new _geo.geotoolkit.attributes.eb({color:e,font:c}),alignment:_geo.geotoolkit.util.Da.We}),
f={location:_geo.geotoolkit.controls.shapes.wq.pd,componentsizes:{colorbox:r,axis:p,title:f},axis:{autolabelrotation:null!=b.z&&void 0!==b.z.autolabelrotation?b.z.autolabelrotation:!0,title:w},colorprovider:new _geo.geotoolkit.util.ym({values:[0,1],colors:["black","black"]}),title:{text:"zlabel",textstyle:new _geo.geotoolkit.attributes.eb({color:e,font:c})},flip:!1};this.ae=null;this.qh=(new _geo.geotoolkit.controls.shapes.Z5(f)).Tl(this.YF?null!=this.hr?new _geo.geotoolkit.scene.Rk(this.hr.width,
this.hr.height):new _geo.geotoolkit.scene.Rk:null).Qf(!0);this.Je={x:g,y:v,z:this.qh.jb().axis.item};this.Pi={x:q,y:u,z:!1===w.visible?this.qh.jb().title.item:null};f=new _geo.geotoolkit.scene.Group;f.Ul(t);this.tb.Yr(f,_geo.geotoolkit.ea.Oa.pd);this.tb.Yr(this.qh,_geo.geotoolkit.ea.Oa.pd);this.Sx=new _geo.geotoolkit.scene.Group;this.Sx.va([(new _geo.geotoolkit.scene.og).Kd("xplot_layer").va([this.ZH=new _geo.geotoolkit.controls.shapes.d6])]);this.vib=(new _geo.geotoolkit.scene.Group).va([this.rpc=
(new _geo.geotoolkit.scene.og).Kd("highlight_layer").va([this.IOa=(new _geo.geotoolkit.controls.shapes.d6).yb("default")])]);this.sra={"default":{"cross-plot":this.IOa,"highlighted-indices":[],data:[],options:{}}};this.tb.Mc().oh(0,this.vib);this.tb.Mc().oh(0,this.Sx);this.tb.Mc().mk(!0);this.Ze.mk(!0);this.eDa();this.tb.yTa();this.Kv();this.hkb.Ka(!1);this.qh.Ka(!1);this.vib.Tl(this.YF?null!=this.hr?new _geo.geotoolkit.scene.Rk(this.hr.width,this.hr.height):new _geo.geotoolkit.scene.Rk:null);this.Sx.Tl(this.YF?
null!=this.hr?(new _geo.geotoolkit.scene.Rk(this.hr.width,this.hr.height)).Sva(null):(new _geo.geotoolkit.scene.Rk).Sva(null):null);this.Sx.Qf(!0);this.setData(a);this.ke(m);this.jC(this.o0a());this.Kv();return this}var a="#e0e0e0",g="#f5f5f5",d="16px Roboto",e="#757575",c="13px Roboto";_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Wg);_geo.geotoolkit.da(b,"geotoolkit.widgets.CrossPlot");b.prototype.dispose=function(){if(null!=this.eg)this.eg.hb("StateChanged",this.wNa);else for(var a in this.tu)this.tu.hasOwnProperty(a)&&
null!=this.tu[a]&&this.tu[a].hb(_geo.geotoolkit.data.Yl.$.Hn,this.GHb);_geo.geotoolkit.oa.Wg.prototype.dispose.call(this)};b.prototype.Kv=function(){var a=this.o0a();a&&!a.isEmpty()&&this.jC(a);_geo.geotoolkit.oa.Wg.prototype.Kv.call(this);a=this.tb.vb("center");null!=this.hkb&&null!=a&&this.hkb.Ea(a.xa()).Ka(!0);return this};b.prototype.Ea=function(a){_geo.geotoolkit.oa.Wg.prototype.Ea.call(this,a);this.wm();return this};b.prototype.Sg=function(){_geo.geotoolkit.oa.Wg.prototype.Sg.call(this);var a=
_geo.geotoolkit.selection.from(this.tb).He('node => id(node) == "manipulator_layer"').tm();this.qw.Bz(function(a){for(var b=0;b<a.length;++b)if(a[b].crossplot===this.ZH)return a[b];return[]}.bind(this)).addListener(_geo.geotoolkit.controls.ia.Selection.$.EI,function(a,b){b.getSelection().indices instanceof Array&&this.VP({"default":{indices:b.getSelection().indices}},this.QNa)}.bind(this));this.Slb=(new _geo.geotoolkit.controls.ia.Soa(a)).addListener(_geo.geotoolkit.controls.ia.Soa.$.nma,function(a,
b){for(var c=b.getSelection(),d=0;d<c.length;d++)c[d].crossplot===this.ZH&&this.VP(c[d].indices,this.QNa)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.fc.$.Uu,function(a){a.isEnabled()?(this.qw.cc(!1),this.xp.cc(!1)):this.xp.cc(!0)}.bind(this)).cc(!1);this.xY.add(this.Slb);this.OF.cc(!0);this.OF.cc(!0).addListener(_geo.geotoolkit.controls.ia.ew.$.aF,function(a){this.Sx.Tl(null)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.ew.$.au,function(a){this.Sx.Tl(this.YF?null!=this.hr?(new _geo.geotoolkit.scene.Rk(this.hr.width,
this.hr.height)).Sva(null):(new _geo.geotoolkit.scene.Rk).Sva(null):null)}.bind(this));return this};b.prototype.eDa=function(){function b(c){c.Kj("MAJOR").setColor(a);c.Kj("MINOR").setColor(g);c.Tg("MINOR",!0);c.Tg("EDGE",!1)}var c=_geo.geotoolkit.axis.E6.Za(),d=c.create(),e=c.create(),f=(new _geo.geotoolkit.axis.Zv).iab(_geo.geotoolkit.axis.Zv.rIa.pCb),r=new _geo.geotoolkit.axis.aJ,t=new _geo.geotoolkit.axis.aJ,q=new _geo.geotoolkit.axis.aJ,m=c.create({ticks:{EDGE:{visible:!0}}}),c=c.create({ticks:{EDGE:{visible:!0}}}),
u=new _geo.geotoolkit.axis.aJ,v=new _geo.geotoolkit.axis.aJ;b(m);b(c);b(u);b(v);this.Zo={x:d,y:e,z:f,xlog:r,ylog:t,zlog:q};this.Vx={x:m,y:c,xlog:u,ylog:v};null==this.Fm&&(this.Fm=new _geo.geotoolkit.axis.Mx(m,c),this.Fm.yz(_geo.geotoolkit.axis.xd.ic,this.iw.x),this.Fm.yz(_geo.geotoolkit.axis.xd.$b,this.iw.y),d=new _geo.geotoolkit.scene.og,d.Kd("grid_layer"),d.va(this.Fm),this.Sx.oh(0,d),this.tR.x=(new _geo.geotoolkit.controls.shapes.pl({bounds:new _geo.geotoolkit.util.Rect(0,0,1,1),bins:25,frequencytype:_geo.geotoolkit.controls.shapes.pl.uX.lgb,
fillstyle:new _geo.geotoolkit.attributes.Fa("rgba(192,192,192,0.3)"),linestyle:new _geo.geotoolkit.attributes.Aa("rgba(192,192,192,0.3)")})).Ka(!1),this.tR.y=(new _geo.geotoolkit.controls.shapes.pl({bounds:new _geo.geotoolkit.util.Rect(0,0,1,1),bins:25,frequencytype:_geo.geotoolkit.controls.shapes.pl.uX.lgb,fillstyle:new _geo.geotoolkit.attributes.Fa("rgba(192,192,192,0.3)"),linestyle:new _geo.geotoolkit.attributes.Aa("rgba(192,192,192,0.3)")})).Ka(!1),d=(new _geo.geotoolkit.scene.Group).va(this.tR.x),
e=(new _geo.geotoolkit.scene.Group).va(this.tR.y).rotate(-Math.PI/2,.5,.5),f=null,this.YF&&(f=null==this.hr?new _geo.geotoolkit.scene.Rk:new _geo.geotoolkit.scene.Rk(this.hr.width,this.hr.height)),r=this.tb.vb("center"),this.hkb=(new _geo.geotoolkit.scene.Group).Tl(f).Ka(!1).Ea(null!=r?r.ga().clone():null).Sa(new _geo.geotoolkit.util.Rect(0,0,1,1)).va([new _geo.geotoolkit.scene.shapes.lc({left:0,top:0,width:1,height:1,linestyle:new _geo.geotoolkit.attributes.Aa("transparent")}),d,e]),r.va(this.hkb));
this.r$();return this};b.prototype.r$=function(){this.Je.x.Vg(this.Zo["x"+(this.Vw.x?"log":"")]);this.Je.y.Vg(this.Zo["y"+(this.Vw.y?"log":"")]);this.Je.z.Vg(this.Zo["z"+(this.Vw.z?"log":"")]);this.Fm.Vg(_geo.geotoolkit.util.Mb.$b,this.Vx["x"+(this.Vw.x?"log":"")]);this.Fm.Vg(_geo.geotoolkit.util.Mb.ic,this.Vx["y"+(this.Vw.y?"log":"")]);var a=this.Vw.z?Math.log(this.lv.z)/Math.LN10:this.lv.z,b=this.Vw.z?Math.log(this.zu.z)/Math.LN10:this.zu.z;this.Je.z.Sa(new _geo.geotoolkit.util.Rect(a,a,b,b))};
b.prototype.setData=function(a){_geo.geotoolkit.Sb(a,this.getData());_geo.geotoolkit.oa.Wg.prototype.setData.call(this,a);null!=a.bounds&&this.Ea(a.bounds);this.$ma(a.header);null!=a.datasource&&(null!=this.eg&&this.eg.hb("StateChanged",this.wNa),this.eg=a.datasource,null!=this.eg&&this.eg.kb("StateChanged",this.wNa));null!=a.marker&&this.Kxb(a.marker);void 0!==a.colorprovider&&(null!=a.z?this.UA(a.colorprovider,a.z.logarithmic):this.UA(a.colorprovider));null!=a.x&&this.D$("x",a.x);null!=a.y&&this.D$("y",
a.y);null!=a.z&&this.D$("z",a.z);this.Dx(a.tools);return this};b.prototype.getData=function(a){a=a||{};var b=_geo.geotoolkit.oa.Wg.prototype.getData.call(this,a);null!=this.ga()&&(b.bounds=this.ga().ka());b.header=this.kla(b.header);b.x=this.Y8("x",a);b.y=this.Y8("y",a);b.z=this.Y8("z",a);null!=this.zn()&&(b.colorprovider=this.zn().ka());b.marker=this.usb();return b};b.prototype.setOptions=function(a){a=_geo.geotoolkit.Sb(a,this.ka());this.$ma(a.header);null!=a.marker&&this.Kxb(a.marker);void 0!==
a.colorprovider&&this.UA(a.colorprovider);a.hasOwnProperty("tools")&&this.Dx(a.tools);return this};b.prototype.jb=function(){var a=_geo.geotoolkit.oa.Wg.prototype.getData.call(this);a.header=this.kla();null!=this.zn()&&(a.colorprovider=this.zn().ka());a.marker=this.usb();a.colorprovider=this.zn();a.tools=this.a_();return a};b.prototype.Kxb=function(a){if(null==a)return this;var b={},c={};null!=a.defaultcolor&&(b.defaultcolor=a.defaultcolor);void 0!==a.defaultlinecolor&&(b.defaultlinecolor=a.defaultlinecolor);
null!=a.highlightcolor&&(c.defaultcolor=a.highlightcolor,b.highlightcolor=a.highlightcolor);null!=a.size&&(b.symbolsize=a.size);c.symbolsize=null!=a.highlightsize?a.highlightsize:a.size;null!=a.painter&&(b.painter="string"===typeof a.painter?_geo.geotoolkit.AV(a.painter):a.painter);c.painter=null!=a.highlightpainter?"string"===typeof a.highlightpainter?_geo.geotoolkit.AV(a.highlightpainter):a.highlightpainter:"string"===typeof a.painter?_geo.geotoolkit.AV(a.painter):a.painter;this.ZH.setData(b);this.IOa.setData(c);
this.p4c=c;return this};b.prototype.usb=function(){var a={},b=this.ZH.getData(),c=this.IOa.getData();a.painter="string"===typeof b.painter?b.painter:b.painter.getClassName();a.size=b.symbolsize;a.defaultcolor=b.defaultcolor.ND();a.defaultlinecolor=b.defaultlinecolor instanceof _geo.geotoolkit.util.rb?b.defaultlinecolor.ND():null;a.highlightcolor=b.highlightcolor.ND();a.highlightsize=c.symbolsize;return a};b.prototype.$ma=function(a){if(null==a)return this;var b={};null!=a.title&&this.lg.ja(a.title);
null!=a.annotationsize&&(b.north=a.annotationsize);this.al(b);this.Kv();return this};b.prototype.kla=function(){var a={};null!=this.lg&&(a.title=this.lg.ka());a.annotationsize=this.tb.vb(_geo.geotoolkit.ea.Oa.Se).mf();return a};b.prototype.vgd=function(){function a(b,c){return b.toFixed(2)}function b(a,c){return Math.pow(10,a).toFixed(2)}return this.Vw.x?b:a};b.prototype.Ged=function(){function a(b,c){return c.toFixed(2)}function b(a,c){return Math.pow(10,c).toFixed(2)}return this.Vw.y?b:a};b.prototype.D$=
function(a,b,c){var d=null!=c?c:{};if(null==b)return d;a=a.toLowerCase();if("x"!==a&&"y"!==a&&"z"!==a)return d;var e=!1,f={},g={},q={x:"south",y:"west",z:"east"};void 0!==b.neatlimits&&(this.B1a[a]=b.neatlimits,this.iw[a]&&(b.minspan&&this.iw[a].setOptions({minspan:b.minspan}),this.iw[a].kga(void 0!==b.logarithmic&&b.logarithmic?!1:b.neatlimits)));if(void 0===b.datasource)if(null!=this.eg&&null!=b.name){var m=null;this.eg.Ve().He('item => name(item) == "'+b.name+'"').select(function(a){m=a});null!=
m&&(b.datasource=m)}else null!=this.tu[a]&&(b.datasource=this.tu[a]);b.datasource!=this.tu[a]&&(e=!0,null==this.eg&&null!=this.tu[a]&&this.tu[a].hb(_geo.geotoolkit.data.Yl.$.Hn,this.GHb),this.tu[a]=b.datasource,null==this.eg&&null!=this.tu[a]&&this.tu[a].kb(_geo.geotoolkit.data.Yl.$.Hn,this.GHb));var u=this.tu[a];b.hasOwnProperty("unit")&&(null==b.unit!==(null==this.gl[a])||null!=b.unit&&!_geo.geotoolkit.util.zf.Za().Tb(b.unit).NI(this.gl[a]))&&(this.gl[a]=b.unit,null!=u&&(e=!0));null!=u&&(null==
u.Tb()||null!=u.Tb()&&""===u.Tb().be()?null!=this.gl[a]&&(this.gl[a]=null,e=!0):_geo.geotoolkit.util.zf.Za().Tb(u.Tb()).qr(this.gl[a])||(this.gl[a]=u.Tb(),e=!0));null!=b.autominmax&&(this.TZa[a]=b.autominmax);e&&(null!=u?null==b.data&&(b.data=u.toArray(!1,this.gl[a])):b.data=[]);var v=[];if(null!=b.data)for(e=!0,null==this.s7[a]&&0<b.data.length&&(v=_geo.geotoolkit.util.Math.qo(b.data),null==b.min&&(b.min=v[0]),null==b.max&&(b.max=v[1]),null==b.reversed&&(b.reversed="y"===a?b.min<b.max:b.min>b.max)),
this.s7[a]=b.data,this.FF[a]=[],v=0;v<b.data.length;++v)this.FF[a].push(Math.log(b.data[v])/Math.LN10);!0===this.TZa[a]&&(null!=u?(b.min=u.Ug(this.gl[a]),b.max=u.Ih(this.gl[a])):null!=this.s7[a]&&(v=_geo.geotoolkit.util.Math.qo(this.s7[a]),b.min=v[0],b.max=v[1]));null!=b.logarithmic&&this.Vw[a]!==b.logarithmic&&(e=!0,this.Vw[a]=b.logarithmic,"x"===a&&(v=this.vgd(),this.or.Ov(_geo.geotoolkit.ea.Oa.Se,{textconverter:v}),this.or.Ov(_geo.geotoolkit.ea.Oa.Yc,{textconverter:v})),"y"===a&&(v=this.Ged(),
this.or.Ov(_geo.geotoolkit.ea.Oa.pd,{textconverter:v}),this.or.Ov(_geo.geotoolkit.ea.Oa.Rc,{textconverter:v})));null==b.label&&null!==this.Pi[a]&&(b.label={});null!=b.label&&null==b.label.text&&null!=u&&(u=[u.getName()],this.gl[a]instanceof _geo.geotoolkit.util.ar?(u.push(" ("),u.push(this.gl[a].be()),u.push(")")):"string"===typeof this.gl[a]&&(u.push(" ("),u.push(this.gl[a]),u.push(")")),b.label.text=u.join(""));null!=b.label&&(null!=this.Pi[a]?this.Pi[a].ja(b.label):"z"===a?(u=this.Je[a].i4(),g.axis=
{title:{title:b.label.text,textstyle:null!=u?u.clone().ja(b.label.textstyle):b.label.textstyle}}):(u=b.label.textstyle?this.Je[a].i4().clone().ja(b.label.textstyle):this.Je[a].i4(),this.Je[a].mp({title:b.label.text,textstyle:u})),"z"===a&&null!=b.label.text&&(g.titletext=b.label.text));null!=b.axis&&(null!=b.axis.title&&this.Je[a].mp(b.axis.title),null!=b.axis.baseline&&this.Je[a].fT(b.axis.baseline),null!=b.axis.autolabelrotation&&("z"===a?this.qh.setOptions({axis:{autolabelrotation:b.axis.autolabelrotation}}):
this.Je[a].iC(b.axis.autolabelrotation)),null!=b.axis.autolabelrotationangle&&("z"===a?this.qh.setOptions({axis:{autolabelrotationangle:b.axis.autolabelrotationangle}}):this.Je[a].Zfa(b.axis.autolabelrotationangle)));null!=b.annotationsize&&(f[q[a]]=b.annotationsize);null!=b.min&&(this.lv[a]=b.min);null!=b.max&&(this.zu[a]=b.max);!0===b.neatlimits&&(q=_geo.geotoolkit.util.Math.Hs(this.lv[a],this.zu[a],!1,!1),this.lv[a]=q.gb(),this.zu[a]=q.nb());!0===e&&(d["data"+a]=this.Vw[a]?this.FF[a]:this.s7[a]);
null!=b.tickgenerator&&(this.Zo[a+(this.Vw[a]?"log":"")]=b.tickgenerator);null!=b.gridtickgenerator&&"z"!==a&&(this.Vx[a+(this.Vw[a]?"log":"")]=b.gridtickgenerator);null!=b.axisticks&&(this.Zo[a].setOptions(b.axisticks),this.Zo[a+"log"].setOptions(b.axisticks));null!=b.gridticks&&"z"!==a&&(this.Vx[a].setOptions(b.gridticks),this.Vx[a+"log"].setOptions(b.gridticks));this.Vw[a]?(d["min"+a]=0===this.lv[a]?0:Math.log(this.lv[a])/Math.LN10,d["max"+a]=0===this.zu[a]?0:Math.log(this.zu[a])/Math.LN10):(d["min"+
a]=this.lv[a],d["max"+a]=this.zu[a]);"z"===a&&(g.min=d.minz,g.max=d.maxz);e={};null!=b.histogram&&(q=this.tR[a],null!=b.histogram.visible&&q.Ka(b.histogram.visible),null!=b.histogram.fillstyle?e.fillstyle=b.histogram.fillstyle:null!=b.histogram.color&&(e.fillstyle=_geo.geotoolkit.attributes.Fa.ab(b.histogram.color)),null!=b.histogram.linestyle?e.linestyle=b.histogram.linestyle:null!=b.histogram.linecolor&&(e.linestyle=_geo.geotoolkit.attributes.Aa.ab(b.histogram.linecolor)),null!=b.histogram.bins&&
(e.bins=Number(b.histogram.bins)));if(null==c){this.r$();this.ZH.setData(d);if("z"!==a){c={};c["min"+a]=d["min"+a];c["max"+a]=d["max"+a];for(var w in this.sra)this.sra.hasOwnProperty(w)&&this.sra[w]["cross-plot"].setData(c)}this.jC(this.o0a())}else"z"!==a&&(c["min"+a]=d["min"+a],c["max"+a]=d["max"+a]);null!=b.reversed&&("x"===a&&this.tb.Mc().Nv(b.reversed),"y"===a&&this.tb.Mc().mk(b.reversed),"z"===a&&(g.flip=b.reversed));this.al(f);"z"===a&&(this.ae instanceof _geo.geotoolkit.util.ym&&(null!=this.ae.Qu()?
this.ae.jk(this.ae.Qu(),g.min,g.max):this.ae.Sfa(g.min,g.max)),this.qh.setOptions(g),null!=b.legendvisible&&this.qh.Ka(b.legendvisible),this.qh.yg());this.Kv();"z"===a&&this.qh.xb();"z"!==a&&!0===this.tR[a].ib()&&(this.tR[a].setData(e),this.ZH.vi(),this.C0b(a));return d};b.prototype.o0a=function(){var a=this.ZH.ga();this.iw.x.vi(a.sa(),a.za(),this.ZH.Ya());a=a.clone().setX(this.iw.x.Ug()).qb(this.iw.x.Ih()-this.iw.x.Ug());this.iw.y.vi(a.qa(),a.wa(),this.ZH.Ya());return a=a.clone().setY(this.iw.y.Ug()).Db(this.iw.y.Ih()-
this.iw.y.Ug())};b.prototype.wm=function(){_geo.geotoolkit.oa.Wg.prototype.wm.call(this);if(!this.vOa&&this.ZH){this.vOa=!0;var a=this.FM(),b=this.o0a();b.Pj(a)||this.jC(b);this.vOa=!1}return this};b.prototype.Y8=function(a,b){a=a.toLowerCase();if("x"!==a&&"y"!==a&&"z"!==a)return this;var c={};c.unit=this.gl[a];null!=this.tu[a]&&(c.autominmax=this.TZa[a].autominmax);null!=b&&!0!==b["no-data"]&&(c.datasource=this.tu[a],c.data=this.s7[a]);c.label=null!=this.Pi[a]?this.Pi[a].ka():{text:this.Je[a].uo(),
textstyle:this.Je[a].i4()};var d={x:_geo.geotoolkit.ea.Oa.Yc,y:_geo.geotoolkit.ea.Oa.Rc,z:_geo.geotoolkit.ea.Oa.pd},d=this.tb.vb(d[a]);c.annotationsize="x"===a?d.mf():d.yl();c.min=this.lv[a];c.max=this.zu[a];c.logarithmic=this.Vw[a];this.Zo[a]&&(c.axisticks=this.Zo[a].ka());if("z"!==a){c.gridticks=this.Vx[a].ka();var d={},e=this.tR[a];d.visible=e.ib();d.bins=e.CP();d.color=e.sb().ac();d.linecolor=e.Xa().ac();c.histogram=d}"z"===a&&(c.reversed=this.qh.jb().flip);"x"===a&&(c.reversed=this.tb.Mc().MA());
"y"===a&&(c.reversed=this.tb.Mc().Cr());"z"===a&&(c.legendvisible=this.qh.ib());return c};b.prototype.C0b=function(a){if("x"!==a&&"y"!==a||null==this.tR||null==this.tR[a]||!1===this.tR[a].ib())return this;var b=this.tb.Mc().Nb(),c=this.ZH.oWb(b).map(function(b){return b[a]}),d="x"===a?b.getX():b.getY(),b=d+("x"===a?b.aa():b.ba());this.tR[a].setData({data:c,minvalue:d,maxvalue:b});"y"===a&&this.tR[a].getParent().Nv(this.tb.Mc().MA());"x"===a&&this.tR[a].getParent().mk(this.tb.Mc().Cr());this.tR[a].ma();
return this};b.prototype.wkd=function(a,b,c){if(c.data instanceof _geo.geotoolkit.util.ZN){a={x:{axisname:"x",dataModified:!1,boundsChanged:!1,dataCommands:[],changed:!1,exists:!1,data:null},y:{axisname:"y",dataModified:!1,dataCommands:[],boundsChanged:!1,changed:!1,exists:!1,data:null},z:{axisname:"z",dataModified:!1,dataCommands:[],boundsChanged:!1,changed:!1,exists:!1,data:null}};for(var d in this.tu)if(this.tu.hasOwnProperty(d)){a[d].exists=!0;var e=this.tu[d];if(null!=e){var f=c.data.OB(e)?c.data.get(e):
null,g;if(null!=f)for(b=0;b<f.length;b++)if(a[d].changed=!0,g=f[b].data)"state"===g.name?(null!=g.value.min&&(a[d].min=g.value.min,a[d].boundsChanged=!0),null!=g.value.max&&(a[d].max=g.value.max,a[d].boundsChanged=!0),g=g.value.range,null!=g&&null!=g.changes&&(a[d].dataModified=!0,"shifted"===g.changes?a[d].dataCommands.push({name:"shifted",amount:g.amount}):g.changes===_geo.geotoolkit.data.xq.bm.tIa?a[d].dataCommands.push({name:g.changes,amount:g.amount}):g.changes===_geo.geotoolkit.data.xq.bm.Mya?
a[d].dataCommands.push({name:g.changes,from:g.from,amount:g.amount}):g.changes===_geo.geotoolkit.data.$.vf&&(g=this.Y8(d,{}),null!=g.datasource&&(a[d].name="reset",a[d].data=g.datasource,a[d].src=e)))):"data"===g.name&&(a[d].data=g.value,a[d].name="data",a[d].src=e)}}c=function(a,b){if(!a.exists||!b.exists)return!1;var c=a.boundsChanged&&this.TZa[a.axisname]||b.boundsChanged&&this.TZa[b.axisname]||a.changed!==b.changed||a.dataModified!==b.dataModified||a.dataCommands.length!==b.dataCommands.length||
"reset"===a.name||"reset"===b.name;if(!c&&0<a.dataCommands.length)for(var d=a.dataCommands,e=b.dataCommands,f=0;f<d.length;++f)if(d[f].name!==e[f].name||d[f].amount!==e[f].amount||d[f].name===_geo.geotoolkit.data.xq.bm.Mya&&d[f].from!==e[f].from){c=!0;break}return c}.bind(this);b={};if(c(a.x,a.y)||c(a.x,a.z))a.x.changed&&(b=this.ava(_geo.geotoolkit.data.Yl.$.Hn,a.x.src,a.x,b)),a.y.changed&&(b=this.ava(_geo.geotoolkit.data.Yl.$.Hn,a.y.src,a.y,b)),a.z.changed&&(b=this.ava(_geo.geotoolkit.data.Yl.$.Hn,
a.z.src,a.z,b)),this.r$(),this.ZH.setData(b),this.jC(this.o0a());else{c=a.x.dataCommands;for(b=0;b<c.length;++b)d=c[b],"shifted"===d.name?this.F6b(d.amount):d.name===_geo.geotoolkit.data.xq.bm.tIa?this.sP(d.amount):d.name===_geo.geotoolkit.data.xq.bm.Mya&&this.JGa(d.from,d.amount);if(0===c.length){var q=this.getData({"no-data":!0});c=function(a,b){null!=q[a]&&null!=b[a]&&!0!==q[a].autominmax&&(b[a].autominmax=!1,b[a].min=q[a].min,b[a].max=q[a].max)};c("x",a);c("y",a);c("z",a);this.setData(a)}}}};
b.prototype.ava=function(a,b,c,d){d=this.sGb("x",a,b,c,d);d=this.sGb("y",a,b,c,d);return d=this.sGb("z",a,b,c,d)};b.prototype.sGb=function(a,b,c,d,e){if(b!==_geo.geotoolkit.data.Yl.$.Hn||!(c instanceof _geo.geotoolkit.data.Or||c instanceof _geo.geotoolkit.data.nH)||this.tu[a]!==c)return e;b={data:c.toArray(!1,this.gl[a])};!0===c.autominmax&&(b.min=c.Ug(this.gl[a]),b.max=c.Ih(this.gl[a]));return this.D$(a,b,e)};b.prototype.YPb=function(a,b){return this.tu[a].YPb(b,this.gl[a])};b.prototype.getValue=
function(a,b){if(!(null==this.tu[a]||this.tu[a].getLength()<=b)){var c=this.tu[a].getValue(b);null!=this.tu[a].Tb()&&(c=this.tu[a].Tb().convert(c,this.gl[a]));this.Vw[a]&&(c=Math.log(c)/Math.LN10);return c}};b.prototype.F6b=function(a){for(var b in this.tu)if(this.tu.hasOwnProperty(b)){var c=this.Vw[b]?this.FF[b]:null;if(null!=c)for(var d=0;d<a;d++)c.shift()}this.ZH.F6b(a)};b.prototype.JGa=function(a,b){for(var c in this.tu)if(this.tu.hasOwnProperty(c)){var d=this.Vw[c]?this.FF[c]:null;null!=d&&d.splice(a,
b)}this.ZH.JGa(a,b)};b.prototype.sP=function(a){for(var b=this.tu.x.getLength(),c=b-a;c<b;c++){var d={x:this.getValue("x",c),y:this.getValue("y",c),z:this.getValue("z",c)};this.Vw.x?this.FF.x[c]=d.x:this.s7.x[c]=d.x;this.Vw.y?this.FF.y[c]=d.y:this.s7.y[c]=d.y;this.Vw.z?this.FF.z[c]=d.z:this.s7.z[c]=d.z}this.ZH.sP(a)};b.prototype.UA=function(a,b){if(null==a){var c=this.ZH.getData().defaultcolor.ND();a=new _geo.geotoolkit.util.ym({values:[0,1],colors:[c,c]})}a instanceof _geo.geotoolkit.util.Ie?this.ae=
a:null!=a.type&&(c=_geo.geotoolkit.util.Ie.r6a(a.type),this.ae=c.ab(a));var c={},d=null;if(d=null!=b?this.Vw.z===b?this.Vw:b:this.Vw.z){for(var d=this.ae.Cv(),e=d.map(function(a){return _geo.geotoolkit.util.Math.log10(a.value,null,!0)}),f=2.220446049250313E-16,g=1;g<d.length;++g)e[g]===e[g-1]&&(e[g-1]-=1.1*f,e[g]+=1.1*f);c.colorprovider=new _geo.geotoolkit.util.ym({values:e,colors:d.map(function(a){return a.color})})}else c.colorprovider=this.ae;this.r$();this.ZH.setData(c);this.qh.setOptions(c);
this.qh.xb();this.qh.yg();return this};b.prototype.zn=function(){return this.ae};b.prototype.V6a=function(a){null==a&&(a="default");return null==this.sra[a]?null:this.sra[a]["highlighted-indices"]};b.prototype.t8a=function(a,b){var c=this.ZH.HP(a);this.VP(c,b)};b.prototype.n8c=function(a,b,c){var d=a["cross-plot"];null!=b.options&&d.setData(b.options);if(null!=b.indices){var e=!0===c?b.indices:a["highlighted-indices"].concat(b.indices);a["highlighted-indices"]=e;a=[];b=[];c=this.Vw.x?this.FF.x:this.s7.x;
var f=this.Vw.y?this.FF.y:this.s7.y;if(Array.isArray(c)&&Array.isArray(f))for(var e=e.slice().sort(),g=0;g<e.length;++g){var q=e[g];if(0===g||q!==e[g-1])a.push(c[q]),b.push(f[q])}d.setData({datax:a,datay:b})}};b.prototype.VP=function(a,b){function c(a,b,d){a=a.getData();var e={};e["min"+d]=a["min"+d];e["max"+d]=a["max"+d];b.setData(e)}var d=a;Array.isArray(a)&&(d={"default":{indices:a}});for(var e in d)if(d.hasOwnProperty(e)){var f=this.sra[e];null==f&&(f=(new _geo.geotoolkit.controls.shapes.d6).yb(e).setData(this.p4c).Ea(this.IOa.ga().clone()),
c(this.IOa,f,"x"),c(this.IOa,f,"y"),this.rpc.va([f]),this.sra[e]={"cross-plot":f,"highlighted-indices":[]});this.n8c(this.sra[e],d[e],b)}return this};b.prototype.HP=function(a){return this.ZH.HP(a)};b.prototype.Cl=function(){this.C0b("x");this.C0b("y")};b.prototype.Dx=function(a){if(null==a)return this;null!=a.crosshair&&(null!=a.crosshair.north&&(a.crosshair.north.textconverter=null),null!=a.crosshair.south&&(a.crosshair.south.textconverter=null),null!=a.crosshair.east&&(a.crosshair.east.textconverter=
null),null!=a.crosshair.west&&(a.crosshair.west.textconverter=null));_geo.geotoolkit.oa.Wg.prototype.Dx.call(this,a);return this};b.prototype.HRc=function(a,b,c){this.Wib&&this.gz(this.Wib);this.Wib=new _geo.geotoolkit.controls.ia.eJ({offset:b?b:0,symbolAlignment:a?a:_geo.geotoolkit.controls.ia.eJ.hR.zT,group:this.getParent(),colorbar:this.qh,callback:function(a,b,c){a=new _geo.geotoolkit.util.Rect(a.x-5,a.y-5,a.x+5,a.y+5);a=this.Mc().Ya().qe(a);a=this.HP(a);return 0<a.length?this.getData().z.data[a[a.length-
1]]:null}.bind(this)});c instanceof _geo.geotoolkit.scene.shapes.Symbol&&this.Wib.bl(c);this.rr(this.Wib);return this};var f=_geo.geotoolkit.oa.Ff.ue.lq();f.Jq("geotoolkit.widgets.CrossPlot",f.YB("geotoolkit.widgets.BaseWidget"));return b}();
_geo.geotoolkit.oa.pl=function(){function b(a){null==a&&(a={});var b=15,g=25,h=15,l=e;a.border=_geo.geotoolkit.Ca(a.border,{color:"transparent"},!0);g={bounds:a.bounds,border:a.border,north:null,south:null,west:null,east:null,annotationssizes:{north:b+g,west:b+l+g,south:b+l+h+g,east:b+l}};g=_geo.geotoolkit.Ca(a,g,!0);g.fillstyle=g.backgroundfillstyle;this.FF=this.Ba=this.eg=null;this.H0a=!1;this.hh=null;this.lv={x:0,y:0};this.zu={x:1,y:null};this.OO=null;this.Ajc=this.rGb=this.qGb=!1;this.OO=new _geo.geotoolkit.scene.og;
this.OO.Kd("hplot_layer");b=this.Xra();_geo.geotoolkit.oa.Wg.call(this,g);this.TV=new _geo.geotoolkit.axis.Tna({orientation:_geo.geotoolkit.axis.xd.ic});this.rT=new _geo.geotoolkit.axis.Tna({orientation:_geo.geotoolkit.axis.xd.$b});this.lg=_geo.geotoolkit.scene.Wp.wM(this.tb,{location:_geo.geotoolkit.ea.Oa.Se,text:"title",textstyle:{font:d}}).text;g=_geo.geotoolkit.scene.Wp.pK(this.tb,{location:_geo.geotoolkit.ea.Oa.Yc,connect:!0}).axis;g.yz(this.TV);g.xe("horizontalAxis");var h=_geo.geotoolkit.scene.Wp.wM(this.tb,
{location:_geo.geotoolkit.ea.Oa.Yc,text:"xlabel"}).text,l=_geo.geotoolkit.scene.Wp.wM(this.tb,{location:_geo.geotoolkit.ea.Oa.Rc,text:"ylabel"}).text,n=_geo.geotoolkit.scene.Wp.pK(this.tb,{location:_geo.geotoolkit.ea.Oa.Rc,connect:!0}).axis;n.yz(this.rT);n.xe("verticalAxis");var p=_geo.geotoolkit.scene.Wp.pK(this.tb,{location:_geo.geotoolkit.ea.Oa.pd,connect:!0}).axis;p.xe("verticalAxis");this.Je={x:g,west:n,east:p};this.Pi={x:h,y:l};this.Sx=new _geo.geotoolkit.scene.Group;this.Sx.va(this.OO);this.tb.Mc().oh(0,
this.Sx);this.eDa();this.Kv();this.gr.Ka(!1);this.Sx.Tl(new _geo.geotoolkit.scene.Rk);this.hLb=this.ava.bind(this);this.UO=this.cQ.bind(this);this.setData(a);this.tb.Mc().mk(!0);this.jC(b.ga());this.Jzb()}var a="#e0e0e0",g="#f5f5f5",d="16px Roboto",e=30;_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Wg);_geo.geotoolkit.da(b,"geotoolkit.widgets.Histogram");b.$={Zga:"dataUpdated"};b.prototype.dispose=function(){null!=this.eg&&(this.eg.hb(_geo.geotoolkit.data.Yl.$.Hn,this.hLb),this.eg.hb(_geo.geotoolkit.data.$.vf,
this.UO),this.eg=null);_geo.geotoolkit.oa.Wg.prototype.dispose.call(this)};b.prototype.Xra=function(){var a=new _geo.geotoolkit.controls.shapes.pl;a.kb(_geo.geotoolkit.controls.shapes.pl.$.Zga,function(a,b,c){this.Ja(_geo.geotoolkit.oa.pl.$.Zga,b,c)}.bind(this));this.OO.va(a);return a};b.prototype.zA=function(a){return this.OO.vc(null!=a?a:0)};b.prototype.Sg=function(){_geo.geotoolkit.oa.Wg.prototype.Sg.call(this);this.fM.setMode(_geo.geotoolkit.controls.ia.tF.ic);this.Ze.Ka(!1);this.tb.vQ(function(a,
b){b=_geo.geotoolkit.scene.Wi.H9a(a,b);return _geo.geotoolkit.scene.Wi.Oma(a,b)});var a=new _geo.geotoolkit.util.q0,b=function(b,d){var e=this.zA().Z8(b);return null==e?"":"["+a.format(e.minvalue)+":"+a.format(e.maxvalue)+"] "}.bind(this),d=function(b,d){var e=this.zA().Z8(b);return null==e?"":a.format(e.frequency)+" "}.bind(this);this.or.Ov(_geo.geotoolkit.ea.Oa.Se,{textconverter:b});this.or.Ov(_geo.geotoolkit.ea.Oa.Yc,{textconverter:b});this.or.Ov(_geo.geotoolkit.ea.Oa.pd,{textconverter:d});this.or.Ov(_geo.geotoolkit.ea.Oa.Rc,
{textconverter:d});this.qw.Bz(function(a){for(var b=0;b<a.length;++b)if(a[b].histogram===this.zA())return a[b];return[]}.bind(this)).addListener(_geo.geotoolkit.controls.ia.Selection.$.EI,function(a,b){b.getSelection().indices instanceof Array&&this.hfa(b.getSelection().indices,this.QNa)}.bind(this));this.OF.cc(!0).setMode(_geo.geotoolkit.controls.ia.AL.La).addListener(_geo.geotoolkit.controls.ia.ew.$.aF,function(a){this.Sx.Tl(null)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.ew.$.au,function(a){this.Sx.Tl(new _geo.geotoolkit.scene.Rk)}.bind(this));
return this};b.prototype.Jzb=function(){var a=new _geo.geotoolkit.util.q0,b=function(b,d){var e=this.gk()?this.zA().Z8(d):this.zA().Z8(b);return null==e?"":"["+a.format(e.minvalue)+":"+a.format(e.maxvalue)+"] "}.bind(this),d=function(b,d){var e=this.gk()?this.zA().Z8(d):this.zA().Z8(b);return null==e?"":a.format(e.frequency)+" "}.bind(this);this.gk()?(this.fM.setMode(_geo.geotoolkit.controls.ia.tF.$b),this.kf.Ka(!1),this.tb.vQ(function(a,b){b=_geo.geotoolkit.scene.Wi.avb(a,b);return _geo.geotoolkit.scene.Wi.Oma(a,
b)}),this.or.Ov(_geo.geotoolkit.ea.Oa.Se,{textconverter:d}),this.or.Ov(_geo.geotoolkit.ea.Oa.Yc,{textconverter:d}),this.or.Ov(_geo.geotoolkit.ea.Oa.pd,{textconverter:b}),this.or.Ov(_geo.geotoolkit.ea.Oa.Rc,{textconverter:b}),this.OF.setMode(_geo.geotoolkit.controls.ia.AL.Na)):(this.fM.setMode(_geo.geotoolkit.controls.ia.tF.ic),this.Ze.Ka(!1),this.tb.vQ(function(a,b){b=_geo.geotoolkit.scene.Wi.H9a(a,b);return _geo.geotoolkit.scene.Wi.Oma(a,b)}),this.or.Ov(_geo.geotoolkit.ea.Oa.Se,{textconverter:b}),
this.or.Ov(_geo.geotoolkit.ea.Oa.Yc,{textconverter:b}),this.or.Ov(_geo.geotoolkit.ea.Oa.pd,{textconverter:d}),this.or.Ov(_geo.geotoolkit.ea.Oa.Rc,{textconverter:d}),this.OF.setMode(_geo.geotoolkit.controls.ia.AL.La))};b.prototype.eDa=function(){function b(c){c.Kj("MAJOR").setColor(a);c.Kj("MINOR").setColor(g);c.Tg("MINOR",!0);c.Tg("EDGE",!1);return c}this.$jc=new _geo.geotoolkit.controls.axis.Yxa(this.zA().CP());var d=new _geo.geotoolkit.axis.Zv,e=new _geo.geotoolkit.axis.aJ;this.PGb=new _geo.geotoolkit.controls.axis.Yxa(this.zA().CP());
var h=new _geo.geotoolkit.axis.Zv,l=new _geo.geotoolkit.axis.aJ;b(this.PGb).Tg("MAJOR",!1);b(h);b(l);this.Zo={x:this.$jc,y:d,xlog:e};this.Vx={x:this.PGb,y:h,xlog:l};null==this.Fm&&(d=new _geo.geotoolkit.axis.Zv,b(d),this.Fm=new _geo.geotoolkit.axis.Mx(d,h),h=new _geo.geotoolkit.scene.og,h.Kd("grid_layer"),h.va(this.Fm),this.Sx.oh(0,h),this.gr=new _geo.geotoolkit.scene.Group,this.gr.Ea(this.tb.Mc().getParent().ga()),this.gr.Sa(new _geo.geotoolkit.util.Rect(0,0,1,1)),this.gr.va(new _geo.geotoolkit.scene.shapes.lc({left:0,
top:0,width:1,height:1,linestyle:new _geo.geotoolkit.attributes.Aa("transparent")})),this.eia=new _geo.geotoolkit.scene.shapes.Il({x:[0,1],y:[0,0],linestyle:new _geo.geotoolkit.attributes.Aa("red")}),this.eia.Ka(!1),this.gr.mk(!0),this.gr.va(this.eia),this.tb.va(this.gr));this.r$();return this};b.prototype.Yk=function(){return this.zA().Yk()};b.prototype.setOrientation=function(a){a!==this.Yk()&&this.kcb();this.zA().setOrientation(a);this.Jzb();this.r$();this.awb();return this};b.prototype.Cl=function(){if(null==
this.eia||!1===this.eia.ib()||null==this.Ba)return this;var a=this.gk(),b=this.tb.Mc().Nb(),d=a?b.getY():b.getX(),e=d+(a?b.ba():b.aa()),b=[],g=[],n=[],p;for(p=0;p<this.Ba.length;++p){var r=this.Ba[p];r>=d&&r<=e?b.push(r):Math.abs(r-d)<_geo.geotoolkit.util.Math.Jc?b.push(d):Math.abs(r-e)<_geo.geotoolkit.util.Math.Jc&&b.push(e)}r=b.length;n[0]=0;g[0]=0;if(0<r){b.sort(function(a,b){return a-b});var e=e-d,t=0,q=0;for(p=0;p<r;++p)t=(b[p]-d)/e,q=(p+1)/r,n.push(t,t),g.push(q-1/r,q);n.push(1);g.push(1)}else n[1]=
1,g[1]=0;a?this.eia.Ne(g,n):this.eia.Ne(n,g);this.eia.ma();return this};b.prototype.Kv=function(){_geo.geotoolkit.oa.Wg.prototype.Kv.call(this);if(null==this.gr)return this;this.gr.Ea(this.tb.Mc().getParent().ga());this.gr.Ka(!0);return this};b.prototype.r$=function(){this.gk()?(this.Je.west.Vg(this.Zo["x"+(this.H0a?"log":"")]),this.Je.x.Vg(this.Zo.y),this.Fm.Vg(_geo.geotoolkit.util.Mb.ic,this.Vx["x"+(this.H0a?"log":"")]),this.Fm.Vg(_geo.geotoolkit.util.Mb.$b,this.Vx.y)):(this.Je.x.Vg(this.Zo["x"+
(this.H0a?"log":"")]),this.Je.west.Vg(this.Zo.y),this.Je.east.Vg(this.Zo.y),this.Fm.Vg(_geo.geotoolkit.util.Mb.$b,this.Vx["x"+(this.H0a?"log":"")]),this.Fm.Vg(_geo.geotoolkit.util.Mb.ic,this.Vx.y))};b.prototype.setData=function(a){_geo.geotoolkit.oa.Wg.prototype.setData.call(this,a);null!=a.bounds&&this.Ea(a.bounds);this.$ma(a.header);this.Dx(a.tools);null==a.x&&(a.x={});null==a.datasource&&null!=this.eg&&(a.datasource=this.eg);var b=a.datasource;b!==this.eg&&(null!=this.eg&&(this.eg.hb(_geo.geotoolkit.data.Yl.$.Hn,
this.hLb),this.eg.hb(_geo.geotoolkit.data.$.vf,this.UO)),this.eg=b,null!=this.eg&&(this.eg.kb(_geo.geotoolkit.data.Yl.$.Hn,this.hLb),this.eg.kb(_geo.geotoolkit.data.$.vf,this.UO)));if(null!=b){null!=a.autominmax&&(this.eg.autominmax=a.autominmax);null==this.eg.autominmax&&(this.eg.autominmax=!0);if(null==a.unit||null!=a.datasource.Tb()&&!this.nVa().Tb(a.datasource.Tb()).qr(a.unit)||null==a.datasource.Tb())a.unit=a.datasource.Tb();null==a.x.min&&!0===this.eg.autominmax&&(a.x.min=a.datasource.Ug(a.unit));
null==a.x.max&&!0===this.eg.autominmax&&(a.x.max=a.datasource.Ih(a.unit));null==a.data&&(a.data=a.datasource.toArray(!1,a.unit));null==a.x.label&&(a.x.label={});null==a.x.label.text&&(a.x.label.text=a.datasource.getName(),null!=a.unit&&(a.x.label.text=a.unit instanceof _geo.geotoolkit.util.ar?a.x.label.text+(" ("+a.unit.be()+")"):a.x.label.text+(" ("+a.unit+")")))}void 0!==a.unit&&(this.hh=a.unit);null!=a.autominmax&&null!=this.eg&&(this.eg.autominmax=a.autominmax);if(null!=a.data){if(null==a.x.min||
null==a.x.max){for(var b=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,e=a.data.length,g=a.data,n=0;n<e;n++){var p=g[n];(0,window.isNaN)(p)||(b=Math.min(b,p),d=Math.max(d,p))}a.x.min=a.x.min||b;a.x.max=a.x.max||d}null==a.x.reversed&&(a.x.reversed=a.x.min>a.x.max);this.Ba=a.data}b={};null!=a.data&&(b.data=a.data);null!=a.bins&&(b.bins=a.bins);null!=a.fillstyle&&(b.fillstyle=a.fillstyle);null!=a.linestyle&&(b.linestyle=a.linestyle);null!=a.autogradient&&(b.autogradient=a.autogradient);null!=a.frequencytype&&
(b.frequencytype=a.frequencytype);null!=a.highlightcolor&&(b.highlightstyle={color:a.highlightcolor});null!=a.binspacing&&(b.binspacing=a.binspacing);this.awb(b);null!=a.accumulation&&(null!=a.accumulation.visible&&this.eia.Ka(a.accumulation.visible),null!=a.accumulation.linestyle&&this.eia.ua(a.accumulation.linestyle));this.D$("x",a.x);this.D$("y",a.y);this.Cl();return this};b.prototype.getData=function(a){a=a||{};var b=_geo.geotoolkit.oa.Wg.prototype.getData.call(this,a);null!=this.ga()&&(b.bounds=
this.ga().ka());b.header=this.kla(b.header);b.x=this.Y8("x",a);b.y=this.Y8("y",a);null!=this.eg&&(b.autominmax=this.eg.autominmax);!0!==a["no-data"]&&(b.datasource=this.eg,b.data=this.Ba);a=this.zA();b.bins=a.CP();b.fillstyle=a.sb().ka();b.autogradient=a.cta();b.linestyle=a.Xa();b.frequencytype=a.mEa();b.highlightcolor=a.U6a().ac();b.binspacing=a.Zqb();return b};b.prototype.$ma=function(a){if(null==a)return this;var b={};null!=a.title&&this.lg.ja(a.title);null!=a.annotationsize&&(b.north=a.annotationsize);
this.al(b);this.Kv();return this};b.prototype.so=function(){return this.zA().so()};b.prototype.CEa=function(){return this.zA().CEa()};b.prototype.Tc=function(){return this.zA().Tc()};b.prototype.ad=function(){return this.zA().ad()};b.prototype.kla=function(){var a={};a.title=this.lg.ka();a.annotationsize=this.tb.vb(_geo.geotoolkit.ea.Oa.Se).mf();return a};b.prototype.D$=function(a,b){if(null==b)return this;a=a.toLowerCase();if("x"!==a&&"y"!==a)return this;var d={},e={},g={x:"south",y:"west"};null!=
b.tickgenerator&&(this.Zo[a]=b.tickgenerator,this.Vx[a]=b.tickgenerator);null!=b.label&&this.Pi[a].ja(b.label);null!=b.annotationsize&&(e[g[a]]=b.annotationsize);null!=b.min&&(this.lv[a]=b.min,"x"===a&&(d.minvalue=b.min),"y"===a&&0>this.lv[a]&&(this.lv[a]=0));null!=b.max&&(this.zu[a]=b.max,"x"===a&&(d.maxvalue=b.max),"y"===a&&0>this.zu[a]&&(this.zu[a]=0));null!=b.neatlimits&&("x"===a?(this.qGb=b.neatlimits,this.Ajc=b.neatlimitscenteredonzero):"y"===a&&(this.rGb=b.neatlimits));this.qGb&&"x"===a&&null!=
b.max&&null!=b.min&&(g=_geo.geotoolkit.util.Math.Hs(this.lv[a],this.zu[a],!1,this.Ajc),this.lv[a]=g.gb(),this.zu[a]=g.nb(),d.minvalue=g.gb(),d.maxvalue=g.nb());null!=b.autominmax&&!0===b.autominmax&&("x"===a?d.autominmax=b.autominmax:"y"===a&&(g=this.zA().so(),this.lv.y=g[12],this.zu.y=g[13]));null!=b.axisticks&&this.Zo[a].setOptions(b.axisticks);null!=b.gridticks&&this.Vx[a].setOptions(b.gridticks);if(null!=b.annotationside&&"y"===a){var g="left"===b.annotationside||"both"===b.annotationside||"west"===
b.annotationside,n="right"===b.annotationside||"both"===b.annotationside||"east"===b.annotationside;this.Je.west.ib()!==g&&this.Je.west.Ka(g);this.Je.east.ib()!==n&&this.Je.east.Ka(n)}this.r$();this.awb(d);null!=b.reversed&&("x"===a&&this.tb.Mc().Nv(b.reversed),"y"===a&&this.tb.Mc().mk(b.reversed));this.al(e);this.Kv();return this};b.prototype.awb=function(a){var b=this.zA();b.setData(a);this.rGb&&(a=1,b.mEa()===_geo.geotoolkit.controls.shapes.pl.uX.mIa&&(b.Xsa()===_geo.geotoolkit.controls.shapes.pl.dX.oX?
a=b.CEa():0<b.CP()&&(a=b.rQa(b.CP()-1))),a=_geo.geotoolkit.util.Math.Hs(0,a,this.H0a,!1),!(0,window.isNaN)(a.nb())&&(0,window.isFinite)(a.nb())?this.zu.y=a.nb():this.zu.y=1);null!=this.zu.y&&(this.gk()?(b.xa().setX(this.lv.y),b.xa().qb(this.zu.y-this.lv.y)):(b.xa().setY(this.lv.y),b.xa().Db(this.zu.y-this.lv.y)));this.jC(b.ga());this.tb.Mc().ma();this.$jc.gT(b.CP());this.PGb.gT(b.CP());return this};b.prototype.Y8=function(a,b){a=a.toLowerCase();if("x"!==a&&"y"!==a&&"z"!==a)return this;var d={};"x"===
a?(d.unit=this.hh,null!=this.eg?d.autominmax=this.eg.autominmax:d.neatlimits=this.qGb,!0!==b["no-data"]&&(d.datasource=this.eg,d.data=this.Ba)):"y"===a&&(d.neatlimits=this.rGb);d.label=this.Pi[a].ka();var e={x:_geo.geotoolkit.ea.Oa.Yc,y:_geo.geotoolkit.ea.Oa.Rc},e=this.tb.vb(e[a]);d.annotationsize="x"===a?e.mf():e.yl();d.min=this.lv[a];d.max=this.zu[a];d.axisticks=this.Zo[a].ka();d.gridticks=this.Vx[a].ka();"x"===a&&(d.reversed=this.tb.Mc().MA());"y"===a&&(d.reversed=this.tb.Mc().Cr());return d};
b.prototype.ava=function(a,b,d){if(a===_geo.geotoolkit.data.Yl.$.Hn&&(b instanceof _geo.geotoolkit.data.Or||b instanceof _geo.geotoolkit.data.nH))"data"===d.name&&this.setData({data:b.toArray(!1,this.hh)}),"min"===d.name&&!0===b.autominmax&&this.setData({min:b.Ug(this.hh)}),"max"===d.name&&!0===b.autominmax&&this.setData({max:b.Ih(this.hh)});else return this;this.Cl();return this};b.prototype.cQ=function(a,b,d){this.setData({data:b.toArray(!1,this.hh),autominmax:this.eg.autominmax,x:{min:!0===this.eg.autominmax?
b.Ug(this.hh):this.lv.x,max:!0===this.eg.autominmax?b.Ih(this.hh):this.zu.x}});this.Cl();return this};b.prototype.mla=function(){for(var a=[],b=this.zA().$qb(),d=0;d<b.length;++d)!0===b[d].highlighted&&a.push(b[d].binnumber);return a};b.prototype.mGc=function(a,b){var d=this.zA().arb(a).map(function(a){return a.binnumber});this.hfa(d,b)};b.prototype.hfa=function(a,b){this.zA().hfa(a,b);return this};b.prototype.Dx=function(a){if(null==a)return this;null!=a.crosshair&&(null!=a.crosshair.north&&(a.crosshair.north.textconverter=
null),null!=a.crosshair.south&&(a.crosshair.south.textconverter=null),null!=a.crosshair.east&&(a.crosshair.east.textconverter=null),null!=a.crosshair.west&&(a.crosshair.west.textconverter=null));_geo.geotoolkit.oa.Wg.prototype.Dx.call(this,a);return this};b.prototype.vD=function(a,b){var d=new _geo.geotoolkit.Bd.lha(b||_geo.geotoolkit.oa.Ff.Deb.Za()),d=d.sV(a);d.gq("#widget",this);d.Ed("geotoolkit.widgets.Histogram","template");this.xb()};b.prototype.OI=function(a){a=new _geo.geotoolkit.Bd.lha(a||
_geo.geotoolkit.oa.Ff.Deb.Za());return a.IW("template",this)};b.prototype.gk=function(){return this.Yk()===_geo.geotoolkit.util.Mb.ic};b.prototype.kcb=function(){var a=this.Pi.x.ka(),b=this.Pi.y.ka();this.Pi.x.ja({text:b.text,textstyle:b.textstyle});this.Pi.y.ja({text:a.text,textstyle:a.textstyle})};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);a.fillstyle=a.backgroundfillstyle;delete a.backgroundfillstyle;_geo.geotoolkit.oa.Wg.prototype.ja.call(this,a);return this};return b}();
_geo.geotoolkit.oa.Kfb=function(){function b(b){null==b&&(b={});var c=20,d=25,g=15,h=30;b.viewcachesize=b.viewcache||null!=b.viewcachesize?_geo.geotoolkit.Ca(b.viewcachesize,{width:256,height:256}):null;b.border=_geo.geotoolkit.Ca(b.border,{color:"transparent"},!0);c={bounds:b.bounds,border:b.border,north:null,south:null,west:null,east:null,axiswidth:40,axisheight:40,annotationssizes:{north:c+d,west:c+h+d,south:c+h+g+d,east:c+h}};c=_geo.geotoolkit.Ca(b,c,!0);this.aS=null;this.wMb=!1;this.cib=!0;this.jca=
[];this.Rpa={};this.Rpa[_geo.geotoolkit.ea.Oa.Rc]=c.annotationssizes.west;this.Rpa[_geo.geotoolkit.ea.Oa.pd]=c.annotationssizes.east;this.Rpa[_geo.geotoolkit.ea.Oa.Yc]=c.annotationssizes.south;this.dc={};this.dc[_geo.geotoolkit.ea.Oa.Rc]={};this.dc[_geo.geotoolkit.ea.Oa.pd]={};this.dc[_geo.geotoolkit.ea.Oa.Yc]={};this.io={};this.Tf={};this.Tf[_geo.geotoolkit.ea.Oa.Rc]={};this.Tf[_geo.geotoolkit.ea.Oa.pd]={};this.Tf[_geo.geotoolkit.ea.Oa.Yc]={};this.dca={};this.dca[_geo.geotoolkit.ea.Oa.Rc]=(new _geo.geotoolkit.scene.Group).Ul(0);
this.dca[_geo.geotoolkit.ea.Oa.pd]=(new _geo.geotoolkit.scene.Group).Ul(0);this.dca[_geo.geotoolkit.ea.Oa.Yc]=(new _geo.geotoolkit.scene.Group).zk(0);this.wca={};this.wca[_geo.geotoolkit.ea.Oa.Yc]=(new _geo.geotoolkit.scene.og).Kd("south_layer");this.wca[_geo.geotoolkit.ea.Oa.Rc]=(new _geo.geotoolkit.scene.og).Kd("West_layer");this.wca[_geo.geotoolkit.ea.Oa.pd]=(new _geo.geotoolkit.scene.og).Kd("east_layer");this.dBa=this.Jkd.bind(this);this.l5c=this.b_b.bind(this);_geo.geotoolkit.oa.Wg.call(this,
c);this.tb.Yr(this.dca[_geo.geotoolkit.ea.Oa.Rc],_geo.geotoolkit.ea.Oa.Rc);this.tb.wI(0,this.dca[_geo.geotoolkit.ea.Oa.pd],_geo.geotoolkit.ea.Oa.pd);this.tb.wI(0,this.dca[_geo.geotoolkit.ea.Oa.Yc],_geo.geotoolkit.ea.Oa.Yc);this.ta(new _geo.geotoolkit.attributes.Fa("white"));this.ua((new _geo.geotoolkit.attributes.Aa("white")).Yd({x:!1,y:!1}));this.tb.$Ua();this.YF=c.viewcache;this.hr={};null!=c.viewcachesize&&(this.YF=!0,this.hr=c.viewcachesize);this.Sx=new _geo.geotoolkit.scene.Group;this.Sx.Sa(new _geo.geotoolkit.util.Rect(0,
0,1,1));this.Sx.Tl(this.YF?new _geo.geotoolkit.scene.Rk(this.hr.width,this.hr.height):null);this.mib=!0;this.B1=null;this.$Ib=new _geo.geotoolkit.attributes.Fa({color:"lightgrey"});this.nib=c.axiswidth;this.lib=c.axisheight;b=this.tb.Mc();b.oh(0,this.Sx);b.mk(!0);this.Fm=new _geo.geotoolkit.axis.Mx;b.oh(0,(new _geo.geotoolkit.scene.Group).va(this.Fm));this.Ze.mk(!0);this.OO=new _geo.geotoolkit.scene.og;this.yqc=(new _geo.geotoolkit.scene.Group).Ea(new _geo.geotoolkit.util.Rect(0,0,1,1));this.Xo=(new _geo.geotoolkit.scene.Group).Ea(new _geo.geotoolkit.util.Rect(0,
0,1,1));this.Sx.oh(0,this.Xo);this.Sx.oh(0,this.OO);this.Sx.oh(0,this.yqc);this.Ba=null;this.Dm=_geo.geotoolkit.data.EWa.Za();this.lg=_geo.geotoolkit.scene.Wp.wM(this.tb,{location:_geo.geotoolkit.ea.Oa.Se,text:"",textstyle:{font:a}}).text;this.tb.yTa();this.Kv();this.setOptions(c)}var a="16px Roboto",g="#e0e0e0",d="#efefef";_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Wg);_geo.geotoolkit.da(b,"geotoolkit.widgets.MultiHistograms");b.$={Jbc:"histogramsselected",b9b:"binsselected",nAb:"axisselected",Zga:"dataupdated"};
b.prototype.pFc=function(){return this.yqc};b.prototype.Mta=function(){return this.Xo};b.prototype.Sg=function(){_geo.geotoolkit.oa.Wg.prototype.Sg.call(this);this.tb.vb(_geo.geotoolkit.ea.Oa.Yc).va((new _geo.geotoolkit.scene.Group).va(this.wca[_geo.geotoolkit.ea.Oa.Yc]));this.tb.vb(_geo.geotoolkit.ea.Oa.Rc).va((new _geo.geotoolkit.scene.Group).va(this.wca[_geo.geotoolkit.ea.Oa.Rc]));this.tb.vb(_geo.geotoolkit.ea.Oa.pd).va((new _geo.geotoolkit.scene.Group).va(this.wca[_geo.geotoolkit.ea.Oa.pd]));
this.Fpc=(new _geo.geotoolkit.controls.ia.Selection(this.wca[_geo.geotoolkit.ea.Oa.Yc])).cc(!1).Bz(function(a){for(var b=a.length;0<=b&&a[b]!==this.tb.Mc();b--)if(a[b]instanceof _geo.geotoolkit.axis.ng)return a[b];return[]}.bind(this)).addListener(_geo.geotoolkit.controls.ia.Selection.$.EI,function(a,c){this.nMc(_geo.geotoolkit.ea.Oa.Yc,!0,!0,a,c);this.Ja(b.$.nAb,this,{location:_geo.geotoolkit.ea.Oa.Yc,histogram:this.io[this.B1]?this.io[this.B1].shape:null,group:this.dc[_geo.geotoolkit.ea.Oa.Yc][this.B1]?
this.B1:null})}.bind(this));this.frc=(new _geo.geotoolkit.controls.ia.Selection(this.wca[_geo.geotoolkit.ea.Oa.Rc])).cc(!1).Bz(function(a){for(var b=a.length;0<=b&&a[b]!==this.tb.Mc();b--)if(a[b]instanceof _geo.geotoolkit.axis.ng)return a[b];return[]}.bind(this)).addListener(_geo.geotoolkit.controls.ia.Selection.$.EI,function(a,c){this.nMc(_geo.geotoolkit.ea.Oa.Rc,!0,!0,a,c);this.Ja(b.$.nAb,this,{location:_geo.geotoolkit.ea.Oa.Rc,histogram:this.io[this.B1]?this.io[this.B1].shape:null,group:this.dc[_geo.geotoolkit.ea.Oa.Rc][this.B1]?
this.B1:null})}.bind(this));this.qw.Bz(function(a){for(var b=[],c=0;c<a.length;c++)a[c].histogram&&null!=this.io[a[c].histogram.od()]&&b.push(a[c]);return b}.bind(this)).addListener(_geo.geotoolkit.controls.ia.Selection.$.EI,function(a,c){var d=c.getSelection(),e=!1,g,p,r=[],t=[];for(p=0;p<d.length;p++)0!==d[p].hittest.length&&(g=d[p].histogram,r.push(g),this.sod(g,d[p].hittest)&&(e=!0,this.Z6b(g,!0),t.push(d[p].hittest)));e?this.Ja(b.$.b9b,this,{histograms:r,bins:t}):(this.tSc(this.jca),g&&(this.bna(this.jca,
!1),this.pxb(g),this.Z6b(g,!0),this.daa(),this.Ja(b.$.Jbc,this,g)))}.bind(this));this.rr([(new _geo.geotoolkit.controls.ia.Xl(this.wca[_geo.geotoolkit.ea.Oa.Yc],"southTools")).add([this.Fpc]),(new _geo.geotoolkit.controls.ia.Xl(this.wca[_geo.geotoolkit.ea.Oa.Rc],"westTools")).add([this.frc])]);var a=_geo.geotoolkit.controls.ia.scroll.tba.getClassName(),c=this.vb(_geo.geotoolkit.ea.Oa.Yc);this.aS=_geo.geotoolkit.controls.ia.scroll.sJ.Za().es(a,{name:"southverticalscrollbar",modellimits:c.xa(),visiblelimits:c.Nb()});
a=function(a,b){var c=this.vb(_geo.geotoolkit.ea.Oa.Yc),d=c.Nb(),e=b.Nb();c.os(new _geo.geotoolkit.util.Rect(d.sa(),e.wa(),d.za(),e.qa()),c.ga());this.aS.Sa(c.xa(),e)}.bind(this);this.aS.addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.tt,a).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.Yn,a);this.aS.Ka(!0);this.tb.Yr(this.aS,_geo.geotoolkit.ea.Oa.Nx);this.rr([this.aS.ld()])};b.prototype.daa=function(){var a=_geo.geotoolkit.selection.from(this.OO).He(function(a){return a instanceof _geo.geotoolkit.controls.shapes.pl&&
!0===a.getParent().ib()}).B_(),b=0<a.length?a[a.length-1]:null;if(null!=b){this.bna(b,!0);var a=this.oK(b)[0],f=b.od(),b=b.od(),k;null!=(k=a.groupid[_geo.geotoolkit.ea.Oa.Yc])&&null!=this.Tf[_geo.geotoolkit.ea.Oa.Yc][k]&&(b=k);null!=(k=a.groupid[_geo.geotoolkit.ea.Oa.Rc])&&null!=this.Tf[_geo.geotoolkit.ea.Oa.Rc][k]&&(f=k);null!=(k=a.groupid[_geo.geotoolkit.ea.Oa.pd])&&null!=this.Tf[_geo.geotoolkit.ea.Oa.pd][k]&&(f=k);null!=this.Tf[_geo.geotoolkit.ea.Oa.Rc][f]?(k=this.Tf[_geo.geotoolkit.ea.Oa.Rc][f],
a=k.Fe()):null!=this.Tf[_geo.geotoolkit.ea.Oa.pd][f]?(k=this.Tf[_geo.geotoolkit.ea.Oa.pd][f],a=k.Fe()):(a=new _geo.geotoolkit.axis.Zv,k=(new _geo.geotoolkit.axis.ng(a)).Sa(new _geo.geotoolkit.util.Rect(0,0,1,1)));null!=this.Tf[_geo.geotoolkit.ea.Oa.Yc][b]?(b=this.Tf[_geo.geotoolkit.ea.Oa.Yc][b],f=b.Fe()):(f=new _geo.geotoolkit.axis.Zv,b=(new _geo.geotoolkit.axis.ng(f)).Sa(new _geo.geotoolkit.util.Rect(0,0,1,1)));var h=a.clone(),l=f.clone();h.Dh("MAJOR",new _geo.geotoolkit.attributes.Aa({color:g}));
h.Dh("MINOR",new _geo.geotoolkit.attributes.Aa({color:d}));h.Tg("MINOR",a.wy("MINOR"));h.Tg("EDGE",!1);l.Dh("MAJOR",new _geo.geotoolkit.attributes.Aa({color:g}));l.Dh("MINOR",new _geo.geotoolkit.attributes.Aa({color:d}));l.Tg("MINOR",f.wy("MINOR"));l.Tg("EDGE",!1);this.Fm.Vg(_geo.geotoolkit.util.Mb.$b,l);this.Fm.Vg(_geo.geotoolkit.util.Mb.ic,h);k=k.xa();a=b.xa();k=new _geo.geotoolkit.util.Rect(a.sa(),k.wa(),a.za(),k.qa());this.Fm.getParent().Sa(k)}};b.prototype.Z6b=function(a,b,d){a=this.oK(a);for(var g=
0;g<a.length;g++){var h=a[g].shape.od(),l;for(l in this.Tf)if(this.Tf.hasOwnProperty(l)){var n=this.io[h].groupid[l];n&&this.Tf[l][n]?(this.NXb(this.Tf[l][n],l),b&&l!==d&&this.txc(this.Tf[l][n],l)):this.Tf[l][h]?(this.NXb(this.Tf[l][h],l),b&&l!==d&&this.txc(this.Tf[l][h],l)):this.NXb(null,l)}}return this};b.prototype.txc=function(a,b){var d,g,h;b===_geo.geotoolkit.ea.Oa.Yc&&(d=this.vb(b),g=a.getParent().ga(),h=this.dca[b].ga().ba(),g=new _geo.geotoolkit.util.Rect(g.sa(),g.qa()+d.ga().ba()-h,g.za(),
g.qa()-h),g.wa()>d.xa().wa()&&g.setY(d.xa().wa()-d.ga().ba()),d.os(g,d.ga()),this.aS.Sa(d.xa(),g))};b.prototype.NXb=function(a,b){for(var d in this.Tf[b])this.Tf[b].hasOwnProperty(d)&&null!=this.Tf[b][d]&&this.Tf[b][d].getParent().ta(new _geo.geotoolkit.attributes.Fa("white"));null!=a&&(a.getParent().ta(this.$Ib),this.vb(b).ma());return this};b.prototype.sod=function(a,b){return!0===this.io[a.od()].highlightable?(a.hfa(b,!0),!0):!1};b.prototype.nMc=function(a,b,d,g,h){b=null!=b?b:!0;var l=this.Tf[a];
g=g instanceof _geo.geotoolkit.axis.ng?g:h.getSelection();if(null!=g)for(var n in l)l.hasOwnProperty(n)&&l[n]===g&&this.B1!==n&&(this.tSc(this.jca),this.bna(this.jca,!1),this.io[n]?this.pxb(n):this.dc[a][n]&&this.E3b(n),this.daa(),b&&this.Z6b(this.B1,d,a));return this};b.prototype.tSc=function(a){a=this.oK(a);for(var b=0;b<a.length;b++)a[b].shape.hfa([],!0);return this};b.prototype.Xra=function(a,b,d){null==a&&(a={});a=new _geo.geotoolkit.controls.shapes.pl(a);var g,h;d=null!=d?d.toString():this.xAc();
a.Kd(d);a.kb(_geo.geotoolkit.scene.Node.$.Mj,this.dBa);a.kb(_geo.geotoolkit.controls.shapes.pl.$.Ffb,this.dBa);a.kb(_geo.geotoolkit.controls.shapes.pl.$.YVa,this.l5c);this.io[d]={shape:a,highlightable:!1,groupid:{}};this.io[d].groupid[_geo.geotoolkit.ea.Oa.Rc]=null;this.io[d].groupid[_geo.geotoolkit.ea.Oa.pd]=null;this.io[d].groupid[_geo.geotoolkit.ea.Oa.Yc]=null;var l;h=new _geo.geotoolkit.scene.Group;h.Ea(new _geo.geotoolkit.util.Rect(0,0,1,1));h.va(a);var n=a.sb().ac();this.OO.va(h);this.Dm&&this.Ba&&
this.Dm.bind(a,this.Ba);this.bna(null,!1).bna(a,!0);b&&null===b.xaxis?g=null:(l=new _geo.geotoolkit.controls.axis.Yxa(a.CP()),l.Tg("MINOR",!1),l.Tg("EDGE",!0),l.Kj("MAJOR").setColor(n),l.Kj("MINOR").setColor(n),l.Kj("EDGE").setColor(n),h=a.wK(),h=null!=h?" ( "+h.be()+" )":"",h=a.getName()+h,g=_geo.geotoolkit.scene.Wp.pK(this.tb,{location:_geo.geotoolkit.ea.Oa.Yc,connect:!1,title:{text:h,visible:!0,textstyle:new _geo.geotoolkit.attributes.eb({color:"#757575"}),alignment:_geo.geotoolkit.util.Da.Ei}}).axis,
g.Vg(l),g.cea().setColor(n),b&&null!=b.xaxis&&g.ja(b.xaxis));b&&null===b.yaxis?h=null:(h=_geo.geotoolkit.scene.Wp.pK(this.tb,{location:_geo.geotoolkit.ea.Oa.Rc,connect:!1,title:{text:"Frequency",visible:!0,textstyle:new _geo.geotoolkit.attributes.eb({color:"#757575"}),alignment:_geo.geotoolkit.util.Da.We}}).axis,l=new _geo.geotoolkit.axis.Zv,l.Kj("MAJOR").setColor(n),h.Vg(l),h.cea().setColor(n),b&&null!=b.yaxis&&h.ja(b.yaxis));g&&(n=b?b.xaxis:{},n=_geo.geotoolkit.Ca({axis:g},n),this.kub(_geo.geotoolkit.ea.Oa.Yc,
n,a),this.Tf[_geo.geotoolkit.ea.Oa.Yc][d]=g);h&&(b=b?b.yaxis:{},b=_geo.geotoolkit.Ca({axis:h},b),this.kub(_geo.geotoolkit.ea.Oa.Rc,b,a),this.Tf[_geo.geotoolkit.ea.Oa.Rc][d]=h);this.wud=a;this.daa();this.xb();return a};b.prototype.O0b=function(a){a=this.oK(a);for(var b=0;b<a.length;b++){var d=a[b].shape;this.P0b(d);this.F8a(d.od());var g=this.jca.indexOf(d);-1!==g&&this.jca.splice(g,1);this.io[d.od()]=null;this.OO.removeChild(d.getParent());this.Dm&&this.Ba&&this.Dm.unbind(d,this.Ba);d.hb(_geo.geotoolkit.controls.shapes.pl.$.Ffb,
this.dBa);d.hb(_geo.geotoolkit.scene.Node.$.Mj,this.dBa)}this.iF(_geo.geotoolkit.ea.Oa.Rc);this.iF(_geo.geotoolkit.ea.Oa.pd);this.iF(_geo.geotoolkit.ea.Oa.Yc);this.daa();return this};b.prototype.oK=function(a){var b=null,d=[];if(void 0===a)return d;null===a&&(a=Object.keys(this.io));a=Array.isArray(a)?a:[a];for(var g=0;g<a.length;g++)"string"===typeof a[g]?b=this.io[a[g]]:a[g]instanceof _geo.geotoolkit.controls.shapes.pl&&(b=this.io[a[g].od()]),b&&d.push(b),b=null;return d};b.prototype.bna=function(a,
b){for(var d=this.oK(a),g=0;g<d.length;g++){d[g].highlightable=b;var h=this.jca.indexOf(d[g].shape);!0===b&&-1===h?this.jca.push(d[g].shape):!1===b&&-1!==h&&this.jca.splice(h,1)}return this};b.prototype.XAc=function(){return this.jca};b.prototype.mla=function(a){a=this.oK(a);for(var b=[],d=0;d<a.length;d++){var g=a[d].shape;b.push(g.mla())}return b};b.prototype.Lrb=function(a){var b=[],d;for(d in this.io)this.io.hasOwnProperty(d)&&null!=this.io[d]&&(a?b.push(this.io[d].shape.od()):b.push(this.io[d].shape));
return b};b.prototype.CUb=function(){var a=[],b;for(b in this.dc)if(this.dc.hasOwnProperty(b))for(var d in this.dc[b])this.dc[b].hasOwnProperty(d)&&null!=this.dc[b][d]&&a.push(d);return a};b.prototype.MOa=function(a,b){var d=_geo.geotoolkit.oa.Wg.prototype.MOa.call(this,b),g=d.group,h="number"==typeof b.length?a===_geo.geotoolkit.ea.Oa.Yc?this.lib:this.nib:b.length;a===_geo.geotoolkit.ea.Oa.Yc?g.zk(h):g.Ul(h);a===_geo.geotoolkit.ea.Oa.Rc&&(this.tb.removeItem(g,_geo.geotoolkit.ea.Oa.Rc),this.tb.wI(0,
g,_geo.geotoolkit.ea.Oa.Rc));return d};b.prototype.kub=function(a,b,d){b=_geo.geotoolkit.Sb(b,{title:{visible:!0,textstyle:new _geo.geotoolkit.attributes.eb({color:"#757575"}),alignment:_geo.geotoolkit.util.Da.lb}});var g=null!=b.axis?b.axis:b,h=_geo.geotoolkit.oa.Wg.prototype.nt.call(this,g,a,null),g=h.axis,h=h.group;!b.tickgenerator||b.tickgenerator instanceof _geo.geotoolkit.axis.Jl||g.Fe().ja(b.tickgenerator);null!=b.flip&&(a===_geo.geotoolkit.ea.Oa.Yc||a===_geo.geotoolkit.ea.Oa.Se?h.Nv(b.flip):
h.mk(b.flip));var l="number"!==typeof b.length?a===_geo.geotoolkit.ea.Oa.Yc?this.lib:this.nib:b.length;a===_geo.geotoolkit.ea.Oa.Yc?h.zk(l):h.Ul(l);a===_geo.geotoolkit.ea.Oa.Rc&&(this.tb.removeItem(h,a),this.tb.wI(0,h,a));this.tb.Pa();if(b.accumulative){g.Sa(new _geo.geotoolkit.util.Rect(0,0,100,100));b=new _geo.geotoolkit.scene.Group;b.Ea(new _geo.geotoolkit.util.Rect(0,0,1,1));b.Sa(g.xa());this.OO.va(b);this.tb.connect(g,b);for(var n in this.io)this.io.hasOwnProperty(n)&&null!=this.io[n]&&this.io[n].shape.Xsa()===
_geo.geotoolkit.controls.shapes.pl.dX.YBb&&(this.Tf[a][n]=g)}else d&&this.s$c(a,g,d);this.iF(a);this.daa();return g};b.prototype.Z3a=function(a,b,d){!1===b instanceof _geo.geotoolkit.axis.ng&&"object"==typeof b&&this.kub(a,b,d)};b.prototype.s$c=function(a,b,d){d&&(0!==this.oK(d).length?(this.tb.connect(b,d.getParent()),this.Tf[a][d.od()]=b):"string"==typeof d?(this.tb.connect(b,this.dc[a][d].sharedmodel),this.Tf[a][d]=b,this.dc[a][d].axis=b):d.hasOwnProperty("groupid")?(d=d.groupid,this.tb.connect(b,
this.dc[a][d].sharedmodel),this.Tf[a][d]=b,this.dc[a][d].axis=b):d instanceof _geo.geotoolkit.scene.Node&&(this.tb.connect(b,d),this.Tf[a][d.od()]=b),this.daa())};b.prototype.eTb=function(a){var b,d=[],g;if("string"==typeof a){for(g in this.Tf)this.Tf.hasOwnProperty(g)&&this.Tf[g].hasOwnProperty(a)&&(b={},b.axis=this.Tf[g][a],b.id=a,b.location=g,d.push(b));return d}if(a instanceof _geo.geotoolkit.axis.ng){for(g in this.Tf)if(this.Tf.hasOwnProperty(g))for(var h in this.Tf[g])this.Tf[g].hasOwnProperty(h)&&
this.Tf[g][h]===a&&(b={},b.axis=a,b.id=h,b.location=g,d.push(b));return d}return null};b.prototype.F8a=function(a){if(a=this.eTb(a))for(var b=0;b<a.length;b++){var d=a[b];this.Tf[d.location][d.id]=null;this.tb.removeItem(d.axis.getParent(),d.location);this.tb.disconnect(d.axis);this.iF(d.location)}return this};b.prototype.WKc=function(a,b){var d;if(null!=a){var g=this.oK(a);if(this.Tf.hasOwnProperty(b)&&this.Tf[b])if(0!==g.length)d=g[0].shape.od(),d=this.Tf[b][d];else if(null!=this.dc[b][a])d=this.Tf[b][a];
else if(null!=this.dc[b][a.groupid])d=this.Tf[b][a.groupid];else return null;this.F8a(d);return this}return null};b.prototype.dispose=function(){this.O0b(this.Lrb());_geo.geotoolkit.oa.Qm.prototype.dispose.call(this)};b.prototype.iF=function(a,b){for(var d=this.tb.vb(a),g=d.Le().bn(),h=d.ga().clone(),l=d.ga().clone(),n=1,p={};g.Xf();){var r=g.next();r.ib()&&(n=a===_geo.geotoolkit.ea.Oa.Yc?n+r.mf():n+r.yl())}if((0,window.isNaN)(n))return this;a===_geo.geotoolkit.ea.Oa.Yc?(n>this.Rpa[a]&&!this.cib?
(p[a]=this.Rpa[a],this.al(p),l=d.ga().clone(),this.wMb?d.Sa(h.Db(n)):d.Sa(l),d.os(l,l),this.wMb&&(this.aS.Ka(!0),this.aS.Sa(d.xa(),l))):this.cib?(p[a]=n,this.al(p),l=d.ga().clone(),d.Sa(l),d.os(l,l),this.aS.Ka(!1)):(p[a]=this.Rpa[a],this.al(p),l.Db(this.Rpa[a]),d.Sa(l),d.os(l,l),this.aS.Sa(l,l)),b||(this.iF(_geo.geotoolkit.ea.Oa.Rc,!0),this.iF(_geo.geotoolkit.ea.Oa.pd,!0))):(a===_geo.geotoolkit.ea.Oa.pd&&this.aS.ka().size>n?p[a]=this.aS.ka().size:p[a]=n,this.al(p),l=d.ga().clone(),d.Sa(l),d.os(l,
l),b||this.iF(_geo.geotoolkit.ea.Oa.Yc,!0));return this};b.prototype.xAc=function(){return _geo.geotoolkit.util.vX.bQ()};b.prototype.Jkd=function(a,c){var d=this.io[c.od()].groupid[_geo.geotoolkit.ea.Oa.Yc],g=this.io[c.od()].groupid[_geo.geotoolkit.ea.Oa.Rc],h=this.io[c.od()].groupid[_geo.geotoolkit.ea.Oa.pd];if(null!=this.Tf[_geo.geotoolkit.ea.Oa.Yc][c.od()]){var l=c.wK(),l=null!=l?" ( "+l.be()+" ) ":"",l=c.getName()+l;this.Tf[_geo.geotoolkit.ea.Oa.Yc][c.od()].mp(l)}this.Fz(c);d&&this.oVa(this.dc[_geo.geotoolkit.ea.Oa.Yc][d],
_geo.geotoolkit.ea.Oa.Yc);g&&this.oVa(this.dc[_geo.geotoolkit.ea.Oa.Rc][g],_geo.geotoolkit.ea.Oa.Rc);h&&this.oVa(this.dc[_geo.geotoolkit.ea.Oa.pd][h],_geo.geotoolkit.ea.Oa.pd);this.Ja(b.$.Zga,this,{event:a,src:c});this.daa();this.xb()};b.prototype.b_b=function(a,b,d){if(a=this.Tf[_geo.geotoolkit.ea.Oa.Yc][b.od()])a.Fe().gT(d),this.daa(),this.xb()};b.prototype.Fz=function(a,b){var d=a.getParent().xa().clone(),g=a.xa().clone();b!==_geo.geotoolkit.ea.Oa.Yc&&null!=b||a.getParent().Sa(new _geo.geotoolkit.util.Rect(g.sa(),
d.wa(),g.za(),d.qa()));if(b!==_geo.geotoolkit.ea.Oa.Yc||null==b)a.mEa()===_geo.geotoolkit.controls.shapes.pl.uX.mIa&&a.Xsa()===_geo.geotoolkit.controls.shapes.pl.dX.oX?(d=_geo.geotoolkit.util.Math.Hs(g.qa(),g.wa()),g.setY(d.gb()).Db(d.nb()-d.gb()),a.getParent().Sa(g)):a.getParent().Sa(new _geo.geotoolkit.util.Rect(d.sa(),g.wa(),d.za(),g.qa()))};b.prototype.oVa=function(a,b){var d=a.models,g=!1,h,l=null,n;for(h=0;h<d.length;h++)n=d[h].shape,n instanceof _geo.geotoolkit.controls.shapes.pl&&n.mEa()===
_geo.geotoolkit.controls.shapes.pl.uX.mIa&&n.Xsa()===_geo.geotoolkit.controls.shapes.pl.dX.oX&&(g=!0),null==l?l=new _geo.geotoolkit.util.Rect(n.xa()):l.union(n.xa());g&&(h=_geo.geotoolkit.util.Math.Hs(l.qa(),l.wa()),l.setY(h.gb()).Db(h.nb()-h.gb()));a.sharedmodel.xa().Pj(l)||a.sharedmodel.Sa(l);for(h=0;h<d.length;h++)n=d[h].shape,g=n.getParent().xa(),b===_geo.geotoolkit.ea.Oa.Yc?n.getParent().Sa(new _geo.geotoolkit.util.Rect(l.sa(),g.wa(),l.za(),g.qa())):n.getParent().Sa(new _geo.geotoolkit.util.Rect(g.sa(),
l.wa(),g.za(),l.qa())),n.getParent().ma()};b.prototype.Lrc=function(a,b){var d=this.oK(a),g;if("string"==typeof b)g=b;else if(b.hasOwnProperty("groupid"))g=b.groupid;else return null;for(var h in this.dc)if(this.dc.hasOwnProperty(h)&&this.dc[h][g]){for(var l=this.dc[h][g],n=0;n<d.length;n++){var p=d[n].shape,r=l.models.indexOf(this.io[p.od()]);-1===r&&(l.models.push(this.io[p.od()]),d[n].groupid[h]=g,(p=this.Tf[h][p.od()])&&this.tb.removeItem(p.getParent(),h))}this.oVa(l,h);this.iF(h);this.daa()}return this};
b.prototype.P0b=function(a){a=this.oK(a);for(var b=0;b<a.length;b++){var d=a[b].groupid,g=a[b].shape,h;for(h in d)d.hasOwnProperty(h)&&null!=d[h]&&this.Q0b(g,d[h])}return this};b.prototype.Q0b=function(a,b){var d=this.oK(a),g;if("string"==typeof b)g=b;else if(b.hasOwnProperty("groupid"))g=b.groupid;else return null;for(var h in this.dc)if(this.dc.hasOwnProperty(h)&&this.dc[h][g]){for(var l=this.dc[h][g],n=0;n<d.length;n++){var p=d[n].shape,r=l.models.indexOf(this.io[p.od()]);-1!==r&&(l.models.splice(r,
1),d[n].groupid[h]=null,this.Fz(p),p=this.Tf[h][p.od()],this.tb.Yr(p.getParent(),h),0===this.mRa(g).length&&this.KGa(g))}this.oVa(l,h);this.iF(h);this.daa()}return this};b.prototype.uPa=function(a,b,d,g){var h=this.oK(a);b=b?b:_geo.geotoolkit.ea.Oa.Rc;var l,n,p,r;g=null!=g?g:this.xAc();for(r=0;r<h.length;r++){p=h[r];if(null!=p.groupid[b])return null;l=p.shape;null==n?n=new _geo.geotoolkit.util.Rect(l.xa()):n.union(l.xa())}var t;a="";this.Pm();for(r=0;r<h.length;r++){p=h[r];l=p.shape;if(t=this.Tf[b][l.od()])a=
a+" "+t.uo(),this.tb.removeItem(t.getParent(),b);p.groupid[b]=g}var q;l=new _geo.geotoolkit.scene.Group;l.Sa(n);l.Ea(new _geo.geotoolkit.util.Rect(0,0,1,1));this.OO.va(l);this.dc[b][g]={models:h,sharedmodel:l};null==d&&(d={});d.hasOwnProperty("axis")||(null==d.linestyle&&(d.linestyle=new _geo.geotoolkit.attributes.Aa),null==d.textstyle&&(d.textstyle=new _geo.geotoolkit.attributes.eb),null==d.baselinestyle&&(d.baselinestyle=new _geo.geotoolkit.attributes.Aa),d.tickgenerator instanceof _geo.geotoolkit.axis.Jl||
!t||(n=t.Fe().clone(),d.tickgenerator=n.xo("MAJOR",!0).ja(d.tickgenerator)),b!==_geo.geotoolkit.ea.Oa.Yc||null!=d.title&&null!=d.title.text||(d.title=null==d.title?{}:d,d.title.text=a),t&&(d=_geo.geotoolkit.Sb(d,t.ka(),!0)),q=this.kub(b,d,g));this.Om();this.dc[b][g].axis=q;this.Tf[b][g]=q;this.oVa(this.dc[b][g],b);this.iF(b);return{groupid:g}};b.prototype.ja=function(a){this.setOptions(a);return this};b.prototype.setOptions=function(a){if(null==a)return this;_geo.geotoolkit.oa.Wg.prototype.ja.call(this,
a);null!=a.header&&this.p5(a.header);null==a.axiswidth||(0,window.isNaN)(a.axiswidth)||(this.nib=a.axiswidth);null==a.axisheight||(0,window.isNaN)(a.axisheight)||(this.lib=a.axisheight);null!=a.tools&&this.Dx(a.tools);null!=a.annotationsgaps&&this.k3b(a.annotationsgaps);null!=a.autoannotationsize&&(this.cib=a.autoannotationsize);null!=a.annotationssizes&&null!=a.annotationssizes.south&&(this.Rpa[_geo.geotoolkit.ea.Oa.Yc]=a.annotationssizes.south);this.tb.Pa();this.iF(_geo.geotoolkit.ea.Oa.Rc);this.iF(_geo.geotoolkit.ea.Oa.pd);
this.iF(_geo.geotoolkit.ea.Oa.Yc);return this};b.prototype.gI=function(a,b){var d=null,g,h;if(null!=a)if(g=this.oK(a),0!==g.length)h=g[0].shape.od(),g=this.Tf[b][h];else if(null!=this.dc[b][a])h=a,g=this.Tf[b][a];else if(null!=this.dc[b][a.groupid])h=a.groupid,g=this.Tf[b][a.groupid];else return null;if(g){var l=g.getParent(),d=g.ka();b===_geo.geotoolkit.ea.Oa.Yc?(d.length=l.mf(),d.flip=l.MA()):(d.length=l.yl(),d.flip=l.Cr());this.io[h]&&this.io[h].shape.Xsa()===_geo.geotoolkit.controls.shapes.pl.dX.YBb?
d.accumulative=!0:d.accumulative=!1}return d};b.prototype.zN=function(a,b,d){if(null!=a){b=b?b:_geo.geotoolkit.ea.Oa.Yc;var g=this.oK(a);if(0!==g.length)a=g[0].shape.od(),a=this.Tf[b][a];else if(null!=this.dc[b][a])a=this.Tf[b][a];else if(null!=this.dc[b][a.groupid])a=this.Tf[b][a.groupid];else return this;null!=a&&(a.ja(d),g=a.getParent(),!d.tickgenerator||d.tickgenerator instanceof _geo.geotoolkit.axis.Jl||a.Fe().ja(d.tickgenerator),"number"==typeof d.length&&(b===_geo.geotoolkit.ea.Oa.Yc?g.zk(d.length):
g.Ul(d.length)),"boolean"==typeof d.flip&&(b===_geo.geotoolkit.ea.Oa.Yc?g.Nv(d.flip):g.mk(d.flip)))}return this};b.prototype.ka=function(){var a=_geo.geotoolkit.oa.Wg.prototype.ka.call(this);a.header=this.Qj();a.bounds=this.ga();a.axiswidth=this.nib;a.axisheight=this.lib;a.autoannotationsize=this.cib;a.tools=null!=a.tools?a.tools:{};a.tools.axisselection=this.Uqb();a.tools.southscroll=this.Pqb();return a};b.prototype.p5=function(a){if(null==a)return this;a instanceof _geo.geotoolkit.scene.shapes.Text?
this.lg=a:this.lg.ja(a.title);this.Kv();return this};b.prototype.Qj=function(){return this.lg};b.prototype.KMc=function(a,b){var d=this.eTb(a);if(null==b||(0,window.isNaN)(b)||!d||0===d.length)return this;d=d[0];d.location===_geo.geotoolkit.ea.Oa.Yc?d.axis.getParent().zk(b):d.axis.getParent().Ul(b);return this};b.prototype.Dx=function(a){if(!a)return this;_geo.geotoolkit.oa.Wg.prototype.Dx.call(this,a);null!=a.axisselection&&this.T1b(a.axisselection);null!=a.southscroll&&this.M1b(a.southscroll,_geo.geotoolkit.ea.Oa.Yc);
return this};b.prototype.a_=function(){var a=_geo.geotoolkit.oa.Wg.prototype.a_.call(this),a=null!=a?a.tools:{};return a=_geo.geotoolkit.Ca(a,{axisselection:this.Uqb(),southscroll:this.Pqb()})};b.prototype.T1b=function(a){null!==a.enabled&&(this.mib=a.enabled,this.Fpc.cc(this.mib),this.frc.cc(this.mib));null!==a.highlightstyle&&(this.$Ib=a.highlightstyle instanceof _geo.geotoolkit.attributes.Fa?a.highlightstyle:new _geo.geotoolkit.attributes.Fa(a.highlightstyle));return this};b.prototype.Uqb=function(){var a=
{};a.enabled=this.mib;a.highlightstyle=this.$Ib.ka();return a};b.prototype.M1b=function(a,b){var d=this.aS;null!=a.size&&"number"==typeof a.size&&d.pb({width:a.size});null!=a.visible&&(d.Ka(a.visible),this.wMb=a.visible,this.iF(_geo.geotoolkit.ea.Oa.Yc),this.iF(_geo.geotoolkit.ea.Oa.Rc),this.iF(_geo.geotoolkit.ea.Oa.pd));null!=a.options&&d.ja(a.options);this.vb(b).xb();return this};b.prototype.Pqb=function(){return this.aS.ka()};b.prototype.k3b=function(a){null!=a[_geo.geotoolkit.ea.Oa.Yc]&&(this.dca[_geo.geotoolkit.ea.Oa.Yc]=
a[_geo.geotoolkit.ea.Oa.Yc],this.vb(_geo.geotoolkit.ea.Oa.Yc).xb());null!=a[_geo.geotoolkit.ea.Oa.Rc]&&(this.dca[_geo.geotoolkit.ea.Oa.Rc]=a[_geo.geotoolkit.ea.Oa.Rc],this.vb(_geo.geotoolkit.ea.Oa.Rc).xb());null!=a[_geo.geotoolkit.ea.Oa.pd]&&(this.dca[_geo.geotoolkit.ea.Oa.pd]=a[_geo.geotoolkit.ea.Oa.pd],this.vb(_geo.geotoolkit.ea.Oa.pd).xb());return this};b.prototype.BUb=function(a){if("string"!=typeof a)if(a&&a.hasOwnProperty("groupid"))a=a.groupid;else return null;var b,d,g,h;for(h in this.dc)this.dc.hasOwnProperty(h)&&
null!=this.dc[h][a]&&(b=this.dc[h][a].models,d=this.Tf[h][a],g=h);return{models:b,axis:d,id:a,location:g}};b.prototype.KGa=function(a){var b=this.BUb(a);a=b.models;var d=b.axis,g=b.id,b=b.location;this.Pm();if(a){this.F8a(d);for(d=0;d<a.length;d++){a[d].groupid[b]=null;var h=a[d].shape;this.Fz(h,b);h.getParent().ma();this.Tf[b][h.od()]&&this.tb.Yr(this.Tf[b][h.od()].getParent(),b)}this.Om();this.iF(b)}this.dc[b][g]=null;return this};b.prototype.FDc=function(a,b){var d=this.eTb(a)[0],g=d.id,d=d.location,
h=[];if(this.Tf[d][g])for(var l in this.Tf)if(this.Tf.hasOwnProperty(l)&&this.Tf[d][l]===this.Tf[d][g]){var n=this.io[l].shape.getParent().ib();b&&!n||h.push(this.io[l].shape)}return h};b.prototype.iOc=function(a,b){for(var d=this.oK(a),g,h,l=0;l<d.length;l++){var n=d[l];if(n){var p=n.shape.od();if(!b&&!0===n.shape.getParent().ib())for(h in n.shape.getParent().Ka(b),n.shape.kk(b),this.Tf)this.Tf.hasOwnProperty(h)&&(g=n.groupid[h],this.Tf[h][g]?0===this.mRa(g,!0).length&&this.tb.removeItem(this.Tf[h][g].getParent(),
h):this.Tf[h][p]&&0===this.FDc(p,!0).length&&this.tb.removeItem(this.Tf[h][p].getParent(),h));else if(!0===b&&!1===n.shape.getParent().ib()){for(h in this.Tf)this.Tf.hasOwnProperty(h)&&(g=n.groupid[h],this.Tf[h][g]?0===this.mRa(g,!0).length&&this.tb.Yr(this.Tf[h][g].getParent(),h):this.Tf[h][p]&&0===this.FDc(p,!0).length&&this.tb.Yr(this.Tf[h][p].getParent(),h));n.shape.getParent().Ka(b);n.shape.kk(b)}}}this.iF(_geo.geotoolkit.ea.Oa.Rc);this.iF(_geo.geotoolkit.ea.Oa.pd);this.iF(_geo.geotoolkit.ea.Oa.Yc);
this.daa();return this};b.prototype.ja=function(a){this.setOptions(a);return this};b.prototype.F$a=function(a){if(null==a)return this.F$a(_geo.geotoolkit.ea.Oa.Rc),this.F$a(_geo.geotoolkit.ea.Oa.pd),this.F$a(_geo.geotoolkit.ea.Oa.Yc),this;for(var b in this.dc[a])this.dc[a].hasOwnProperty(b)&&this.KGa(b,a);return this};b.prototype.pxb=function(a){a=this.oK(a)[0].shape;this.OO.removeChild(a.getParent());this.OO.va(a.getParent());this.bna(a,!0);this.B1=a.od();return this};b.prototype.E3b=function(a){a=
this.BUb(a).models;var b,d=[];for(b=0;b<a.length;b++)this.OO.removeChild(a[b].shape.getParent()),d.push(a[b].shape);for(b=0;b<a.length;b++)this.OO.va(d.pop().getParent());a=a[0].shape.od();this.bna(a,!0);this.B1=a;return this};b.prototype.bind=function(a){if(null!=this.Dm)for(var b in this.io)this.io.hasOwnProperty(b)&&this.Dm.bind(this.io[b],a)};b.prototype.unbind=function(a){if(null!=this.Dm)for(var b in this.io)this.io.hasOwnProperty(b)&&this.Dm.unbind(this.io[b],a)};b.prototype.setData=function(a){this.unbind(this.Ba);
this.Ba=a;this.bind(this.Ba);return this};b.prototype.getData=function(){return this.Ba};b.prototype.hT=function(a,b){this.Dm!==a&&(this.unbind(this.getData()),this.Dm=a,!0!==b&&this.bind(this.getData()));return this};b.prototype.qS=function(){return this.Dm};b.prototype.xwd=function(a,b){for(var d=this.oK(a),g=[],h,l=0;l<d.length;l++){var n=d[l];h={};for(var p in this.Tf)if(this.Tf.hasOwnProperty(p)&&(h[p]=this.Tf[p][n.shape.od()],b)){var r=n.groupid[p];null!=r&&null!=this.Tf[p][r]&&(h[p]=this.Tf[p][r])}g.push(h)}return g};
b.prototype.mRa=function(a,b,d){var g;if("string"==typeof a)g=a;else if(a.hasOwnProperty("groupid"))g=a.groupid;else return null;a=[];var h=[],l;for(l in this.dc)this.dc.hasOwnProperty(l)&&null!=this.dc[l][g]&&(a=this.dc[l][g].models);for(l=0;l<a.length;l++)if(!b||a[l].shape.getParent().ib())d?h.push(a[l].shape.od()):h.push(a[l].shape);return h};b.prototype.CVb=function(a){return this.BUb(a).location};b.prototype.IAc=function(a){var b={};a=this.io[a.od()];for(var d in a.groupid)a.groupid.hasOwnProperty(d)&&
null!=a.groupid[d]&&(b[d]=a.groupid[d]);return b};b.prototype.YAc=function(a){a=this.oK(a)[0];var b;null!=a&&(b=a.shape.getParent().xa().clone());return b};b.prototype.JAc=function(a){var b;if("string"!=typeof a)if(a.hasOwnProperty("groupid"))a=a.groupid;else return null;for(var d in this.dc)this.dc.hasOwnProperty(d)&&null!=this.dc[d][a]&&(b=this.dc[d][a].sharedmodel,b=b.xa().clone());return b};return b}();
_geo.geotoolkit.oa.ia.wXa=function(){function b(a){var b={},b={slots:b,name:"TableViewInPlaceEditor",layer:a};_geo.geotoolkit.controls.ia.fc.call(this,b);this.cc(!1);this.e8=a;this.xY=a.xg("TableViewCompositeTool");this.Gb=a.fXb();this.dl=this.nj=null;this.lhd();this.Unc=function(a,b){if(!1!==this.isEnabled()){this.nj=b.ii();var c=this.xY.Qe(this.Gb,b),c=this.Gb.KI(c.getX(),c.getY());this.Uma({row:c.getY(),column:c.getX()})}}.bind(this);this.$nc=function(a,b){if(null!=this.dl){var c=this.xY.Qe(this.Gb,
b),c=this.Gb.KI(c.getX(),c.getY(),!0);!1!==this.e8.g_().contains(c.getX(),c.getY())&&(this.S6b(),this.Uma({o1b:Math.floor(c.getY()),T4a:Math.floor(c.getX())}))}}.bind(this);this.e8.xg("TableViewSelection").addListener(_geo.geotoolkit.controls.ia.Selection.$.ks,this.Unc).addListener(_geo.geotoolkit.controls.ia.Selection.$.O4,this.$nc);this.Snc=function(a,b){null==this.dl||b.from<this.dl.column&&b.fh<this.dl.column||b.from>this.dl.column&&b.fh>this.dl.column||(b.from===this.dl.column?this.dl.column=
b.fh:b.from<this.dl.column?this.dl.column--:this.dl.column++,this.bka())}.bind(this);this.e8.xg("TableViewColumnHandler").addListener(_geo.geotoolkit.controls.ia.Jo.a6.$.Cl,this.Snc);this.boc=function(a,b){null==this.dl||b.from<this.dl.row&&b.fh<this.dl.row||b.from>this.dl.row&&b.fh>this.dl.row||(b.from===this.dl.row?this.dl.row=b.fh:b.from<this.dl.row?this.dl.row--:this.dl.row++,this.bka())}.bind(this);this.e8.xg("TableViewRowHandler").addListener(_geo.geotoolkit.controls.ia.Jo.a6.$.Cl,this.boc);
this.Xhb=this.bka.bind(this);_geo.geotoolkit.window.addEventListener("resize",this.Xhb);this.e8.kb(_geo.geotoolkit.oa.cE.$.TKa,this.Xhb)}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.ia.fc);_geo.geotoolkit.da(b,"geotoolkit.widgets.tools.InPlaceEditor");b.$={tkd:"onCanEdit",pJc:"onValueChanged"};b.prototype.gy=function(a){this.nj=a;return this};b.prototype.lhd=function(){this.dk=_geo.geotoolkit.window.document.createElement("div");this.dk.style.position="absolute";this.dk.style.display="none";this.dk.style.border=
"1px solid black";this.dk.style.pointerEvents="none";this.dk.style.overflow="hidden";_geo.geotoolkit.window.document.body.appendChild(this.dk);this.ek=_geo.geotoolkit.window.document.createElement("div");this.ek.style.position="absolute";this.ek.style.border="1px solid black";this.ek.style.pointerEvents="all";this.dk.appendChild(this.ek);this.rp=_geo.geotoolkit.window.document.createElement("input");this.rp.className="geotoolkit-inlineeditor";this.rp.style.position="absolute";this.rp.style.border=
"0px solid transparent !important";this.K_a=function(a){if("Enter"===a.key||13===a.keyCode)this.S6b(),a=this.Gb.y9(),this.Uma({o1b:Math.min(this.dl.row+1,a.ba()-1),T4a:Math.min(Math.max(0,this.dl.column),a.aa()-1)})}.bind(this);this.rp.addEventListener("keypress",this.K_a);this.Yza=function(a){if("Escape"===a.key||27===a.keyCode)this.Uma(null);else if(!0===a.ctrlKey){this.S6b();var b=this.dl.row,d=this.dl.column;if("ArrowLeft"===a.key||37===a.keyCode)d--;else if("ArrowRight"===a.key||39===a.keyCode)d++;
else if("ArrowUp"===a.key||38===a.keyCode)b--;else if("ArrowDown"===a.key||40===a.keyCode)b++;else{"Enter"!==a.key&&13!==a.keyCode||this.Uma(null);return}a=this.Gb.y9();this.Uma({o1b:Math.min(Math.max(0,b),a.ba()-1),T4a:Math.min(Math.max(0,d),a.aa()-1)})}}.bind(this);this.rp.addEventListener("keydown",this.Yza);this.ek.appendChild(this.rp)};b.prototype.dispose=function(){_geo.geotoolkit.window.removeEventListener("resize",this.Xhb);this.rp.removeEventListener("keypress",this.K_a);this.rp.removeEventListener("keydown",
this.Yza);var a=this.e8.xg("TableViewSelection");a&&a.removeListener(_geo.geotoolkit.controls.ia.Selection.$.ks,this.Unc).removeListener(_geo.geotoolkit.controls.ia.Selection.$.O4,this.$nc);(a=this.e8.xg("TableViewColumnHandler"))&&a.removeListener(_geo.geotoolkit.controls.ia.Jo.a6.$.Cl,this.Snc);(a=this.e8.xg("TableViewRowHandler"))&&a.removeListener(_geo.geotoolkit.controls.ia.Jo.a6.$.Cl,this.boc);this.e8.hb(_geo.geotoolkit.oa.cE.$.TKa,this.Xhb);this.dk.parentNode&&this.dk.parentNode.removeChild(this.dk);
this.dk=null;_geo.geotoolkit.controls.ia.fc.prototype.dispose.call(this)};b.prototype.start=function(){_geo.geotoolkit.controls.ia.fc.prototype.start.call(this);return this};b.prototype.stop=function(){_geo.geotoolkit.controls.ia.fc.prototype.stop.call(this);this.Uma(null);return this};b.prototype.S6b=function(){if("none"===this.rp.style.display)return this;var a={cell:{column:this.dl.column,row:this.dl.row},value:this.rp.value};this.fireEvent(b.$.pJc,a);this.rp.value=a.value;this.Gb.ma();return this};
b.prototype.Lxc=function(){return this.dl};b.prototype.Uma=function(a){if(null==this.dl&&null==a||null!=this.dl&&null!=a&&this.dl.row===a.row&&this.dl.column===a.column)return this;this.dl=a;this.bka();if(null==this.dl)return this.stop();this.Gb.ifa(this.dl.column);this.Gb.Kva([this.dl.row]);this.e8.w5(this.dl.row,this.dl.column);this.rp.value=this.Gb.nta(this.dl.column,this.dl.row);this.rp.focus();return this.start()};b.prototype.bka=function(){if(null==this.dl)return this.dk.style.display="none",
this;var a=this.e8.xg("TableViewSelection").EZ(this.nj.hD()),b=this.Gb.Tka(this.dl.row,this.dl.column);if(null==b)return this.dk.style.display="none",this;var d=new _geo.geotoolkit.util.na(b.getX(),b.getY()),b=new _geo.geotoolkit.util.na(b.za(),b.wa()),e=this.Gb.uK().Ya().ob(this.Gb.uK().Nb());this.dk.style.display="block";this.dk.style.left=e.sa()+a.x+"px";this.dk.style.top=e.qa()+a.y+"px";this.dk.style.width=e.aa()+"px";this.dk.style.height=e.ba()+"px";this.Gb.uK().Wx.Ya().cb(d,d);this.Gb.uK().Wx.Ya().cb(b,
b);this.ek.style.left=d.getX()-e.sa()+"px";this.ek.style.top=d.getY()-e.qa()+"px";this.ek.style.width=b.getX()-d.getX()+"px";this.ek.style.height=b.getY()-d.getY()+"px";this.rp.style.width=b.getX()-d.getX()-2+"px";this.rp.style.height=b.getY()-d.getY()-2+"px";return this};return b}();
_geo.geotoolkit.oa.ia.t6=function(){function b(a,b,d){_geo.geotoolkit.controls.ia.ev.call(this,a);this.X3c=b;this.S6c=d}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.ia.ev);_geo.geotoolkit.da(b,"geotoolkit.widget.tools.LegendToolEventArgs");b.prototype.Swd=function(){return this.X3c};b.prototype.pxd=function(){return this.S6c};return b}();
_geo.geotoolkit.oa.ia.uDb=function(){function b(a){null==a&&(a={});a=_geo.geotoolkit.Ca(a,{widget:a.widget,group:a.group,layer:a.manipulatorlayer,padding:a.padding,name:"LegendTool"});this.hl=a.widget;this.dc=a.group;this.ve="number"==typeof a.padding?a.padding:10;this.v_a=this.dc.ga();this.Xi=this.Yi=_geo.geotoolkit.ea.Oa.lb;this.ht={west:new _geo.geotoolkit.scene.Group,east:new _geo.geotoolkit.scene.Group,north:new _geo.geotoolkit.scene.Group,south:new _geo.geotoolkit.scene.Group};this.Eh=new _geo.geotoolkit.selection.am;
this.WF=5;this.wB=2;this.VJ={east:this.hl.vb(_geo.geotoolkit.ea.Oa.pd).ga().aa(),west:this.hl.vb(_geo.geotoolkit.ea.Oa.Rc).ga().aa(),north:this.hl.vb(_geo.geotoolkit.ea.Oa.Se).ga().ba(),south:this.hl.vb(_geo.geotoolkit.ea.Oa.Yc).ga().ba()};var b={pointerdown:this.xf.bind(this),pointermove:this.Wd.bind(this),pointerup:this.Ae.bind(this),layer:a.layer};_geo.geotoolkit.controls.ia.fc.call(this,b,a.name);this.G_a=this.H_a=!1;this.YR=new _geo.geotoolkit.controls.Zb.hba(null,this.Qb);this.YR.kc(this.Qb.mb());
this.YR.register(this.dc.getClassName(),new _geo.geotoolkit.controls.Zb.GW.lXa)}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.ia.fc);_geo.geotoolkit.da(b,"geotoolkit.widgets.tools.LegendTool");b.$={J9a:"onAnnotationChanged",o_b:"onMoveStart",L9a:"onMoveEnd"};b.prototype.xf=function(a){var b=a.il(),d=this.qG(a),e=d?this.WF:this.wB;this.Wia=!1;var c=null,f=this.Qe(this.Qb,a),k=this.Eh.select(this.Qb,f.x,f.y,e);if(k&&0<k.length)for(d=k.length-1;1<=d;d--){var h=k[d];if("function"===typeof h.hz){c=h.hz();
c.Er(h);c.setPosition(f.x,f.y);this.cf=c;this.Wia=!0;a.stopPropagation(!0);return}}f=this.Qe(b,a);b=this.Eh.select(b,f.x,f.y,e);b=null==b?null:b.filter(function(a){return a===this.dc}.bind(this));f=this.Qe(this.Qb,a);if(b&&0<b.length)for(d=b.length-1;0<=d;d--)if(c=this.YR.hz(b[d])){c.lk(b[d]);c.setPosition(f.x,f.y);this.YR.eT(c);this.cf=c;this.Wia=!0;a.stopPropagation(!0);return}this.cf=c;this.YR.eT(null)};b.prototype.Wd=function(a){if(this.cf){var g=this.Qe(this.Qb,a);this.cf.move(g.x,g.y);var g=
this.cf.Ob().ga(),d=this.hl.Mc().getParent().ga(),e={},c;this.G_a||this.H_a||(this.Yi!==_geo.geotoolkit.ea.Oa.lb&&(this.VJ[this.Yi]=this.hl.vb(this.Yi).ga().ba()-this.ht[this.Yi].mf()),this.Xi!==_geo.geotoolkit.ea.Oa.lb&&(this.VJ[this.Xi]=this.hl.vb(this.Xi).ga().aa()-this.ht[this.Xi].yl()));!this.G_a&&this.cf.nx()instanceof _geo.geotoolkit.controls.Zb.Qga&&(this.Yi!==_geo.geotoolkit.ea.Oa.lb&&(e={},this.ht[this.Yi].zk(g.ba()+this.ve),e[this.Yi]=this.ht[this.Yi].mf()+this.VJ[this.Yi],this.hl.al(e),
this.fireEvent(b.$.o_b,new _geo.geotoolkit.oa.ia.t6(a,this.Yi,null)),this.G_a=!0),this.Xi!==_geo.geotoolkit.ea.Oa.lb&&(e={},this.ht[this.Xi].Ul(g.aa()+this.ve),e[this.Xi]=this.ht[this.Xi].yl()+this.VJ[this.Xi],this.hl.al(e),this.fireEvent(b.$.o_b,new _geo.geotoolkit.oa.ia.t6(a,this.Xi,null)),this.G_a=!0));if(this.cf.nx()instanceof _geo.geotoolkit.controls.Zb.Qga){var f,k;this.Yi!==_geo.geotoolkit.ea.Oa.lb&&(g.qa()<d.wa()&&g.qa()>d.qa()||g.wa()<d.wa()&&g.wa()>d.qa())&&(c=this.hl.vb(this.Yi),e={},c.Le().remove(this.ht[this.Yi]),
c.removeChild(this.ht[this.Yi]),e[this.Yi]=this.VJ[this.Yi],this.hl.al(e),this.fireEvent(b.$.J9a,new _geo.geotoolkit.oa.ia.t6(a,this.Yi,_geo.geotoolkit.ea.Oa.lb)),this.Yi=_geo.geotoolkit.ea.Oa.lb,f=!0);this.Xi!==_geo.geotoolkit.ea.Oa.lb&&(g.za()<d.za()&&g.za()>d.sa()||g.sa()<d.za()&&g.sa()>d.sa())&&(c=this.hl.vb(this.Xi),c.Le().remove(this.ht[this.Xi]),c.removeChild(this.ht[this.Xi]),e={},e[this.Xi]=this.VJ[this.Xi],this.hl.al(e),this.fireEvent(b.$.J9a,new _geo.geotoolkit.oa.ia.t6(a,this.Xi,_geo.geotoolkit.ea.Oa.lb)),
this.Xi=_geo.geotoolkit.ea.Oa.lb,k=!0);!f&&(g.qa()<d.qa()||g.wa()>d.wa())&&this.Yi===_geo.geotoolkit.ea.Oa.lb&&(g.qa()<d.qa()?this.Yi=_geo.geotoolkit.ea.Oa.Se:this.Yi=_geo.geotoolkit.ea.Oa.Yc,e={},c=this.hl.vb(this.Yi),this.ht[this.Yi].zk(g.ba()+this.ve),e[this.Yi]=c.ga().ba()+this.ht[this.Yi].mf(),this.Yi===_geo.geotoolkit.ea.Oa.Se?c.Le().gs(0,this.ht[this.Yi]):c.Le().add(this.ht[this.Yi]),c.va(this.ht[this.Yi]),this.hl.al(e),this.fireEvent(b.$.J9a,new _geo.geotoolkit.oa.ia.t6(a,_geo.geotoolkit.ea.Oa.lb,
this.Yi)));!k&&(g.za()>d.za()||g.sa()<d.sa())&&this.Xi===_geo.geotoolkit.ea.Oa.lb&&(g.za()>d.za()?this.Xi=_geo.geotoolkit.ea.Oa.pd:this.Xi=_geo.geotoolkit.ea.Oa.Rc,e={},c=this.hl.vb(this.Xi),this.ht[this.Xi].Ul(g.aa()+this.ve),e[this.Xi]=c.ga().aa()+this.ht[this.Xi].yl(),this.Xi===_geo.geotoolkit.ea.Oa.Rc?c.Le().gs(0,this.ht[this.Xi]):c.Le().add(this.ht[this.Xi]),c.va(this.ht[this.Xi]),this.hl.al(e),this.fireEvent(b.$.J9a,new _geo.geotoolkit.oa.ia.t6(a,_geo.geotoolkit.ea.Oa.lb,this.Xi)))}else this.H_a=
!0;this.cf.Ob().ma();a.stopPropagation(!0,!0)}};b.prototype.Ae=function(a){if(this.cf){var g=this.cf.Ob().ga().clone(),d,e=this.hl.ga(),c,f,k={};this.Yi!==_geo.geotoolkit.ea.Oa.lb&&(this.H_a&&(k={},c=this.hl.vb(this.Yi),f=this.cf.Ob().ga().ba()-this.ht[this.Yi].mf(),this.ht[this.Yi].zk(this.cf.Ob().ga().ba()+this.ve),k[this.Yi]=c.ga().ba()+f,this.hl.al(k),this.Yi===_geo.geotoolkit.ea.Oa.Se&&g.getY()!==this.v_a.getY()&&(this.cf.Ob().Ea(g.setY(g.getY()+f)),this.cf.Rh()),this.Yi===_geo.geotoolkit.ea.Oa.Yc&&
g.wa()!==this.v_a.wa()&&(this.cf.Ob().Ea(g.setY(g.getY()-f)),this.cf.Rh())),d=this.hl.Mc().getParent().ga().clone(),this.Yi===_geo.geotoolkit.ea.Oa.Se&&(c=this.hl.vb(this.Yi),k={},g.qa()>e.qa()?(d.qa()-g.qa()>this.VJ[this.Yi]?(k[this.Yi]=d.qa()-g.qa()+this.ve,this.ht[this.Yi].zk(k[this.Yi]-this.VJ[this.Yi])):(k[this.Yi]=this.VJ[this.Yi],this.ht[this.Yi].zk(0)),f=c.ga().ba()-k[this.Yi],this.cf.Ob().Ea(g.setY(g.getY()-f)),this.cf.Rh(),this.hl.al(k)):(this.cf.Ob().Ea(g.setY(e.qa()+this.ve)),this.cf.Rh()),
this.fireEvent(b.$.L9a,new _geo.geotoolkit.oa.ia.t6(a,null,this.Yi))),this.Yi===_geo.geotoolkit.ea.Oa.Yc&&(c=this.hl.vb(this.Yi),k={},g.wa()<e.wa()?(g.wa()-d.wa()>this.VJ[this.Yi]?(k[this.Yi]=g.wa()-d.wa()+this.ve,this.ht[this.Yi].zk(k[this.Yi]-this.VJ[this.Yi])):(k[this.Yi]=this.VJ[this.Yi],this.ht[this.Yi].zk(0)),f=c.ga().ba()-k[this.Yi],this.cf.Ob().Ea(g.setY(g.getY()+f)),this.cf.Rh(),this.hl.al(k)):(this.cf.Ob().Ea(g.setY(e.wa()-g.ba()-this.ve)),this.cf.Rh()),this.fireEvent(b.$.L9a,new _geo.geotoolkit.oa.ia.t6(a,
null,this.Yi))));this.Xi!==_geo.geotoolkit.ea.Oa.lb&&(this.H_a&&(k={},c=this.hl.vb(this.Xi),f=this.cf.Ob().ga().aa()-this.ht[this.Xi].yl(),this.ht[this.Xi].Ul(this.cf.Ob().ga().aa()+this.ve),k[this.Xi]=c.ga().aa()+f,this.hl.al(k),this.Xi===_geo.geotoolkit.ea.Oa.pd&&g.za()!==this.v_a.za()&&(this.cf.Ob().Ea(g.setX(g.getX()-f)),this.cf.Rh()),this.Xi===_geo.geotoolkit.ea.Oa.Rc&&g.sa()!==this.v_a.sa()&&(this.cf.Ob().Ea(g.setX(g.getX()+f)),this.cf.Rh())),d=this.hl.Mc().getParent().ga().clone(),this.Xi===
_geo.geotoolkit.ea.Oa.Rc&&(c=this.hl.vb(this.Xi),k={},g.sa()>e.sa()?(d.sa()-g.sa()>this.VJ[this.Xi]?(k[this.Xi]=d.sa()-g.sa()+this.ve,this.ht[this.Xi].Ul(k[this.Xi]-this.VJ[this.Xi])):(k[this.Xi]=this.VJ[this.Xi],this.ht[this.Xi].Ul(0)),f=c.ga().aa()-k[this.Xi],this.cf.Ob().Ea(g.setX(g.getX()-f)),this.cf.Rh(),this.hl.al(k)):(this.cf.Ob().Ea(g.setX(e.sa()+this.ve)),this.cf.Rh()),this.fireEvent(b.$.L9a,new _geo.geotoolkit.oa.ia.t6(a,null,this.Xi))),this.Xi===_geo.geotoolkit.ea.Oa.pd&&(c=this.hl.vb(this.Xi),
k={},g.za()<e.za()?(g.za()-d.za()>this.VJ[this.Xi]?(k[this.Xi]=g.za()-d.za()+this.ve,this.ht[this.Xi].Ul(k[this.Xi]-this.VJ[this.Xi])):(k[this.Xi]=this.VJ[this.Xi],this.ht[this.Xi].Ul(0)),f=c.ga().aa()-k[this.Xi],this.cf.Ob().Ea(g.setX(g.getX()+f)),this.cf.Rh(),this.hl.al(k)):(this.cf.Ob().Ea(g.setX(e.za()-g.aa()-this.ve)),this.cf.Rh()),this.fireEvent(b.$.L9a,new _geo.geotoolkit.oa.ia.t6(a,null,this.Xi))));this.G_a=this.H_a=!1;a.stopPropagation(!0);this.v_a=g;this.cf.setPosition(null);this.cf=null}};
return b}();_geo.geotoolkit.oa.bia=function(){function b(a,b){_geo.geotoolkit.controls.ia.uaa.call(this,a);this.rd=b}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.ia.uaa);_geo.geotoolkit.da(b,"geotoolkit.controls.tools.scroll.VisibleRangeChangeEventArgs");b.prototype.Lla=function(){return this.rd};return b}();
_geo.geotoolkit.oa.Agb=function(){function b(a,b,d){_geo.geotoolkit.controls.ia.uaa.call(this,a);this._id=b;this.Pp=d}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.ia.uaa);_geo.geotoolkit.da(b,"geotoolkit.widgets.SelectionChangeEventArgs");b.prototype.od=function(){return this._id};b.prototype.Ev=function(){return this.Pp};return b}();
_geo.geotoolkit.oa.DL=function(){function b(b){_geo.geotoolkit.oa.Qm.call(this,b);this.$w=_geo.geotoolkit.util.Uaa.lq();this.jAa=_geo.geotoolkit.util.$Ia.lq();this.W3c=a(this.jAa,e,this.$w);this.Emb=this.Y7=this.nda=this.c1a=this.O3a=null;this.Bc=n.PFc();this.fK=new _geo.geotoolkit.util.Mo;this.Yjb=new _geo.geotoolkit.util.Mo;this.R3a=new _geo.geotoolkit.util.Mo;this.AHb=this.zHb=this.UJb=this.LGb=this.JGb=this.eJb=this.kca=null;this.pza=[];this.Enb=this.Fnb=this.ey=this.Uib=this.z2a=null;this.pMb=
g;this.J9();this.Sg();this.setOptions(b);this.C0a=new _geo.geotoolkit.oa.Kc.mhb(new _geo.geotoolkit.oa.Kc.VKa,this.Bc.tooltips.tooltipoptions);this.C0a.setOptions({formatter:this.Bc.tooltips.tooltipoptions.index.formatter}).Ka(!1);this.pM.getData().add(this.C0a)}function a(a,b,c){return a.e5a({format:b,locale:c})}function g(a,b,c){b=_geo.geotoolkit.Sb(b,{});c=_geo.geotoolkit.Sb(c,{});var d;d=a.HA(c.id);null!=c.id&&null!=d&&(c=d.Ls(),null!=c&&null!=c.linestyle&&(c.linestyle instanceof _geo.geotoolkit.attributes.Aa?
c.linestyle.qb(c.linestyle.aa()-1):(null!=c.linestyle.width&&--c.linestyle.width,d.$fa(c))));d=a.HA(b.id);null!=b.id&&null!=d&&(c=d.Ls(),null!=c&&null!=c.linestyle&&(c.linestyle instanceof _geo.geotoolkit.attributes.Aa?c.linestyle.qb(c.linestyle.aa()+1):(null!=c.linestyle.width&&(c.linestyle.width+=1),d.$fa(c))))}var d=1,e="M j, Y H:i:s",c="curveaxisgroup",f=36E5,k=864E5,h="#6b6b6b",l={MAJOR:{color:"#c4c4c4",width:1,pixelsnapmode:{x:!0,y:!0}},MINOR:{color:"#ededed",width:1,pixelsnapmode:{x:!0,y:!0}},
EDGE:{color:"#c4c4c4",width:1,pixelsnapmode:{x:!0,y:!0}}},n=_geo.geotoolkit.oa.Kc.Bb;_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Qm);_geo.geotoolkit.da(b,"geotoolkit.widgets.TimeSeriesWidget");b.$={Q4:"onVisibleRangeChanged",JSa:"onVisibleRangeChanging",iJc:"onCursorChanged",Hda:"beforeSelectionChange",EI:"onSelectionChanged",fJc:"onAnnotationLineClick",eJc:"onAnnotationClick"};b.KJa={dr:"outside",Qk:"inside"};b.H0={Ub:"top",Zf:"bottom"};b.Xg={z$b:"curvetocurve",A$b:"curvetoreferenceline",y$b:"curvetobaseline"};
b.Gha={Hcb:"advanced",bBb:"compact",LKa:"simple"};b.prototype.bL=function(b){this.$w!==b&&(this.$w=b,this.c1a=this.O3a=null,this.W3c=a(this.jAa,e,this.$w));return this};b.prototype.KP=function(){return this.$w};b.prototype.ESc=function(){var a=this.Bc.intervalbuttons.intervals,b=Object.keys(a),c=[];b.forEach(function(b){c.push({text:b,onClick:function(c){this.hMb=a[b];this.$rd(a[b]);1<Math.abs(a[b]-(this.Lla().nb()-this.Lla().gb()))?c.setState(_geo.geotoolkit.oa.AT.Sy.Rfb):c.setState(_geo.geotoolkit.oa.AT.Sy.lEb)}.bind(this)})}.bind(this));
b={layout:_geo.geotoolkit.ea.No,toggle:!0,buttons:c};null==this.eP?this.eP=new _geo.geotoolkit.oa.rxa(b):this.eP.J9(b);b={layout:_geo.geotoolkit.ea.gv,buttons:[{text:"Now",toggle:!0,styles:{pressed:{textstyle:(new _geo.geotoolkit.attributes.eb({font:"bold 8px Arial"})).setColor("white"),linestyle:new _geo.geotoolkit.attributes.Aa({color:"429529",width:3}),fillstyle:new _geo.geotoolkit.attributes.Fa("#50b432")}},onClick:function(a){this.qod()}.bind(this)}]};null==this.TO?this.TO=new _geo.geotoolkit.oa.rxa(b):
this.TO.J9(b)};b.prototype.J9=function(){this.ESc();this.cd=(new _geo.geotoolkit.scene.Group).va([this.i4c=(new _geo.geotoolkit.scene.Group).xe("gridandaxesgroup").va([(new _geo.geotoolkit.scene.Group).mk(!0).xe("gridandaxesgroup").va([this.T1=new _geo.geotoolkit.axis.Mx(this.Bc.modelgrid.horizontaltickgenerator,this.Bc.modelgrid.verticaltickgenerator)]),this.klb=(new _geo.geotoolkit.axis.ng).setOrientation(_geo.geotoolkit.axis.xd.ic)]),this.Enb=new _geo.geotoolkit.scene.Group,this.Mn=(new _geo.geotoolkit.scene.Group).mk(!0).Tl(!0===
this.Bc.viewcache?new _geo.geotoolkit.scene.Rk:null),this.Fnb=new _geo.geotoolkit.scene.Group,this.Qb=(new _geo.geotoolkit.scene.Group).va([this.Ara=(new _geo.geotoolkit.scene.Group).mk(!0)]),this.Dba=new _geo.geotoolkit.scene.Group,this.Xo=(new _geo.geotoolkit.scene.Group).va([(new _geo.geotoolkit.scene.Group).pe(new _geo.geotoolkit.ea.ol).va([this.lR=(new _geo.geotoolkit.scene.Group).Ad(!0).pe(new _geo.geotoolkit.ea.No).Qf(!0)])])]);this.klb.vm(_geo.geotoolkit.axis.qd.Pf.Zf);this.Ad(!0).pe(new _geo.geotoolkit.ea.ol).va([this.uY=
(new _geo.geotoolkit.scene.Group).Ad(!0).xe("layoutgroup").pe(new _geo.geotoolkit.ea.ol).va([this.cK=(new _geo.geotoolkit.scene.Group).Sa(new _geo.geotoolkit.util.Rect(0,0,1,1)).xe("titlelayoutgroup").va([this.lg=new _geo.geotoolkit.scene.shapes.Text({text:"",ax:0,ay:.5,alignment:_geo.geotoolkit.util.Da.We}),this.b1a=new _geo.geotoolkit.scene.shapes.Text({text:this.Pjb(new Date),ax:1,ay:.5,alignment:_geo.geotoolkit.util.Da.Ng})]),this.Vj=(new _geo.geotoolkit.scene.Wp({model:this.cd,south:[this.Mmb=
(new _geo.geotoolkit.axis.ng).vm(_geo.geotoolkit.axis.qd.Pf.Ub).setOrientation(_geo.geotoolkit.axis.xd.ic)]})).vQ(function(a,b){return _geo.geotoolkit.scene.Wi.Oma(a,b)}),this.P3a=(new _geo.geotoolkit.scene.Group).Ad(!0).xe("rangelayoutgroup").va([(new _geo.geotoolkit.scene.Group).Sa(new _geo.geotoolkit.util.Rect(0,0,1,1)).va([this.DKb=new _geo.geotoolkit.scene.shapes.Text({text:"min",ax:0,ay:.5,alignment:_geo.geotoolkit.util.Da.We}),this.uKb=new _geo.geotoolkit.scene.shapes.Text({text:"max",ax:1,
ay:.5,alignment:_geo.geotoolkit.util.Da.Ng})])]),this.F2a=(new _geo.geotoolkit.scene.Group).Ad(!0)])]);this.pM=(new _geo.geotoolkit.controls.shapes.QXa({data:new _geo.geotoolkit.util.Mo,linestyle:_geo.geotoolkit.attributes.Aa.ab(this.Bc.tooltips.linestyle),fillstyle:_geo.geotoolkit.attributes.Fa.ab(this.Bc.tooltips.fillstyle),autosize:!0,sizeisindevicespace:!0})).pe(new _geo.geotoolkit.ea.gLa).Ka(!1).Qf(!0);this.va(this.pM);this.pM.xb();this.P3a.va([this.eP,this.TO]);this.Lpa=[];this.Kpa=[];this.Vj.vb(_geo.geotoolkit.ea.Oa.Se).Ka(!1);
this.Vj.vb(_geo.geotoolkit.ea.Oa.Rc).Ka(!0);this.Vj.vb(_geo.geotoolkit.ea.Oa.pd).Ka(!0);this.Vj.vb(_geo.geotoolkit.ea.Oa.Rc).Ul(0);this.Vj.vb(_geo.geotoolkit.ea.Oa.pd).Ul(0);this.Mmb.fT(null);return this.uY};b.prototype.Sg=function(){null!=this.eP&&this.rr(this.eP.cua());null!=this.TO&&this.rr(this.TO.cua());this.rr(this.Bud=(new _geo.geotoolkit.controls.ia.ew(this.Mn,_geo.geotoolkit.controls.ia.AL.La)).addListener(_geo.geotoolkit.controls.ia.ew.$.pGa,function(a,c){var d=c.Nb(),d=new _geo.geotoolkit.util.Range(d.sa(),
d.za());this.Cwa(d);this.Mn.yg();d=new _geo.geotoolkit.oa.bia(b.$.Q4,d);this.TCa(b.$.Q4,this,d)}.bind(this)));this.Uib=(new _geo.geotoolkit.controls.ia.TN(this.Qb,"cursor")).cna(null).Bwa(this.Bc.cursor.linestyle).addListener(_geo.geotoolkit.controls.ia.fc.$.M4,function(a,b){this.pM.Ka(!1);null!=this.ey&&this.ey.bwa(1).twa(1)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.fc.$.bva,function(a,b){null!=this.ey&&this.ey.bwa(2).twa(5)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.TN.$.dQ,
function(a,c){this.pM.Ka(!1);var d=c.getPosition().getX();(0,window.isNaN)(d)?this.Ara.Ka(!1):this.Ara.Ka(this.Bc.curvesymbol.visible);this.Bc.lastupdatedate.followcursor&&((0,window.isNaN)(d)?this.b1a.jc(""):this.b1a.jc(this.Pjb(d)));this.Qxb(c.getPosition(),c.jm());this.yrd(c.getPosition(),c.jm());this.gTc(c.getPosition(),c.jm());this.Ja(b.$.iJc,this,a.getPosition())}.bind(this)).addListener(_geo.geotoolkit.controls.ia.fc.$.Uu,function(){this.Uib.isEnabled()||(this.pM.Ka(!1),this.Ara.Ka(!1),this.b1a.jc(this.Pjb(this.cd.xa().za())))}.bind(this));
this.z2a=(new _geo.geotoolkit.controls.ia.yq(this.Qb)).yb("rubberband").cc(!1).setMode(_geo.geotoolkit.controls.ia.tF.ic).F_(!0).addListener(_geo.geotoolkit.controls.ia.yq.$.au,function(a,c){var d=c.getArea(),d=new _geo.geotoolkit.util.Range(d.sa(),d.za());this.Cwa(d);d=new _geo.geotoolkit.oa.bia(b.$.Q4,d);this.TCa(b.$.Q4,this,d)}.bind(this));this.rr((new _geo.geotoolkit.controls.ia.Xl(this.Qb,"manipulatorTools")).add([this.Uib,this.z2a]));this.rr(this.ey=(new _geo.geotoolkit.controls.ia.Selection).yb("picking").addListener(_geo.geotoolkit.controls.ia.Selection.$.O4,
function(a,d){function e(a){return a instanceof _geo.geotoolkit.scene.shapes.Text||a instanceof _geo.geotoolkit.axis.ng}for(var f=d.getSelection(),g=this.BV(),h=0,k={line:null,fill:null,legend:null,axis:null},l,h=f.length-1;0<=h;--h)if(f[h]instanceof _geo.geotoolkit.oa.Kc.uH)null==k.line&&0<=g.indexOf(f[h].od())&&(k.line=f[h].od());else if(f[h]instanceof _geo.geotoolkit.oa.Kc.epa){var n=null;null!=f[h].GO&&f[h].GO instanceof _geo.geotoolkit.oa.Kc.uH?n=f[h].GO:null!=f[h].uia&&f[h].uia instanceof _geo.geotoolkit.oa.Kc.uH&&
(n=f[h].uia);null==k.fill&&null!=n&&0<=g.indexOf(n.od())&&(k.fill=n.od())}else f[h]instanceof _geo.geotoolkit.oa.Kc.lhb?null==k.legend&&0<=g.indexOf(f[h].Ed().Uh().id)&&(k.legend=f[h].Ed().Uh().id,l="legend"):f[h]instanceof _geo.geotoolkit.oa.Kc.saa?(k.annotation=f[h].jb().id,this.Ja(b.$.eJc,this,f[h].jb().id)):f[h]instanceof _geo.geotoolkit.oa.Kc.PVa?this.Ja(b.$.fJc,this,f[h].jb().id):null==k.axis&&f[h]instanceof _geo.geotoolkit.scene.Group&&f[h].od()===c?(n=_geo.geotoolkit.selection.from(f[h]).He(e).tm(),
null!=n&&0<=g.indexOf(n.od())&&(k.axis=n.od())):f[h]instanceof _geo.geotoolkit.axis.ng&&"curvelimitsaxis"===f[h].name&&null==k.axis&&0<=g.indexOf(f[h].od())&&(k.axis=f[h].od());g=k.legend||k.line||k.fill||k.axis||k.annotation;if(null==g&&(f=f.filter(function(a){return a instanceof _geo.geotoolkit.controls.ia.scroll.hg||a instanceof _geo.geotoolkit.oa.rxa}),0<f.length))return;this.lkd({id:g,type:l});null!=k.line&&this.gTc(a.Qe(this.Qb,d),d.jm())}.bind(this)));return this};b.prototype.gTc=function(a,
b){if(null!=a&&null!=b&&!1!==this.Bc.tooltips.visible){var c,d,e=a.getX(),f=null!=this.Y7&&null!=this.Oqb(this.Y7),g=new _geo.geotoolkit.util.na(this.cd.om().getX()+this.cd.om().aa()/2,this.cd.om().getY()+this.cd.om().ba()/2),h=this.Bc.tooltips.tooltipoptions.index;!0===h.visible&&(this.C0a.Ka(h.visible),c=a.getX(),this.C0a.Ed().setData({color:h.color,symbol:h.symbol,name:h.name,indextext:h.indextext,valuetext:c,unittext:h.unittext,singlerow:this.Bc.tooltips.tooltipoptions.singlerow}),this.C0a.uh());
var k=this.Bc.cursorselectionlimit,l=this.Bc.tooltips.selectionradius;this.fK.bn().forEach(function(a){var g=a.od(),h=a.Uh().curve,p=a.Uh().symbol,v=a.Uh().kzb;if(!0===h.ib()&&null!=h.getData()){var w=h.rRa();d=w.samples;c=n.wqb(e,d,!0);if(null!==c&&(p.ua(null),null!=d[c]&&(null==this.Y7||f||this.Y7===g))){var w=h.Ya(),z=new _geo.geotoolkit.util.na(d[c].getPosition(),d[c].getValue()),z=w.cb(z),w=b.getX()-z.getX(),z=b.getY()-z.getY(),z=Math.sqrt(w*w+z*z);Math.abs(w)<k&&z<l||(0,window.isNaN)(z)?(w=
"",null!=a.Ls()&&null!=a.Ls().unit&&(w=a.Ls().unit instanceof _geo.geotoolkit.util.ar?a.Ls().unit.be():a.Ls().unit),v.Ed().setData({id:g,color:h.Xa().ac(),symbol:p,name:h.getName(),indextext:"",valuetext:d[c].YM(),unittext:" ("+w+")"}),v.uh(),this.Bc.curvesymbol.visible&&p.ua(_geo.geotoolkit.attributes.Aa.ab(this.Bc.tooltips.symbollinestyle)),this.pM.Ka(!0)):v.Ka(!1)}}}.bind(this));var h=this.pM.ga().clone(),z=16,C=4;b=new _geo.geotoolkit.util.na(Math.round(b.getX()),Math.round(b.getY()));b.getX()<
g.getX()?h.setX(b.getX()-this.cd.ga().getX()+z):h.setX(b.getX()-this.pM.ga().aa()-C);b.getY()<g.getY()?h.setY(b.getY()-this.cd.ga().getY()+z):h.setY(b.getY()-this.pM.ga().ba()-C);this.pM.Ea(h);this.pM.xb()}};b.prototype.Qxb=function(a,b){if(null==a||null==b)return this;var c=a.getX(),d,e,f;this.fK.bn().forEach(function(a){var g=a.Uh();a=g.curve;var h=g.Yla;if(a instanceof _geo.geotoolkit.oa.Kc.uH&&a.ib()&&null!=a.getData()){var g=g.symbol,k=a.rRa(),k=k.samples;if((0,window.isNaN)(c)||null==k||1>k.length)this.Bc.curvesymbol.visible&&
g.Ka(!1);else{d=n.wqb(c,k,!0);f=k[d].getValue();var l=this.Bc.cursorselectionlimit,p=a.Ya(),D=new _geo.geotoolkit.util.na(k[d].getPosition(),k[d].getValue()),p=p.cb(D),p=b.getX()-p.getX();e=h.Cr()?(f-h.xa().qa())/h.xa().ba()*this.Ara.xa().ba():(h.xa().wa()-f)/h.xa().ba()*this.Ara.xa().ba();Math.abs(p)<l&&this.Bc.curvesymbol.visible&&null!=k[d]&&!(0,window.isNaN)(k[d].getPosition())&&null!=e&&!(0,window.isNaN)(e)?(g.Ka(!0),a=a.mb().transform(new _geo.geotoolkit.util.na(k[d].getPosition(),f)),g.pq(a.getX()),
g.Wq(a.getY())):g.Ka(!1)}}}.bind(this));return this};b.prototype.yrd=function(a,b){if(null!=a&&null!=b){var c=a.getX(),d,e,f;this.fK.bn().forEach(function(a){var g=a.Uh(),g=g.curve;if(g instanceof _geo.geotoolkit.oa.Kc.uH&&g.ib()&&null!=g.getData())if(g=g.rRa(),f=g.samples,(0,window.isNaN)(c)||null==f||1>f.length)this.Bc.legends.visible&&a.e4b(null);else{d=n.wqb(c,f,!0);e=f[d].YM();var g=this.Bc.cursorselectionlimit,h=this.Mn.Ya(),k=new _geo.geotoolkit.util.na(f[d].getPosition(),f[d].getValue()),
h=h.cb(k),h=b.getX()-h.getX();Math.abs(h)<g&&this.Bc.legends.visible?a.e4b(e):a.e4b(null)}}.bind(this));this.QJ&&this.QJ.xb()}};b.prototype.oMc=function(a){if((null==a||-1!==this.BV().indexOf(a))&&this.Y7!==a){var b=this.Y7;this.Y7=a;this.Emb=null;this.VIc(a,b)}};b.prototype.lkd=function(a){a=_geo.geotoolkit.Sb(a,{});var c=new _geo.geotoolkit.oa.Agb(b.$.Hda,a.id,a.type);this.Ja(b.$.Hda,this,c);if(!c.R8a()){var c=this.Y7,d=this.Emb;this.Y7=a.id;this.Emb=a.type;this.VIc(a,{id:c,type:d})}};b.prototype.VIc=
function(a,c){a=_geo.geotoolkit.Sb(a,{});var d=new _geo.geotoolkit.oa.Agb(b.$.EI,a.id,a.type);this.Ja(b.$.EI,this,d);d.R8a()||"function"==typeof this.pMb&&this.pMb(this,a,c)};b.prototype.xhd=function(a){if(!(a===b.Gha.bBb&&this.UR instanceof _geo.geotoolkit.controls.ia.scroll.yxa||a===b.Gha.Hcb&&this.UR instanceof _geo.geotoolkit.controls.ia.scroll.uIa||a===b.Gha.LKa&&this.UR instanceof _geo.geotoolkit.controls.ia.scroll.l6)){var c=_geo.geotoolkit.controls.ia.scroll.uIa.getClassName();switch(a){case b.Gha.bBb:c=
_geo.geotoolkit.controls.ia.scroll.yxa.getClassName();break;case b.Gha.Hcb:c=_geo.geotoolkit.controls.ia.scroll.uIa.getClassName();break;case b.Gha.LKa:c=_geo.geotoolkit.controls.ia.scroll.l6.getClassName();break}null!=this.UR&&(this.gz(this.UR.ld()),this.UR=null,this.F2a.jh());this.UR=_geo.geotoolkit.controls.ia.scroll.sJ.Za().es(c,{name:"scroll",modellimits:this.cd.xa(),visiblelimits:this.cd.xa()});this.F2a.va(this.UR);this.UR.ld().addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.Yn,function(a,
c){var d=c.Nb(),d=new _geo.geotoolkit.util.Range(d.sa(),d.za()),d=new _geo.geotoolkit.oa.bia(b.$.JSa,d);this.TCa(b.$.JSa,this,d)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.tt,function(a,c){var d=c.Nb(),d=new _geo.geotoolkit.util.Range(d.sa(),d.za()),d=new _geo.geotoolkit.oa.bia(b.$.Q4,d);this.TCa(b.$.Q4,this,d)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.O9a,function(a,c){var d=c.Nb(),d=new _geo.geotoolkit.util.Range(d.sa(),d.za()),d=new _geo.geotoolkit.oa.bia(b.$.Q4,
d);this.TCa(b.$.Q4,this,d)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.N9a,function(a,c){var d=c.Nb(),d=new _geo.geotoolkit.util.Range(d.sa(),d.za()),d=new _geo.geotoolkit.oa.bia(b.$.JSa,d);this.TCa(b.$.JSa,this,d)}.bind(this));this.rr(this.UR.ld());this.wm()}};b.prototype.TCa=function(a,c,d){a!==b.$.Q4&&this.Ja(a,c,d);d.R8a()||(this.Cwa(d.Lla()),a===b.$.Q4&&this.Ja(a,c,d))};b.prototype.qhd=function(){this.lnd();this.QJ=(new _geo.geotoolkit.controls.shapes.QXa({data:this.R3a,
linestyle:_geo.geotoolkit.attributes.Aa.ab(this.Bc.legends.linestyle),fillstyle:_geo.geotoolkit.attributes.Fa.ab(this.Bc.legends.fillstyle)})).xe("legendlayoutgroup").pe((new _geo.geotoolkit.ea.rJa).setDirection(this.Bc.legends.direction));this.QJ.Ka(this.Bc.legends.visible);this.Bc.legends.position===b.KJa.dr?this.uY.oh(1,this.QJ):(this.Xo.va(this.QJ),this.QJ.Ea(new _geo.geotoolkit.util.Rect(0,0,this.Bc.legends.width,this.Bc.legends.height)),this.QJ.getParent().va(this.Wkb=(new _geo.geotoolkit.scene.Group).Ad(!0).yb("legendManipulator")),
this.OIb=new _geo.geotoolkit.oa.Kc.BCb({manipulatorlayer:this.Wkb,group:this.QJ}),this.rr(this.OIb))};b.prototype.lnd=function(){if(null!=this.QJ){this.gz(this.OIb);this.OIb=null;var a=this.QJ.getParent();null!=a&&(null!=this.Wkb&&(a.removeChild(this.Wkb),this.Wkb=null),null!=this.QJ&&(a.removeChild(this.QJ),this.QJ=null))}};b.prototype.ka=function(){return this.jb()};b.prototype.jb=function(){return this.Bc};b.prototype.ja=function(a){return this.setOptions(a)};b.prototype.setOptions=function(a){var c=
!1,d=!1,e;if(null!=a){a=_geo.geotoolkit.Sb(a,{});if(null!=a.model)a.model!==this.nda&&(null!==this.nda&&this.cd.removeChild(this.nda),this.nda=a.model,c=!0);else if(null===this.nda){var c=new Date,f=new Date;c.setMonth(c.getMonth()-1);this.nda=(new _geo.geotoolkit.scene.Group).Sa(new _geo.geotoolkit.util.Rect(c.getTime(),0,f.getTime(),1));c=!0}"boolean"===typeof a.automodellimitsmode&&(this.Bc.automodellimitsmode=a.automodellimitsmode);a.margin instanceof Array&&4===a.margin.length&&(this.Bc.margin=
a.margin);"boolean"===typeof a.viewcache&&(this.Bc.viewcache=a.viewcache);a.alignaxis!==this.Bc.alignaxis&&(d=!0,this.Bc.alignaxis=a.alignaxis);this.Bc=_geo.geotoolkit.Sb(a,this.Bc)}else a={};var g=f=0;this.Ad(this.Bc.automodellimitsmode);c&&(this.cd.Sa(this.nda.xa()),this.cd.oh(this.cd.nq(this.Qb),this.nda));this.uY.pb({top:this.Bc.margin[0],right:this.Bc.margin[1],bottom:this.Bc.margin[2],left:this.Bc.margin[3]});this.Bc.title.visible||this.Bc.lastupdatedate.visible?(this.cK.Ka(!0),this.cK.pb({left:this.Bc.title.padding[3],
top:this.Bc.title.padding[0],right:this.Bc.title.padding[1],height:this.Bc.title.height}),f+=this.Bc.title.height):this.cK.Ka(!1);this.lg.Ka(this.Bc.title.visible).jc(this.Bc.title.text).wb(new _geo.geotoolkit.attributes.eb({font:this.Bc.title.font,color:this.Bc.title.color}));this.Bc.title.centered?(this.lg.pq(.5),this.lg.Cd(_geo.geotoolkit.util.Da.lb)):(this.lg.pq(0),this.lg.Cd(_geo.geotoolkit.util.Da.We));this.b1a.Ka(this.Bc.lastupdatedate.visible).wb(new _geo.geotoolkit.attributes.eb({font:this.Bc.lastupdatedate.font,
color:this.Bc.lastupdatedate.color}));this.qhd();this.QJ.pb({left:0,right:0});this.Bc.legends.visible&&this.Bc.legends.position===b.KJa.dr&&(this.QJ.pb({left:0,top:f,height:this.Bc.legends.height}),f+=this.Bc.legends.height+this.Bc.legends.marginbottom);this.pM.ua(_geo.geotoolkit.attributes.Aa.ab(this.Bc.tooltips.linestyle)).ta(_geo.geotoolkit.attributes.Fa.ab(this.Bc.tooltips.fillstyle));void 0!==this.Bc.modelgrid.horizontaltickgenerator&&null==this.kca?this.T1.Vg("Horizontal",this.Bc.modelgrid.horizontaltickgenerator):
null!=this.kca&&this.Bc.modelgrid.horizontaltickgenerator.constructor==={}.constructor&&this.T1.Vg("Horizontal",this.Bc.modelgrid.horizontaltickgenerator);void 0!==this.Bc.modelgrid.verticaltickgenerator&&((this.Bc.modelgrid.verticaltickgenerator instanceof _geo.geotoolkit.axis.ZG||this.Bc.modelgrid.verticaltickgenerator instanceof _geo.geotoolkit.axis.C0)&&this.Bc.modelgrid.verticaltickgenerator.QW(this.Bc.timezone),this.T1.Vg("Vertical",this.Bc.modelgrid.verticaltickgenerator));this.klb.Ka(this.Bc.modelaxis.visible);
null==this.Bc.modelaxis.tickgenerator&&(e=new _geo.geotoolkit.axis.ZG,e.bL(this.$w),e.xo("EDGE",!1),e.xo("MAJOR",!1),e.xo("MINOR",!1),e.um("EDGE",null),e.um("MAJOR",null),e.um("MINOR",null),e.Dh("EDGE",null),e.Dh("MAJOR",new _geo.geotoolkit.attributes.Aa(h)),this.Bc.modelaxis.tickgenerator=e);(this.Bc.modelaxis.tickgenerator instanceof _geo.geotoolkit.axis.ZG||this.Bc.modelaxis.tickgenerator instanceof _geo.geotoolkit.axis.C0)&&this.Bc.modelaxis.tickgenerator.QW(this.Bc.timezone);this.klb.Vg(this.Bc.modelaxis.tickgenerator);
this.klb.fT(this.Bc.modelaxis.baselinestyle);this.F2a.Ka(this.Bc.scrollbar.visible);this.xhd(this.Bc.scrollbar.type);this.Bc.scrollbar.visible&&(this.F2a.pb({left:0,bottom:0,right:0,height:this.Bc.scrollbar.height}),g+=this.Bc.scrollbar.height);null==this.Bc.scrollbar.tickgenerator?(e=new _geo.geotoolkit.axis.ZG,e.bL(this.$w),this.Bc.scrollbar.tickgenerator=e):e=this.Bc.scrollbar.tickgenerator;e instanceof _geo.geotoolkit.axis.ZG&&(e.sHa("EDGE",this.Bc.scrollbar.options.formatter),e.sHa("MAJOR",this.Bc.scrollbar.options.formatter));
e.Al("MAJOR").Gr(this.Bc.scrollbar.options.font);e.Al("EDGE").Gr(this.Bc.scrollbar.options.font);e.Al("MAJOR").setColor(this.Bc.scrollbar.options.color);e.Al("EDGE").setColor(this.Bc.scrollbar.options.color);e.Kj("MAJOR").setColor(this.Bc.scrollbar.options.color);e.Kj("EDGE").setColor(this.Bc.scrollbar.options.color);e.xo("MINOR",!1);null!=this.UR.Vg&&((this.Bc.scrollbar.tickgenerator instanceof _geo.geotoolkit.axis.ZG||this.Bc.scrollbar.tickgenerator instanceof _geo.geotoolkit.axis.C0)&&this.Bc.scrollbar.tickgenerator.QW(this.Bc.timezone),
this.UR.Vg(this.Bc.scrollbar.tickgenerator));this.UR&&this.UR.setOptions&&this.Bc.scrollbar.options&&this.UR.setOptions(this.Bc.scrollbar.options);this.c1a=this.O3a=null;this.P3a.Ka(this.Bc.visiblerange.visible);this.Bc.visiblerange.visible?(this.P3a.pb({left:0,bottom:g,right:0,height:this.Bc.visiblerange.height}),g+=this.Bc.visiblerange.height,null!=this.eP&&this.eP.cua().cc(!0),null!=this.TO&&this.TO.cua().cc(!0)):(this.P3a.pb({left:0,bottom:g,right:0,height:0}),null!=this.eP&&this.eP.cua().cc(!1),
null!=this.TO&&this.TO.cua().cc(!1));this.DKb.wb(new _geo.geotoolkit.attributes.eb({font:this.Bc.visiblerange.font,color:this.Bc.visiblerange.color}));this.uKb.wb(new _geo.geotoolkit.attributes.eb({font:this.Bc.visiblerange.font,color:this.Bc.visiblerange.color}));e=this.fK.bn();e.forEach(function(b){null!=a.curvelimits&&b.UTa(a.curvelimits);null!=a.curvesymbol&&b.GUa(a.curvesymbol);null!=a.curveaxis&&b.zN(a.curveaxis);null!=a.tooltips&&null!=a.tooltips.tooltipoptions&&b.zyb(a.tooltips.tooltipoptions);
null!=a.curvelimits&&null!=a.curvelimits.visible&&b.UTa({visible:a.curvelimits.visible});null!=a.legends&&null!=a.legends.legendoptions&&(!0===this.Bc.legends.autocolorlabel?a.legends.legendoptions.labelcolor=null:null==this.Bc.legends.legendoptions.labelcolor&&(a.legends.legendoptions.labelcolor=h),b.Mab(a.legends.legendoptions))}.bind(this));this.Ara.Ka(this.Bc.curvesymbol.visible);this.lR.pb({width:this.FTb()});d&&this.vod(this.Bc.alignaxis);this.Zra();this.Vj.pb({left:0,top:f,right:0,bottom:g});
this.Bc.southaxis.visible?(this.Vj.vb(_geo.geotoolkit.ea.Oa.Yc).Ka(!0),this.Vj.vb(_geo.geotoolkit.ea.Oa.Yc).zk(this.Bc.southaxis.height)):this.Vj.vb(_geo.geotoolkit.ea.Oa.Yc).Ka(!1);this.lR.pb({left:this.Bc.curvelimits.margin,top:this.Bc.curvelimits.margin,bottom:this.Bc.curvelimits.margin});null!=this.Bc.southaxis.tickgenerator&&(e=this.Bc.southaxis.tickgenerator,e.um("MAJOR",new _geo.geotoolkit.attributes.eb({font:this.Bc.southaxis.font,color:this.Bc.southaxis.color,alignment:"center"})));(this.Bc.southaxis.tickgenerator instanceof
_geo.geotoolkit.axis.ZG||this.Bc.southaxis.tickgenerator instanceof _geo.geotoolkit.axis.C0)&&this.Bc.southaxis.tickgenerator.QW(this.Bc.timezone);this.Mmb.Vg(this.Bc.southaxis.tickgenerator);this.Mmb.Ka(this.Bc.southaxis.visible);!0===this.Bc.viewcache?null==this.Mn.EM()&&this.Mn.Tl(new _geo.geotoolkit.scene.Rk):null!=this.Mn.EM()&&this.Mn.Tl(null);c&&this.Cwa(new _geo.geotoolkit.util.Range(this.nda.xa().sa(),this.nda.xa().za()));this.Bc.intervalbuttons=_geo.geotoolkit.Ca(a.intervalbuttons,this.Bc.intervalbuttons);
this.Bc.intervalbuttons.visible?this.eP.Ka(!0):this.eP.Ka(!1);this.Bc.scrolltonowbutton.visible?this.TO.Ka(!0):this.TO.Ka(!1);void 0!==a.selectionstrategy&&(this.pMb=a.selectionstrategy);this.ESc();this.Mn.yg();this.uY.xb();this.Vj.xb();this.Swa();return this};b.prototype.vod=function(a){a?(this.Iwb(this.Vj.vb(_geo.geotoolkit.ea.Oa.Rc),new _geo.geotoolkit.oa.Kc.Ggb),this.Iwb(this.Vj.vb(_geo.geotoolkit.ea.Oa.pd),new _geo.geotoolkit.oa.Kc.Ggb),this.mNc(new _geo.geotoolkit.oa.Kc.Ggb)):(this.Iwb(this.Vj.vb(_geo.geotoolkit.ea.Oa.Rc),
new _geo.geotoolkit.ea.No),this.Iwb(this.Vj.vb(_geo.geotoolkit.ea.Oa.pd),new _geo.geotoolkit.ea.No),this.mNc(new _geo.geotoolkit.ea.No))};b.prototype.Iwb=function(a,b){for(var c,d=0;d<a.Uc();++d)c=a.vc(d),b.add(c);a.pe(b);return this};b.prototype.mNc=function(a){for(var b,c=0;c<this.lR.Uc();++c)b=this.lR.vc(c),a.add(b);this.lR.pe(a);return this};b.prototype.BV=function(){var a=[];this.fK.bn().forEach(function(b){a.push(b.od())});return a};b.prototype.HA=function(a){if(null==a)return null;var b=this.fK.bn(),
b=b.filter(function(b){return b.Uh().curve.od()===a});return null==b||0===b.length?null:b[0]};b.prototype.x6a=function(a){if(null==a)return null;a=this.HA(a);return null!=a?a.getData():null};b.prototype.FTb=function(){var a=0;this.fK.bn().forEach(function(b){a+=b.ETb().width});return a};b.prototype.LOa=function(a,b,c,d){return this.nYb(a,b,c,d,null)};b.prototype.nYb=function(a,b,c,d,e,f){a=_geo.geotoolkit.Ca(a,{name:"string"===typeof a?a:"",id:null!=f?f:"",uri:null!=b?b:"",data:null!=c?c:null,properties:null!=
d?d:{},position:"number"===typeof e?e:null},!0);f=this.Suc(a,!1);this.Zra();this.uY.xb();this.Vj.xb();this.Mn.yg();this.Swa();return f};b.prototype.Drc=function(a){return this.oYb(a)};b.prototype.oYb=function(a){if(!Array.isArray(a))return-1;var b=[];this.Vj.Pm();this.lR.Pm();this.uY.Pm();for(var c=0;c<a.length;c++){var d=_geo.geotoolkit.Ca(a[c],{name:"",id:"",uri:"",data:null,properties:{},position:null},!0),d=this.Suc(d,!0);b.push(d)}this.Vj.Om();this.lR.Om();this.Zra();this.uY.Om();this.uY.xb();
this.Vj.xb();this.Mn.yg();this.Swa();return 0<b.length?b:-1};b.prototype.Suc=function(a,b){var c=_geo.geotoolkit.Ca(this.Bc.curve,{},!0);a.properties=_geo.geotoolkit.Ca(a.properties,c,!0);if(null!=a.data&&!(a.data instanceof _geo.geotoolkit.data.lu))throw Error('Data must be of type "geotoolkit.data.DataTableView" only.');if(""===a.id||void 0===a.id)a.id=a.uri;var c=a.id,d=null;a.properties.id=c;d=this.BV();if(0>d.indexOf(c)){var e=a.data,d=_geo.geotoolkit.Ca(this.Bc.curveaxis,{},!0);void 0!==a.properties.axisposition&&
(d.position=a.properties.axisposition);void 0!==a.properties.axisautolabelrotation&&(d.autolabelrotation=a.properties.axisautolabelrotation);void 0!==a.properties.title&&(d.title=a.properties.title);void 0!==a.properties.axisvisible&&(d.visible=a.properties.axisvisible);void 0!==a.properties.tickgeneratoroptions&&(d.tickgeneratoroptions=_geo.geotoolkit.Ca(d.tickgeneratoroptions,a.properties.tickgeneratoroptions));void 0!==a.properties.microposition&&(d.microposition=a.properties.microposition);d=
new _geo.geotoolkit.oa.Kc.wF({id:a.id,uri:a.uri,name:a.name,curve:{data:e,properties:a.properties},curvesymbol:this.Bc.curvesymbol,curvelimits:this.Bc.curvelimits,curveaxis:d,legenditem:this.Bc.legends.legendoptions,tooltipitem:this.Bc.tooltips.tooltipoptions});b&&d.Vl(!0);d.kb(_geo.geotoolkit.oa.Kc.xF.$.Vna,this.Tqb());d.kb(_geo.geotoolkit.oa.Kc.xF.$.AIa,this.Vqb());d.kb(_geo.geotoolkit.oa.Kc.wF.$.dfb,this.NBc());d.kb(_geo.geotoolkit.oa.Kc.wF.$.Odb,this.czc());d.kb(_geo.geotoolkit.oa.Kc.wF.$.Kxa,
this.ezc());d.setData(e);d.Uh().Yla.Sa(this.cd.xa());this.Mn.va([d.Uh().Yla,d.Uh().curve]);this.Ara.va(d.Uh().symbol);d.$fa(a.properties);"number"===typeof a.position?(this.fK.gs(a.position,d),this.pM.getData().gs(a.position,d.Uh().kzb)):(this.fK.add(d),this.pM.getData().add(d.Uh().kzb));this.lR.pb({width:this.FTb()}).va(d.Uh().xPa);this.Vj.connect(d.Uh().xPa.vc(0),d.Uh().Yla,_geo.geotoolkit.util.Mb.$b,!1);this.lR.Le().add(d.Uh().xPa);this.uY.xb();var e=d.Uh().axis,f=d.Uh().hsa,g=d.Uh().VOa;void 0===
a.properties.axisposition&&(a.properties.axisposition=this.Bc.curveaxis.position);var h,k;"left"===a.properties.axisposition?(h=this.Lpa,k=_geo.geotoolkit.ea.Oa.Rc):"right"===a.properties.axisposition&&(h=this.Kpa,k=_geo.geotoolkit.ea.Oa.pd);h&&h.push(a.properties.id);"left"===a.properties.axisposition?(this.Vj.wI(0,f,k),this.Vj.wI(0,g,k)):(this.Vj.Yr(f,k),this.Vj.Yr(g,k));this.Vj.connect(e,d.Uh().Yla,_geo.geotoolkit.util.Mb.$b,!1);h=d.Uh().Nid;"number"===typeof a.position?this.R3a.gs(a.position,
h):this.R3a.add(h);h=this.BV();null!=h&&1===h.length&&this.fUa(h[0]);b&&d.Vl(!1)}return c};b.prototype.JRa=function(a,b,c){null==this.eJb&&(this.eJb=function(){var a;a=this.kca;var b=this.T1.getParent();if(null!=this.kca&&(a=this.HA(a),null!=a&&null!=a.Uh()&&(a=a.Uh().Yla,null!=a))){var c=b.xa();b.Sa(new _geo.geotoolkit.util.Rect(c.sa(),a.xa().qa(),c.za(),a.xa().wa()))}}.bind(this));return this.eJb};b.prototype.Tqb=function(a,b,c){null==this.JGb&&(this.JGb=function(a,b,c){if(null!=b&&null!=c){b=b.Uh();
a=b.hsa;b=b.VOa;var d,e,f;"left"===c.oldposition?(d=this.Lpa,e=_geo.geotoolkit.ea.Oa.Rc):"right"===c.oldposition&&(d=this.Kpa,e=_geo.geotoolkit.ea.Oa.pd);d&&d.splice(d.indexOf(c.id),1);"left"===c.axisposition?(d=this.Lpa,f=_geo.geotoolkit.ea.Oa.Rc):"right"===c.axisposition&&(d=this.Kpa,f=_geo.geotoolkit.ea.Oa.pd);d&&d.push(c.id);this.Vj.removeItem(a,e);this.Vj.removeItem(b,e);f===_geo.geotoolkit.ea.Oa.Rc?(this.Vj.wI(0,a,f),this.Vj.wI(0,b,f)):f===_geo.geotoolkit.ea.Oa.pd&&(this.Vj.Yr(a,f),this.Vj.Yr(b,
f));this.Zra();this.uY.xb();this.Vj.xb();this.Mn.yg()}}.bind(this));return this.JGb};b.prototype.Vqb=function(a,b,c){null==this.LGb&&(this.LGb=function(a,b,c){this.Zra();this.uY.xb();this.Vj.xb();this.lR.xb();this.Mn.yg();this.Swa()}.bind(this));return this.LGb};b.prototype.NBc=function(a,b,c){null==this.UJb&&(this.UJb=function(){this.QJ.xb()}.bind(this));return this.UJb};b.prototype.czc=function(a,b,c){null==this.zHb&&(this.zHb=function(){this.lR.xb();this.Vj.f0()}.bind(this));return this.zHb};b.prototype.ezc=
function(a,b,c){null==this.AHb&&(this.AHb=function(){this.Mn.ma();this.ma()}.bind(this));return this.AHb};b.prototype.fUa=function(a){if(null==this.T1||this.kca===a)return this;var b;b=this.T1.getParent();b.Sa(new _geo.geotoolkit.util.Rect(0,0,1,1));null!=this.kca&&(b=this.HA(this.kca),null!=b&&null!=b.Uh()&&(b.getData().hb(_geo.geotoolkit.data.$.vf,this.JRa()),b.Uh().curve.hb(_geo.geotoolkit.oa.Kc.uH.$.LJa,this.JRa())),this.kca=null);this.kca=a;null!=a?(b=this.HA(a),null!=b&&null!=b.Uh()&&(this.JRa().call(this),
b.getData().kb(_geo.geotoolkit.data.$.vf,this.JRa()),b.Uh().curve.kb(_geo.geotoolkit.oa.Kc.uH.$.LJa,this.JRa()),null!=this.T1&&null!=b.Uh().axis&&(a=b.Uh().axis.Fe().clone(),a.Dh("MAJOR",new _geo.geotoolkit.attributes.Aa(l.MAJOR)).Dh("MINOR",new _geo.geotoolkit.attributes.Aa(l.MINOR)).Dh("EDGE",new _geo.geotoolkit.attributes.Aa(l.EDGE)),a.Tg("MAJOR",this.Bc.modelgrid.horizontalvisibility.MAJOR).Tg("MINOR",this.Bc.modelgrid.horizontalvisibility.MINOR).Tg("EDGE",this.Bc.modelgrid.horizontalvisibility.EDGE),
this.T1.Vg(_geo.geotoolkit.util.Mb.ic,a)))):this.T1.Vg(_geo.geotoolkit.util.Mb.ic,this.Bc.modelgrid.horizontaltickgenerator);this.T1.Fe(_geo.geotoolkit.util.Mb.$b).Tg("MAJOR",this.Bc.modelgrid.verticalvisibility.MAJOR).Tg("MINOR",this.Bc.modelgrid.verticalvisibility.MINOR).Tg("EDGE",this.Bc.modelgrid.verticalvisibility.EDGE);this.wm();return this};b.prototype.Jrc=function(a,c,d,e,f){d=_geo.geotoolkit.Ca(a,{id1:"string"===typeof a?a:null,id2:c,fillstyle:null!=d?d:null,filltype:null!=e?e:null,filldirection:null!=
f?f:b.H0.Zf});if(null!=d.id1&&null!=d.fillstyle&&null!=d.filltype&&null!=d.filldirection){var g=null,h=null;d.fillstyle=_geo.geotoolkit.attributes.Fa.ab(d.fillstyle);switch(d.filldirection){case b.H0.Ub:h=d.fillstyle;break;case b.H0.Zf:g=d.fillstyle;break;default:return}this.nTa(d.id1,d.filldirection);switch(e){case b.Xg.z$b:a=this.D7c(a,c,null,g,h);break;case b.Xg.A$b:a=this.Crc(a,c,null,g,h,d.filldirection);break;case b.Xg.y$b:a=this.Crc(a,Number.MAX_VALUE,null,g,h,b.H0.Ub,d.filldirection);break;
default:return}c=this.HA(d.id1);c.QKc(f,d,a);this.Mn.yg()}};b.prototype.nTa=function(a,c){var d=_geo.geotoolkit.Ca(a,{curveId:"string"===typeof a?a:null,filldirection:c});if(null!=d.curveId)if(null==d.filldirection)this.nTa(d.curveId,b.H0.Ub),this.nTa(d.curveId,b.H0.Zf);else{var e=this.HA(d.curveId);if(null!=e){var f=e.Uh();null!=f&&null!=f.tqb&&null!=f.tqb[c]&&(f.tqb[c].dispose(),this.Mn.removeChild(f.tqb[c]),e.QKc(d.filldirection,null,null))}}};b.prototype.DTb=function(a){a=_geo.geotoolkit.Ca(a,
{curveId:"string"===typeof a?a:null});a=this.HA(a.curveId);return null!=a?a.Uh().CM:null};b.prototype.fzc=function(a,b){var c=_geo.geotoolkit.Ca(a,{curveId:"string"===typeof a?a:null,filldirection:b});if(null==c.curveId)return null;var d=this.HA(c.curveId);return null!=d&&null!=d.Uh().CM[c.filldirection]?d.Uh().CM[c.filldirection].fillstyle:null};b.prototype.D7c=function(a,b,c,d,e){b=_geo.geotoolkit.Ca(a,{id1:"string"===typeof a?a:null,id2:"string"===typeof b?b:null,fillstyle:null!=c?c:null,positivefillstyle:null!=
d?d:null,negativefillstyle:null!=e?e:null},!0);if(null==b.id1||null==b.id2)return null;a=this.HA(b.id1).Uh();c=this.HA(b.id2).Uh();if(null==a||null==c)return null;b=new _geo.geotoolkit.oa.Kc.epa(a.curve,c.curve,b.fillstyle,b.positivefillstyle,b.negativefillstyle);a=this.Mn.nq(a.curve);this.Mn.oh(a,b);return b};b.prototype.Crc=function(a,b,c,d,e,f,g){b=_geo.geotoolkit.Ca(a,{id1:"string"===typeof a?a:null,value:"number"===typeof b?b:null,fillstyle:null!=c?c:null,filltype:null!=g?g:null,filldirection:null!=
f?f:null,positivefillstyle:null!=d?d:null,negativefillstyle:null!=e?e:null},!0);if(null==b.id1||null==b.value)return null;a=this.HA(b.id1).Uh();if(null==a)return null;c=new _geo.geotoolkit.oa.Kc.rKa(b.value,a.curve,b.filltype);b=new _geo.geotoolkit.oa.Kc.epa(a.curve,c,b.fillstyle,b.positivefillstyle,b.negativefillstyle);a=this.Mn.nq(a.curve);this.Mn.oh(a,b);return b};b.prototype.ind=function(a){var b=null,c,d=this.HA(a);if(null==d)return this;for(c=0;c<this.Lpa.length&&null==b;++c)if(this.Lpa[c]===
a||this.Lpa[c]instanceof Array&&0<=this.Lpa[c].indexOf(a))b=_geo.geotoolkit.ea.Oa.Rc,this.Lpa.splice(c,1);for(c=0;c<this.Kpa.length&&null==b;++c)if(this.Kpa[c]===a||this.Kpa[c]instanceof Array&&0<=this.Kpa[c].indexOf(a))b=_geo.geotoolkit.ea.Oa.pd,this.Kpa.splice(c,1);if(!b)return this;null!=d.Uh&&(a=d.Uh(),null!=a.hsa&&this.Vj.removeItem(a.hsa,b),null!=a.VOa&&this.Vj.removeItem(a.VOa,b));this.Zra();return this};b.prototype.Zra=function(){for(var a=this.Bc.alignaxis,c=[_geo.geotoolkit.ea.Oa.Rc,_geo.geotoolkit.ea.Oa.pd],
d,e,f,g=0;g<c.length;++g){d=this.Vj.vb(c[g]);for(var h=e=0;h<d.Uc();++h)f=d.vc(h),f.ib()&&(e=a?Math.max(e,f.yl()):e+f.yl());d.Ul(e)}c=a=0;this.Vj.vb(_geo.geotoolkit.ea.Oa.Rc).ib()&&(a=this.Vj.vb(_geo.geotoolkit.ea.Oa.Rc).yl());this.Vj.vb(_geo.geotoolkit.ea.Oa.pd).ib()&&(c=this.Vj.vb(_geo.geotoolkit.ea.Oa.pd).yl());a=null==a?0:a;c=null==c?0:c;this.F2a.pb({left:a,right:c});this.Bc.legends.position===b.KJa.dr&&(!0===this.Bc.legends.alignwithcentermodel?this.QJ.pb({left:a,right:c}):this.QJ.pb({left:0,
right:0}));return this};b.prototype.N0b=function(a){if(null!=a){var c=a,d;a instanceof Array||(c=[a]);var e=null;for(d=0;d<c.length;++d)e=this.HA(c[d]),null!=e&&null!=e.xtb()&&e.xtb().I$a(e);var e=function(a){null!=a&&(this.R3a.bn().forEach(function(b){a===b.Ed()&&this.R3a.remove(b)}.bind(this)),this.pM.getData().bn().forEach(function(b){a.Uh().kzb===b&&this.pM.getData().remove(b)}.bind(this)))}.bind(this),f=function(a){var c=this.BV(),d,e=[b.H0.Ub,b.H0.Zf];c.forEach(function(b){d=this.DTb(b);e.forEach(function(b){null==
d||null==d[b]||d[b].id2!==a&&d[b].id1!==a||this.nTa(d[b].id1,d[b].filldirection)}.bind(this))}.bind(this))}.bind(this),g=!1,h;for(d=0;d<c.length;++d)h=this.HA(c[d]),null!=h&&(g=h.Uh(),this.Vj.disconnect(g.xPa.vc(0)),this.Vj.disconnect(g.axis),f(c[d]),this.ind(c[d]),h.getData().hb(_geo.geotoolkit.data.$.vf,this.JRa()),h.hb(_geo.geotoolkit.oa.Kc.xF.$.Vna,this.Tqb()),h.hb(_geo.geotoolkit.oa.Kc.xF.$.AIa,this.Vqb()),h.hb(_geo.geotoolkit.oa.Kc.wF.$.dfb,this.NBc()),h.hb(_geo.geotoolkit.oa.Kc.wF.$.Odb,this.czc()),
h.hb(_geo.geotoolkit.oa.Kc.wF.$.Kxa,this.ezc()),this.Mn.removeChild(g.curve),this.Mn.removeChild(g.Yla),this.Mn.yg(),this.Ara.removeChild(g.symbol),this.lR.Le().remove(g.xPa),this.lR.removeChild(g.xPa),this.lR.pb({width:this.FTb()}),this.Y7===c[d]&&(this.Emb=this.Y7=null),g=!0,e(h),h.dispose(),this.fK.remove(h));this.kca===a&&(a=this.BV(),null==a||0===a.length?this.fUa(null):this.fUa(a[0]));g&&(this.uY.xb(),this.Vj.xb(),this.Swa())}return this};b.prototype.hzc=function(a){return null==a||null==this.HA(a)?
null:this.HA(a).Ls()};b.prototype.oNc=function(a,b,c,d,e,f,g,h,k,l,n,C,D){var E=_geo.geotoolkit.Ca(a,{id:a,name:"string"===typeof C?C:void 0,autoscale:"boolean"===typeof b?b:void 0,min:"number"===typeof c?c:Number.NaN,max:"number"===typeof d?d:Number.NaN,value:"number"===typeof e?e:Number.NaN,unit:"string"===typeof f?f:void 0,linestyle:null!=g?g:void 0,curvevisible:"boolean"===typeof h?h:void 0,symbolvisible:"boolean"===typeof k?k:void 0,axisvisible:"boolean"===typeof l?l:void 0,axisposition:"string"===
typeof n?n:void 0,axisautolabelrotation:"boolean"===typeof D?D:void 0},!0);if(null==E.id)return this;a=Object.keys(E);a.forEach(function(a){E.hasOwnProperty(a)&&void 0===E[a]&&delete E[a]});if("string"===typeof E.id)a=this.HA(E.id);else if(E.id instanceof _geo.geotoolkit.oa.Kc.wF)a=E.id;else return this;null!=a&&(b={},void 0!==E.curvevisible&&(b.visible=E.curvevisible),void 0!==E.autoscale&&(b.autoscale=E.autoscale),void 0!==E.name&&(b.name=E.name),void 0!==E.min&&(b.min=E.min),void 0!==E.max&&(b.max=
E.max),void 0!==E.unit&&(b.unit=E.unit),void 0!==E.linestyle&&(b.linestyle=E.linestyle),void 0!==E.value&&(b.value=E.value),a.$fa(b),void 0!==E.symbolvisible&&a.GUa({visible:E.symbolvisible}),b={},void 0!==E.axisvisible&&(b.visible=E.axisvisible),void 0!==E.axisposition&&(b.position=E.axisposition),void 0!==E.axisautolabelrotation&&(b.autolabelrotation=E.axisautolabelrotation),a.zN(b));return this};b.prototype.Uzd=function(a,b){if(null==a||null==b)return this;!0===this.Bc.legends.autocolorlabel?b.labelcolor=
null:null==this.Bc.legends.legendoptions.labelcolor&&(b.labelcolor=h);a.setOptions(b);return this};b.prototype.slc=function(b){if("function"===typeof this.Bc.visiblerange.formatter)return this.Bc.visiblerange.formatter(b);null==this.O3a&&(this.O3a=a(this.jAa,this.Bc.visiblerange.formatter,this.$w));return this.O3a.format(new Date(b))};b.prototype.Pjb=function(b){if("function"===typeof this.Bc.lastupdatedate.formatter)return this.Bc.lastupdatedate.formatter(b);null==this.c1a&&(this.c1a=a(this.jAa,
this.Bc.lastupdatedate.formatter,this.$w));return this.c1a.format(new Date(b))};b.prototype.wm=function(){var a=this.cd.xa(),b=this.cd.Nb(),c=this.Mmb.Fe();if(c instanceof _geo.geotoolkit.axis.ZG){c.bL(this.$w);var d=b.za()-b.sa();d<=f?c.sHa("MAJOR","H:i:s"):d<=k?c.sHa("MAJOR","H:i"):c.sHa("MAJOR","M j, Y")}this.DKb.jc(this.slc(b.sa()));this.uKb.jc(this.slc(b.za()));this.Bc.lastupdatedate.followcursor&&this.Uib.isEnabled()||this.b1a.jc(this.Pjb(a.za()));this.UR.Sa(a,b);b=this.T1.getParent().xa();
this.T1.getParent().Sa(new _geo.geotoolkit.util.Rect(a.sa(),b.qa(),a.za(),b.wa()));this.Fnb.Sa(a);this.Enb.Sa(a);this.Swa()};b.prototype.Swa=function(){var a=!1,b=this.Xo,c=_geo.geotoolkit.util.Ga.hf(this.cd.om(),this.cd.Nb()),d=this.cd.om().clone();c.ob(d,d);d.Pj(b.ga())||(b.Ea(d),a=!0);c=new _geo.geotoolkit.util.Rect(0,0,this.cd.om().aa(),this.cd.om().ba());c.Pj(b.xa())||(b.Sa(c),a=!0);!0===a&&this.Vj.f0()};b.prototype.JKc=function(){this.i4c.yg();this.Fnb.yg();this.Enb.yg();this.Mn.yg();this.Qb.yg();
this.Dba.yg();this.Xo.yg();return this};b.prototype.Li=function(){var a=this.cd.xa();return new _geo.geotoolkit.util.Range(a.sa(),a.za())};b.prototype.ni=function(a){var b=new _geo.geotoolkit.util.Rect(this.cd.xa());if(b.sa()!==a.gb()||b.za()!==a.nb())b.setX(a.gb()),b.qb(a.nb()-a.gb()),this.cd.Sa(b),this.wm(),this.Mn.yg();return this};b.prototype.Lla=function(){var a=this.cd.Nb();return new _geo.geotoolkit.util.Range(a.sa(),a.za())};b.prototype.Cwa=function(a){if(null==a)return this;a.getSize()<d&&
(a.gb()+d<this.cd.xa().za()?a.ni(a.gb(),a.gb()+d):a.nb()-d>this.cd.xa().sa()?a.ni(a.nb()-d,a.nb()):a.ni(this.cd.xa().sa(),this.cd.xa().za()));var b=new _geo.geotoolkit.util.Rect(this.cd.xa());b.setX(a.gb());b.qb(a.nb()-a.gb());this.Vj.os(b);null!=this.hMb&&1<Math.abs(this.hMb-(a.nb()-a.gb()))&&(this.eP.hzb(_geo.geotoolkit.oa.AT.Sy.Rfb),this.hMb=null);this.wm();return this};b.prototype.$A=function(a){this.Vj.$A(a,0);this.wm();return this};b.prototype.vt=function(a){this.Vj.vt(a,1);this.wm();this.Mn.yg();
return this};b.prototype.JN=function(){this.vt(1.25);return this};b.prototype.KN=function(){this.vt(.8);return this};b.prototype.R8=function(){var a=this.cd.xa();this.Cwa(new _geo.geotoolkit.util.Range(a.sa(),a.za()));return this};b.prototype.qFc=function(){return n.rFc(this.pza,"annotation_")};b.prototype.urc=function(a){null==a&&(a={});a.id=this.qFc();this.Dba.va([new _geo.geotoolkit.oa.Kc.PVa(a)]);this.pza.push(a.id);return a.id};b.prototype.VKc=function(a){return this.t$(a)};b.prototype.xwc=function(a,
b){return this.Uda(a,b)};b.prototype.Zja=function(a){var b=null;if(null==a||null==a.curveid||null==a.time)return b;var c=this.HA(a.curveid);if(null==c||!(c instanceof _geo.geotoolkit.oa.Kc.wF))return b;var d=a.time;if((0,window.isNaN)(d))return b;var e=c.Uh();if(null==e.curve||null==e.curve.getData())return b;var b=e.curve,e=b.rRa(),f=e.samples,d=n.wqb(d,f),e=f[d].getValue(),d=f[d].getPosition(),e=(b.getParent().xa().wa()-e)/b.getParent().xa().ba()*this.Dba.xa().ba(),b={},f=this.qFc();b.id=f;b.point=
new _geo.geotoolkit.util.na(d,e);b.label=a.label;b.textstyle=a.textstyle;b.symbol=n.Nsb(a.symbol);b.linestyle=a.linestyle;b.textbackground=a.textbackground;b.fillstyle=a.fillstyle;b.symbolsize=a.symbolsize;b.timeseriesobject=c;a=new _geo.geotoolkit.oa.Kc.saa({id:f});this.Dba.va(a);this.pza.push(b.id);a.setOptions(b);return b.id};b.prototype.Uda=function(a,b){if(null==a)return"";var c=this.Oqb(a);null!=c&&(null!=b.symbol&&(b.symbol=n.Nsb(b.symbol)),c.setOptions(b));return a};b.prototype.t$=function(a){if(null==
a)return this;var b=this.Oqb(a);null!=b&&(this.Dba.removeChild(b),b.dispose(),-1!==this.pza.indexOf(a)&&this.pza.splice(this.pza.indexOf(a),1));return this};b.prototype.Oqb=function(a){if(null==a)return null;var b=this.pza.indexOf(a),c=0;if(-1<b&&null!=this.Dba.vc(b)&&this.Dba.vc(b).jb().id===a)return this.Dba.vc(b);b=0;for(c=this.Dba.Uc();b<c;b++){var d=this.Dba.vc(b);if(d instanceof _geo.geotoolkit.oa.Kc.PVa&&d.jb().id===a)return d}return null};b.prototype.ayc=function(a){return this.$Sb(a)};b.prototype.$Sb=
function(a){var b={id:a};a=this.Oqb(a);null!=a&&(b=_geo.geotoolkit.Ca(b,a.ka()));return b};b.prototype.render=function(a){var b=3;if(null!=this.eP){var c=Math.max(this.DKb.aa(),150);this.eP.Ea(new _geo.geotoolkit.util.Rect(c,b,c+this.eP.yl(),b+this.eP.mf()))}null!=this.TO&&(c=this.P3a.xa().aa()-Math.max(this.uKb.aa()-this.TO.yl(),150),this.TO.Ea(new _geo.geotoolkit.util.Rect(c,b,c+this.TO.yl(),b+this.TO.mf())));_geo.geotoolkit.oa.Qm.prototype.render.call(this,a)};b.prototype.Etc=function(a,b,c){c=
this.BV().indexOf(c);a=this.BV().indexOf(a);var d=this.BV().length-1;if(-1===a||b===_geo.geotoolkit.scene.CompositeNode.aE.I0&&0===a||b===_geo.geotoolkit.scene.CompositeNode.aE.s6&&a===d||b===_geo.geotoolkit.scene.CompositeNode.aE.seb&&0===a||b===_geo.geotoolkit.scene.CompositeNode.aE.Zcb&&a===d||b===_geo.geotoolkit.scene.CompositeNode.aE.Xna&&0===c||b===_geo.geotoolkit.scene.CompositeNode.aE.paa&&c===d)return this;var d=this.fK.get(a),e=this.Mn.vc(2*a),f=this.Mn.vc(2*a+1);this.fK.ewb(a);this.Mn.removeChild(e);
this.Mn.removeChild(f);switch(b){case _geo.geotoolkit.scene.CompositeNode.aE.I0:this.fK.gs(0,d);this.Mn.oh(0,f);this.Mn.oh(0,e);break;case _geo.geotoolkit.scene.CompositeNode.aE.s6:this.fK.add(d);this.Mn.va(e);this.Mn.va(f);break;case _geo.geotoolkit.scene.CompositeNode.aE.seb:this.fK.gs(a-1,d);this.Mn.oh(2*(a-1),f);this.Mn.oh(2*(a-1),e);break;case _geo.geotoolkit.scene.CompositeNode.aE.Zcb:this.fK.gs(a+1,d);this.Mn.oh(2*(a+1),f);this.Mn.oh(2*(a+1),e);break;case _geo.geotoolkit.scene.CompositeNode.aE.Xna:this.fK.gs(c,
d);this.Mn.oh(2*c,f);this.Mn.oh(2*c,e);break;case _geo.geotoolkit.scene.CompositeNode.aE.paa:this.fK.gs(c+1,d);this.Mn.oh(2*(c+1),f);this.Mn.oh(2*(c+1),e);break}return this};b.prototype.$rd=function(a,c){c||(c=this.cd.Nb());var d=c.za(),d=new _geo.geotoolkit.oa.bia(b.$.JSa,new _geo.geotoolkit.util.Range(d-a,d));this.TCa(b.$.Q4,this,d);return this};b.prototype.qod=function(){var a=this.Li(),b=this.Lla(),c=a.nb(),a=a.nb()-(b.nb()-b.gb());this.Cwa(new _geo.geotoolkit.util.Range(a,c));return this};b.prototype.uPa=
function(a,b,c,d,e){c=_geo.geotoolkit.Ca(a,{id:null!=a?a:"",curveids:null!=b?b:[],curveaxis:null!=e?e:{},min:null!=c?c:null,max:null!=d?d:null},!0);a=c.id;b=null;var f=[];c.curveids.forEach(function(a){a=this.HA(a);null!=a&&f.push(a)}.bind(this));if(null==c.min){var g=Number.MAX_VALUE;f.forEach(function(a){null!=a&&null!=a.Ls&&null!=a.Ls().min&&a.Ls().min<g&&(g=a.Ls().min)});c.min=g!==Number.MAX_VALUE?g:0}if(null==c.max){var h=Number.MIN_VALUE;f.forEach(function(a){null!=a&&null!=a.Ls&&null!=a.Ls().max&&
a.Ls().max>h&&(h=a.Ls().max)});c.max=h!==Number.MIN_VALUE?h:1}var k=[];this.Yjb.bn().forEach(function(a){k.push(a.od())});if(0>k.indexOf(a))b=new _geo.geotoolkit.oa.Kc.JFb(c),b.ge(f),this.Yjb.add(b),b.kb(_geo.geotoolkit.oa.Kc.xF.$.Vna,this.Tqb()),b.kb(_geo.geotoolkit.oa.Kc.xF.$.AIa,this.Vqb());else return null;c=b.Uh().hsa;d=b.Uh().VOa;b=b.gI();var l;"left"===b.position?l=_geo.geotoolkit.ea.Oa.Rc:"right"===b.position&&(l=_geo.geotoolkit.ea.Oa.pd);"left"===b.position?(this.Vj.wI(0,c,l),this.Vj.wI(0,
d,l)):(this.Vj.Yr(c,l),this.Vj.Yr(d,l));this.Zra();this.uY.xb();this.Vj.xb();this.lR.xb();this.Mn.yg();this.Swa();return a};b.prototype.KGa=function(a){a=this.AUb(a);if(null==a)return this;var b=a.gI(),c=a.Uh().hsa,d=a.Uh().VOa,e;"left"===b.position?e=_geo.geotoolkit.ea.Oa.Rc:"right"===b.position&&(e=_geo.geotoolkit.ea.Oa.pd);this.Vj.removeItem(c,e);this.Vj.removeItem(d,e);a.gnd();this.Yjb.remove(a);a.hb(_geo.geotoolkit.oa.Kc.xF.$.Vna,this.Tqb());a.hb(_geo.geotoolkit.oa.Kc.xF.$.AIa,this.Vqb());this.Zra();
this.Vj.xb();this.Swa();return this};b.prototype.AUb=function(a){if(null==a)return null;var b=this.Yjb.bn(),b=b.filter(function(b){return b.od()===a});return null==b||0===b.length?null:b[0]};b.prototype.LFc=function(){return this.Fnb};b.prototype.KFc=function(){return this.Enb};b.prototype.Mta=function(){return this.Xo};b.prototype.Pwc=function(a){null==a&&(a={});var b=this.getRoot(),c=b.ga(),d=_geo.geotoolkit.util.zf.Za().Tb("px"),d=_geo.geotoolkit.scene.exports.HX.Za().TZ("A4",d,_geo.geotoolkit.scene.exports.lO.Zeb),
d={paperformat:d,top:.5,bottom:.5,left:.5,right:.5,units:"in",orientation:"Landscape",scaling:"FitBoth",keepaspectratio:!0,continuous:!1,drawwesttoeast:!0},d={footer:null,header:null,output:"PDF Output",save:!1,printsettings:d,limits:null,scale:1},e=_geo.geotoolkit.Ca(a,d,!0);a=new _geo.geotoolkit.scene.exports.Nr(b,c);a.Ea(c);a=[a];var c=new _geo.geotoolkit.scene.exports.Axa(a,new _geo.geotoolkit.scene.exports.Uxa(c.aa(),c.ba())),c=new _geo.geotoolkit.scene.exports.Document(c,e.header,e.footer,!0),
f=new _geo.geotoolkit.scene.exports.Dya;Array.isArray(e.embededfonts)&&(a=e.embededfonts,a.forEach(function(a){f.Fka(a.subType,a.fontName,a.fontWeight,a.fontStyle,a.fontBase64EncodedFile,a.encoding)}));e.imagecompression&&f.gga(e.imagecompression.mode,e.imagecompression.quality,e.imagecompression.speed);f.U_(e.streamcompression);a=e.pdfstream instanceof _geo.geotoolkit.util.stream.zq?e.pdfstream:new _geo.geotoolkit.util.stream.n1;var b=this.xg("cursor"),g=this.jb().scrollbar.visible;b&&(this.setOptions({scrollbar:{visible:!1}}),
b.setPosition(new _geo.geotoolkit.util.na(window.NaN,window.NaN)));return f.EPa(c,e.printsettings,a).then(function(a){a.save(e.output,e.save);g&&this.setOptions({scrollbar:{visible:!0}})}.bind(this),function(a){throw a;})};b.prototype.dispose=function(){this.fUa(null);this.N0b(this.BV());_geo.geotoolkit.oa.Qm.prototype.dispose.call(this)};return b}();
_geo.geotoolkit.oa.cE=function(){function b(a){this.Jn=!1;void 0===a&&(a={});void 0===a.horizontalscrollable&&void 0!==a.horizontalscroll&&(a.horizontalscrollable=a.horizontalscroll);void 0===a.verticalscrollable&&void 0!==a.verticalscroll&&(a.verticalscrollable=a.verticalscroll);a=_geo.geotoolkit.Ca(a,{bounds:a.bounds instanceof _geo.geotoolkit.util.Rect?a.bounds:new _geo.geotoolkit.util.Rect(0,0,400,400),horizontalscroll:void 0!==a.horizontalscrollable?a.horizontalscrollable:!0,verticalscroll:void 0!==
a.verticalscrollable?a.verticalscrollable:!0,keepvisiblelimits:!1,border:void 0!==a.border?a.border:{color:"transparent"},rows:void 0!==a.rows?a.rows:1,cols:void 0!==a.cols?a.cols:1,fixedsize:a.fixedsize});var b=a.bounds;a.bounds=b.clone().setX(0).setY(0);this.Gb=(new _geo.geotoolkit.controls.shapes.cE(a)).kb(_geo.geotoolkit.controls.shapes.cE.$.QIa,function(a,b){this.Ja(_geo.geotoolkit.oa.cE.$.QIa,this,b)}.bind(this));a.bounds=b;a.model=this.Gb;this.AU=a.horizontalscroll;this.iP=a.verticalscroll;
a.annotationssizes={north:"0",west:"0",east:!0===a.verticalscroll?"15":"0",south:!0===a.horizontalscroll?"15":"0"};_geo.geotoolkit.oa.Wg.call(this,a);this.vb("center").pe(new _geo.geotoolkit.ea.ol);this.Gb.pb({left:0,top:0,right:0,bottom:0});this.Gb.Qf(!0);"floating"===this.iP&&"floating"===this.AU&&(a=this.vb(_geo.geotoolkit.ea.Oa.lb),this.Ze.oQ("floating"===this.iP),this.kf.oQ("floating"===this.AU),this.tb.removeItem(this.kf,_geo.geotoolkit.ea.Oa.Yc),this.tb.removeItem(this.Ze,_geo.geotoolkit.ea.Oa.pd),
a.pe(new _geo.geotoolkit.ea.ol),a.va(this.Ze),a.va(this.kf));this.wm();this.Jn=!0}_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Wg);_geo.geotoolkit.da(b,"geotoolkit.widgets.TableView");b.$={QIa:"onColumnWidthChanged",Yhc:"onTableSizeChanged",TKa:"onTableAdjusted"};b.prototype.sTb=function(a){return null!=a?this.Gb.RDa(a):this.Gb.qQa().aa()+this.Gb.WDa().aa()};b.prototype.Twb=function(a,b){this.Gb.jHa(a,b);this.wm();return this};b.prototype.DM=function(a){this.Gb.DM(a);return this};b.prototype.WDc=function(){return this.Gb.wQa().ba()+
this.Gb.WDa().ba()};b.prototype.s_b=function(){this.Ja(_geo.geotoolkit.oa.cE.$.Yhc,this);return this};b.prototype.Ea=function(a){_geo.geotoolkit.oa.Wg.prototype.Ea.call(this,a);this.Jn&&(this.Gb.Ea(this.vb(_geo.geotoolkit.ea.Oa.lb).xa()),this.Gb.asa(),this.wm());return this};b.prototype.fXb=function(){return this.Gb};b.prototype.dL=function(a,b){this.Gb.dL(a,b);this.wm();this.s_b();this.ma();return this};b.prototype.zRa=function(){return this.Gb.zRa()};b.prototype.y9=function(){return this.Gb.y9()};
b.prototype.g_=function(){return this.Gb.g_()};b.prototype.w5=function(a,b){this.Gb.w5(a,b);this.wm();return this};b.prototype.setData=function(a){if(void 0===a)return this;this.Gb.setData(a);this.wm();this.s_b();return this};b.prototype.C5=function(a,b){this.Gb.C5(a,b);return this};b.prototype.lua=function(a,b){this.Gb.lua(a);if(!1===b)return this;this.Gb.w5(a,-1!==this.FV()?this.FV():0);this.Gb.asa();this.wm();return this};b.prototype.V3=function(){return this.Gb.V3()};b.prototype.hab=function(a,
b){this.Gb.Kva(a);if(!1===b)return this;var d=this.Gb.BP()[0];this.Gb.w5(d,-1!==this.FV()?this.FV():0);this.Gb.asa();this.wm();return this};b.prototype.Z5a=function(){return this.BP()[0]};b.prototype.BP=function(){return this.Gb.BP()};b.prototype.ifa=function(a){this.Gb.ifa(a);return this};b.prototype.FV=function(){return this.Gb.FV()};b.prototype.wm=function(){var a=this.Gb.WDa(),b=this.Gb.B9();this.kf.Sa(a,b,this.cd.MA());this.Ze.Sa(a,b,this.cd.Cr());this.Ja(_geo.geotoolkit.oa.cE.$.TKa,this,null);
return this};b.prototype.Sg=function(){if(void 0===this.Gb)return this;var a=function(a,b){var c=this.Gb.B9(),f=b.Nb(),c=(c.sa()-f.sa())*this.cd.Ya().Ab();this.Gb.C5(c,0);this.kf.Sa(this.Gb.WDa(),this.Gb.B9());this.Ja(_geo.geotoolkit.oa.cE.$.TKa,this,null)}.bind(this),b=function(a,b){var c=this.Gb.B9(),f=b.Nb(),c=(c.qa()-f.qa())*this.cd.Ya().Pb();this.Gb.C5(0,c);this.Ze.Sa(this.Gb.WDa(),this.Gb.B9());this.Ja(_geo.geotoolkit.oa.cE.$.TKa,this,null)}.bind(this);this.Ze.addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.tt,
b).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.Yn,b);this.kf.addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.g$,function(){this.c3a.cc(!1)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.tt,function(){this.c3a.cc(!0)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.tt,a).addListener(_geo.geotoolkit.controls.ia.scroll.hg.$.Yn,a);a=_geo.geotoolkit.selection.from(this.tb).He('node => id(node) == "manipulator_layer"').B_()[0];this.rr([this.xY=(new _geo.geotoolkit.controls.ia.Xl(a,
"TableViewCompositeTool")).add([this.c3a=(new _geo.geotoolkit.controls.ia.Jo.sH(this.Gb)).yb("TableViewSplitter").addListener(_geo.geotoolkit.controls.ia.Jo.sH.$.sW,function(a,b){this.wm();this.s_b()}.bind(this)),(new _geo.geotoolkit.controls.ia.Jo.a6(this.Gb)).yb("TableViewColumnHandler").addListener(_geo.geotoolkit.controls.ia.Jo.a6.$.Yn,function(a,b){this.wm()}.bind(this)).cc(!1),(new _geo.geotoolkit.controls.ia.Jo.HYa(this.Gb)).yb("TableViewRowHandler").addListener(_geo.geotoolkit.controls.ia.Jo.a6.$.Yn,
function(a,b){this.wm()}.bind(this)).cc(!1),(new _geo.geotoolkit.controls.ia.Jo.nXa(this.Gb)).yb("TableViewHeaderHandler").cc(!1),(new _geo.geotoolkit.controls.ia.Selection).yb("TableViewSelection").cc(!0).addListener(_geo.geotoolkit.controls.ia.Selection.$.O4,function(a,b){var c=this.xY.Qe(this.Gb,b),c=this.Gb.KI(c.getX(),c.getY());this.Gb.ifa(c.getX());var f;f=b.th();if(!0===f.ctrlKey)f=this.Gb.BP(),-1===f.indexOf(c.getY())&&(f.push(c.getY()),this.Gb.Kva(f));else if(!0===f.shiftKey&&0<this.Gb.BP().length){f=
this.Gb.BP()[this.Gb.BP().length-1];var g=Math.min(f,c.getY()),c=Math.max(f,c.getY());for(f=this.Gb.BP();g<=c;g++)-1===f.indexOf(g)&&f.push(g);this.Gb.Kva(f)}else this.Gb.Kva([c.getY()])}.bind(this)),(new _geo.geotoolkit.controls.ia.ei).yb("TableViewPanning").cc(!0).fu(this.Gb,this.Gb.C5).addListener(_geo.geotoolkit.controls.ia.ei.$.YE,function(a,b){this.wm()}.bind(this)),(new _geo.geotoolkit.controls.ia.Jo.gha(this.Gb)).yb("TableViewHighlight").cc(!0).addListener(_geo.geotoolkit.controls.ia.Jo.gha.$.jGa,
function(a,b){this.Gb.lua(b.GWb())}.bind(this)).addListener(_geo.geotoolkit.controls.ia.fc.$.M4,function(a,b){this.Gb.lua(-1)}.bind(this))])]);this.rr(new _geo.geotoolkit.oa.ia.wXa(this));return this};return b}();
_geo.geotoolkit.oa.rAb=function(){function b(a,b){this.PLb=new _geo.geotoolkit.util.na;this.QLb=new _geo.geotoolkit.util.na;this.la=this.$$c();_geo.geotoolkit.Sb(a,this.la);var d={isdatamodel:!1,bounds:this.la.bounds,border:this.la.border,tools:{verticalscroll:{visible:!1},horizontalscroll:{visible:!1}}};_geo.geotoolkit.oa.Wg.call(this,d);this.TV=new _geo.geotoolkit.axis.Tna({orientation:_geo.geotoolkit.axis.xd.ic});this.rT=new _geo.geotoolkit.axis.Tna({orientation:_geo.geotoolkit.axis.xd.$b});var g=
_geo.geotoolkit.scene.Wp,n=void 0!==this.la.shape.orientation?this.la.shape.orientation:c.Mb.Zf,d=n===c.Mb.Ub||n===c.Mb.Zf,n=this.Z$c(n),p,r,t,q;q=this.la.axistitles;null==q?d?(p="Groups",t="Values",r="Groups",q="Values"):(p="Values",t="Groups",r="Values",q="Groups"):(p=q.north,t=q.west,r=q.south,q=q.east);this.Rud=!1;g.wM(this.tb,{location:e.Se,text:p});var m=g.pK(this.tb,{tickgenerator:this.jia.north,location:e.Se,connect:!1}).axis;m.yz(this.TV);d&&m.Ka(!1);g.wM(this.tb,{location:e.Rc,text:t});
var u=g.pK(this.tb,{tickgenerator:this.jia.west,location:e.Rc,connect:!1}).axis;u.yz(this.rT);var v=g.pK(this.tb,{tickgenerator:this.jia.south,location:e.Yc,connect:!1}).axis;v.yz(this.TV);g.wM(this.tb,{location:e.Yc,text:r});var w=g.pK(this.tb,{tickgenerator:this.jia.east,location:e.pd,connect:!1}).axis;w.yz(this.rT);d||w.Ka(!1);g.wM(this.tb,{location:e.pd,text:q});this.Pi={north:p,south:r,east:q,west:t};this.Mh={north:m,south:v,east:w,west:u};this.BF=new c;this.DHb=(new _geo.geotoolkit.scene.og).Kd("data_layer");
this.DHb.va(this.BF);var x=(new _geo.geotoolkit.scene.Group).Kd("cache_group");this.tb.connect(this.Mh.north,x);this.tb.connect(this.Mh.south,x);this.tb.connect(this.Mh.east,x);this.tb.connect(this.Mh.west,x);this.tb.Mc().oh(0,x);x.Tl(new _geo.geotoolkit.scene.Rk);this.bHb=x;g=(new _geo.geotoolkit.scene.og).Kd("grid_layer");g.va(n);n=(new _geo.geotoolkit.scene.og).Kd("referenceline_layer");this.eM=new _geo.geotoolkit.scene.shapes.Line;n.va(this.eM);x.va([n,g,this.DHb]);var A=this;this.BF.kb(_geo.geotoolkit.scene.Node.$.ss,
function(){var a=A.SLb();A.BF.Ea(A.BF.xa());x.Sa(a);A.tb.Mc().Sa(a);A.tb.f0();A.tb.ma()});d?(this.rT.kga(this.la.neatlimits),this.TV.kga(!1)):(this.TV.kga(this.la.neatlimits),this.rT.kga(!1));this.setOptions(a);null!=b&&b.mode===c.yC.fR&&(d=b.datasets[0],g={},g.datasets=[d],b=_geo.geotoolkit.Sb(g,b));null!=b&&null==b.datasets&&null!=a.shape.valuelimits&&(this.gk()?this.tb.Mc().Sa(new _geo.geotoolkit.util.Rect(a.shape.valuelimits.minvalue,0,a.shape.valuelimits.maxvalue,1)):this.tb.Mc().Sa(new _geo.geotoolkit.util.Rect(0,
a.shape.valuelimits.minvalue,1,a.shape.valuelimits.maxvalue)));this.setData(b);return this}var a="#757575",g="#e0e0e0",d="12px Roboto",e=_geo.geotoolkit.ea.Oa,c=_geo.geotoolkit.controls.shapes.s0;_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Wg);_geo.geotoolkit.da(b,"geotoolkit.widgets.BarChartWidget");b.prototype.$$c=function(){var b={shape:{barwidth:1,barpad:0,autogradient:!1,barvalues:{visible:!0,textstyle:(new _geo.geotoolkit.attributes.eb).Gr(d).setColor(a)}},border:{color:"transparent"},mirror:!1,
referenceline:{visible:!1,value:Number.NaN,linestyle:new _geo.geotoolkit.attributes.Aa(a)},neatlimits:!0,minpspan:50,grid:{values:this.Tuc(),groups:this.Tuc(!0)},annotations:{north:{size:50},south:{size:50},east:{size:50},west:{size:50}}};return b};b.prototype.Kvd=function(b){var c={lineStyle:new _geo.geotoolkit.attributes.Aa(a),baseLineStyle:new _geo.geotoolkit.attributes.Aa(a),textStyle:new _geo.geotoolkit.attributes.eb(a)};b&&(c.lineStyle=new _geo.geotoolkit.attributes.Aa("transparent"),c.baseLineStyle=
new _geo.geotoolkit.attributes.Aa("transparent"),c.textStyle=new _geo.geotoolkit.attributes.eb(a));return c};b.prototype.Tuc=function(b){var c=_geo.geotoolkit.attributes.Aa.qH;return b={MAJOR:{tickvisible:b?!1:!0,tickstyle:{color:a,width:1,pattern:c.Ry},labelvisible:!0,labelstyle:{font:d,color:a}},MINOR:{tickvisible:!1,tickstyle:{color:g,width:1,pattern:c.Ry},labelvisible:!1,labelstyle:{font:d,color:g}},EDGE:{tickvisible:!0,tickstyle:{color:a,width:1,pattern:c.Ry},labelvisible:!1,labelstyle:{font:d,
color:a}}}};b.prototype.mbb=function(a){if(!a)return this;var b=a.value;if(void 0===b||(0,window.isNaN)(b))return this;var c=this.BF.xa();if(!c)return this;this.t4()?(this.PLb.bb(c.sa(),b),this.QLb.bb(c.za(),b)):(this.PLb.bb(b,c.qa()),this.QLb.bb(b,c.wa()));this.eM.ke(!1);this.eM.Dw({from:this.PLb,to:this.QLb}).Ka(a.visible);a.linestyle&&this.eM.ua(a.linestyle);this.eM.ke(!0);return this};b.prototype.Z$c=function(a){function b(a){return a+1}var d=_geo.geotoolkit.axis.E6.Za(),e=this.la.grid;this.xMa=
{values:e.values instanceof _geo.geotoolkit.axis.Jl?e.values:d.create(e.values).xo("EDGE",!0),groups:e.groups instanceof _geo.geotoolkit.axis.Jl?e.groups:(new _geo.geotoolkit.axis.fB).Qv("MAJOR",1)};a===c.Mb.Ub||a===c.Mb.Zf?(a=new _geo.geotoolkit.axis.Mx(this.xMa.values,this.xMa.groups),a.yz(_geo.geotoolkit.axis.xd.$b,this.rT),a.yz(_geo.geotoolkit.axis.xd.ic,this.TV),this.jia={north:e.groups instanceof _geo.geotoolkit.axis.Jl?e.groups:(new _geo.geotoolkit.axis.fB).Qv("MAJOR",1).xo("EDGE",!1).Tg("MINOR",
!1).Zva(b),east:e.values instanceof _geo.geotoolkit.axis.Jl?e.values:d.create(e.values),west:e.values instanceof _geo.geotoolkit.axis.Jl?e.values:d.create(e.values),south:e.groups instanceof _geo.geotoolkit.axis.Jl?e.groups:(new _geo.geotoolkit.axis.fB).Qv("MAJOR",1).xo("EDGE",!1).Tg("MINOR",!1).Zva(b)}):(a=new _geo.geotoolkit.axis.Mx(this.xMa.groups,this.xMa.values),a.yz(_geo.geotoolkit.axis.xd.$b,this.rT),a.yz(_geo.geotoolkit.axis.xd.ic,this.TV),this.jia={east:e.groups instanceof _geo.geotoolkit.axis.Jl?
e.groups:(new _geo.geotoolkit.axis.fB).Qv("MAJOR",1).xo("EDGE",!1).Tg("MINOR",!1).Zva(b),north:e.values instanceof _geo.geotoolkit.axis.Jl?e.values:d.create(e.values),south:e.values instanceof _geo.geotoolkit.axis.Jl?e.values:d.create(e.values),west:e.groups instanceof _geo.geotoolkit.axis.Jl?e.groups:(new _geo.geotoolkit.axis.fB).Qv("MAJOR",1).xo("EDGE",!1).Tg("MINOR",!1).Zva(b)});return a};b.prototype.t4=function(){return this.BF?this.BF.t4():!0};b.prototype.gk=function(){return this.BF?this.BF.gk():
!1};b.prototype.pzc=function(){return this.DHb};b.prototype.SLb=function(){var a=this.BF.xa(),b=this.gk()?_geo.geotoolkit.axis.xd.ic:_geo.geotoolkit.axis.xd.$b;b===_geo.geotoolkit.axis.xd.ic?(this.TV.vi(a.sa(),a.za(),this.BF.Ya()),a=a.clone().setX(this.TV.Ug()).qb(this.TV.Ih()-this.TV.Ug())):(this.rT.vi(a.qa(),a.wa(),this.BF.Ya()),a=a.clone().setY(this.rT.Ug()).Db(this.rT.Ih()-this.rT.Ug()));return a};b.prototype.wm=function(){_geo.geotoolkit.oa.Wg.prototype.wm.call(this);if(!this.vOa&&this.BF){this.vOa=
!0;var a=this.tb.Mc().xa(),b=this.SLb();b.Pj(a)||(this.bHb.Sa(b),this.tb.Mc().Sa(b),this.tb.f0(),this.tb.ma());this.vOa=!1}return this};b.prototype.Ea=function(a){_geo.geotoolkit.oa.Wg.prototype.Ea.call(this,a);(a=this.SLb())&&!a.isEmpty()&&this.bHb&&this.bHb.Sa(a);return this};b.prototype.Qs=function(a){this.BF.Qs(a);return this};b.prototype.setData=function(a){a&&(this.BF.setData(a),this.mbb(this.la.referenceline));this.Pa();return this};b.prototype.getData=function(){return _geo.geotoolkit.Ca(this.BF.getData(),
_geo.geotoolkit.oa.Wg.prototype.getData.call(this))};b.prototype.tx=function(a,b){var c=this.BF;return void 0!==c.jv[a]?c.jv[a].values[b]:null};b.prototype.setOptions=function(a){this.la=_geo.geotoolkit.Sb(a,this.la);this.BF.setOptions(this.la.shape);this.Brd(this.la.shape.orientation);this.qrd(this.la.shape.orientation);this.eHa(this.la.annotations);this.Tod(this.la.grid);this.mbb(this.la.referenceline);return this};b.prototype.qrd=function(a){(a=a===c.Mb.Ub||a===c.Mb.Zf||void 0===a)?(this.rT.kga(this.la.neatlimits),
this.rT.setOptions({neatlimits:this.la.neatlimits,minspan:this.la.minspan}),this.TV.kga(!1)):(this.TV.setOptions({neatlimits:this.la.neatlimits,minspan:this.la.minspan}),this.rT.kga(!1))};b.prototype.Brd=function(a){var b=this.tb.Mc();b&&((a=a===c.Mb.Ub||a===c.Mb.Zf||void 0===a)&&b.mk(!0),this.la.mirror&&(a?b.Nv(!0):b.mk(!0)))};b.prototype.xb=function(){_geo.geotoolkit.oa.Wg.prototype.Kv.call(this);return this};b.prototype.Tod=function(a){if(!a)return this;this.xMa.groups.setOptions(a.groups);this.xMa.values.setOptions(a.values);
return this};b.prototype.eHa=function(a){a&&(_geo.geotoolkit.oa.Wg.prototype.eHa.call(this,a),this.Mh.east.Vg(this.jia.east),this.Mh.west.Vg(this.jia.west),this.Mh.north.Vg(this.jia.north),this.Mh.south.Vg(this.jia.south))};b.prototype.WRa=function(a,b){this.BF.WRa(a,b);return this};b.prototype.ETa=function(a,b,c){return this.BF.ETa(a,b,c)};b.prototype.ka=function(){return _geo.geotoolkit.Ca(this.la,{})};b.prototype.ja=function(a){this.setOptions(a);return this};return b}();
_geo.geotoolkit.oa.nL=function(){function b(a){null==a&&(a={});var b=15,g=20,l=15,n=20,p=15,r=5,t=g+n+p;a.viewcachesize=a.viewcache||null!=a.viewcachesize?_geo.geotoolkit.Ca(a.viewcachesize,{width:256,height:256}):null;a.border=_geo.geotoolkit.Ca(a.border,{color:"transparent"},!0);b={bounds:a.bounds,border:a.border,north:null,south:null,west:null,east:null,viewcache:!0,viewcachesize:a.viewcachesize,annotationssizes:{north:b+g,west:b+n+g,south:b+n+l+g,east:b+l+t+r}};b=_geo.geotoolkit.Ca(a,b);this.J4c=
t;this.YF=b.viewcache;this.xlc=null;this.hr={};null!=b.viewcachesize&&(this.YF=!0,this.hr=b.viewcachesize);this.Iba=null;this.KH=[];this.PC={datax:[],datay:[],datas:[],selectable:!1,highlightcolor:(new _geo.geotoolkit.attributes.Fa("pink")).ac()};this.HGb=b.annotationssizes;this.ae=null!=b.colorprovider?b.colorprovider:this.ae;t=_geo.geotoolkit.Ca(null!=b.z&&null!=b.z.axis?b.z.axis.title:null,{title:"",visible:!1,textstyle:new _geo.geotoolkit.attributes.eb({color:e,font:c}),alignment:_geo.geotoolkit.util.Da.We});
g={location:_geo.geotoolkit.controls.shapes.wq.pd,componentsizes:{colorbox:p,axis:n,title:g},axis:{autolabelrotation:null!=b.z?b.z.autolabelrotation:!1,title:t},colorprovider:this.ae,title:{text:"zlabel",textstyle:new _geo.geotoolkit.attributes.eb({color:e,font:c})},flip:"true"};this.qh=(new _geo.geotoolkit.controls.shapes.Z5(g)).Tl(this.YF?null!=this.hr?new _geo.geotoolkit.scene.Rk(this.hr.width,this.hr.height):new _geo.geotoolkit.scene.Rk:null).Qf(!0);this.j3c=!1;this.q7={x:null,y:null,z:null,s:null};
this.Ba={x:null,y:null,z:null,s:null};this.FF={x:[],y:[],z:[],s:[]};this.IC={x:!1,y:!1,z:!1,s:!1};this.XZa={x:!1,y:!1,z:!1,s:!1};this.gl={x:null,y:null,z:null};this.lv={x:null,y:null,z:null,s:null};this.zu={x:null,y:null,z:null,s:null};_geo.geotoolkit.oa.Wg.call(this,b);g=this.Dn();this.ke(!1);this.tb.$Ua();this.Xo=new _geo.geotoolkit.scene.og;this.rAa=null;this.knb=["x","y","z","s"];this.inb=new _geo.geotoolkit.attributes.Fa({color:"white"});this.jnb=new _geo.geotoolkit.attributes.Aa({color:"grey",
width:1});this.lnb=new _geo.geotoolkit.attributes.eb;this.dK=(new _geo.geotoolkit.controls.shapes.QXa({data:null,sizeisindevicespace:!0,autosize:!0,autobounds:!0})).pe(new _geo.geotoolkit.ea.gLa).Ka(!1).Qf(!0);this.dK.Ea(new _geo.geotoolkit.util.Rect(0,0,1,1));this.Mc().va(this.Xo);this.va(this.dK);this.lg=_geo.geotoolkit.scene.Wp.wM(this.tb,{location:_geo.geotoolkit.ea.Oa.Se,text:"",textstyle:{font:d}}).text;n=_geo.geotoolkit.scene.Wp.pK(this.tb,{location:_geo.geotoolkit.ea.Oa.Yc,connect:!0,title:{text:"",
visible:!1,textstyle:new _geo.geotoolkit.attributes.eb({color:e,font:c}),alignment:_geo.geotoolkit.util.Da.Ei}}).axis;p=null!=b.x&&null!=b.x.axis&&null!=b.x.axis.title?null:_geo.geotoolkit.scene.Wp.wM(this.tb,{location:_geo.geotoolkit.ea.Oa.Yc,text:"x"}).text;b=null!=b.y&&null!=b.y.axis&&null!=b.y.axis.title?null:_geo.geotoolkit.scene.Wp.wM(this.tb,{location:_geo.geotoolkit.ea.Oa.Rc,text:"y"}).text;l=_geo.geotoolkit.scene.Wp.pK(this.tb,{location:_geo.geotoolkit.ea.Oa.Rc,connect:!0,autolabelrotation:!0,
title:{text:"",visible:!1,textstyle:new _geo.geotoolkit.attributes.eb({color:e,font:c}),alignment:_geo.geotoolkit.util.Da.We}}).axis;this.Je={x:n,y:l,z:this.qh.jb().axis.item};this.Pi={x:p,y:b,z:!1===t.visible?this.qh.jb().title.item:null};t=new _geo.geotoolkit.scene.Group;t.Ul(r);this.tb.Yr(t,_geo.geotoolkit.ea.Oa.pd);this.tb.Yr(this.qh,_geo.geotoolkit.ea.Oa.pd);this.Sx=new _geo.geotoolkit.scene.Group;this.Sx.va([(new _geo.geotoolkit.scene.og).Kd("bubblechart_layer").va([this.ru=new _geo.geotoolkit.controls.shapes.nL])]);
this.vib=(new _geo.geotoolkit.scene.Group).va([this.rpc=(new _geo.geotoolkit.scene.og).Kd("highlight_layer").va([this.Iba=(new _geo.geotoolkit.controls.shapes.nL({selectable:!1})).yb("default")])]);this.OY=null;this.tb.Mc().oh(0,this.vib);this.tb.Mc().oh(0,this.Sx);this.tb.Mc().mk(!0);this.Ze.mk(!0);this.eDa();this.tb.yTa();this.Kv();this.qh.Ka(!1);this.xlc=null!=this.hr?(new _geo.geotoolkit.scene.Rk(this.hr.width,this.hr.height)).Sva(null):(new _geo.geotoolkit.scene.Rk).Sva(null);this.Sx.Tl(this.YF?
this.xlc:null);this.Sx.Qf(!1);this.Kv();this.setData(a);this.ke(g);return this}var a="#e0e0e0",g="#f5f5f5",d="16px Roboto",e="#757575",c="13px Roboto";_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Wg);_geo.geotoolkit.da(b,"geotoolkit.widgets.BubbleChart");b.prototype.eDa=function(){function b(c){c.Kj("MAJOR").setColor(a);c.Kj("MINOR").setColor(g);c.Tg("MINOR",!0);c.Tg("EDGE",!1);c.xo("EDGE",!1)}var c=_geo.geotoolkit.axis.E6.Za(),d=c.osa(),e=c.osa(),n=c.osa(),p=new _geo.geotoolkit.axis.aJ,r=new _geo.geotoolkit.axis.aJ,
t=new _geo.geotoolkit.axis.aJ,q=c.create({ticks:{EDGE:{visible:!0}}}),c=c.osa({ticks:{EDGE:{visible:!0}}}),m=new _geo.geotoolkit.axis.aJ,u=new _geo.geotoolkit.axis.aJ;b(d);b(e);b(q);b(c);b(m);b(u);this.Zo={x:d,y:e,z:n,xlog:p,ylog:r,zlog:t};this.Vx={x:q,y:c,xlog:m,ylog:u};null==this.Fm&&(this.Fm=new _geo.geotoolkit.axis.Mx(q,c),d=new _geo.geotoolkit.scene.og,d.Kd("grid_layer"),d.va(this.Fm),this.tb.Mc().oh(0,d));this.r$();return this};b.prototype.r$=function(){this.Je.x.Vg(this.Zo["x"+(this.IC.x?"log":
"")]);this.Je.y.Vg(this.Zo["y"+(this.IC.y?"log":"")]);this.Je.z.Vg(this.Zo["z"+(this.IC.z?"log":"")]);this.Fm.Vg(_geo.geotoolkit.util.Mb.$b,this.Vx["x"+(this.IC.x?"log":"")]);this.Fm.Vg(_geo.geotoolkit.util.Mb.ic,this.Vx["y"+(this.IC.y?"log":"")]);var a=this.IC.z?Math.log(this.lv.z)/Math.LN10:this.lv.z,b=this.IC.z?Math.log(this.zu.z)/Math.LN10:this.zu.z;this.Je.z.Sa(new _geo.geotoolkit.util.Rect(a,a,b,b))};b.prototype.Sg=function(){_geo.geotoolkit.oa.Wg.prototype.Sg.call(this);var a=_geo.geotoolkit.selection.from(this.tb).He('node => id(node) == "manipulator_layer"').tm();
this.or.addListener(_geo.geotoolkit.controls.ia.fc.$.M4,function(a,b){this.rAa=null;this.dK.Ka(!1)}.bind(this));this.qw.Bz(function(a){for(var b=0;b<a.length;++b)if(a[b].bubblechart===this.ru||a[b].colorbar===this.qh)return a[b];return[]}.bind(this)).addListener(_geo.geotoolkit.controls.ia.Selection.$.EI,function(a,b){b.getSelection().indices instanceof Array&&this.VP({"default":{indices:b.getSelection().indices}},this.QNa)}.bind(this));this.kkb=(new _geo.geotoolkit.controls.ia.Selection(a)).cc(!1).Txb(!0).Bz(function(a){for(var b=
0;b<a.length;++b)if(a[b].bubblechart===this.ru||a[b].colorbar===this.qh)return a[b];return[]}.bind(this)).addListener(_geo.geotoolkit.controls.ia.Selection.$.EI,function(a,b){if(b.getSelection().indices instanceof Array){var c=b.getSelection().indices;0===c.length?(this.dK.Ka(!1),this.rAa=null):this.rAa!==c[0].index&&(this.rAa=c[0].index,this.Jqd())}}.bind(this));this.xY.add([this.kkb]);return this};b.prototype.Jqd=function(){var a=new _geo.geotoolkit.util.Mo;this.knb.forEach(function(b){var c=this.Ba[b]?
this.Ba[b][this.rAa]:"",d=this.XZa[b]?this.XZa[b]:b;b=new _geo.geotoolkit.oa.nL.t9b(null,{axisname:d,value:c,unit:this.gl[b],textstyle:this.lnb});a.add(b)}.bind(this));this.dK.setOptions({data:a,linestyle:this.jnb,fillstyle:this.inb,autobounds:!0});var b=this.dK.ga().clone(),c=this.tb.Mc().getParent().ga(),d=(new _geo.geotoolkit.util.Ga).dwa(this.cd.Nb(),c,!1,!0),c=new _geo.geotoolkit.util.na(this.Ba.x[this.rAa],this.Ba.y[this.rAa]),c=d.transform(c),d=new _geo.geotoolkit.util.na(this.cd.om().getX()+
this.cd.om().aa()/2,this.cd.om().getY()+this.cd.om().ba()/2),e=b.aa(),g=b.ba();c.getX()<=d.getX()&&c.getY()<=d.getY()&&(b.setX(c.getX()),b.setY(c.getY()));c.getX()>=d.getX()&&c.getY()<=d.getY()&&(b.setX(c.getX()-e),b.setY(c.getY()));c.getX()<=d.getX()&&c.getY()>=d.getY()&&(b.setX(c.getX()),b.setY(c.getY()-g));c.getX()>=d.getX()&&c.getY()>=d.getY()&&(b.setX(c.getX()-e),b.setY(c.getY()-g));this.dK.Ea(b);this.dK.Ka(!0)};b.prototype.setData=function(a){_geo.geotoolkit.oa.Wg.prototype.setData.call(this,
a);null!=a.bounds&&this.Ea(a.bounds);var b={};null!=a.header&&this.p5(a.header,b);null!=a.painter&&this.WA(a.painter,b);void 0!==a.colorprovider&&this.UA(a.colorprovider,b);null!=a.symbolcache&&this.nyb(a.symbolcache,b);null!=a.labels&&this.zxb(a.labels,b);this.jDa=!1;null!=a.x&&this.LTa("x",a.x,b);null!=a.y&&this.LTa("y",a.y,b);null!=a.z&&this.LTa("z",a.z,b);null!=a.s&&this.LTa("s",a.s,b);this.Dx(a.tools);var c=this.tb.Mc().getParent().ga();this.ru.cwa(new _geo.geotoolkit.util.Rect(0,0,c.aa(),c.ba()));
this.Iba.cwa(new _geo.geotoolkit.util.Rect(0,0,c.aa(),c.ba()));this.ru.setData(b);b=this.ru.getData();null==b.colorprovider?this.al({east:this.HGb.east-this.J4c}):this.al({east:this.HGb.east});this.Kv();c=this.tb.Mc().getParent().ga();this.ru.cwa(new _geo.geotoolkit.util.Rect(0,0,c.aa(),c.ba()));this.Iba.cwa(new _geo.geotoolkit.util.Rect(0,0,c.aa(),c.ba()));this.ru.vi();this.pVa(a.trendline);this.Iba.vi();this.jC(this.ru.ga());this.Kv();this.Pa();return this};b.prototype.getData=function(a){var b=
_geo.geotoolkit.oa.Wg.prototype.getData.call(this,a);null!=this.ga()&&(b.bounds=this.ga().ka());b.header=this.Qj();b.x=this.ZPa("x",a);b.y=this.ZPa("y",a);this.ae&&this.Ba.z&&(b.z=this.ZPa("z",a));b.s=this.ZPa("s",a);null!=this.zn()&&(b.colorprovider=this.zn());b.painter=this.MP();b.trendline=this.Ktb();b.labels=this.gsb();b.tools=this.a_();return b};b.prototype.setOptions=function(a){null!=a&&null!=a.painter&&a.painter.defaultcolor&&_geo.geotoolkit.warn("param options.painter.defaultcolor in geotoolkit.widgets.BubbleChart.setOptions() is deprecated since 2.6");
a=_geo.geotoolkit.Sb(a,this.jb());_geo.geotoolkit.oa.Wg.prototype.setData.call(this,a);var b={};null!=a.header&&this.p5(a.header,b);null!=a.painter&&this.WA(a.painter,b);void 0!==a.colorprovider&&this.UA(a.colorprovider,b);null!=a.symbolcache&&this.nyb(a.symbolcache,b);null!=a.labels&&this.zxb(a.labels,b);this.Dx(a.tools);var c=this.tb.Mc().getParent().ga();this.ru.cwa(new _geo.geotoolkit.util.Rect(0,0,c.aa(),c.ba()));this.Iba.cwa(new _geo.geotoolkit.util.Rect(0,0,c.aa(),c.ba()));this.ru.setData(b);
this.ru.vi();this.pVa(a.trendline);this.ru.vi();this.jC(this.ru.ga());this.Kv();return this};b.prototype.jb=function(){var a=_geo.geotoolkit.oa.Wg.prototype.getData.call(this);a.header=this.Qj();null!=this.zn()&&(a.colorprovider=this.zn());a.painter=this.MP();a.trendline=this.Ktb();a.labels=this.gsb();a.tools=this.a_();return a};b.prototype.p6a=function(){return this.qh};b.prototype.wNa=function(a,b,c){var d;null!=c.value.range&&c.value.range.changes===_geo.geotoolkit.data.$.vf&&0===c.value.range.from&&
(this.Soc=!0);if(this.Soc)d={},d.x={datasource:this.q7.x},d.y={datasource:this.q7.y},d.z={datasource:this.q7.z},d.s={datasource:this.q7.s},this.setData(d);else if(a=this.ru.getData().validlength,b=null==this.Ba.z?Math.min(this.Ba.x.length,this.Ba.y.length,this.Ba.s.length):Math.min(this.Ba.x.length,this.Ba.y.length,this.Ba.z.length,this.Ba.s.length),b>a){c=b-a;for(d in this.IC)if(this.IC.hasOwnProperty(d)&&!0===this.IC[d])for(var e=a-1;e<b;++e)this.FF[d].push(Math.log(this.Ba[d][e])/Math.LN10);this.ru.sP(c);
this.jC(this.ru.ga());this.jDa=!0;this.pVa();this.Kv()}else if(b<a){a=c.value.range.from;c=c.value.range.amount;for(d in this.IC)this.IC.hasOwnProperty(d)&&!0===this.IC[d]&&this.FF[d].splice(a,c);this.ru.JGa(a,c);this.jDa=!0;this.pVa();this.Kv()}};b.prototype.EDc=function(){return this.OY.BWb().so()};b.prototype.pVa=function(a){var b={};this.OY||(this.OY=(new _geo.geotoolkit.controls.shapes.WEb).Ka(!1),this.Xo.va(this.OY));null!=a?(null!=a.enable&&this.OY.Ka(a.enable),this.OY.ib()&&(a.regressionmodel||
!a.model&&!a.order||(a.regressionmodel={},a.regressionmodel.type=a.model,a.regressionmodel.order=a.order),a.regressionline||!a.visible&&!a.linestyle||(a.regressionline={},a.regressionline.visible=a.visible,a.regressionline.linestyle=a.linestyle,a.visible=null),this.OY.Sa(this.gWb().xa()),this.OY.setOptions(a),b.datax=a.datax?a.datax:this.Ba.x,b.datay=a.datay?a.datay:this.Ba.y,this.OY.setData(b))):this.OY.ib()&&(b.datax=this.Ba.x,b.datay=this.Ba.y,this.OY.setData(b));return this};b.prototype.Ktb=function(){var a=
{enable:this.OY.ib()};return a=_geo.geotoolkit.Ca(this.OY.jb(),a)};b.prototype.FQa=function(a){function b(a,c){return a.toFixed(2)}function c(a,b){return Math.pow(10,a).toFixed(2)}return this.IC[a]?c:b};b.prototype.LTa=function(a,b,c){var d=!1;null==c&&(d=!0,c={});var e={},g={x:"south",y:"west",z:"east"};if("string"!==typeof a)return this;a=a.toLowerCase();if("x"!==a&&"y"!==a&&"z"!==a&&"s"!==a||null==b)return this;null!=b.datasource&&(b.datasource!==this.q7[a]||this.Soc)&&(b.datasource instanceof
_geo.geotoolkit.data.Or||b.datasource instanceof _geo.geotoolkit.data.nH)&&(this.q7[a]=b.datasource,this.j3c=!0,b.data=b.datasource.toArray(),b.datasource.kb(_geo.geotoolkit.data.Yl.$.Hn,this.wNa.bind(this)),null!=b.datasource.Tb()&&(b.unit=b.datasource.Tb()),null!=b.datasource.getName()&&(b.name=b.datasource.getName()));this.XZa[a]=null!=b.name?b.name:this.XZa[a];this.gl[a]=null!=b.unit?b.unit:this.gl[a];null!=b.logarithmic&&this.IC[a]!==b.logarithmic&&(this.IC[a]=b.logarithmic,"x"===a&&(this.or.Ov(_geo.geotoolkit.ea.Oa.Se,
{textconverter:this.FQa("x")}),this.or.Ov(_geo.geotoolkit.ea.Oa.Yc,{textconverter:this.FQa("x")})),"y"===a&&(this.or.Ov(_geo.geotoolkit.ea.Oa.pd,{textconverter:this.FQa("y")}),this.or.Ov(_geo.geotoolkit.ea.Oa.Rc,{textconverter:this.FQa("y")})));if(null!=b.data){this.Ba[a]=b.data;this.FF[a]=[];for(var r=0;r<b.data.length;++r)this.FF[a].push(Math.log(b.data[r])/Math.LN10);this.jDa=!0}if("z"===a){"number"==typeof b.min&&"number"==typeof b.max&&(this.lv[a]=b.min,this.zu[a]=b.max);if(b.autominmax||null==
this.lv[a]||null==this.zu[a])this.lv[a]=_geo.geotoolkit.util.Math.Ug(this.Ba[a]),this.zu[a]=_geo.geotoolkit.util.Math.Ih(this.Ba[a]);var r=this.ae.An(),t=this.ae.ce(),q=[],m;t.forEach(function(b){m=this.lv[a]+this.zu[a]*(b-this.ae.Tc())/(this.ae.ad()-this.ae.Tc());q.push(m)}.bind(this));this.ae.setColors(q,r);e.min=this.ae.Tc();e.max=this.ae.ad()}this.IC[a]?(null!=b.min&&(c["min"+a]=0===b.min?0:Math.log(b.min)/Math.LN10),null!=b.max&&(c["max"+a]=0===b.max?0:Math.log(b.max)/Math.LN10),c["data"+a]=
this.FF[a]):(null!=b.min&&(c["min"+a]=b.min),null!=b.max&&(c["max"+a]=b.max),c["data"+a]=this.Ba[a]);null!=b.autominmax&&(c["autominmax"+a]=b.autominmax);null!=b.neatlimit&&(c["neatlimit"+a]=b.neatlimit);"s"!==a&&((null==b.label||null==b.label.text)&&b.name&&b.unit&&(r=null!=b.name?b.name:[],b.unit instanceof _geo.geotoolkit.util.ar?(r.push(" ("),r.push(b.unit.be()),r.push(")")):"string"===typeof b.unit&&(r.push(" ("),r.push(b.unit),r.push(")")),b.label.text=r.join("")),null!=b.label&&(null!=this.Pi[a]?
this.Pi[a].ja(b.label):"z"===a?e.axis={title:{text:b.label.text,textstyle:this.Je[a].i4().clone().ja(b.label.textstyle)}}:(r=b.label.textstyle?this.Je[a].i4().clone().ja(b.label.textstyle):this.Je[a].i4(),this.Je[a].mp({title:b.label.text,textstyle:r})),"z"===a&&null!=b.label.text&&(e.titletext=b.label.text)),null!=b.axis&&null!=b.axis.title&&this.Je[a].mp(b.axis.title),null!=b.annotationsize&&(r={},r[g[a]]=b.annotationsize,this.HGb[g[a]]=b.annotationsize,this.al(r)),null!=b.axisticks&&(this.Zo[a].setOptions(b.axisticks),
this.Zo[a+"log"].setOptions(b.axisticks)),null!=b.gridticks&&"z"!==a&&(this.Vx[a].setOptions(b.gridticks),this.Vx[a+"log"].setOptions(b.gridticks)),null!=b.reversed&&("x"===a&&this.tb.Mc().Nv(b.reversed),"y"===a&&this.tb.Mc().mk(b.reversed),"z"===a&&(e.flip=b.reversed)),"z"===a&&(this.qh.setOptions(e),null!=b.legendvisible&&this.qh.Ka(b.legendvisible),this.qh.yg()),this.Kv(),"z"===a&&this.qh.xb(),null!=b.tickgenerator&&(this.Zo[a+(this.IC[a]?"log":"")]=b.tickgenerator),this.r$());this.ru.uFa();if(!d)return this;
this.ru.setData(c);return this};b.prototype.ZPa=function(a,b){a=a.toLowerCase();if("x"!==a&&"y"!==a&&"z"!==a&&"s"!==a)return this;var c={},d=this.ru.getData();!0!==b&&(c.datasource=this.q7[a],c.data=this.Ba[a]);c.unit=this.gl[a];c.name=this.XZa[a];c["min"+a]=d["min"+a];c["max"+a]=d["max"+a];c.autominmax=d["autominmax"+a];c.neatlimit=d["neatlimit"+a];c.logarithmic=this.IC[a];"s"!==a&&(c.label=null!=this.Pi[a]?this.Pi[a].ka():{text:this.Je[a].uo(),textstyle:this.Je[a].i4()},this.Zo[a]&&(c.axisticks=
this.Zo[a].ka()),"z"!==a&&(c.gridticks=this.Vx[a].ka()),d={x:_geo.geotoolkit.ea.Oa.Yc,y:_geo.geotoolkit.ea.Oa.Rc,z:_geo.geotoolkit.ea.Oa.pd},d=this.tb.vb(d[a]),c.annotationsize="x"===a?d.mf():d.yl());"z"===a&&(c.reversed=this.qh.jb().flip);"x"===a&&(c.reversed=this.tb.Mc().MA());"y"===a&&(c.reversed=this.tb.Mc().Cr());"z"===a&&(c.legendvisible=this.qh.ib());return c};b.prototype.VP=function(a,b){var c=[];a["default"].indices.forEach(function(a){c.push(a.index)});if(0===c.length)this.KH=[];else if(1===
c.length&&-1!==this.KH.indexOf(c[0]))this.KH.splice(this.KH.indexOf(c[0]),1);else if(b){var d=this.KH.concat(c);this.KH=d.filter(function(a,b){return d.indexOf(a)===b})}else this.KH=c;var e=this.PC.highlightcolor,g=this.ru.getData(!0),r=g.labels;this.PC=_geo.geotoolkit.Ca(g,this.PC);this.PC.datax=[];this.PC.datay=[];this.PC.datas=[];this.PC.dataz=null;this.PC.labels=[];g=4>this.PC.minsize?2:4;this.PC.minsize+=g;this.PC.maxsize+=g;this.PC.colorprovider=null;this.PC.defaultcolor=e;for(e=0;e<this.KH.length;e++)this.PC.datax.push(this.IC.x?
this.FF.x[this.KH[e]]:this.Ba.x[this.KH[e]]),this.PC.datay.push(this.IC.y?this.FF.y[this.KH[e]]:this.Ba.y[this.KH[e]]),this.PC.datas.push(this.IC.s?this.FF.s[this.KH[e]]:this.Ba.s[this.KH[e]]),0<r.length&&this.PC.labels.push(r[this.KH[e]]);this.Iba.uFa();0===this.KH.length?this.Iba.setActive(!1):this.Iba.setActive(!0);this.Iba.setData(this.PC);this.Iba.vi()};b.prototype.gWb=function(){return this.Xo};b.prototype.pRa=function(){return this.Fud};b.prototype.VAc=function(){null==this.KH&&(this.KH=[]);
return this.KH};b.prototype.p5=function(a){if(null==a)return this;var b={};null!=a.title&&this.lg.ja(a.title);null!=a.annotationsize&&(b.north=a.annotationsize);this.al(b);this.Kv();return this};b.prototype.Qj=function(){var a={};null!=this.lg&&(a.title=this.lg.ka());a.annotationsize=this.tb.vb(_geo.geotoolkit.ea.Oa.Se).mf();return a};b.prototype.zxb=function(a,b){var c=!1;null==b&&(c=!0,b={});if(a.data instanceof _geo.geotoolkit.data.xq||a.data instanceof _geo.geotoolkit.data.pp)a.data=a.datasource.toArray();
Array.isArray(a.data)&&(b.labels=a.data);b.labelvisible=a.visible;b.labeltextstyle=a.textstyle;b.labellocation=a.location;b.secondarylocation=a.secondarylocation;b.labelpadding=a.padding;if(!c)return this;this.ru.setData(b);return this};b.prototype.gsb=function(){var a={},b=this.ru.getData();a.visible=b.labelvisible;a.textstyle=b.labeltextstyle;a.location=b.labellocation;a.secondarylocation=b.secondarylocation;a.padding=b.labelpadding;return a};b.prototype.WA=function(a,b){null!=a&&a.defaultcolor&&
_geo.geotoolkit.warn("param data.defaultcolor in geotoolkit.widgets.BubbleChart.setPainter() is deprecated since 2.6");var c=!1;null==b&&(c=!0,b={});b=_geo.geotoolkit.Ca(a,b);this.PC=_geo.geotoolkit.Ca(a,this.PC);this.ru.uFa();if(!c)return this;this.ru.setData(b);return this};b.prototype.MP=function(){var a=this.ru.getData();return{symbol:a.symbol,minsize:a.minsize,maxsize:a.maxsize,sizebin:a.sizebin,defaultcolor:a.defaultcolor,defaultfillstyle:a.defaulfillstyle,defaultlinestyle:a.defaultlinestyle}};
b.prototype.UA=function(a,b){if(null==a)return this;var c=!1;null==b&&(c=!0,b={});if(a instanceof _geo.geotoolkit.util.Ie)this.ae=a;else if(null!=a.type){var d=_geo.geotoolkit.util.Ie.r6a(a.type);this.ae=d=d.ab(a)}b.colorprovider=this.ae;this.qh.setOptions({colorprovider:this.ae});this.qh.xb();this.qh.yg();this.ru.uFa();if(!c)return this;this.ru.setData(b);return this};b.prototype.zn=function(){return this.ae};b.prototype.nyb=function(a,b){var c=!1;null==b&&(c=!0,b={});null!=a.width&&(b.cachewidthlimit=
a.width);null!=a.height&&(b.cacheheightlimit=a.height);this.ru.uFa();if(!c)return this;this.ru.setData(b);return this};b.prototype.Dx=function(a){if(null==a)return this;null!=a.crosshair&&(null!=a.crosshair.north&&(a.crosshair.north.textconverter=null),null!=a.crosshair.south&&(a.crosshair.south.textconverter=null),null!=a.crosshair.east&&(a.crosshair.east.textconverter=null),null!=a.crosshair.west&&(a.crosshair.west.textconverter=null));null!=a.tooltip&&(null!=a.tooltip.enabled&&(!0===a.tooltip.enabled?
this.kkb.cc(!0):this.kkb.cc(!1)),this.knb=Array.isArray(a.tooltip.displayprops)?a.tooltip.displayprops:this.knb,this.inb=a.tooltip.fillstyle instanceof _geo.geotoolkit.attributes.Fa?a.tooltip.fillstyle:this.inb,this.jnb=a.tooltip.linestyle instanceof _geo.geotoolkit.attributes.Aa?a.tooltip.linestyle:this.jnb,this.lnb=a.tooltip.textstyle instanceof _geo.geotoolkit.attributes.eb?a.tooltip.textstyle:this.lnb);_geo.geotoolkit.oa.Wg.prototype.Dx.call(this,a);return this};b.prototype.a_=function(){var a=
_geo.geotoolkit.oa.Wg.prototype.a_.call(this);a.selection={};a.selection.enable=this.qw.isEnabled();a.selection.resetselection=this.QNa;a.tooltip={};a.tooltip.enable=this.kkb.isEnabled();a.tooltip.displayprops=this.knb;a.tooltip.fillstyle=this.inb;a.tooltip.linestyle=this.jnb;a.tooltip.textstyle=this.lnb;return a};b.prototype.dispose=function(){for(var a in this.q7)this.q7.hasOwnProperty(a)&&null!=this.q7[a]&&this.q7[a].hb(_geo.geotoolkit.data.Yl.$.Hn,this.wNa);_geo.geotoolkit.oa.Wg.prototype.dispose.call(this)};
return b}();
_geo.geotoolkit.oa.nL.t9b=function(){function b(a,b){_geo.geotoolkit.controls.shapes.kH.call(this,a);var d=4,e=d,c;c="";"string"==typeof b.unit&&(c=" ("+b.unit+") ");b.unit instanceof _geo.geotoolkit.util.ar&&(c=" ("+b.unit.be()+") ");c=b.axisname+": "+b.value+c;this.Lb=new _geo.geotoolkit.scene.shapes.Text;this.Lb.ja({text:c,ax:d,ay:e});this.Lb.Cd(_geo.geotoolkit.util.Da.Gg);this.Md=b.textstyle instanceof _geo.geotoolkit.attributes.eb?b.textstyle:new _geo.geotoolkit.attributes.eb;c=_geo.geotoolkit.renderer.TextMetrics.measureText(c,this.Md);
e=e+c.ba()+d;d=2*d+c.aa();this.Ad(!0);this.va(this.Lb);this.zk(e).Ul(d).Qf(!0)}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.shapes.kH);_geo.geotoolkit.da(b,"geotoolkit.widgets.BubbleChart.BubbleWidgetTooltipLegendItem");return b}();
_geo.geotoolkit.oa.AT=function(){function b(a,b){_geo.geotoolkit.scene.Group.call(this,a);var d={normal:{textstyle:(new _geo.geotoolkit.attributes.eb({font:"bold 8px Arial"})).setColor("black"),linestyle:new _geo.geotoolkit.attributes.Aa({color:"gray",width:1}),fillstyle:new _geo.geotoolkit.attributes.Fa("#f5f5f5")},disabled:{textstyle:(new _geo.geotoolkit.attributes.eb({font:"8px Arial"})).setColor("gray"),linestyle:new _geo.geotoolkit.attributes.Aa({color:"gray",width:1}),fillstyle:new _geo.geotoolkit.attributes.Fa("#DDDDDD")},
pressed:{textstyle:(new _geo.geotoolkit.attributes.eb({font:"bold 8px Arial"})).setColor("black"),linestyle:new _geo.geotoolkit.attributes.Aa({color:"gray",width:3}),fillstyle:new _geo.geotoolkit.attributes.Fa("#d3d3d3")},hover:{textstyle:(new _geo.geotoolkit.attributes.eb({font:"bold 8px Arial"})).setColor("black"),linestyle:new _geo.geotoolkit.attributes.Aa({color:"gray",width:1}),fillstyle:new _geo.geotoolkit.attributes.Fa("#e3e3FF")}};null==a&&(a={});null==a.styles&&(a.styles={});a.styles.normal=
_geo.geotoolkit.Ca(a.styles.normal,d.normal);a.styles.disabled=_geo.geotoolkit.Ca(a.styles.disabled,d.disabled);a.styles.pressed=_geo.geotoolkit.Ca(a.styles.pressed,d.pressed);a.styles.hover=_geo.geotoolkit.Ca(a.styles.hover,d.hover);d=_geo.geotoolkit.Ca(a,{width:15,height:15,text:"",toggle:null!=b&&null!=b.Rla?b.Rla():!1,textanchor:_geo.geotoolkit.util.Da.lb,disabled:!1,state:0,padding:[5,3,5,3]});this.state=d.state;this.disabled=d.disabled;this.XRa=!1;this.T6c=d.toggle;this.zi=d.styles;this.iLb=
d.onClick;this.ve=d.padding;this.hl=b;this.Cg(d);this.Qf(!0);this.Ad(!0)}_geo.geotoolkit.fa(b,_geo.geotoolkit.scene.Group);_geo.geotoolkit.da(b,"geotoolkit.widgets.Button");b.Sy={Rfb:0,lEb:1};b.prototype.Cg=function(a){this.va([this.tk=new _geo.geotoolkit.scene.shapes.lc({left:0,top:0,right:1,bottom:1}),this.Lb=(new _geo.geotoolkit.scene.shapes.Text({text:a.text,ax:.5,ay:.5})).Cd(a.textanchor)]);this.Izb()};b.prototype.Izb=function(){var a=this.zi.normal;!0===this.XRa&&(a=this.zi.hover);this.state===
b.Sy.lEb&&(a=this.zi.pressed);this.disabled&&(a=this.zi.disabled);this.tk.ua(a.linestyle.clone()).ta(a.fillstyle.clone());this.Lb.wb(a.textstyle.clone());var g=_geo.geotoolkit.renderer.TextMetrics.measureText(this.Lb.me(),this.Lb.Ib()),a=g.aa()+this.ve[0]+this.ve[2]+1,g=g.ba()+this.ve[1]+this.ve[3]+1;this.Sa(new _geo.geotoolkit.util.Rect(0,0,a,g)).Ul(a).zk(g);this.tk.zb(0,0,a,g);this.Lb.pq(a/2);this.Lb.Wq(g/2);this.ma()};b.prototype.Mm=function(){return this.state};b.prototype.me=function(){return null==
this.Lb?null:this.Lb.me()};b.prototype.setState=function(a){this.state=a;this.Izb();return this};b.prototype.Rla=function(){return this.T6c};b.prototype.mxb=function(a){this.XRa=a;this.Izb();return this};b.prototype.fHc=function(){return this.disabled};b.prototype.DNc=function(a){this.disabled=a;this.Izb();return this};b.prototype.Wld=function(){null!=this.hl&&!0===this.hl.Rla()&&this.hl.hzb(_geo.geotoolkit.oa.AT.Sy.Rfb)};b.prototype.click=function(){if(!1===this.disabled){this.Wld();var a=0===this.state?
1:0;1===a&&null!=this.iLb&&"function"===typeof this.iLb&&this.iLb.call(this,this)}};b.prototype.kzd=function(){};return b}();
_geo.geotoolkit.oa.rxa=function(){function b(a){_geo.geotoolkit.oa.Qm.call(this,a);this.la=_geo.geotoolkit.Ca(a,{layout:_geo.geotoolkit.ea.No,toggle:!1});this.j7=[];this.J9(a);this.Sg();this.Qf(!0)}_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Qm);_geo.geotoolkit.da(b,"geotoolkit.widgets.ButtonWidget");b.prototype.J9=function(a){var b=[];this.jh();a.buttons.forEach(function(a){a=new _geo.geotoolkit.oa.AT(a,this);b.push(a)}.bind(this));this.Ad(!0).va(b);this.j7=b;this.M7b();this.erd()};b.prototype.erd=function(){var a;
a=new this.la.layout(this.xa());a.add(this.j7);a.ea()};b.prototype.M7b=function(){var a=0,b=0,d=0,e=0;this.j7.forEach(function(c){var f=c.xa().aa();c=c.xa().ba();a=a>f?a:f;b=b>c?b:c;d+=f;e+=c});switch(this.la.layout){case _geo.geotoolkit.ea.No:this.Ul(d);this.zk(b);break;case _geo.geotoolkit.ea.gv:this.Ul(a);this.zk(e);break;default:this.Ul(d);this.zk(e);break}};b.prototype.Sg=function(){var a;this.rr(a=new _geo.geotoolkit.oa.u9b(this));this.Eu=a;return this};b.prototype.Rla=function(){return this.la.toggle};
b.prototype.hzb=function(a){this.j7.forEach(function(b){b.setState(a)})};b.prototype.cua=function(){return this.Eu};b.prototype.qyc=function(a){return null==a||null==this.j7||0===this.j7.length||this.j7.length<a?null:this.j7[a]};b.prototype.ryc=function(a){if(null==a||null==this.j7||0===this.j7.length)return null;var b=this.j7.filter(function(b){return a===b.me()});return 0<b.length?b[0]:null};return b}();
_geo.geotoolkit.oa.u9b=function(){function b(a){this.Eh=new _geo.geotoolkit.selection.am;var b={pointerdown:this.xf.bind(this),pointermove:this.Wd.bind(this),pointerup:this.Ae.bind(this)};this.yAa=a;a={slots:b,layer:a,name:"buttongrouptool"};_geo.geotoolkit.controls.ia.fc.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.ia.fc);_geo.geotoolkit.da(b,"geotoolkit.widgets.ButtonGroupTool");b.prototype.Gwb=function(a,b){var d=this.yAa,e=this.Qe(d,a),c=_geo.geotoolkit.util.Ga.hf(d.xa(),d.ga(),
!1,!1);c.cb(e,e);d=this.Eh.select(d,e.getX(),e.getY(),2);return d.filter(function(a){return a instanceof b})};b.prototype.xf=function(a){var b=this.Gwb(a,_geo.geotoolkit.oa.AT);a=this.Gwb(a,_geo.geotoolkit.oa.rxa);this.Bmb=b;null!=b&&0<b.length&&(b[0].click(),a[0].M7b())};b.prototype.Wd=function(a){var b=this.Gwb(a,_geo.geotoolkit.oa.AT);a=this.Gwb(a,_geo.geotoolkit.oa.rxa);b!==this.fJb&&(null!=this.fJb&&this.fJb[0].mxb(!1),null!=b&&0<b.length&&(b[0].mxb(!0),this.fJb=b,Array.isArray(a)&&0<a.length&&
a[0].M7b()))};b.prototype.Ae=function(a){null!=this.Bmb&&0!==this.Bmb.length&&!0!==this.Bmb[0].Rla()&&this.Bmb[0].setState(0)};return b}();
(function(){function b(){_geo.geotoolkit.oa.Yf.YT.call(this)}function a(){_geo.geotoolkit.oa.Yf.O6.call(this);this.dd=new _geo.geotoolkit.util.Ga}_geo.geotoolkit.fa(a,_geo.geotoolkit.oa.Yf.O6);a.prototype.getData=function(a,b,c){return _geo.geotoolkit.oa.Yf.O6.prototype.getData.call(this,a.Mc(),b,c)};a.prototype.setData=function(a,b,c,g){g=g[this.getName()];if((!g||!g.setdata)&&a.Mc()){var k=a.Mc().Yb()?a.Mc().Yb():new _geo.geotoolkit.util.Ga;g=k.Ab();var h=k.ti(),l=k.Pb(),k=k.Th();c===_geo.geotoolkit.util.Mb.$b?
(l=b.Pb(),k=b.Th()):c===_geo.geotoolkit.util.Mb.ic&&(g=b.Ab(),h=b.ti());this.dd.kc(g,0,0,l,h,k);a.rQ(this.dd)}};a.prototype.connect=function(a,b,c){_geo.geotoolkit.oa.Yf.O6.prototype.connect.call(this,a,b.Mc(),function(a){c.call(b,a,b)})};a.prototype.disconnect=function(a,b,c){_geo.geotoolkit.oa.Yf.O6.prototype.disconnect.call(this,a,b.Mc(),function(a){c.call(b,a,b)})};_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Yf.YT);b.prototype.getData=function(a,b,c){var g=_geo.geotoolkit.oa.Yf.vF.prototype.getData.call(this,
a.Mc(),b,c);null==g&&"function"===typeof a.n8a&&(a=a.n8a(c?c.ignoremodellimits:!1),null!=a&&(b=b===_geo.geotoolkit.util.Mb.ic,g=c.orientation===_geo.geotoolkit.util.Mb.$b?new _geo.geotoolkit.util.Range(b?a.sa():a.qa(),b?a.za():a.wa()):new _geo.geotoolkit.util.Range(b?a.qa():a.sa(),b?a.wa():a.za())));return g};b.prototype.setData=function(a,b,c,g){g=g[this.getName()];g&&g.setdata||(g=a.n8a(),null!=g&&(b=c===_geo.geotoolkit.util.Mb.$b?new _geo.geotoolkit.util.Rect(g.sa(),b.gb(),g.za(),b.nb()):new _geo.geotoolkit.util.Rect(b.gb(),
g.qa(),b.nb(),g.wa()),a.Byb(b)))};b.prototype.connect=function(a,b,c){_geo.geotoolkit.oa.Yf.YT.prototype.connect.call(this,a,b.Mc(),function(a){c.call(b,a,b)})};b.prototype.disconnect=function(a,b,c){_geo.geotoolkit.oa.Yf.YT.prototype.disconnect.call(this,a,b.Mc(),function(a){c.call(b,a,b)})};var g=_geo.geotoolkit.oa.Yf.Mha.Za();g.BW(new a,_geo.geotoolkit.oa.Wg.getClassName());g.BW(new b,_geo.geotoolkit.oa.Wg.getClassName())})();
_geo.geotoolkit.oa.data.L$b=function(){function b(a){_geo.geotoolkit.util.EventDispatcher.call(this);a=_geo.geotoolkit.Ca(a,{datatable:null,sortingarrowoptions:null},!0);this.Ba=a.datatable;this.$La=new _geo.geotoolkit.data.lu(a.datatable);"string"===typeof a.sortingarrowoptions?this.Skc=this.Dqc=this.Rkc=this.Cqc=a.sortingarrowoptions:(a=_geo.geotoolkit.Ca(a.sortingarrowoptions,{uparrowfillcolor:"black",downarrowfillcolor:"black",uparrowlinecolor:"black",downarrowlinecolor:"black"},!0),this.Cqc=
"string"===typeof a.uparrowfillcolor?a.uparrowfillcolor:"black",this.Rkc="string"===typeof a.downarrowfillcolor?a.downarrowfillcolor:"black",this.Dqc="string"===typeof a.uparrowlinecolor?a.uparrowlinecolor:"black",this.Skc="string"===typeof a.downarrowlinecolor?a.downarrowlinecolor:"black");this.RBa=this.ft=null;this.JF=[];this.iad();this.Cg()}var a=0;_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.widgets.data.DataTableAdapter");b.prototype.Cg=function(){var a=
this;a.indexvisible=!1;a.indextitle="Index";a.contentprovider=this;a.headerprovider=this;a.indexprovider=this;a.headerformatprovider=this;a.rows=this.T7a();a.cols=this.t6a();return this};b.prototype.aXb=function(){return this.RBa};b.prototype.T7a=function(){return this.$La.Zj()};b.prototype.t6a=function(){return this.$La.Av()};b.prototype.VSa=function(a,b){this.qwd=!0};b.prototype.nta=function(a,b){return this.$La.hi(a).getValue(b)};b.prototype.Ovb=function(a,b){this.rwd=!0};b.prototype.uS=function(a){return this.JF[a]};
b.prototype.NAc=function(a,b){var e=this.aXb();if(null==e||e.column!==a)return b;b.text.bounds.fe(-10,0);var c=b.icon.bounds.za(),f=b.icon.bounds.setX(c-16).setY(4).qb(12),c=f.Pc(),f=f.ba();b.icon.value=!0===e.reverse?(new _geo.geotoolkit.scene.shapes.Path).moveTo(c,6).lineTo(c+3,9).lineTo(c-3,9).lineTo(c,6).ua({color:this.Dqc,pixelsnapmode:{x:!0,y:!0}}).ta(this.Cqc):(new _geo.geotoolkit.scene.shapes.Path).moveTo(c,f-6).lineTo(c+3,f-9).lineTo(c-3,f-9).lineTo(c,f-6).ua({color:this.Skc,pixelsnapmode:{x:!0,
y:!0}}).ta(this.Rkc);return b};b.prototype.iad=function(){for(var a=0;a<this.Ba.Av();++a){var b=this.Ba.hi(a).getName();if(""===b||null==b)b="Column "+(a+1);this.JF[a]=b}};b.prototype.rRc=function(a,b){function e(a,e){return b.apply(this,[e,a])}null==this.RBa||this.RBa.column!==a?this.RBa={column:a,reverse:!1}:this.RBa.reverse=!this.RBa.reverse;!0===this.RBa.reverse?this.Ba.sort(a,e):this.Ba.sort(a,b)};b.prototype.filter=function(b,d){this.$La.hi(a).yPb();if("function"!==typeof d){var e=function(a,
b){return-1!==b.toString().toLowerCase().indexOf(d.toLowerCase())};""!==d&&this.$La.hi(b).U2(e.bind(this))}else this.$La.hi(b).U2(d.bind(this));a=b;return this};return b}();
(function(){var b="geotoolkit",a="widgets",g="Events",d="Histogram",e="tools",c="TableView",f=_geo.geotoolkit.wr,k=_geo.geotoolkit.$r,h=null,l=null;f(b+"."+a+".Util",_geo.geotoolkit.oa.Bb);f(b+"."+a+".Util.css",_geo.geotoolkit.oa.Bb.pg);f(b+"."+a+".sync."+g+"",_geo.geotoolkit.oa.Yf.$);f(b+"."+a+".sync."+g+".ItemChanged",_geo.geotoolkit.oa.Yf.$.mDb);f(b+"."+a+".sync.SyncMode",_geo.geotoolkit.oa.Yf.jba);f(b+"."+a+".sync.SyncMode.VisibleRange",(l=_geo.geotoolkit.oa.Yf.jba).fza);f(b+"."+a+".sync.SyncMode.Scale",
l.Voa);f(b+"."+a+".sync.SyncMode.Custom",l.PQ);k(h=_geo.geotoolkit.oa.Yf.Phc.prototype,"getDirection",h.Mk,{Mk:0});k(h,"getOptions",h.jb,{jb:0});k(h,"connect",h.connect,{connect:0});k(h,"disconnect",h.disconnect,{disconnect:0});f(b+"."+a+".sync.SyncOperation",(l=_geo.geotoolkit.oa.Yf).vF);k(h=_geo.geotoolkit.oa.Yf.vF.prototype,"getName",h.getName,{getName:0});k(h,"connect",h.connect,{connect:0});k(h,"disconnect",h.disconnect,{disconnect:0});k(h,"getData",h.getData,{getData:0});k(h,"setData",h.setData,
{setData:0});f(b+"."+a+".sync.SyncOperationRegistry",l.Mha);k(h=_geo.geotoolkit.oa.Yf.Mha.prototype,"registerOperation",h.BW,{BW:0});k(h,"getOperation",h.cWb,{cWb:0});f(b+"."+a+".sync.SyncOperationRegistry.getInstance",_geo.geotoolkit.oa.Yf.Mha.Za);f(b+"."+a+".sync.ViewSynchronizer",_geo.geotoolkit.oa.Yf.Ehb);k(h=_geo.geotoolkit.oa.Yf.Ehb.prototype,"connect",h.connect,{connect:0});k(h,"send",h.send,{send:0});k(h,"synchronize",h.wQ,{wQ:0});k(h,"disconnect",h.disconnect,{disconnect:0});f(b+"."+a+".templates.Registry",
_geo.geotoolkit.oa.Ff.ue);f(b+"."+a+".templates.Registry.getDefault",_geo.geotoolkit.oa.Ff.ue.lq);f(b+"."+a+".templates."+d+"Registry",_geo.geotoolkit.oa.Ff.Deb);f(b+"."+a+".templates.Registry.getInstance",_geo.geotoolkit.oa.Ff.ue.Za);f(b+"."+a+".templates.Multi"+d+"sRegistry",_geo.geotoolkit.oa.Ff.UDb);f(b+"."+a+".templates.Multi"+d+"sRegistry.getInstance",_geo.geotoolkit.oa.Ff.UDb.Za);f(b+"."+a+".timeseries.Util",_geo.geotoolkit.oa.Kc.Bb);f(b+"."+a+".timeseries.Util.getWidgetDefaultOptions",(l=
_geo.geotoolkit.oa.Kc.Bb).PFc);f(b+"."+a+".timeseries.Util.getUniqueId",l.rFc);f(b+"."+a+".timeseries.Util.getPainterByString",l.Nsb);k(h=_geo.geotoolkit.oa.Kc.Ggb.prototype,"setRect",h.zb,{zb:0});k(h,"getPreferredSize",h.Pl,{Pl:0});k(h,"layout",h.ea,{ea:0});f(b+"."+a+".timeseries.TimeSeriesObjectBase",_geo.geotoolkit.oa.Kc.xF);f(b+"."+a+".timeseries.TimeSeriesObjectBase."+g+".AxisPositionChanged",(l=_geo.geotoolkit.oa.Kc.xF.$).Vna);f(b+"."+a+".timeseries.TimeSeriesObjectBase."+g+".AxisUpdated",l.AIa);
k(h=_geo.geotoolkit.oa.Kc.xF.prototype,"getId",h.od,{od:0});k(h,"getAxisOptions",h.gI,{gI:0});k(h,"setAxisOptions",h.zN,{zN:0});k(h,"dispose",h.dispose,{dispose:0});f(b+"."+a+".timeseries.TimeSeriesObject",_geo.geotoolkit.oa.Kc.wF);f(b+"."+a+".timeseries.TimeSeriesObject."+g+".AxisPositionChanged",(l=_geo.geotoolkit.oa.Kc.wF.$).Vna);f(b+"."+a+".timeseries.TimeSeriesObject."+g+".LegendItemChanged",l.dfb);f(b+"."+a+".timeseries.TimeSeriesObject."+g+".CurveAxisChanged",l.Odb);f(b+"."+a+".timeseries.TimeSeriesObject."+
g+".DataSet",l.Kxa);f(b+"."+a+".timeseries.TimeSeriesObject."+g+".LimitsUpdated",l.MJa);k(h=_geo.geotoolkit.oa.Kc.wF.prototype,"getData",h.getData,{getData:0});k(h,"setData",h.setData,{setData:0});k(h,"setCurveOptions",h.$fa,{$fa:0});k(h,"getCurveOptions",h.Ls,{Ls:0});k(h,"setSymbolOptions",h.GUa,{GUa:0});k(h,"getSymbolOptions",h.KEc,{KEc:0});k(h,"getCurveLimitsGroupOptions",h.ETb,{ETb:0});k(h,"setCurveLimitsGroupOptions",h.UTa,{UTa:0});k(h,"getLegendOptions",h.OBc,{OBc:0});k(h,"setLegendOptions",
h.Mab,{Mab:0});k(h,"setTooltipOptions",h.zyb,{zyb:0});k(h,"getTooltipOptions",h.hFc,{hFc:0});k(h,"dispose",h.dispose,{dispose:0});f(b+"."+a+".timeseries.TimeSeriesObjectGroup",(l=_geo.geotoolkit.oa.Kc).JFb);k(h=_geo.geotoolkit.oa.Kc.JFb.prototype,"setMin",h.BN,{BN:0});k(h,"getMin",h.Ug,{Ug:0});k(h,"setMax",h.UI,{UI:0});k(h,"getMax",h.Ih,{Ih:0});k(h,"setShareLimits",h.eQc,{eQc:0});k(h,"getShareLimits",h.RWb,{RWb:0});k(h,"setAxisOptions",h.zN,{zN:0});k(h,"addObject",h.ge,{ge:0});k(h,"removeObject",
h.I$a,{I$a:0});f(b+"."+a+".timeseries.TimeSeriesShape",l.ZT);f(b+"."+a+".timeseries.TimeSeriesShape."+g+"",_geo.geotoolkit.oa.Kc.ZT.$);f(b+"."+a+".timeseries.TimeSeriesShape."+g+".micropositionChanged",_geo.geotoolkit.oa.Kc.ZT.$.Wub);k(h=_geo.geotoolkit.oa.Kc.ZT.prototype,"updateBounds",h.Oi,{Oi:0});k(h,"getContentsTransform",h.ee,{ee:0});k(h,"getWorldTransform",h.mb,{mb:0});k(h,"setMicroPosition",h.FD,{FD:0});k(h,"getMicroPosition",h.SQa,{SQa:0});k(h,"setBorderLineStyle",h.fF,{fF:0});k(h,"getBorderLineStyle",
h.jz,{jz:0});k(h,"render",h.render,{render:0});k(h=_geo.geotoolkit.oa.Kc.khb.prototype,"setBounds",h.Ea,{Ea:0});k(h,"updateBounds",h.Oi,{Oi:0});k(h,"getContentsTransform",h.ee,{ee:0});k(h,"setMicroPosition",h.FD,{FD:0});k(h,"updateState",h.Pa,{Pa:0});f(b+"."+a+".timeseries.TimeSeriesTooltipObject",_geo.geotoolkit.oa.Kc.VKa);f(b+"."+a+".timeseries.TimeSeriesTooltipObject."+g+"",_geo.geotoolkit.oa.Kc.VKa.$);f(b+"."+a+".timeseries.TimeSeriesTooltipObject."+g+".Change",_geo.geotoolkit.oa.Kc.VKa.$.Iy);
k(h=_geo.geotoolkit.oa.Kc.VKa.prototype,"setData",h.setData,{setData:0});k(h,"getData",h.getData,{getData:0});f(b+"."+a+".timeseries.GroupTool",(l=_geo.geotoolkit.oa.Kc).BCb);k(h=_geo.geotoolkit.oa.Kc.BCb.prototype,"onMouseDown",h.xf,{xf:0});k(h,"onMouseMove",h.Wd,{Wd:0});k(h,"onMouseUp",h.Ae,{Ae:0});f(b+"."+a+".timeseries.ScaledData",l.h1);k(h=_geo.geotoolkit.oa.Kc.h1.prototype,"setConversion",h.LG,{LG:0});k(h,"setInterpolation",h.setInterpolation,{setInterpolation:0});k(h,"getSource",h.Bp,{Bp:0});
k(h,"getMinPosition",h.lD,{lD:0});k(h,"getMaxPosition",h.kD,{kD:0});k(h,"getMinValue",h.Tc,{Tc:0});k(h,"getMaxValue",h.ad,{ad:0});k(h,"getSamples",h.wg,{wg:0});k(h,"getLength",h.getLength,{getLength:0});k(h,"isForwardOnly",h.gn,{gn:0});k(h,"getDataOrder",h.sh,{sh:0});k(h,"convertValueFromSource",h.wP,{wP:0});k(h,"convertValueToSource",h.uM,{uM:0});k(h,"getDataTimeStamp",h.mrb,{mrb:0});k(h,"getIndexRange",h.cs,{cs:0});f(b+"."+a+".timeseries.ScaledData.findIndex",_geo.geotoolkit.oa.Kc.h1.findIndex);
k(h,"getMinWrapLevel",h.rt,{rt:0});k(h,"setMinWrapLevel",h.CN,{CN:0});k(h,"getMaxWrapLevel",h.Pu,{Pu:0});k(h,"setMaxWrapLevel",h.AN,{AN:0});k(h,"getValue",h.getValue,{getValue:0});k(h,"getValueInternal",h.gFa,{gFa:0});k(h,"getProperties",h.ka,{ka:0});k(h,"setProperties",h.ja,{ja:0});k(h,"isOutdated",h.LS,{LS:0});f(b+"."+a+".timeseries.TimeSeriesLine",_geo.geotoolkit.oa.Kc.uH);f(b+"."+a+".timeseries.TimeSeriesLine."+g+"",_geo.geotoolkit.oa.Kc.uH.$);f(b+"."+a+".timeseries.TimeSeriesLine."+g+".Updated",
(l=_geo.geotoolkit.oa.Kc.uH.$).vf);f(b+"."+a+".timeseries.TimeSeriesLine."+g+".LimitsChanged",l.LJa);k(h=_geo.geotoolkit.oa.Kc.uH.prototype,"getMin",h.Ug,{Ug:0});k(h,"setMin",h.BN,{BN:0});k(h,"getMax",h.Ih,{Ih:0});k(h,"setMax",h.UI,{UI:0});k(h,"setOptimizationType",h.gF,{gF:0});k(h,"setOptimization",h.nC,{nC:0});k(h,"getSamples",h.wg,{wg:0});k(h,"getSamplesExt",h.rRa,{rRa:0});k(h,"getData",h.getData,{getData:0});k(h,"setData",h.setData,{setData:0});k(h,"getInterpolationType",h.GE,{GE:0});k(h,"setInterpolationType",
h.mC,{mC:0});k(h,"updateFromData",h.OD,{OD:0});k(h,"setDrawOutOfRangeValues",h.$Ta,{$Ta:0});k(h,"getDrawOutOfRangeValues",h.bla,{bla:0});k(h,"isLogarithmicScale",h.jN,{jN:0});k(h,"setLogarithmicScale",h.N_,{N_:0});k(h,"updateScaledData",h.jF,{jF:0});k(h,"getDataChangedHandler",h.y6a,{y6a:0});k(h,"updateBounds",h.Oi,{Oi:0});k(h,"getBounds",h.ga,{ga:0});k(h,"checkCollision",h.ie,{ie:0});k(h,"setCurveVisible",h.y2b,{y2b:0});k(h,"getCurveVisible",h.izc,{izc:0});k(h,"render",h.render,{render:0});k(h,"createMarker",
h.nQb,{nQb:0});k(h,"dispose",h.dispose,{dispose:0});f(b+"."+a+".timeseries.ReferenceLine",_geo.geotoolkit.oa.Kc.rKa);f(b+"."+a+".timeseries.ReferenceLine.Type",_geo.geotoolkit.oa.Kc.rKa.fv);f(b+"."+a+".timeseries.ReferenceLine.Type.Top",(l=_geo.geotoolkit.oa.Kc.rKa.fv).Ub);f(b+"."+a+".timeseries.ReferenceLine.Type.Value",l.Ox);f(b+"."+a+".timeseries.ReferenceLine.Type.Bottom",l.Zf);k(h=_geo.geotoolkit.oa.Kc.rKa.prototype,"getSamples",h.wg,{wg:0});k(h,"updateBounds",h.Oi,{Oi:0});k(h,"getBounds",h.ga,
{ga:0});k(h,"getData",h.getData,{getData:0});k(h,"getModelLimits",h.xa,{xa:0});k(h,"getInvalidateMethod",h.nc,{nc:0});k(h,"dispose",h.dispose,{dispose:0});f(b+"."+a+".timeseries.TimeSeriesFill",_geo.geotoolkit.oa.Kc.epa);f(b+"."+a+".timeseries.TimeSeriesFill.FillType",_geo.geotoolkit.oa.Kc.epa.Xg);f(b+"."+a+".timeseries.TimeSeriesFill.FillType.Single",(l=_geo.geotoolkit.oa.Kc.epa.Xg).fR);f(b+"."+a+".timeseries.TimeSeriesFill.FillType.Dual",l.F0);f(b+"."+a+".timeseries.TimeSeriesFill.FillType.Positive",
l.qu);f(b+"."+a+".timeseries.TimeSeriesFill.FillType.Negative",l.Ft);f(b+"."+a+".timeseries.TimeSeriesFill.FillType.PositiveAndNegative",l.yYa);k(h=_geo.geotoolkit.oa.Kc.epa.prototype,"getFillType",h.S3,{S3:0});k(h,"setFillType",h.J_,{J_:0});k(h,"getFillStyle",h.sb,{sb:0});k(h,"setFillStyle",h.ta,{ta:0});k(h,"getPositiveFillStyle",h.CK,{CK:0});k(h,"setPositiveFillStyle",h.uQ,{uQ:0});k(h,"getNegativeFillStyle",h.BK,{BK:0});k(h,"setNegativeFillStyle",h.tQ,{tQ:0});k(h,"getBounds",h.ga,{ga:0});k(h,"render",
h.render,{render:0});k(h,"dispose",h.dispose,{dispose:0});f(b+"."+a+".timeseries.Annotation",(l=_geo.geotoolkit.oa.Kc).saa);k(h=_geo.geotoolkit.oa.Kc.saa.prototype,"setOptions",h.setOptions,{setOptions:0});k(h,"getOptions",h.jb,{jb:0});k(h,"setProperties",h.ja,{ja:0});k(h,"getProperties",h.ka,{ka:0});k(h,"dispose",h.dispose,{dispose:0});f(b+"."+a+".timeseries.AnnotationLine",l.PVa);k(h=_geo.geotoolkit.oa.Kc.PVa.prototype,"setOptions",h.setOptions,{setOptions:0});k(h,"getOptions",h.jb,{jb:0});k(h,
"setProperties",h.ja,{ja:0});k(h,"getProperties",h.ka,{ka:0});f(b+"."+a+".timeseries.TimeSeriesLineLegendItem",l.lhb);k(h=_geo.geotoolkit.oa.Kc.lhb.prototype,"setOptions",h.setOptions,{setOptions:0});k(h,"setProperties",h.ja,{ja:0});k(h,"updateGeometry",h.uh,{uh:0});k(h,"getUpdateMethod",h.ki,{ki:0});k(h,"dispose",h.dispose,{dispose:0});f(b+"."+a+".timeseries.TimeSeriesTooltipLegendItem",l.mhb);k(h=_geo.geotoolkit.oa.Kc.mhb.prototype,"setOptions",h.setOptions,{setOptions:0});k(h,"setProperties",h.ja,
{ja:0});k(h,"formatData",h.BSb,{BSb:0});k(h,"updateGeometry",h.uh,{uh:0});f(b+"."+a+".ScrollBar",(l=_geo.geotoolkit.oa).Vgc);f(b+"."+a+".ScrollPanel",l.Wgc);k(h=_geo.geotoolkit.oa.Wgc.prototype,"getContainer",h.Uka,{Uka:0});k(h,"getOverView",h.cDc,{cDc:0});k(h,"setLimits",h.jT,{jT:0});k(h,"updateLimits",h.vi,{vi:0});k(h,"setScrollEventHandler",h.kyb,{kyb:0});f(b+"."+a+".BaseWidget",l.Qm);k(h=_geo.geotoolkit.oa.Qm.prototype,"initializeTools",h.Sg,{Sg:0});k(h,"connectTool",h.rr,{rr:0});k(h,"disconnectTool",
h.gz,{gz:0});k(h,"getTool",h.ld,{ld:0});k(h,"setTool",h.KUa,{KUa:0});k(h,"getToolByName",h.xg,{xg:0});k(h,"getToolByType",h.GK,{GK:0});k(h,"listToolsNames",h.nN,{nN:0});k(h,"dispose",h.dispose,{dispose:0});k(h,"loadTemplate",h.vD,{vD:0});k(h,"saveTemplate",h.OI,{OI:0});k(h,"getData",h.getData,{getData:0});k(h,"getProperties",h.ka,{ka:0});k(h,"setProperties",h.ja,{ja:0});f(b+"."+a+".overlays.AbstractOverlay",_geo.geotoolkit.oa.Sd.Fga);f(b+"."+a+".overlays.AbstractOverlay."+g+"",_geo.geotoolkit.oa.Sd.Fga.$);
f(b+"."+a+".overlays.AbstractOverlay."+g+".StateChanged",_geo.geotoolkit.oa.Sd.Fga.$.Jha);k(h=_geo.geotoolkit.oa.Sd.Fga.prototype,"dispose",h.dispose,{dispose:0});k(h,"getWidget",h.UP,{UP:0});k(h,"onStateChanged",h.Uu,{Uu:0});k(h,"getVisible",h.ib,{ib:0});k(h,"setVisible",h.Ka,{Ka:0});k(h,"getEnabled",h.dUb,{dUb:0});k(h,"setEnabled",h.cc,{cc:0});f(b+"."+a+".overlays.IAnnotation",(l=_geo.geotoolkit.oa.Sd).pXa);k(h=_geo.geotoolkit.oa.Sd.pXa.prototype,"getName",h.getName,{getName:0});k(h,"setName",h.yb,
{yb:0});k(h,"getText",h.me,{me:0});k(h,"setText",h.jc,{jc:0});k(h,"getSymbol",h.be,{be:0});k(h,"setSymbol",h.bl,{bl:0});k(h,"getAnchor",h.pj,{pj:0});k(h,"setAnchor",h.yc,{yc:0});k(h,"getTarget",h.SP,{SP:0});k(h,"setTarget",h.fu,{fu:0});k(h,"getOptions",h.jb,{jb:0});k(h,"setOptions",h.setOptions,{setOptions:0});f(b+"."+a+".overlays.Annotation",l.saa);k(h=_geo.geotoolkit.oa.Sd.saa.prototype,"getName",h.getName,{getName:0});k(h,"setName",h.yb,{yb:0});k(h,"getText",h.me,{me:0});k(h,"setText",h.jc,{jc:0});
k(h,"getSymbol",h.be,{be:0});k(h,"setSymbol",h.bl,{bl:0});k(h,"getAnchor",h.pj,{pj:0});k(h,"setAnchor",h.yc,{yc:0});k(h,"getTarget",h.SP,{SP:0});k(h,"setTarget",h.fu,{fu:0});k(h,"getOptions",h.jb,{jb:0});k(h,"setOptions",h.setOptions,{setOptions:0});f(b+"."+a+".overlays.Annotation.fromObject",_geo.geotoolkit.oa.Sd.saa.ab);f(b+"."+a+".overlays.AnnotationEventArgs",(l=_geo.geotoolkit.oa.Sd).o0);k(h=_geo.geotoolkit.oa.Sd.o0.prototype,"cancel",h.cancel,{cancel:0});k(h,"getAnnotation",h.vb,{vb:0});k(h,
"setAnnotation",h.dHa,{dHa:0});f(b+"."+a+".overlays.AnnotationOverlay",l.Bt);f(b+"."+a+".overlays.AnnotationOverlay."+g+"",_geo.geotoolkit.oa.Sd.Bt.$);f(b+"."+a+".overlays.AnnotationOverlay."+g+".CreateAnnotation",(l=_geo.geotoolkit.oa.Sd.Bt.$).r$b);f(b+"."+a+".overlays.AnnotationOverlay."+g+".RemoveAnnotation",l.mgc);f(b+"."+a+".overlays.AnnotationOverlay."+g+".EditAnnotation",l.ZWa);f(b+"."+a+".overlays.AnnotationOverlay."+g+".ChangeActiveAnnotation",l.xxa);k(h=_geo.geotoolkit.oa.Sd.Bt.prototype,
"dispose",h.dispose,{dispose:0});k(h,"getModel",h.Mc,{Mc:0});k(h,"onUpdateGeometry",h.oGa,{oGa:0});k(h,"onStateChanged",h.Uu,{Uu:0});k(h,"setOptions",h.setOptions,{setOptions:0});k(h,"getOptions",h.jb,{jb:0});k(h,"addAnnotation",h.Zja,{Zja:0});k(h,"_setZOrder",h.MBa,{MBa:0});k(h,"_getZOrder",h.uMa,{uMa:0});k(h,"removeAnnotation",h.t$,{t$:0});k(h,"editAnnotation",h.Uda,{Uda:0});k(h,"scrollToAnnotation",h.fMc,{fMc:0});k(h,"getAnnotations",h.byc,{byc:0});k(h,"getActiveAnnotation",h.fD,{fD:0});k(h,"setActiveAnnotation",
h.f5,{f5:0});k(h,"setOrientation",h.setOrientation,{setOrientation:0});f(b+"."+a+".overlays.AnnotationOverlay.registerGeometry",(l=_geo.geotoolkit.oa.Sd.Bt).Jma);f(b+"."+a+".overlays.AnnotationOverlay.getGeometry",l.yd);f(b+"."+a+".overlays.AnnotationShape."+g+"",_geo.geotoolkit.oa.Sd.vC.$);f(b+"."+a+".overlays.AnnotationShape."+g+".GeometryChanged",_geo.geotoolkit.oa.Sd.vC.$.veb);f(b+"."+a+".overlays.AnnotationShape.GeometryType.None",(l=_geo.geotoolkit.oa.Sd.vC.hXa).None);f(b+"."+a+".overlays.AnnotationShape.GeometryType.SimpleArrow",
l.ghc);f(b+"."+a+".overlays.AnnotationShape.GeometryType.RectangleCallouts",l.VEb);f(b+"."+a+".overlays.AnnotationShape.GeometryType.OvalCallouts",l.OZc);f(b+"."+a+".overlays.AnnotationShape.GeometryType.CloudCallouts",l.UUc);k(h=_geo.geotoolkit.oa.Sd.vC.prototype,"dispose",h.dispose,{dispose:0});k(h,"getAnnotation",h.vb,{vb:0});k(h,"getOrientation",h.Yk,{Yk:0});k(h,"setOrientation",h.setOrientation,{setOrientation:0});k(h,"setText",h.jc,{jc:0});k(h,"getText",h.me,{me:0});k(h,"getSymbol",h.be,{be:0});
k(h,"setSymbol",h.bl,{bl:0});k(h,"getTarget",h.SP,{SP:0});k(h,"setTarget",h.fu,{fu:0});k(h,"getOffset",h.Bn,{Bn:0});k(h,"setOffset",h.lp,{lp:0});k(h,"getOffset",h.Bn,{Bn:0});k(h,"setConnectorSize",h.r2b,{r2b:0});k(h,"getConnectorSize",h.wTb,{wTb:0});k(h,"getAnchor",h.pj,{pj:0});k(h,"setAnchor",h.yc,{yc:0});k(h,"hitTest",h.Un,{Un:0});k(h,"render",h.render,{render:0});k(h,"getBounds",h.ga,{ga:0});k(h,"updateGeometry",h.uh,{uh:0});k(h,"onGeometryChanged",h.k_b,{k_b:0});k(h,"getControlPoints",h.yTb,{yTb:0});
k(h,"getTextFrame",h.iXb,{iXb:0});k(h,"setCalloutFrame",h.SMc,{SMc:0});k(h,"getFrame",h.Grb,{Grb:0});k(h,"setFrame",h.kxb,{kxb:0});k(h,"getRadius",h.Iea,{Iea:0});k(h,"setRadius",h.XI,{XI:0});k(h,"getGeometryType",h.zAc,{zAc:0});k(h,"setGeometryType",h.l3b,{l3b:0});k(h,"getProperties",h.ka,{ka:0});k(h,"setProperties",h.ja,{ja:0});f(b+"."+a+".overlays.AnnotationTool",_geo.geotoolkit.oa.Sd.JQ);k(h=_geo.geotoolkit.oa.Sd.JQ.prototype,"dispose",h.dispose,{dispose:0});k(h,"setOptions",h.setOptions,{setOptions:0});
k(h,"getOptions",h.jb,{jb:0});k(h,"adjustHandles",h.jsc,{jsc:0});k(h,"onEnabledStateChanged",h.Xn,{Xn:0});k(h,"updateHandles",h.Rh,{Rh:0});k(h,"getWidget",h.UP,{UP:0});k(h,"setActiveAnnotation",h.f5,{f5:0});k(h,"getActiveAnnotation",h.fD,{fD:0});k(h,"getActiveTarget",h.S8,{S8:0});k(h,"setActiveTarget",h.E_,{E_:0});k(h,"findTarget",h.Yda,{Yda:0});k(h,"isEditing",h.gHc,{gHc:0});k(h,"start",h.start,{start:0});k(h,"stop",h.stop,{stop:0});k(h=_geo.geotoolkit.oa.animation.Dd.sUc.prototype,"isApplicable",
h.Vh,{Vh:0});k(h,"getAnimatedValue",h.ep,{ep:0});k(h,"apply",h.apply,{apply:0});k(h=_geo.geotoolkit.oa.animation.Dd.A1c.prototype,"isApplicable",h.Vh,{Vh:0});k(h,"getAnimatedValue",h.ep,{ep:0});k(h,"apply",h.apply,{apply:0});k(h=_geo.geotoolkit.oa.animation.Dd.dUc.prototype,"isApplicable",h.Vh,{Vh:0});k(h,"getAnimatedValue",h.ep,{ep:0});k(h,"apply",h.apply,{apply:0});f(b+"."+a+".AnnotatedWidget",_geo.geotoolkit.oa.Wg);f(b+"."+a+".AnnotatedWidget."+g+"",_geo.geotoolkit.oa.Wg.$);f(b+"."+a+".AnnotatedWidget."+
g+".ModelVisibleLimitsChanged",_geo.geotoolkit.oa.Wg.$.Gfb);f(b+"."+a+".AnnotatedWidget.DEFAULT_SCROLL_BAR_HEIGHT",(l=_geo.geotoolkit.oa.Wg).rVc);f(b+"."+a+".AnnotatedWidget.DEFAULT_SCROLL_BAR_WIDTH",l.sVc);k(h=_geo.geotoolkit.oa.Wg.prototype,"initializeLayout",h.J9,{J9:0});k(h,"zoomToRect",h.NTc,{NTc:0});k(h,"setBounds",h.Ea,{Ea:0});k(h,"refreshLayout",h.Kv,{Kv:0});k(h,"setModelTransformation",h.rQ,{rQ:0});k(h,"initializeTools",h.Sg,{Sg:0});k(h,"setVisibleModelLimits",h.os,{os:0});k(h,"translateModel",
h.$A,{$A:0});k(h,"scaleModel",h.vt,{vt:0});k(h,"setCenterModelLimits",h.jC,{jC:0});k(h,"getCenterModelLimits",h.FM,{FM:0});k(h,"getVisibleCenterModelLimits",h.n8a,{n8a:0});k(h,"setVisibleCenterModelLimits",h.Byb,{Byb:0});k(h,"setAnnotationSize",h.al,{al:0});k(h,"getAnnotationSize",h.aea,{aea:0});k(h,"setAnnotationsOptions",h.eHa,{eHa:0});k(h,"addTitle",h.MOa,{MOa:0});k(h,"setTitleOptions",h.JQc,{JQc:0});k(h,"removeTitle",h.U0b,{U0b:0});k(h,"addAxis",h.nt,{nt:0});k(h,"removeAxis",h.Lma,{Lma:0});k(h,
"connect",h.connect,{connect:0});k(h,"disconnect",h.disconnect,{disconnect:0});k(h,"zoomIn",h.JN,{JN:0});k(h,"zoomOut",h.KN,{KN:0});k(h,"getModel",h.Mc,{Mc:0});k(h,"fitToBounds",h.R8,{R8:0});k(h,"pan",h.pan,{pan:0});k(h,"setScaleScrollStrategy",h.vQ,{vQ:0});k(h,"getAnnotation",h.vb,{vb:0});k(h,"exportToPdf",h.oS,{oS:0});k(h,"getExportLimits",h.LM,{LM:0});k(h,"setExportLimits",h.cga,{cga:0});k(h,"getExportScale",h.cla,{cla:0});k(h,"setExportScale",h.mHa,{mHa:0});k(h,"beginExport",h.ap,{ap:0});k(h,
"endExport",h.Go,{Go:0});k(h,"getExportElement",h.RB,{RB:0});k(h,"setToolsOptions",h.Dx,{Dx:0});k(h,"getProperties",h.ka,{ka:0});k(h,"setProperties",h.ja,{ja:0});k(h,"getData",h.getData,{getData:0});k(h,"setData",h.setData,{setData:0});k(h,"saveToolsState",h.Sma,{Sma:0});f(b+"."+a+".CrossPlot",(l=_geo.geotoolkit.oa).d6);k(h=_geo.geotoolkit.oa.d6.prototype,"dispose",h.dispose,{dispose:0});k(h,"refreshLayout",h.Kv,{Kv:0});k(h,"setBounds",h.Ea,{Ea:0});k(h,"initializeTools",h.Sg,{Sg:0});k(h,"setData",
h.setData,{setData:0});k(h,"getData",h.getData,{getData:0});k(h,"setOptions",h.setOptions,{setOptions:0});k(h,"getOptions",h.jb,{jb:0});k(h,"setMarkerOptions",h.Kxb,{Kxb:0});k(h,"getMarkerOptions",h.usb,{usb:0});k(h,"setHeaderOptions",h.$ma,{$ma:0});k(h,"getHeaderOptions",h.kla,{kla:0});k(h,"setAxisDataOptions",h.D$,{D$:0});k(h,"getAxisDataOptions",h.Y8,{Y8:0});k(h,"setColorProvider",h.UA,{UA:0});k(h,"getColorProvider",h.zn,{zn:0});k(h,"getHighlightedIndices",h.V6a,{V6a:0});k(h,"highlightArea",h.t8a,
{t8a:0});k(h,"highlightIndices",h.VP,{VP:0});k(h,"getIndicesAt",h.HP,{HP:0});k(h,"setToolsOptions",h.Dx,{Dx:0});k(h,"switchOnCursorTool",h.HRc,{HRc:0});f(b+"."+a+"."+d+"",l.pl);f(b+"."+a+"."+d+"."+g+"",_geo.geotoolkit.oa.pl.$);f(b+"."+a+"."+d+"."+g+".DataUpdated",_geo.geotoolkit.oa.pl.$.Zga);k(h=_geo.geotoolkit.oa.pl.prototype,"dispose",h.dispose,{dispose:0});k(h,"addHistogram",h.Xra,{Xra:0});k(h,"getHistogram",h.zA,{zA:0});k(h,"initializeTools",h.Sg,{Sg:0});k(h,"updateTools",h.Jzb,{Jzb:0});k(h,"getOrientation",
h.Yk,{Yk:0});k(h,"setOrientation",h.setOrientation,{setOrientation:0});k(h,"setData",h.setData,{setData:0});k(h,"getData",h.getData,{getData:0});k(h,"setHeaderOptions",h.$ma,{$ma:0});k(h,"getStatistics",h.so,{so:0});k(h,"getMaxFrequency",h.CEa,{CEa:0});k(h,"getMinValue",h.Tc,{Tc:0});k(h,"getMaxValue",h.ad,{ad:0});k(h,"getHeaderOptions",h.kla,{kla:0});k(h,"setAxisDataOptions",h.D$,{D$:0});k(h,"getAxisDataOptions",h.Y8,{Y8:0});k(h,"onAxisChanged",h.ava,{ava:0});k(h,"getHighlightedBins",h.mla,{mla:0});
k(h,"highlightRange",h.mGc,{mGc:0});k(h,"highlightBins",h.hfa,{hfa:0});k(h,"setToolsOptions",h.Dx,{Dx:0});k(h,"loadTemplate",h.vD,{vD:0});k(h,"saveTemplate",h.OI,{OI:0});k(h,"setProperties",h.ja,{ja:0});f(b+"."+a+".Multi"+d+"s",_geo.geotoolkit.oa.Kfb);f(b+"."+a+".Multi"+d+"s."+g+"",_geo.geotoolkit.oa.Kfb.$);f(b+"."+a+".Multi"+d+"s."+g+"."+d+"sSelected",(l=_geo.geotoolkit.oa.Kfb.$).Jbc);f(b+"."+a+".Multi"+d+"s."+g+".BinsSelected",l.b9b);f(b+"."+a+".Multi"+d+"s."+g+".AxisSelected",l.nAb);f(b+"."+a+
".Multi"+d+"s."+g+".DataUpdated",l.Zga);k(h=_geo.geotoolkit.oa.Kfb.prototype,"getUnderlayLayer",h.pFc,{pFc:0});k(h,"getOverlayLayer",h.Mta,{Mta:0});k(h,"initializeTools",h.Sg,{Sg:0});k(h,"addHistogram",h.Xra,{Xra:0});k(h,"removeHistograms",h.O0b,{O0b:0});k(h,"setHighlightableHistograms",h.bna,{bna:0});k(h,"getHighlightableHistograms",h.XAc,{XAc:0});k(h,"getHighlightedBins",h.mla,{mla:0});k(h,"getHistograms",h.Lrb,{Lrb:0});k(h,"getGroupsId",h.CUb,{CUb:0});k(h,"addTitle",h.MOa,{MOa:0});k(h,"addAxisTo",
h.Z3a,{Z3a:0});k(h,"internalRemoveAxis",h.F8a,{F8a:0});k(h,"removeAxisFrom",h.WKc,{WKc:0});k(h,"dispose",h.dispose,{dispose:0});k(h,"onBinsUpdated",h.b_b,{b_b:0});k(h,"addHistogramsToGroup",h.Lrc,{Lrc:0});k(h,"removeHistogramsFromAllGroup",h.P0b,{P0b:0});k(h,"removeHistogramsFromGroup",h.Q0b,{Q0b:0});k(h,"createGroup",h.uPa,{uPa:0});k(h,"setProperties",h.ja,{ja:0});k(h,"setOptions",h.setOptions,{setOptions:0});k(h,"getAxisOptions",h.gI,{gI:0});k(h,"setAxisOptions",h.zN,{zN:0});k(h,"getProperties",
h.ka,{ka:0});k(h,"setHeader",h.p5,{p5:0});k(h,"getHeader",h.Qj,{Qj:0});k(h,"setAxisWidthOrHeight",h.KMc,{KMc:0});k(h,"setToolsOptions",h.Dx,{Dx:0});k(h,"getToolsOptions",h.a_,{a_:0});k(h,"setAxisSelection",h.T1b,{T1b:0});k(h,"getAxisSelectionOptions",h.Uqb,{Uqb:0});k(h,"setAnnotationsScrollBar",h.M1b,{M1b:0});k(h,"getAnnotationScrollBarOptions",h.Pqb,{Pqb:0});k(h,"setGaps",h.k3b,{k3b:0});k(h,"removeGroup",h.KGa,{KGa:0});k(h,"setHistogramsVisible",h.iOc,{iOc:0});k(h,"setProperties",h.ja,{ja:0});k(h,
"removeAllGroup",h.F$a,{F$a:0});k(h,"setInFrontHistogram",h.pxb,{pxb:0});k(h,"setInFrontGroup",h.E3b,{E3b:0});k(h,"setData",h.setData,{setData:0});k(h,"getData",h.getData,{getData:0});k(h,"setDataBinding",h.hT,{hT:0});k(h,"getDataBinding",h.qS,{qS:0});k(h,"getRelatedHistogramsByGroup",h.mRa,{mRa:0});k(h,"getLocationOfGroup",h.CVb,{CVb:0});k(h,"getGroupIdByHistogram",h.IAc,{IAc:0});k(h,"getHistogramModelLimits",h.YAc,{YAc:0});k(h,"getGroupModelLimits",h.JAc,{JAc:0});f(b+"."+a+"."+e+".InPlaceEditor",
_geo.geotoolkit.oa.ia.wXa);f(b+"."+a+"."+e+".InPlaceEditor."+g+"",_geo.geotoolkit.oa.ia.wXa.$);f(b+"."+a+"."+e+".InPlaceEditor."+g+".onCanEdit",(l=_geo.geotoolkit.oa.ia.wXa.$).tkd);f(b+"."+a+"."+e+".InPlaceEditor."+g+".onValueChanged",l.pJc);k(h=_geo.geotoolkit.oa.ia.wXa.prototype,"attachToPlot",h.gy,{gy:0});k(h,"dispose",h.dispose,{dispose:0});k(h,"start",h.start,{start:0});k(h,"stop",h.stop,{stop:0});k(h,"getActiveCell",h.Lxc,{Lxc:0});k(h,"setActiveCell",h.Uma,{Uma:0});f(b+"."+a+"."+e+".LegendToolEventArgs",
(l=_geo.geotoolkit.oa.ia).t6);f(b+"."+a+"."+e+".LegendTool",l.uDb);f(b+"."+a+"."+e+".LegendTool."+g+".onAnnotationChanged",(l=_geo.geotoolkit.oa.ia.uDb.$).J9a);f(b+"."+a+"."+e+".LegendTool."+g+".onMoveStart",l.o_b);f(b+"."+a+"."+e+".LegendTool."+g+".onMoveEnd",l.L9a);k(h=_geo.geotoolkit.oa.ia.uDb.prototype,"onMouseDown",h.xf,{xf:0});k(h,"onMouseMove",h.Wd,{Wd:0});k(h,"onMouseUp",h.Ae,{Ae:0});f(b+"."+a+".VisibleRangeChangeEventArgs",(l=_geo.geotoolkit.oa).bia);k(h=_geo.geotoolkit.oa.bia.prototype,
"getVisibleRange",h.Lla,{Lla:0});f(b+"."+a+".SelectionChangeEventArgs",l.Agb);k(h=_geo.geotoolkit.oa.Agb.prototype,"getId",h.od,{od:0});k(h,"getType",h.Ev,{Ev:0});f(b+"."+a+".TimeSeriesWidget",l.DL);f(b+"."+a+".TimeSeriesWidget."+g+"",_geo.geotoolkit.oa.DL.$);f(b+"."+a+".TimeSeriesWidget."+g+".onVisibleRangeChanged",(l=_geo.geotoolkit.oa.DL.$).Q4);f(b+"."+a+".TimeSeriesWidget."+g+".onVisibleRangeChanging",l.JSa);f(b+"."+a+".TimeSeriesWidget."+g+".onCursorChanged",l.iJc);f(b+"."+a+".TimeSeriesWidget."+
g+".beforeSelectionChange",l.Hda);f(b+"."+a+".TimeSeriesWidget."+g+".onSelectionChanged",l.EI);f(b+"."+a+".TimeSeriesWidget."+g+".onAnnotationLineClick",l.fJc);f(b+"."+a+".TimeSeriesWidget."+g+".onAnnotationClick",l.eJc);f(b+"."+a+".TimeSeriesWidget.LegendPosition",_geo.geotoolkit.oa.DL.KJa);f(b+"."+a+".TimeSeriesWidget.LegendPosition.Outside",(l=_geo.geotoolkit.oa.DL.KJa).dr);f(b+"."+a+".TimeSeriesWidget.LegendPosition.Inside",l.Qk);f(b+"."+a+".TimeSeriesWidget.FillDirection",_geo.geotoolkit.oa.DL.H0);
f(b+"."+a+".TimeSeriesWidget.FillDirection.Top",(l=_geo.geotoolkit.oa.DL.H0).Ub);f(b+"."+a+".TimeSeriesWidget.FillDirection.Bottom",l.Zf);f(b+"."+a+".TimeSeriesWidget.FillType",_geo.geotoolkit.oa.DL.Xg);f(b+"."+a+".TimeSeriesWidget.FillType.CurveToCurve",(l=_geo.geotoolkit.oa.DL.Xg).z$b);f(b+"."+a+".TimeSeriesWidget.FillType.CurveToReferenceLine",l.A$b);f(b+"."+a+".TimeSeriesWidget.FillType.CurveToBaseLine",l.y$b);f(b+"."+a+".TimeSeriesWidget.ScrollBarType",_geo.geotoolkit.oa.DL.Gha);f(b+"."+a+".TimeSeriesWidget.ScrollBarType.Advanced",
(l=_geo.geotoolkit.oa.DL.Gha).Hcb);f(b+"."+a+".TimeSeriesWidget.ScrollBarType.Compact",l.bBb);f(b+"."+a+".TimeSeriesWidget.ScrollBarType.Simple",l.LKa);k(h=_geo.geotoolkit.oa.DL.prototype,"setLocale",h.bL,{bL:0});k(h,"getLocale",h.KP,{KP:0});k(h,"initializeLayout",h.J9,{J9:0});k(h,"initializeTools",h.Sg,{Sg:0});k(h,"selectCurveById",h.oMc,{oMc:0});k(h,"getProperties",h.ka,{ka:0});k(h,"getOptions",h.jb,{jb:0});k(h,"setProperties",h.ja,{ja:0});k(h,"setOptions",h.setOptions,{setOptions:0});k(h,"getCurves",
h.BV,{BV:0});k(h,"getTimeSeriesObjectById",h.HA,{HA:0});k(h,"getDataById",h.x6a,{x6a:0});k(h,"addCurve",h.LOa,{LOa:0});k(h,"insertCurve",h.nYb,{nYb:0});k(h,"addCurves",h.Drc,{Drc:0});k(h,"insertCurves",h.oYb,{oYb:0});k(h,"setHorizontalGridCurveReference",h.fUa,{fUa:0});k(h,"addFill",h.Jrc,{Jrc:0});k(h,"removeCurveFill",h.nTa,{nTa:0});k(h,"getCurveFills",h.DTb,{DTb:0});k(h,"getCurveFillStyle",h.fzc,{fzc:0});k(h,"removeCurve",h.N0b,{N0b:0});k(h,"getCurveProperties",h.hzc,{hzc:0});k(h,"setCurveProperties",
h.oNc,{oNc:0});k(h,"rebuildLayers",h.JKc,{JKc:0});k(h,"getRange",h.Li,{Li:0});k(h,"setRange",h.ni,{ni:0});k(h,"getVisibleRange",h.Lla,{Lla:0});k(h,"setVisibleRange",h.Cwa,{Cwa:0});k(h,"translateModel",h.$A,{$A:0});k(h,"scaleModel",h.vt,{vt:0});k(h,"zoomIn",h.JN,{JN:0});k(h,"zoomOut",h.KN,{KN:0});k(h,"fitToBounds",h.R8,{R8:0});k(h,"addAnnotationLine",h.urc,{urc:0});k(h,"removeAnnotationLine",h.VKc,{VKc:0});k(h,"editAnnotationLine",h.xwc,{xwc:0});k(h,"addAnnotation",h.Zja,{Zja:0});k(h,"editAnnotation",
h.Uda,{Uda:0});k(h,"removeAnnotation",h.t$,{t$:0});k(h,"getAnnotationLineProperties",h.ayc,{ayc:0});k(h,"getAnnotationProperties",h.$Sb,{$Sb:0});k(h,"changeVisualOrder",h.Etc,{Etc:0});k(h,"createGroup",h.uPa,{uPa:0});k(h,"removeGroup",h.KGa,{KGa:0});k(h,"getGroupById",h.AUb,{AUb:0});k(h,"getVisualFrontLayer",h.LFc,{LFc:0});k(h,"getVisualBackLayer",h.KFc,{KFc:0});k(h,"getOverlayLayer",h.Mta,{Mta:0});k(h,"exportToPDF",h.Pwc,{Pwc:0});k(h,"dispose",h.dispose,{dispose:0});f(b+"."+a+"."+c+"",_geo.geotoolkit.oa.cE);
f(b+"."+a+"."+c+"."+g+"",_geo.geotoolkit.oa.cE.$);f(b+"."+a+"."+c+"."+g+".ColumnWidthChanged",(l=_geo.geotoolkit.oa.cE.$).QIa);f(b+"."+a+"."+c+"."+g+".TableSizeChanged",l.Yhc);f(b+"."+a+"."+c+"."+g+".TableAdjusted",l.TKa);k(h=_geo.geotoolkit.oa.cE.prototype,"getColumnsSize",h.sTb,{sTb:0});k(h,"setColumnsSize",h.Twb,{Twb:0});k(h,"fitToWidth",h.DM,{DM:0});k(h,"getRowsSize",h.WDc,{WDc:0});k(h,"setBounds",h.Ea,{Ea:0});k(h,"getTableViewShape",h.fXb,{fXb:0});k(h,"setTableBounds",h.dL,{dL:0});k(h,"getTableBounds",
h.zRa,{zRa:0});k(h,"getTableSize",h.y9,{y9:0});k(h,"getVisibleTableLimits",h.g_,{g_:0});k(h,"setVisibleTableLimits",h.w5,{w5:0});k(h,"setData",h.setData,{setData:0});k(h,"translateTable",h.C5,{C5:0});k(h,"highlightRow",h.lua,{lua:0});k(h,"getHighlightedRow",h.V3,{V3:0});k(h,"setActiveRow",h.hab,{hab:0});k(h,"getActiveRow",h.Z5a,{Z5a:0});k(h,"getActiveRows",h.BP,{BP:0});k(h,"highlightColumn",h.ifa,{ifa:0});k(h,"getHighlightedColumn",h.FV,{FV:0});k(h,"initializeTools",h.Sg,{Sg:0});f(b+"."+a+".BarChartWidget",
(l=_geo.geotoolkit.oa).rAb);k(h=_geo.geotoolkit.oa.rAb.prototype,"getDataLayer",h.pzc,{pzc:0});k(h,"setBounds",h.Ea,{Ea:0});k(h,"setFormatLabelHandler",h.Qs,{Qs:0});k(h,"setData",h.setData,{setData:0});k(h,"getData",h.getData,{getData:0});k(h,"getValueAt",h.tx,{tx:0});k(h,"setOptions",h.setOptions,{setOptions:0});k(h,"updateLayout",h.xb,{xb:0});k(h,"highlightBars",h.WRa,{WRa:0});k(h,"selectBarsAt",h.ETa,{ETa:0});k(h,"getProperties",h.ka,{ka:0});k(h,"setProperties",h.ja,{ja:0});f(b+"."+a+".BubbleChart",
l.nL);k(h=_geo.geotoolkit.oa.nL.prototype,"createGridAndAxes",h.eDa,{eDa:0});k(h,"initializeTools",h.Sg,{Sg:0});k(h,"setData",h.setData,{setData:0});k(h,"getData",h.getData,{getData:0});k(h,"setOptions",h.setOptions,{setOptions:0});k(h,"getOptions",h.jb,{jb:0});k(h,"getColorBar",h.p6a,{p6a:0});k(h,"getRegressionAnalysis",h.EDc,{EDc:0});k(h,"updateRegressionLine",h.pVa,{pVa:0});k(h,"getTrendlineOptions",h.Ktb,{Ktb:0});k(h,"getLabelTextConverter",h.FQa,{FQa:0});k(h,"setAxisData",h.LTa,{LTa:0});k(h,
"getAxisData",h.ZPa,{ZPa:0});k(h,"highlightIndices",h.VP,{VP:0});k(h,"getOverLayer",h.gWb,{gWb:0});k(h,"getRsquared",h.pRa,{pRa:0});k(h,"getHighlightIndices",h.VAc,{VAc:0});k(h,"setHeader",h.p5,{p5:0});k(h,"getHeader",h.Qj,{Qj:0});k(h,"setLabels",h.zxb,{zxb:0});k(h,"getLabels",h.gsb,{gsb:0});k(h,"setPainter",h.WA,{WA:0});k(h,"getPainter",h.MP,{MP:0});k(h,"setColorProvider",h.UA,{UA:0});k(h,"getColorProvider",h.zn,{zn:0});k(h,"setSymbolCache",h.nyb,{nyb:0});k(h,"setToolsOptions",h.Dx,{Dx:0});k(h,"getToolsOptions",
h.a_,{a_:0});k(h,"dispose",h.dispose,{dispose:0});f(b+"."+a+".BubbleChart.BubbleWidgetTooltipLegendItem",_geo.geotoolkit.oa.nL.t9b);f(b+"."+a+".Button",_geo.geotoolkit.oa.AT);f(b+"."+a+".Button.State",_geo.geotoolkit.oa.AT.Sy);f(b+"."+a+".Button.State.Off",(l=_geo.geotoolkit.oa.AT.Sy).Rfb);f(b+"."+a+".Button.State.On",l.lEb);k(h=_geo.geotoolkit.oa.AT.prototype,"getState",h.Mm,{Mm:0});k(h,"getText",h.me,{me:0});k(h,"setState",h.setState,{setState:0});k(h,"isToggle",h.Rla,{Rla:0});k(h,"setHover",h.mxb,
{mxb:0});k(h,"isDisabled",h.fHc,{fHc:0});k(h,"setDisabled",h.DNc,{DNc:0});k(h,"click",h.click,{click:0});f(b+"."+a+".ButtonWidget",(l=_geo.geotoolkit.oa).rxa);k(h=_geo.geotoolkit.oa.rxa.prototype,"initializeTools",h.Sg,{Sg:0});k(h,"isToggle",h.Rla,{Rla:0});k(h,"toggleAll",h.hzb,{hzb:0});k(h,"getTools",h.cua,{cua:0});k(h,"getButtonByIndex",h.qyc,{qyc:0});k(h,"getButtonByText",h.ryc,{ryc:0});f(b+"."+a+".ButtonGroupTool",l.u9b);f(b+"."+a+".data.DataTableAdapter",_geo.geotoolkit.oa.data.L$b);k(h=_geo.geotoolkit.oa.data.L$b.prototype,
"getSortedByColumn",h.aXb,{aXb:0});k(h,"getRowsCount",h.T7a,{T7a:0});k(h,"getColumnsCount",h.t6a,{t6a:0});k(h,"prepareContent",h.VSa,{VSa:0});k(h,"getContentData",h.nta,{nta:0});k(h,"getHeaderData",h.uS,{uS:0});k(h,"getHeaderFormat",h.NAc,{NAc:0});k(h,"sortByColumn",h.rRc,{rRc:0});k(h,"filter",h.filter,{filter:0})})();

    return _geo.geotoolkit.widgets;
}(_geo));
/* eslint-enable */
/* tslint:enable */