/* tslint:disable */
/* eslint-disable */
/**
 * Copyright: Copyright (c) 2016 by INT, Inc.  All rights reserved.<br>
 * Company: INT, Inc. <br>
 * INT PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 */
(function (root, factory) {
if (root && typeof root['define'] === 'function') {
    root['define']("geotoolkit.map", ["geotoolkit.widgets"], function() {
      root._geo = factory(root, root._geo);
      root.geotoolkit = root._geo.geotoolkit || root.geotoolkit;
      return root.geotoolkit;
    });
} else if (typeof module !== 'undefined' && typeof module.exports === 'object') {
    var m = factory(root, root && root._geo);
    module.exports._geo = m;
    if (root) { 
        root._geo = module.exports._geo;
        if(!root.geotoolkit) {
            root.geotoolkit = module.exports._geo.geotoolkit;
        }
    }
    if (!module.exports.geotoolkit) module.exports.geotoolkit=module.exports._geo.geotoolkit;
} else {
    root._geo = factory(root, root._geo);
    root.geotoolkit = root._geo.geotoolkit || root.geotoolkit;
    return root.geotoolkit;
}

}(typeof window !== "undefined" ? window : undefined, function (window, _geo) {
var _geo=_geo||{};_geo.geotoolkit.map=_geo.geotoolkit.map||{};_geo.geotoolkit.map.Nd=_geo.geotoolkit.map.Nd||{};_geo.geotoolkit.map.Wa=_geo.geotoolkit.map.Wa||{};_geo.geotoolkit.map.Wa.Nn=_geo.geotoolkit.map.Wa.Nn||{};_geo.geotoolkit.map.Wa.Hu=_geo.geotoolkit.map.Wa.Hu||{};_geo.geotoolkit.map.Wa.filters=_geo.geotoolkit.map.Wa.filters||{};_geo.geotoolkit.map.Qa=_geo.geotoolkit.map.Qa||{};_geo.geotoolkit.map.Qa.ed=_geo.geotoolkit.map.Qa.ed||{};_geo.geotoolkit.map.Qa.Bg=_geo.geotoolkit.map.Qa.Bg||{};
_geo.geotoolkit.map.Qa.jl=_geo.geotoolkit.map.Qa.jl||{};_geo.geotoolkit.map.Qa.Ej=_geo.geotoolkit.map.Qa.Ej||{};_geo.geotoolkit.map.Wa.Zq=_geo.geotoolkit.map.Wa.Zq||{};_geo.geotoolkit.map.Wa.Lka=_geo.geotoolkit.map.Wa.Lka||{};_geo.geotoolkit.map.Wa.Ff=_geo.geotoolkit.map.Wa.Ff||{};_geo.geotoolkit.map.layers=_geo.geotoolkit.map.layers||{};_geo.geotoolkit.map.layers.filters=_geo.geotoolkit.map.layers.filters||{};_geo.geotoolkit.map.util=_geo.geotoolkit.map.util||{};
_geo.geotoolkit.map.ia=_geo.geotoolkit.map.ia||{};_geo.geotoolkit.map.Nd.Rgb=function(){function b(a,b){this.WX=a;this.X_a=b}_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.Spheroid");b.prototype.yn=function(){return this.WX};b.prototype.Mq=function(){return-(this.X_a*this.WX-this.WX)};b.prototype.H6a=function(){return Math.sqrt(2*this.X_a-this.X_a*this.X_a)};b.prototype.lUb=function(){return this.X_a};return b}();
_geo.geotoolkit.map.Nd.tq=function(){function b(a){this.nd=a.name;this.ai=a.limits;this.gl=a.units;this.K3c=a.epsg}_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.AbstractSystem");b.prototype.getName=function(){return this.nd};b.prototype.DS=function(){return this.gl};b.prototype.KM=function(){return this.K3c};b.prototype.Tea=function(a){return new _geo.geotoolkit.map.Nd.pba({initialcoordinatesystem:a,targetcoordinatesystem:this})};b.prototype.JYb=function(){return!0};b.prototype.xr=function(){return this.ai};
b.prototype.transform=_geo.geotoolkit.Ia;b.prototype.je=_geo.geotoolkit.Ia;b.ab=function(a){return a instanceof _geo.geotoolkit.map.Nd.tq?a:"string"===typeof a||"number"===typeof a?_geo.geotoolkit.map.Nd.ue.lq().Lu(a):null};return b}();_geo.geotoolkit.map.Mw={wba:"WGS84",cB:"LatLon",cza:"UTM",None:"None"};
_geo.geotoolkit.map.Nd.ue=function(){function b(){this.i3a={}}var a=null;_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.Registry");b.prototype.Lu=function(a){null==this.i3a[a]&&(this.i3a[a]=this.V$c(a));return this.i3a[a]};b.prototype.V$c=function(a){var b=_geo.geotoolkit.map.Nd.Mo[a];if(null==b)return _geo.geotoolkit.map.Nd.iLa.parse(a);b.epsg=a;return new _geo.geotoolkit.map.Nd.iLa(b)};b.prototype.C$a=function(a){if(a instanceof _geo.geotoolkit.map.Nd.tq)return null!=a.KM()&&(this.i3a[a.KM()]=
a),this.i3a[a.getName()]=a,this;throw Error("Illegal system");};b.lq=function(){null==a&&(a=new _geo.geotoolkit.map.Nd.ue);return a};return b}();
_geo.geotoolkit.map.Nd.cB=function(){function b(b){_geo.geotoolkit.map.Nd.tq.call(this,{epsg:b||4326,name:_geo.geotoolkit.map.Mw.cB,limits:a,units:_geo.geotoolkit.util.zf.Za().Tb("degrees")})}var a=new _geo.geotoolkit.util.Rect(-180,-90,180,90);_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Nd.tq);_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.LatLon");b.prototype.Tea=function(a){return new _geo.geotoolkit.map.Nd.PXa({initialcoordinatesystem:a})};b.prototype.transform=function(a,b,e){null==e&&(e=
new _geo.geotoolkit.util.na);a=_geo.geotoolkit.util.Math.clamp(a,-180,180);b=_geo.geotoolkit.util.Math.clamp(b,-90,90);return e.bb(a,b)};b.prototype.je=function(a,b,e){null==e&&(e=new _geo.geotoolkit.util.na);a=_geo.geotoolkit.util.Math.clamp(a,-180,180);b=_geo.geotoolkit.util.Math.clamp(b,-90,90);return e.bb(a,b)};b.ZRc=function(a){if(0===a.length)return 0;if(-1===a.indexOf("\u00b0"))return+a;var b=a[a.length-1].toUpperCase(),e=a.match(/^([\d]+\.?[\d]*)\u00b0 ?([\d]+\.?[\d]*)\u2032 ?([\d]+\.?[\d]*)\u2033/)||
a.match(/^([\d]+\.?[\d]*)\u00b0 ?([\d]+\.?[\d]*)\u2032/)||a.match(/^([\d]+\.?[\d]*)\u00b0/),c=null!=e?e.length:0;a=1<c?+e[1]:0;var f=2<c?+e[2]:0,e=3<c?+e[3]:0;a=a+f/60+e/3600;return"S"===b||"W"===b?-a:a};_geo.geotoolkit.map.Nd.ue.lq().C$a(new b);return b}();
_geo.geotoolkit.map.Nd.cza=function(){function b(a,b){var d=_geo.geotoolkit.Ca(a,{zone:"number"===typeof a?a:null,southhemi:b,name:_geo.geotoolkit.map.Mw.cza,limits:c,units:_geo.geotoolkit.util.zf.Za().Tb("meters")},!0);_geo.geotoolkit.map.Nd.tq.call(this,d);this.Ynb=d.zone;this.xMb=d.southhemi}function a(a){var b,c,d,e,g;g=(f-k)/(f+k);b=(f+k)/2*(1+Math.pow(g,2)/4+Math.pow(g,4)/64);c=-3*g/2+9*Math.pow(g,3)/16+-3*Math.pow(g,5)/32;d=15*Math.pow(g,2)/16+-15*Math.pow(g,4)/32;e=-35*Math.pow(g,3)/48+105*
Math.pow(g,5)/256;g=315*Math.pow(g,4)/512;return a=b*(a+c*Math.sin(2*a)+d*Math.sin(4*a)+e*Math.sin(6*a)+g*Math.sin(8*a))}function g(b,c,d,e){var g,h,m,u;g=(Math.pow(f,2)-Math.pow(k,2))/Math.pow(k,2);h=g*Math.pow(Math.cos(b),2);g=Math.pow(f,2)/(k*Math.sqrt(1+h));m=Math.tan(b);u=m*m;d=c-d;c=g*Math.cos(b)*d+g/6*Math.pow(Math.cos(b),3)*(1-u+h)*Math.pow(d,3)+g/120*Math.pow(Math.cos(b),5)*(5-18*u+u*u+14*h-58*u*h)*Math.pow(d,5)+g/5040*Math.pow(Math.cos(b),7)*(61-479*u+179*u*u-u*u*u)*Math.pow(d,7);b=a(b)+
m/2*g*Math.pow(Math.cos(b),2)*Math.pow(d,2)+m/24*g*Math.pow(Math.cos(b),4)*(5-u+9*h+4*h*h)*Math.pow(d,4)+m/720*g*Math.pow(Math.cos(b),6)*(61-58*u+u*u+270*h-330*u*h)*Math.pow(d,6)+m/40320*g*Math.pow(Math.cos(b),8)*(1385-3111*u+543*u*u-u*u*u)*Math.pow(d,8);e.bb(c,b);return e}function d(a){var b,c,d,e;e=(f-k)/(f+k);b=(f+k)/2*(1+Math.pow(e,2)/4+Math.pow(e,4)/64);a/=b;b=3*e/2+-27*Math.pow(e,3)/32+269*Math.pow(e,5)/512;c=21*Math.pow(e,2)/16+-55*Math.pow(e,4)/32;d=151*Math.pow(e,3)/96+-417*Math.pow(e,5)/
128;e=1097*Math.pow(e,4)/512;return e=a+b*Math.sin(2*a)+c*Math.sin(4*a)+d*Math.sin(6*a)+e*Math.sin(8*a)}function e(a,b,c,e){var g,h,m,u,v,w,x,A,z,C,D,E,F;b=d(b);m=(Math.pow(f,2)-Math.pow(k,2))/Math.pow(k,2);x=Math.cos(b);m*=Math.pow(x,2);h=g=Math.pow(f,2)/(k*Math.sqrt(1+m));u=Math.tan(b);v=u*u;w=v*v;A=1/(h*x);h*=g;z=u/(2*h);h*=g;C=1/(6*h*x);h*=g;D=u/(24*h);h*=g;E=1/(120*h*x);h*=g;F=u/(720*h);h*=g;x=1/(5040*h*x);g=u/(40320*h*g);e.bb(c+A*a+C*(-1-2*v-m)*Math.pow(a,3)+E*(5+28*v+24*w+6*m+8*v*m)*Math.pow(a,
5)+x*(-61-662*v-1320*w-720*w*v)*Math.pow(a,7),b+z*(-1-m)*a*a+D*(5+3*v+6*m-6*v*m-3*m*m-9*v*m*m)*Math.pow(a,4)+F*(-61-90*v-45*w-107*m+162*v*m)*Math.pow(a,6)+g*(1385+3633*v+4095*w+1575*w*v)*Math.pow(a,8));return e}var c=new _geo.geotoolkit.util.Rect(-2E7,-2E7,2E7,2E7),f=6378137,k=6356752.314,h=.9996;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Nd.tq);_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.UTM");b.prototype.transform=function(a,b,c){null==c&&(c=new _geo.geotoolkit.util.na);c.bb(a,b);a=_geo.geotoolkit.util.Math.degToRad(-183+
6*this.Ynb);g(_geo.geotoolkit.util.Math.degToRad(c.y),_geo.geotoolkit.util.Math.degToRad(c.x),a,c);c.x=c.x*h+5E5;c.y*=h;0>c.y&&(c.y+=1E7);return c};b.prototype.ZFc=function(){return this.Ynb};b.prototype.gRc=function(a){this.Ynb=a;return this};b.prototype.iQc=function(a){this.xMb=a;return this};b.prototype.FHc=function(){return this.xMb};b.prototype.je=function(a,b,c){null==c&&(c=new _geo.geotoolkit.util.na);c.bb(a,b);a=_geo.geotoolkit.util.Math.degToRad(-183+6*this.Ynb);c.x-=5E5;c.x/=h;this.xMb&&
(c.y-=1E7);c.y/=h;e(c.x,c.y,a,c);c.x=_geo.geotoolkit.util.Math.radToDeg(c.x);c.y=_geo.geotoolkit.util.Math.radToDeg(c.y);return c};_geo.geotoolkit.map.Nd.ue.lq().C$a(new b(31,!0));return b}();
_geo.geotoolkit.map.Nd.jLa=function(){function b(b){_geo.geotoolkit.map.Nd.tq.call(this,{epsg:b||3857,name:_geo.geotoolkit.map.Mw.wba,limits:a,units:_geo.geotoolkit.util.zf.Za().Tb("meters")})}var a=new _geo.geotoolkit.util.Rect(-2.0037507067161843E7,-2.0037507067161843E7,2.0037507067161843E7,2.0037507067161843E7),g=a.aa()/360,d=a.ba()/(2*Math.PI),e=Math.PI/360;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Nd.tq);_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.WebMercator");b.prototype.transform=
function(a,b,k){null==k&&(k=new _geo.geotoolkit.util.na);k.bb(a,b);-85>b?k.y=-85:85<b&&(k.y=85);-180>a?k.x=-180:180<a&&(k.x=180);k.x*=g;k.y=Math.log(Math.tan((90+k.y)*e));k.y*=d;return k};b.prototype.je=function(a,b,k){null==k&&(k=new _geo.geotoolkit.util.na(a,b));k.x=a/g;k.y=b/d;k.y=(Math.atan(Math.exp(k.y))-Math.PI/4)/e;k.x=_geo.geotoolkit.util.Math.clamp(k.x,-180,180);k.y=_geo.geotoolkit.util.Math.clamp(k.y,-85,85);return k};_geo.geotoolkit.map.Nd.ue.lq().C$a(new b);return b}();
_geo.geotoolkit.map.Nd.scc=function(){function b(a){a=_geo.geotoolkit.Ca(a,{spheroid:[6378137,298.2572236],name:"LambertConicConformal",units:"metre",standartparallel1:0,standartparallel2:0,latitudeoforigin:0,centralmeridian:0,falseeasting:0,falsenorthing:0,scalefactor:1},!0);_geo.geotoolkit.map.Nd.tq.call(this,a);this.TF=new _geo.geotoolkit.map.Nd.Rgb(a.spheroid[0],1/a.spheroid[1]);this.ZNa=_geo.geotoolkit.util.Math.degToRad(a.standartparallel1);this.$Na=_geo.geotoolkit.util.Math.degToRad(a.standartparallel2);
this.jja=_geo.geotoolkit.util.Math.degToRad(a.latitudeoforigin);this.Q1a=_geo.geotoolkit.util.Math.degToRad(a.centralmeridian);this.a0a=a.falseeasting;this.b0a=a.falsenorthing;this.Bu=a.scalefactor;this.WX=_geo.geotoolkit.util.zf.Za().Tb("metre").convert(this.TF.yn(),this.DS())*this.Bu;this.zo=this.TF.H6a();this.dlb=Math.cos(this.ZNa)/Math.sqrt(1-this.zo*this.zo*Math.sin(this.ZNa)*Math.sin(this.ZNa));this.P4c=Math.cos(this.$Na)/Math.sqrt(1-this.zo*this.zo*Math.sin(this.$Na)*Math.sin(this.$Na));this.Xmb=
Math.tan(Math.PI/4-this.ZNa/2)/Math.pow((1-this.zo*Math.sin(this.ZNa))/(1+this.zo*Math.sin(this.ZNa)),this.zo/2);this.I6c=Math.tan(Math.PI/4-this.$Na/2)/Math.pow((1-this.zo*Math.sin(this.$Na))/(1+this.zo*Math.sin(this.$Na)),this.zo/2);this.K6c=Math.tan(Math.PI/4-this.jja/2)/Math.pow((1-this.zo*Math.sin(this.jja))/(1+this.zo*Math.sin(this.jja)),this.zo/2);this.Es=(Math.log(this.dlb)-Math.log(this.P4c))/(Math.log(this.Xmb)-Math.log(this.I6c));this.YU=0>this.Es?-1:1;this.cmb=this.dlb/(this.Es*Math.pow(this.Xmb,
this.Es))*this.WX*Math.pow(this.K6c,this.Es);this.y5c=this.dlb/(this.Es*Math.pow(this.Xmb,this.Es))*this.WX;this.J6c=Math.pow(1/(this.dlb/(this.Es*Math.pow(this.Xmb,this.Es))*this.WX),1/this.Es)}var a=10;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Nd.tq);_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.LambertConicConformal");b.prototype.transform=function(a,b,e){null==e&&(e=new _geo.geotoolkit.util.na);a=_geo.geotoolkit.util.Math.degToRad(e.x);b=_geo.geotoolkit.util.Math.degToRad(e.y);var c;b=
Math.tan(Math.PI/4-b/2)/Math.pow((1-this.zo*Math.sin(b))/(1+this.zo*Math.sin(b)),this.zo/2);b=this.y5c*Math.pow(b,this.Es);c=this.Es*(a-this.Q1a);a=this.a0a+b*Math.sin(c);b=this.b0a+this.cmb-b*Math.cos(c);e.bb(a,b);return e};b.prototype.je=function(b,d,e){null==e&&(e=new _geo.geotoolkit.util.na);var c,f,k;b-=this.a0a;c=d-this.b0a;d=this.YU*Math.sqrt(b*b+(this.cmb-c)*(this.cmb-c));d=this.J6c*Math.pow(d,1/this.Es);b=Math.atan(b/(this.cmb-c));k=b/this.Es+this.Q1a;f=Math.PI/2-2*Math.atan(d);c=0;do b=
f,f=Math.PI/2-2*Math.atan(d*Math.pow((1-this.zo*Math.sin(f))/(1+this.zo*Math.sin(f)),this.zo/2)),c++;while(Math.abs(f-b)>_geo.geotoolkit.util.Math.Jc&&c<a);e.bb(_geo.geotoolkit.util.Math.radToDeg(k),_geo.geotoolkit.util.Math.radToDeg(f));return e};return b}();
_geo.geotoolkit.map.Nd.Lic=function(){function b(b){b=_geo.geotoolkit.Ca(b,{units:"metre",name:"TranverseMercator",spheroid:[6378137,298.2572236],latitudeoforigin:0,centralmeridian:0,falseeasting:0,falsenorthing:0,scalefactor:1},!0);_geo.geotoolkit.map.Nd.tq.call(this,b);this.TF=new _geo.geotoolkit.map.Nd.Rgb(b.spheroid[0],1/b.spheroid[1]);this.jja=_geo.geotoolkit.util.Math.degToRad(b.latitudeoforigin);this.Q1a=_geo.geotoolkit.util.Math.degToRad(b.centralmeridian);this.a0a=b.falseeasting;this.b0a=
b.falsenorthing;this.Bu=b.scalefactor;b=_geo.geotoolkit.util.zf.Za().Tb("metre").convert(this.TF.yn(),this.DS());var c=_geo.geotoolkit.util.zf.Za().Tb("metre").convert(this.TF.Mq(),this.DS());this.zo=this.TF.H6a();var c=(b-c)/b,c=c/(2-c),d=c*c;this.iza=b/(1+c)*(1+d/4+d*d/64);this.KF=[c/2-2/3*d+.3125*d*c+41/180*d*d,13/48*d-.6*d*c+557/1440*d*d,61/240*d*c-103/140*d*d,49561/161280*d*d];this.o1a=0;Math.abs(this.jja)>_geo.geotoolkit.util.Math.Jc&&(this.jja===Math.PI/2?this.o1a=Math.PI/2*this.iza:this.jja===
-Math.PI/2?this.o1a=Math.PI/2*-this.iza:(b=g(Math.tan(this.jja))-this.zo*a(this.zo*Math.sin(this.jja)),b=Math.atan(Math.sinh(b)),b=Math.asin(Math.sin(b)),b=b+this.KF[0]*Math.sin(2*b)+this.KF[1]*Math.sin(4*b)+this.KF[2]*Math.sin(6*b)+this.KF[3]*Math.sin(8*b),this.o1a=this.iza*b))}function a(a){return.5*Math.log((1+a)/(1-a))}function g(a){return Math.log(a+Math.sqrt(a*a+1))}var d=10;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Nd.tq);_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.TransverseMercator");
b.prototype.transform=function(b,c,d){null==d&&(d=new _geo.geotoolkit.util.na);b=_geo.geotoolkit.util.Math.degToRad(d.x);c=_geo.geotoolkit.util.Math.degToRad(d.y);var k;c=g(Math.tan(c))-this.zo*a(this.zo*Math.sin(c));k=Math.atan(Math.sinh(c));c=a(Math.cos(k)*Math.sin(b-this.Q1a));k=Math.asin(Math.sin(k)*Math.cosh(c));b=k+this.KF[0]*Math.sin(2*k)*Math.cosh(2*c)+this.KF[1]*Math.sin(4*k)*Math.cosh(4*c)+this.KF[2]*Math.sin(6*k)*Math.cosh(6*c)+this.KF[3]*Math.sin(8*k)*Math.cosh(8*c);c=c+this.KF[0]*Math.cos(2*
k)*Math.sinh(2*c)+this.KF[1]*Math.cos(4*k)*Math.sinh(4*c)+this.KF[2]*Math.cos(6*k)*Math.sinh(6*c)+this.KF[3]*Math.cos(8*k)*Math.sinh(8*c);c=this.a0a+this.Bu*this.iza*c;b=this.b0a+this.Bu*(this.iza*b-this.o1a);d.bb(c,b);return d};b.prototype.je=function(b,c,f){null==f&&(f=new _geo.geotoolkit.util.na);var k,h,l,n;b=(b-this.a0a)/(this.iza*this.Bu);k=(c-this.b0a+this.o1a*this.Bu)/(this.iza*this.Bu);c=k-this.KF[0]*Math.sin(2*k)*Math.cosh(2*b)-this.KF[1]*Math.sin(4*k)*Math.cosh(4*b)-this.KF[2]*Math.sin(6*
k)*Math.cosh(6*b)-this.KF[3]*Math.sin(8*k)*Math.cosh(8*b);b=b-this.KF[0]*Math.cos(2*k)*Math.sinh(2*b)-this.KF[1]*Math.cos(4*k)*Math.sinh(4*b)-this.KF[2]*Math.cos(6*k)*Math.sinh(6*b)-this.KF[3]*Math.cos(8*k)*Math.sinh(8*b);c=Math.asin(Math.sin(c)/Math.cosh(b));l=g(Math.tan(c));n=l+this.zo*a(this.zo*Math.tanh(l));h=0;do k=n,n=l+this.zo*a(this.zo*Math.tanh(n)),h++;while(Math.abs(n-k)>_geo.geotoolkit.util.Math.Jc&&h<d);k=Math.atan(Math.sinh(n));b=this.Q1a+Math.asin(Math.tanh(b)/Math.cos(c));f.bb(_geo.geotoolkit.util.Math.radToDeg(b),
_geo.geotoolkit.util.Math.radToDeg(k));return f};return b}();
_geo.geotoolkit.map.Nd.iLa=function(){function b(b){b=_geo.geotoolkit.Ca(b,{spheroid:[6378137,298.2572236],primem:0,spheroidunits:g,axis:[_geo.geotoolkit.map.Nd.r0.pd,_geo.geotoolkit.map.Nd.r0.Se]},!0);this.TF=new _geo.geotoolkit.map.Nd.Rgb(b.spheroid[0],1/b.spheroid[1]);null!=b.towgs84&&(this.MHb=b.towgs84[0]||0,this.NHb=b.towgs84[1]||0,this.OHb=b.towgs84[2]||0,this.$oc=_geo.geotoolkit.util.Math.degToRad((b.towgs84[3]||0)/3600),this.apc=_geo.geotoolkit.util.Math.degToRad((b.towgs84[4]||0)/3600),
this.w2a=_geo.geotoolkit.util.Math.degToRad((b.towgs84[5]||0)/3600),this.E2a=(b.towgs84[6]||0)/1E6+1,this.jNa=new a(this.TF));this.MLb=b.primem;this.$2a=_geo.geotoolkit.util.zf.Za().Tb(b.spheroidunits);this.Sjc=b.axis;this.ZO=null!=b.zone&&null!=b.southhemi?new _geo.geotoolkit.map.Nd.cza(b):null!=b.latitudeoforigin&&null!=b.centralmeridian&&null!=b.falseeasting&&null!=b.falsenorthing?null!=b.standartparallel1&&null!=b.standartparallel2?new _geo.geotoolkit.map.Nd.scc(b):new _geo.geotoolkit.map.Nd.Lic(b):
b.name===_geo.geotoolkit.map.Mw.wba||null!=b.centralmeridian&&null!=b.falseeasting&&null!=b.falsenorthing?new _geo.geotoolkit.map.Nd.jLa(b):new _geo.geotoolkit.map.Nd.cB(b);b.limits=b.limits||new _geo.geotoolkit.util.Rect(180*-this.TF.yn(),180*-this.TF.Mq(),180*this.TF.yn(),180*this.TF.Mq());_geo.geotoolkit.map.Nd.tq.call(this,b)}function a(a){this.TF=a;this.zo=this.TF.H6a();this.Jib=[Math.pow(this.zo,2)/2+5*Math.pow(this.zo,4)/24+Math.pow(this.zo,6)/12+13*Math.pow(this.zo,8)/360,7*Math.pow(this.zo,
4)/48+29*Math.pow(this.zo,6)/240+811*Math.pow(this.zo,8)/11520,7*Math.pow(this.zo,6)/120+81*Math.pow(this.zo,8)/1120,4279*Math.pow(this.zo,8)/161280]}a.prototype.transform=function(a,b,c){null==c&&(c=new _geo.geotoolkit.util.na(a,b));a=_geo.geotoolkit.util.Math.degToRad(a);b=_geo.geotoolkit.util.Math.degToRad(b);c.x=this.TF.yn()*a;a=this.zo*Math.sin(b);c.y=this.TF.yn()*Math.log(Math.tan(Math.PI/4+b/2)*Math.pow((1-a)/(1+a),this.zo/2));return c};a.prototype.je=function(a,b,c){null==c&&(c=new _geo.geotoolkit.util.na(a,
b));b=Math.exp(-b/this.TF.yn());b=Math.PI/2-2*Math.atan(b);c.y=b+this.Jib[0]*Math.sin(2*b)+this.Jib[1]*Math.sin(4*b)+this.Jib[2]*Math.sin(6*b)+this.Jib[3]*Math.sin(8*b);c.x=a/this.TF.yn();c.x=_geo.geotoolkit.util.Math.radToDeg(c.x);c.y=_geo.geotoolkit.util.Math.radToDeg(c.y);return c};var g=_geo.geotoolkit.util.zf.Za().Tb("degrees");_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Nd.tq);_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.WKT");b.prototype.transform=function(a,b,c){null==c&&(c=new _geo.geotoolkit.util.na);
null!=this.jNa?(c=this.jNa.transform(a,b,c),a=this.E2a*(c.x-this.w2a*c.y)+this.MHb,b=this.E2a*(this.w2a*c.x+c.y)+this.NHb,c=this.jNa.je(a,b,c)):c.bb(a,b);c.x-=this.MLb;-180>c.x&&(c.x+=360);c.x=g.convert(c.x,this.$2a);c.y=g.convert(c.y,this.$2a);c=this.ZO.transform(c.x,c.y,c);this.lSc(c);return c};b.prototype.je=function(a,b,c){null==c&&(c=new _geo.geotoolkit.util.na);c.bb(a,b);this.lSc(c);c=this.ZO.je(c.x,c.y,c);c.x=this.$2a.convert(c.x,g);c.y=this.$2a.convert(c.y,g);c.x+=this.MLb;180<c.x&&(c.x-=
360);null!=this.jNa&&(c=this.jNa.transform(c.x,c.y,c),a=(c.x-this.MHb)/this.E2a+this.w2a*c.y-this.apc*this.OHb,b=(c.y-this.NHb)/this.E2a+this.w2a*c.x-this.$oc*this.OHb,c=this.jNa.je(a,b,c));return c};b.prototype.wEc=function(){return[this.TF.yn(),1/this.TF.lUb()]};b.prototype.gFc=function(){return[this.MHb,this.NHb,this.OHb,this.$oc,this.apc,this.w2a,this.E2a]};b.prototype.tDc=function(){return this.MLb};b.prototype.xEc=function(){return this.$2a};b.prototype.lSc=function(a){var b=a.x,c=a.y;switch(this.Sjc[0].toLowerCase()){case _geo.geotoolkit.map.Nd.r0.Rc:b=
-a.x;break;case _geo.geotoolkit.map.Nd.r0.Se:b=a.y;break;case _geo.geotoolkit.map.Nd.r0.Yc:b=-a.y;break}switch(this.Sjc[1].toLowerCase()){case _geo.geotoolkit.map.Nd.r0.Rc:c=-a.x;break;case _geo.geotoolkit.map.Nd.r0.pd:c=a.x;break;case _geo.geotoolkit.map.Nd.r0.Yc:c=-a.y;break}a.x=b;a.y=c};b.parse=function(a){if(!a||!/PARAMETER/i.test(a))return null;var b={axis:[]},c;if(c=a.match(/SPHEROID\["[^"]+",\s*([-\.\d]+),\s*([-\.\d]+)/i))b.spheroid=[+c[1],+c[2]];if(c=a.match(/TOWGS84\[([-\.\d]+),([-\.\d]+),([-\.\d]+),([-\.\d]+),([-\.\d]+),([-\.\d]+)/i))b.towgs84=
[+c[1],+c[2],+c[3],+c[4],+c[5],+c[6]];if(c=a.match(/PRIMEM\["[^"]+",\s*([-\.\d]+)/i))b.primem=+c[1];var f=/UNIT\[["\s]*(\w+)["\s]*,\s*([-\.\d]+)/ig;if(c=f.exec(a)){var g=new _geo.geotoolkit.util.rba(c[1],["length"],c[1],c[1],0,+c[2],1,0);(c=f.exec(a))?(b.spheroidunits=g,b.units=new _geo.geotoolkit.util.rba(c[1],["length"],c[1],c[1],0,+c[2],1,0)):b.units=g}(c=a.match(/AXIS\["x",["\s]*(\w+)["\s]*/i))?b.axis[0]=c[1].toLowerCase():b.axis[0]=_geo.geotoolkit.map.Nd.r0.pd;(c=a.match(/AXIS\["y",["\s]*([\w]+)["\s]*/i))?
b.axis[1]=c[1].toLowerCase():b.axis[1]=_geo.geotoolkit.map.Nd.r0.Se;if(c=a.match(/PARAMETER\["standard_parallel_1",\s*([-\.\d]+)/i))b.standartparallel1=+c[1];if(c=a.match(/PARAMETER\["standard_parallel_2",\s*([-\.\d]+)/i))b.standartparallel2=+c[1];if(c=a.match(/PARAMETER\["latitude_of_origin",\s*([-\.\d]+)/i))b.latitudeoforigin=+c[1];if(c=a.match(/PARAMETER\["central_meridian",\s*([-\.\d]+)/i))b.centralmeridian=+c[1];if(c=a.match(/PARAMETER\["false_easting",\s*([-\.\d]+)/i))b.falseeasting=+c[1];if(c=
a.match(/PARAMETER\["false_northing",\s*([-\.\d]+)/i))b.falsenorthing=+c[1];if(c=a.match(/PARAMETER\["scale_factor",\s*([-\.\d]+)/i))b.scalefactor=+c[1];return new _geo.geotoolkit.map.Nd.iLa(b)};return b}();_geo.geotoolkit.map.Nd.r0={Se:"north",Yc:"south",Rc:"west",pd:"east"};
_geo.geotoolkit.map.Nd.Mo=function(){return{4203:{towgs84:[-134,-48,149]},4326:{},4269:{},102100:{name:"WGS84"},3857:{name:"WGS84"},20436:{zone:36,southhemi:!1},20437:{zone:37,southhemi:!1},20438:{zone:38,southhemi:!1},20439:{zone:39,southhemi:!1},20440:{zone:40,southhemi:!1},2058:{zone:38,southhemi:!1},2059:{zone:39,southhemi:!1},2060:{zone:40,southhemi:!1},2061:{zone:41,southhemi:!1},2067:{zone:20,southhemi:!1},2077:{zone:32,southhemi:!1},2078:{zone:33,southhemi:!1},2079:{zone:34,southhemi:!1},
2080:{zone:35,southhemi:!1},20822:{zone:22,southhemi:!0},20823:{zone:23,southhemi:!0},20824:{zone:24,southhemi:!0},2084:{zone:19,southhemi:!0},2089:{zone:38,southhemi:!1},2090:{zone:39,southhemi:!1},2095:{zone:28,southhemi:!1},21818:{zone:18,southhemi:!1},2188:{zone:25,southhemi:!1},2189:{zone:26,southhemi:!1},2190:{zone:26,southhemi:!1},2216:{zone:22,southhemi:!1},2217:{zone:23,southhemi:!1},22521:{zone:21,southhemi:!0},22522:{zone:22,southhemi:!0},22523:{zone:23,southhemi:!0},22524:{zone:24,southhemi:!0},
22525:{zone:25,southhemi:!0},23028:{zone:28,southhemi:!1},23029:{zone:29,southhemi:!1},23030:{zone:30,southhemi:!1},23031:{zone:31,southhemi:!1},23032:{zone:32,southhemi:!1},23033:{zone:33,southhemi:!1},23034:{zone:34,southhemi:!1},23035:{zone:35,southhemi:!1},23036:{zone:36,southhemi:!1},23037:{zone:37,southhemi:!1},23038:{zone:38,southhemi:!1},2315:{zone:19,southhemi:!0},2316:{zone:20,southhemi:!0},23866:{zone:46,southhemi:!1},23867:{zone:47,southhemi:!1},23868:{zone:48,southhemi:!1},23869:{zone:49,
southhemi:!1},23870:{zone:50,southhemi:!1},23871:{zone:51,southhemi:!1},23872:{zone:52,southhemi:!1},23877:{zone:47,southhemi:!0},23878:{zone:48,southhemi:!0},23879:{zone:49,southhemi:!0},23880:{zone:50,southhemi:!0},23881:{zone:51,southhemi:!0},23882:{zone:52,southhemi:!0},23883:{zone:53,southhemi:!0},23884:{zone:54,southhemi:!0},24718:{zone:18,southhemi:!1},24719:{zone:19,southhemi:!1},24720:{zone:20,southhemi:!1},24817:{zone:17,southhemi:!1},24818:{zone:18,southhemi:!1},24819:{zone:19,southhemi:!1},
24820:{zone:20,southhemi:!1},24821:{zone:21,southhemi:!1},24877:{zone:17,southhemi:!0},24878:{zone:18,southhemi:!0},24879:{zone:19,southhemi:!0},24880:{zone:20,southhemi:!0},24881:{zone:21,southhemi:!0},24882:{zone:22,southhemi:!0},25932:{zone:32,southhemi:!0},27120:{zone:20,southhemi:!1},27258:{zone:58,southhemi:!0},27259:{zone:59,southhemi:!0},27260:{zone:60,southhemi:!0},27429:{zone:29,southhemi:!1},29220:{zone:20,southhemi:!0},29221:{zone:21,southhemi:!0},2942:{zone:28,southhemi:!1},2943:{zone:28,
southhemi:!1},2969:{zone:20,southhemi:!1},2970:{zone:20,southhemi:!1},2971:{zone:22,southhemi:!1},2973:{zone:20,southhemi:!1},29738:{zone:38,southhemi:!0},29739:{zone:39,southhemi:!0},2976:{zone:6,southhemi:!0},2977:{zone:5,southhemi:!0},2978:{zone:7,southhemi:!0},2980:{zone:38,southhemi:!0},2981:{zone:58,southhemi:!0},2988:{zone:1,southhemi:!0},2995:{zone:58,southhemi:!0},2996:{zone:58,southhemi:!0},2997:{zone:58,southhemi:!0},2998:{zone:58,southhemi:!0},2999:{zone:38,southhemi:!0},3036:{zone:36,
southhemi:!0},3037:{zone:37,southhemi:!0},3054:{zone:26,southhemi:!1},3055:{zone:27,southhemi:!1},3056:{zone:28,southhemi:!1},3060:{zone:58,southhemi:!0},3061:{zone:28,southhemi:!1},3062:{zone:26,southhemi:!1},3063:{zone:26,southhemi:!1},3064:{zone:32,southhemi:!1},3065:{zone:33,southhemi:!1},31121:{zone:21,southhemi:!1},3141:{zone:60,southhemi:!0},3142:{zone:1,southhemi:!0},3164:{zone:58,southhemi:!0},3172:{zone:59,southhemi:!0},31838:{zone:38,southhemi:!1},31839:{zone:39,southhemi:!1},3199:{zone:32,
southhemi:!1},3201:{zone:33,southhemi:!1},3202:{zone:34,southhemi:!1},3203:{zone:35,southhemi:!1},32601:{zone:1,southhemi:!1},32602:{zone:2,southhemi:!1},32603:{zone:3,southhemi:!1},32604:{zone:4,southhemi:!1},32605:{zone:5,southhemi:!1},32606:{zone:6,southhemi:!1},32607:{zone:7,southhemi:!1},32608:{zone:8,southhemi:!1},32609:{zone:9,southhemi:!1},32610:{zone:10,southhemi:!1},32611:{zone:11,southhemi:!1},32612:{zone:12,southhemi:!1},32613:{zone:13,southhemi:!1},32614:{zone:14,southhemi:!1},32615:{zone:15,
southhemi:!1},32616:{zone:16,southhemi:!1},32617:{zone:17,southhemi:!1},32618:{zone:18,southhemi:!1},32619:{zone:19,southhemi:!1},32620:{zone:20,southhemi:!1},32621:{zone:21,southhemi:!1},32622:{zone:22,southhemi:!1},32623:{zone:23,southhemi:!1},32624:{zone:24,southhemi:!1},32625:{zone:25,southhemi:!1},32626:{zone:26,southhemi:!1},32627:{zone:27,southhemi:!1},32628:{zone:28,southhemi:!1},32629:{zone:29,southhemi:!1},32630:{zone:30,southhemi:!1},32631:{zone:31,southhemi:!1},32632:{zone:32,southhemi:!1},
32633:{zone:33,southhemi:!1},32634:{zone:34,southhemi:!1},32635:{zone:35,southhemi:!1},32636:{zone:36,southhemi:!1},32637:{zone:37,southhemi:!1},32638:{zone:38,southhemi:!1},32639:{zone:39,southhemi:!1},32640:{zone:40,southhemi:!1},32641:{zone:41,southhemi:!1},32642:{zone:42,southhemi:!1},32643:{zone:43,southhemi:!1},32644:{zone:44,southhemi:!1},32645:{zone:45,southhemi:!1},32646:{zone:46,southhemi:!1},32647:{zone:47,southhemi:!1},32648:{zone:48,southhemi:!1},32649:{zone:49,southhemi:!1},32650:{zone:50,
southhemi:!1},32651:{zone:51,southhemi:!1},32652:{zone:52,southhemi:!1},32653:{zone:53,southhemi:!1},32654:{zone:54,southhemi:!1},32655:{zone:55,southhemi:!1},32656:{zone:56,southhemi:!1},32657:{zone:57,southhemi:!1},32658:{zone:58,southhemi:!1},32659:{zone:59,southhemi:!1},32660:{zone:60,southhemi:!1},32701:{zone:1,southhemi:!0},32702:{zone:2,southhemi:!0},32703:{zone:3,southhemi:!0},32704:{zone:4,southhemi:!0},32705:{zone:5,southhemi:!0},32706:{zone:6,southhemi:!0},32707:{zone:7,southhemi:!0},32708:{zone:8,
southhemi:!0},32709:{zone:9,southhemi:!0},32710:{zone:10,southhemi:!0},32711:{zone:11,southhemi:!0},32712:{zone:12,southhemi:!0},32713:{zone:13,southhemi:!0},32714:{zone:14,southhemi:!0},32715:{zone:15,southhemi:!0},32716:{zone:16,southhemi:!0},32717:{zone:17,southhemi:!0},32718:{zone:18,southhemi:!0},32719:{zone:19,southhemi:!0},32720:{zone:20,southhemi:!0},32721:{zone:21,southhemi:!0},32722:{zone:22,southhemi:!0},32723:{zone:23,southhemi:!0},32724:{zone:24,southhemi:!0},32725:{zone:25,southhemi:!0},
32726:{zone:26,southhemi:!0},32727:{zone:27,southhemi:!0},32728:{zone:28,southhemi:!0},32729:{zone:29,southhemi:!0},32730:{zone:30,southhemi:!0},32731:{zone:31,southhemi:!0},32732:{zone:32,southhemi:!0},32733:{zone:33,southhemi:!0},32734:{zone:34,southhemi:!0},32735:{zone:35,southhemi:!0},32736:{zone:36,southhemi:!0},32737:{zone:37,southhemi:!0},32738:{zone:38,southhemi:!0},32739:{zone:39,southhemi:!0},32740:{zone:40,southhemi:!0},32741:{zone:41,southhemi:!0},32742:{zone:42,southhemi:!0},32743:{zone:43,
southhemi:!0},32744:{zone:44,southhemi:!0},32745:{zone:45,southhemi:!0},32746:{zone:46,southhemi:!0},32747:{zone:47,southhemi:!0},32748:{zone:48,southhemi:!0},32749:{zone:49,southhemi:!0},32750:{zone:50,southhemi:!0},32751:{zone:51,southhemi:!0},32752:{zone:52,southhemi:!0},32753:{zone:53,southhemi:!0},32754:{zone:54,southhemi:!0},32755:{zone:55,southhemi:!0},32756:{zone:56,southhemi:!0},32757:{zone:57,southhemi:!0},32758:{zone:58,southhemi:!0},32759:{zone:59,southhemi:!0},32760:{zone:60,southhemi:!0},
3302:{zone:7,southhemi:!0},3303:{zone:7,southhemi:!0},3304:{zone:6,southhemi:!0},3305:{zone:6,southhemi:!0},3306:{zone:5,southhemi:!0},3307:{zone:39,southhemi:!1},3312:{zone:21,southhemi:!1},3336:{zone:42,southhemi:!0},3353:{zone:32,southhemi:!0},3354:{zone:32,southhemi:!0},3374:{zone:29,southhemi:!1},3405:{zone:48,southhemi:!1},3406:{zone:49,southhemi:!1},3449:{zone:17,southhemi:!1},3450:{zone:18,southhemi:!1},3784:{zone:9,southhemi:!0},3829:{zone:51,southhemi:!1},4037:{zone:35,southhemi:!1},4038:{zone:36,
southhemi:!1},4071:{zone:23,southhemi:!0},5337:{zone:25,southhemi:!0},5382:{zone:21,southhemi:!0},5383:{zone:22,southhemi:!0},5536:{zone:21,southhemi:!0},5537:{zone:22,southhemi:!0},5538:{zone:23,southhemi:!0},5539:{zone:24,southhemi:!0},5629:{zone:38,southhemi:!0},5836:{zone:37,southhemi:!1},5837:{zone:40,southhemi:!1},5879:{zone:38,southhemi:!0},7878:{zone:30,southhemi:!0},7883:{zone:30,southhemi:!0},7992:{zone:33,southhemi:!0},2009:{latitudeoforigin:0,centralmeridian:-58.5,falseeasting:304800,
falsenorthing:0,scalefactor:.9999,units:"metre"},2010:{latitudeoforigin:0,centralmeridian:-61.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2011:{latitudeoforigin:0,centralmeridian:-64.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2012:{latitudeoforigin:0,centralmeridian:-67.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2013:{latitudeoforigin:0,centralmeridian:-70.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},
2014:{latitudeoforigin:0,centralmeridian:-73.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2015:{latitudeoforigin:0,centralmeridian:-76.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2016:{latitudeoforigin:0,centralmeridian:-79.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2017:{latitudeoforigin:0,centralmeridian:-73.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2018:{latitudeoforigin:0,centralmeridian:-76.5,
falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2019:{latitudeoforigin:0,centralmeridian:-79.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2020:{latitudeoforigin:0,centralmeridian:-82.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2021:{latitudeoforigin:0,centralmeridian:-81,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2022:{latitudeoforigin:0,centralmeridian:-84,falseeasting:304800,falsenorthing:0,scalefactor:.9999,
units:"metre"},2023:{latitudeoforigin:0,centralmeridian:-87,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2024:{latitudeoforigin:0,centralmeridian:-90,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2025:{latitudeoforigin:0,centralmeridian:-93,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2026:{latitudeoforigin:0,centralmeridian:-96,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},2027:{latitudeoforigin:0,centralmeridian:-93,
falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},2028:{latitudeoforigin:0,centralmeridian:-87,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},2029:{latitudeoforigin:0,centralmeridian:-81,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},2030:{latitudeoforigin:0,centralmeridian:-75,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},2031:{latitudeoforigin:0,centralmeridian:-81,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},
2032:{latitudeoforigin:0,centralmeridian:-75,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},2033:{latitudeoforigin:0,centralmeridian:-69,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},2034:{latitudeoforigin:0,centralmeridian:-63,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},2035:{latitudeoforigin:0,centralmeridian:-57,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},2138:{latitudeoforigin:44,centralmeridian:-68.5,falseeasting:0,
falsenorthing:0,scalefactor:1,standartparallel1:60,standartparallel2:46,units:"metre"},2204:{latitudeoforigin:34.666666666667,centralmeridian:-86,falseeasting:2E6,falsenorthing:1E5,scalefactor:1,standartparallel1:35.25,standartparallel2:36.416666666667,units:"foot"},26701:{latitudeoforigin:0,centralmeridian:-177,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26702:{latitudeoforigin:0,centralmeridian:-171,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26703:{latitudeoforigin:0,
centralmeridian:-165,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26704:{latitudeoforigin:0,centralmeridian:-159,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26705:{latitudeoforigin:0,centralmeridian:-153,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26706:{latitudeoforigin:0,centralmeridian:-147,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26707:{latitudeoforigin:0,centralmeridian:-141,falseeasting:5E5,falsenorthing:0,
scalefactor:.9996,units:"metre"},26708:{latitudeoforigin:0,centralmeridian:-135,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26709:{latitudeoforigin:0,centralmeridian:-129,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26710:{latitudeoforigin:0,centralmeridian:-123,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26711:{latitudeoforigin:0,centralmeridian:-117,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26712:{latitudeoforigin:0,
centralmeridian:-111,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26713:{latitudeoforigin:0,centralmeridian:-105,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26714:{latitudeoforigin:0,centralmeridian:-99,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26715:{latitudeoforigin:0,centralmeridian:-93,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26716:{latitudeoforigin:0,centralmeridian:-87,falseeasting:5E5,falsenorthing:0,
scalefactor:.9996,units:"metre"},26717:{latitudeoforigin:0,centralmeridian:-81,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26718:{latitudeoforigin:0,centralmeridian:-75,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26719:{latitudeoforigin:0,centralmeridian:-69,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26720:{latitudeoforigin:0,centralmeridian:-63,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26721:{latitudeoforigin:0,
centralmeridian:-57,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26722:{latitudeoforigin:0,centralmeridian:-51,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},26729:{latitudeoforigin:30.5,centralmeridian:-85.833333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.99996,units:"foot"},26730:{latitudeoforigin:30,centralmeridian:-87.5,falseeasting:5E5,falsenorthing:0,scalefactor:.999933333,units:"foot"},26732:{latitudeoforigin:54,centralmeridian:-142,falseeasting:5E5,
falsenorthing:0,scalefactor:.9999,units:"foot"},26733:{latitudeoforigin:54,centralmeridian:-146,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26734:{latitudeoforigin:54,centralmeridian:-150,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26735:{latitudeoforigin:54,centralmeridian:-154,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26736:{latitudeoforigin:54,centralmeridian:-158,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26737:{latitudeoforigin:54,
centralmeridian:-162,falseeasting:7E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26738:{latitudeoforigin:54,centralmeridian:-166,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26739:{latitudeoforigin:54,centralmeridian:-170,falseeasting:6E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26740:{latitudeoforigin:51,centralmeridian:-176,falseeasting:3E6,falsenorthing:0,scalefactor:1,standartparallel1:53.833333333333,standartparallel2:51.833333333333,units:"foot"},26741:{latitudeoforigin:39.333333333333,
centralmeridian:-122,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:41.666666666667,standartparallel2:40,units:"foot"},26742:{latitudeoforigin:37.666666666667,centralmeridian:-122,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:39.833333333333,standartparallel2:38.333333333333,units:"foot"},26743:{latitudeoforigin:36.5,centralmeridian:-120.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:38.433333333333,standartparallel2:37.066666666667,units:"foot"},
26744:{latitudeoforigin:35.333333333333,centralmeridian:-119,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:37.25,standartparallel2:36,units:"foot"},26745:{latitudeoforigin:33.5,centralmeridian:-118,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:35.466666666667,standartparallel2:34.033333333333,units:"foot"},26746:{latitudeoforigin:32.166666666667,centralmeridian:-116.25,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:33.883333333333,standartparallel2:32.783333333333,
units:"foot"},26748:{latitudeoforigin:31,centralmeridian:-110.166666666667,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26749:{latitudeoforigin:31,centralmeridian:-111.916666666667,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26750:{latitudeoforigin:31,centralmeridian:-113.75,falseeasting:5E5,falsenorthing:0,scalefactor:.999933333,units:"foot"},26751:{latitudeoforigin:34.333333333333,centralmeridian:-92,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:36.233333333333,
standartparallel2:34.933333333333,units:"foot"},26752:{latitudeoforigin:32.666666666667,centralmeridian:-92,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:34.766666666667,standartparallel2:33.3,units:"foot"},26753:{latitudeoforigin:39.333333333333,centralmeridian:-105.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:39.716666666667,standartparallel2:40.783333333333,units:"foot"},26754:{latitudeoforigin:37.833333333333,centralmeridian:-105.5,falseeasting:2E6,falsenorthing:0,
scalefactor:1,standartparallel1:39.75,standartparallel2:38.45,units:"foot"},26755:{latitudeoforigin:36.666666666667,centralmeridian:-105.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:38.433333333333,standartparallel2:37.233333333333,units:"foot"},26756:{latitudeoforigin:40.833333333333,centralmeridian:-72.75,falseeasting:6E5,falsenorthing:0,scalefactor:1,standartparallel1:41.866666666667,standartparallel2:41.2,units:"foot"},26757:{latitudeoforigin:38,centralmeridian:-75.416666666667,
falseeasting:5E5,falsenorthing:0,scalefactor:.999995,units:"foot"},26758:{latitudeoforigin:24.333333333333,centralmeridian:-81,falseeasting:5E5,falsenorthing:0,scalefactor:.999941177,units:"foot"},26759:{latitudeoforigin:24.333333333333,centralmeridian:-82,falseeasting:5E5,falsenorthing:0,scalefactor:.999941177,units:"foot"},26760:{latitudeoforigin:29,centralmeridian:-84.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:30.75,standartparallel2:29.583333333333,units:"foot"},26766:{latitudeoforigin:30,
centralmeridian:-82.166666666667,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26767:{latitudeoforigin:30,centralmeridian:-84.166666666667,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26768:{latitudeoforigin:41.666666666667,centralmeridian:-112.166666666667,falseeasting:5E5,falsenorthing:0,scalefactor:.999947368,units:"foot"},26769:{latitudeoforigin:41.666666666667,centralmeridian:-114,falseeasting:5E5,falsenorthing:0,scalefactor:.999947368,units:"foot"},26770:{latitudeoforigin:41.666666666667,
centralmeridian:-115.75,falseeasting:5E5,falsenorthing:0,scalefactor:.999933333,units:"foot"},26771:{latitudeoforigin:36.666666666667,centralmeridian:-88.333333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.999975,units:"foot"},26772:{latitudeoforigin:36.666666666667,centralmeridian:-90.166666666667,falseeasting:5E5,falsenorthing:0,scalefactor:.999941177,units:"foot"},26773:{latitudeoforigin:37.5,centralmeridian:-85.666666666667,falseeasting:5E5,falsenorthing:0,scalefactor:.999966667,units:"foot"},
26774:{latitudeoforigin:37.5,centralmeridian:-87.083333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.999966667,units:"foot"},26775:{latitudeoforigin:41.5,centralmeridian:-93.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:43.266666666667,standartparallel2:42.066666666667,units:"foot"},26776:{latitudeoforigin:40,centralmeridian:-93.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:41.783333333333,standartparallel2:40.616666666667,units:"foot"},26777:{latitudeoforigin:38.333333333333,
centralmeridian:-98,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:39.783333333333,standartparallel2:38.716666666667,units:"foot"},26778:{latitudeoforigin:36.666666666667,centralmeridian:-98.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:38.566666666667,standartparallel2:37.266666666667,units:"foot"},26779:{latitudeoforigin:37.5,centralmeridian:-84.25,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:37.966666666667,standartparallel2:38.966666666667,
units:"foot"},26780:{latitudeoforigin:36.333333333333,centralmeridian:-85.75,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:36.733333333333,standartparallel2:37.933333333333,units:"foot"},26781:{latitudeoforigin:30.666666666667,centralmeridian:-92.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:31.166666666667,standartparallel2:32.666666666667,units:"foot"},26782:{latitudeoforigin:28.666666666667,centralmeridian:-91.333333333333,falseeasting:2E6,falsenorthing:0,
scalefactor:1,standartparallel1:29.3,standartparallel2:30.7,units:"foot"},26783:{latitudeoforigin:43.833333333333,centralmeridian:-68.5,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},26784:{latitudeoforigin:42.833333333333,centralmeridian:-70.166666666667,falseeasting:5E5,falsenorthing:0,scalefactor:.999966667,units:"foot"},26785:{latitudeoforigin:37.833333333333,centralmeridian:-77,falseeasting:8E5,falsenorthing:0,scalefactor:1,standartparallel1:38.3,standartparallel2:39.45,units:"foot"},
26786:{latitudeoforigin:41,centralmeridian:-71.5,falseeasting:6E5,falsenorthing:0,scalefactor:1,standartparallel1:41.716666666667,standartparallel2:42.683333333333,units:"foot"},26787:{latitudeoforigin:41,centralmeridian:-70.5,falseeasting:2E5,falsenorthing:0,scalefactor:1,standartparallel1:41.283333333333,standartparallel2:41.483333333333,units:"foot"},26791:{latitudeoforigin:46.5,centralmeridian:-93.1,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:47.033333333333,standartparallel2:48.633333333333,
units:"foot"},26792:{latitudeoforigin:45,centralmeridian:-94.25,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:45.616666666667,standartparallel2:47.05,units:"foot"},26793:{latitudeoforigin:43,centralmeridian:-94,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:43.783333333333,standartparallel2:45.216666666667,units:"foot"},26794:{latitudeoforigin:29.666666666667,centralmeridian:-88.833333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.99996,units:"foot"},26795:{latitudeoforigin:30.5,
centralmeridian:-90.333333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.999941177,units:"foot"},26796:{latitudeoforigin:35.833333333333,centralmeridian:-90.5,falseeasting:5E5,falsenorthing:0,scalefactor:.999933333,units:"foot"},26797:{latitudeoforigin:35.833333333333,centralmeridian:-92.5,falseeasting:5E5,falsenorthing:0,scalefactor:.999933333,units:"foot"},26798:{latitudeoforigin:36.166666666667,centralmeridian:-94.5,falseeasting:5E5,falsenorthing:0,scalefactor:.999941177,units:"foot"},26799:{latitudeoforigin:34.133333333333,
centralmeridian:-118.333333333333,falseeasting:4186692.58,falsenorthing:4160926.74,scalefactor:1,standartparallel1:34.416666666667,standartparallel2:33.866666666667,units:"foot"},3069:{latitudeoforigin:0,centralmeridian:-90,falseeasting:5E5,falsenorthing:-45E5,scalefactor:.9996,units:"metre"},3080:{latitudeoforigin:31.166666666667,centralmeridian:-100,falseeasting:3E6,falsenorthing:3E6,scalefactor:1,standartparallel1:27.416666666667,standartparallel2:34.916666666667,units:"foot"},32001:{latitudeoforigin:47,
centralmeridian:-109.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:48.716666666667,standartparallel2:47.85,units:"foot"},32002:{latitudeoforigin:45.833333333333,centralmeridian:-109.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:47.883333333333,standartparallel2:46.45,units:"foot"},32003:{latitudeoforigin:44,centralmeridian:-109.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:46.4,standartparallel2:44.866666666667,units:"foot"},32005:{latitudeoforigin:41.333333333333,
centralmeridian:-100,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:41.85,standartparallel2:42.816666666667,units:"foot"},32006:{latitudeoforigin:39.666666666667,centralmeridian:-99.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:40.283333333333,standartparallel2:41.716666666667,units:"foot"},32007:{latitudeoforigin:34.75,centralmeridian:-115.583333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},32008:{latitudeoforigin:34.75,centralmeridian:-116.666666666667,
falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},32009:{latitudeoforigin:34.75,centralmeridian:-118.583333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},32010:{latitudeoforigin:42.5,centralmeridian:-71.666666666667,falseeasting:5E5,falsenorthing:0,scalefactor:.999966667,units:"foot"},32011:{latitudeoforigin:38.833333333333,centralmeridian:-74.666666666667,falseeasting:2E6,falsenorthing:0,scalefactor:.999975,units:"foot"},32012:{latitudeoforigin:31,centralmeridian:-104.333333333333,
falseeasting:5E5,falsenorthing:0,scalefactor:.999909091,units:"foot"},32013:{latitudeoforigin:31,centralmeridian:-106.25,falseeasting:5E5,falsenorthing:0,scalefactor:.9999,units:"foot"},32014:{latitudeoforigin:31,centralmeridian:-107.833333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.999916667,units:"foot"},32015:{latitudeoforigin:40,centralmeridian:-74.333333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.999966667,units:"foot"},32016:{latitudeoforigin:40,centralmeridian:-76.583333333333,
falseeasting:5E5,falsenorthing:0,scalefactor:.9999375,units:"foot"},32017:{latitudeoforigin:40,centralmeridian:-78.583333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.9999375,units:"foot"},32019:{latitudeoforigin:33.75,centralmeridian:-79,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:34.333333333333,standartparallel2:36.166666666667,units:"foot"},32020:{latitudeoforigin:47,centralmeridian:-100.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:47.433333333333,
standartparallel2:48.733333333333,units:"foot"},32021:{latitudeoforigin:45.666666666667,centralmeridian:-100.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:46.183333333333,standartparallel2:47.483333333333,units:"foot"},32022:{latitudeoforigin:39.666666666667,centralmeridian:-82.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:40.433333333333,standartparallel2:41.7,units:"foot"},32023:{latitudeoforigin:38,centralmeridian:-82.5,falseeasting:2E6,falsenorthing:0,
scalefactor:1,standartparallel1:38.733333333333,standartparallel2:40.033333333333,units:"foot"},32024:{latitudeoforigin:35,centralmeridian:-98,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:35.566666666667,standartparallel2:36.766666666667,units:"foot"},32025:{latitudeoforigin:33.333333333333,centralmeridian:-98,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:33.933333333333,standartparallel2:35.233333333333,units:"foot"},32026:{latitudeoforigin:43.666666666667,
centralmeridian:-120.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:44.333333333333,standartparallel2:46,units:"foot"},32027:{latitudeoforigin:41.666666666667,centralmeridian:-120.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:42.333333333333,standartparallel2:44,units:"foot"},32028:{latitudeoforigin:40.166666666667,centralmeridian:-77.75,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:40.883333333333,standartparallel2:41.95,units:"foot"},32030:{latitudeoforigin:41.083333333333,
centralmeridian:-71.5,falseeasting:5E5,falsenorthing:0,scalefactor:.9999938,units:"foot"},32031:{latitudeoforigin:33,centralmeridian:-81,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:33.766666666667,standartparallel2:34.966666666667,units:"foot"},32033:{latitudeoforigin:31.833333333333,centralmeridian:-81,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:32.333333333333,standartparallel2:33.666666666667,units:"foot"},32034:{latitudeoforigin:43.833333333333,centralmeridian:-100,
falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:44.416666666667,standartparallel2:45.683333333333,units:"foot"},32035:{latitudeoforigin:42.333333333333,centralmeridian:-100.333333333333,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:42.833333333333,standartparallel2:44.4,units:"foot"},32037:{latitudeoforigin:34,centralmeridian:-101.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:34.65,standartparallel2:36.183333333333,units:"foot"},32038:{latitudeoforigin:31.666666666667,
centralmeridian:-97.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:32.133333333333,standartparallel2:33.966666666667,units:"foot"},32039:{latitudeoforigin:29.666666666667,centralmeridian:-100.333333333333,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:30.116666666667,standartparallel2:31.883333333333,units:"foot"},32040:{latitudeoforigin:27.833333333333,centralmeridian:-99,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:28.383333333333,standartparallel2:30.283333333333,
units:"foot"},32041:{latitudeoforigin:25.666666666667,centralmeridian:-98.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:26.166666666667,standartparallel2:27.833333333333,units:"foot"},32042:{latitudeoforigin:40.333333333333,centralmeridian:-111.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:40.716666666667,standartparallel2:41.783333333333,units:"foot"},32043:{latitudeoforigin:38.333333333333,centralmeridian:-111.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,
standartparallel1:39.016666666667,standartparallel2:40.65,units:"foot"},32044:{latitudeoforigin:36.666666666667,centralmeridian:-111.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:37.216666666667,standartparallel2:38.35,units:"foot"},32045:{latitudeoforigin:42.5,centralmeridian:-72.5,falseeasting:5E5,falsenorthing:0,scalefactor:.999964286,units:"foot"},32046:{latitudeoforigin:37.666666666667,centralmeridian:-78.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:38.033333333333,
standartparallel2:39.2,units:"foot"},32047:{latitudeoforigin:36.333333333333,centralmeridian:-78.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:36.766666666667,standartparallel2:37.966666666667,units:"foot"},32048:{latitudeoforigin:47,centralmeridian:-120.833333333333,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:47.5,standartparallel2:48.733333333333,units:"foot"},32049:{latitudeoforigin:45.333333333333,centralmeridian:-120.5,falseeasting:2E6,falsenorthing:0,
scalefactor:1,standartparallel1:45.833333333333,standartparallel2:47.333333333333,units:"foot"},32050:{latitudeoforigin:38.5,centralmeridian:-79.5,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:39,standartparallel2:40.25,units:"foot"},32051:{latitudeoforigin:37,centralmeridian:-81,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:37.483333333333,standartparallel2:38.883333333333,units:"foot"},32052:{latitudeoforigin:45.166666666667,centralmeridian:-90,falseeasting:2E6,
falsenorthing:0,scalefactor:1,standartparallel1:45.566666666667,standartparallel2:46.766666666667,units:"foot"},32053:{latitudeoforigin:43.833333333333,centralmeridian:-90,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:44.25,standartparallel2:45.5,units:"foot"},32054:{latitudeoforigin:42,centralmeridian:-90,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:42.733333333333,standartparallel2:44.066666666667,units:"foot"},32055:{latitudeoforigin:40.666666666667,centralmeridian:-105.166666666667,
falseeasting:5E5,falsenorthing:0,scalefactor:.999941177,units:"foot"},32056:{latitudeoforigin:40.666666666667,centralmeridian:-107.333333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.999941177,units:"foot"},32057:{latitudeoforigin:40.666666666667,centralmeridian:-108.75,falseeasting:5E5,falsenorthing:0,scalefactor:.999941177,units:"foot"},32058:{latitudeoforigin:40.666666666667,centralmeridian:-110.083333333333,falseeasting:5E5,falsenorthing:0,scalefactor:.999941177,units:"foot"},32064:{latitudeoforigin:0,
centralmeridian:-99,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},32065:{latitudeoforigin:0,centralmeridian:-93,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},32066:{latitudeoforigin:0,centralmeridian:-87,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},32067:{latitudeoforigin:0,centralmeridian:-81,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},32081:{latitudeoforigin:0,centralmeridian:-53,falseeasting:304800,
falsenorthing:0,scalefactor:.9999,units:"metre"},32082:{latitudeoforigin:0,centralmeridian:-56,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},32083:{latitudeoforigin:0,centralmeridian:-58.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},32084:{latitudeoforigin:0,centralmeridian:-61.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},32085:{latitudeoforigin:0,centralmeridian:-64.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},
32086:{latitudeoforigin:0,centralmeridian:-67.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"},32098:{latitudeoforigin:44,centralmeridian:-68.5,falseeasting:0,falsenorthing:0,scalefactor:1,standartparallel1:60,standartparallel2:46,units:"metre"},32099:{latitudeoforigin:25.666666666667,centralmeridian:-91.333333333333,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:27.833333333333,standartparallel2:26.166666666667,units:"foot"},3370:{latitudeoforigin:0,centralmeridian:171,
falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},3371:{latitudeoforigin:0,centralmeridian:177,falseeasting:5E5,falsenorthing:0,scalefactor:.9996,units:"metre"},3771:{latitudeoforigin:0,centralmeridian:-111,falseeasting:0,falsenorthing:0,scalefactor:.9999,units:"metre"},3772:{latitudeoforigin:0,centralmeridian:-114,falseeasting:0,falsenorthing:0,scalefactor:.9999,units:"metre"},3773:{latitudeoforigin:0,centralmeridian:-117,falseeasting:0,falsenorthing:0,scalefactor:.9999,units:"metre"},
3795:{latitudeoforigin:22.35,centralmeridian:-81,falseeasting:5E5,falsenorthing:280296.016,scalefactor:1,standartparallel1:23,standartparallel2:21.7,units:"metre"},3796:{latitudeoforigin:20.716666666667,centralmeridian:-76.833333333333,falseeasting:5E5,falsenorthing:229126.939,scalefactor:1,standartparallel1:21.3,standartparallel2:20.133333333333,units:"metre"},3797:{latitudeoforigin:44,centralmeridian:-70,falseeasting:8E5,falsenorthing:0,scalefactor:1,standartparallel1:50,standartparallel2:46,units:"metre"},
3800:{latitudeoforigin:0,centralmeridian:-120,falseeasting:0,falsenorthing:0,scalefactor:.9999,units:"metre"},4399:{latitudeoforigin:0,centralmeridian:171,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4400:{latitudeoforigin:0,centralmeridian:177,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4401:{latitudeoforigin:0,centralmeridian:-177,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4402:{latitudeoforigin:0,centralmeridian:-171,
falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4403:{latitudeoforigin:0,centralmeridian:-165,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4404:{latitudeoforigin:0,centralmeridian:-159,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4405:{latitudeoforigin:0,centralmeridian:-153,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4406:{latitudeoforigin:0,centralmeridian:-147,falseeasting:1640416.67,falsenorthing:0,
scalefactor:.9996,units:"foot"},4407:{latitudeoforigin:0,centralmeridian:-141,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4408:{latitudeoforigin:0,centralmeridian:-135,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4409:{latitudeoforigin:0,centralmeridian:-129,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4410:{latitudeoforigin:0,centralmeridian:-123,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},
4411:{latitudeoforigin:0,centralmeridian:-117,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4412:{latitudeoforigin:0,centralmeridian:-111,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4413:{latitudeoforigin:0,centralmeridian:-105,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4418:{latitudeoforigin:0,centralmeridian:-75,falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4419:{latitudeoforigin:0,centralmeridian:-69,
falseeasting:1640416.67,falsenorthing:0,scalefactor:.9996,units:"foot"},4455:{latitudeoforigin:39.333333333333,centralmeridian:-77.75,falseeasting:2E6,falsenorthing:0,scalefactor:1,standartparallel1:40.966666666667,standartparallel2:39.933333333333,units:"foot"},4456:{latitudeoforigin:40.5,centralmeridian:-74,falseeasting:2E6,falsenorthing:1E5,scalefactor:1,standartparallel1:41.033333333333,standartparallel2:40.666666666667,units:"foot"},5623:{latitudeoforigin:41.5,centralmeridian:-83.666666666667,
falseeasting:5E5,falsenorthing:0,scalefactor:.999942857,units:"foot"},5624:{latitudeoforigin:41.5,centralmeridian:-85.75,falseeasting:5E5,falsenorthing:0,scalefactor:.999909091,units:"foot"},5625:{latitudeoforigin:41.5,centralmeridian:-88.75,falseeasting:5E5,falsenorthing:0,scalefactor:.999909091,units:"foot"},6201:{latitudeoforigin:43.316666666667,centralmeridian:-84.333333333333,falseeasting:2E6,falsenorthing:0,scalefactor:1.0000382,standartparallel1:44.183333333333,standartparallel2:45.7,units:"foot"},
6202:{latitudeoforigin:41.5,centralmeridian:-84.333333333333,falseeasting:2E6,falsenorthing:0,scalefactor:1.0000382,standartparallel1:42.1,standartparallel2:43.666666666667,units:"foot"},6966:{latitudeoforigin:44.783333333333,centralmeridian:-87,falseeasting:2E6,falsenorthing:0,scalefactor:1.0000382,standartparallel1:45.483333333333,standartparallel2:47.083333333333,units:"foot"},7991:{latitudeoforigin:0,centralmeridian:-79.5,falseeasting:304800,falsenorthing:0,scalefactor:.9999,units:"metre"}}}();
_geo.geotoolkit.map.Nd.pba=function(){function b(a){this.Xlc=_geo.geotoolkit.map.Nd.tq.ab(a.initialcoordinatesystem);this.Ypc=_geo.geotoolkit.map.Nd.tq.ab(a.targetcoordinatesystem)}var a=new _geo.geotoolkit.util.na;_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.Transformer");b.prototype.transform=function(a,b){return a instanceof _geo.geotoolkit.util.na?this.cb(a,b):a instanceof _geo.geotoolkit.util.Rect?this.ob(a,b):Array.isArray(a.x)&&Array.isArray(a.y)?this.x7b(a,b):a};b.prototype.cb=function(a,
b){b=this.jI().je(a.x,a.y,b);this.Dv().transform(b.x,b.y,b);return b};b.prototype.ob=function(b,d){a.bb(b.getX(),b.getY());this.cb(a,a);var e=a.x,c=a.y;a.bb(b.za(),b.wa());this.cb(a,a);null!=d?d.zb(e,c,a.x,a.y):d=new _geo.geotoolkit.util.Rect(e,c,a.x,a.y);return d};b.prototype.x7b=function(b,d){var e=b.x,c=b.y;if(!Array.isArray(e)||!Array.isArray(c)||e.length!==c.length)return d;for(var f=[],k=[],h=0;h<e.length;++h)this.cb(a.bb(e[h],c[h]),a),f.push(a.x),k.push(a.y);d=d||{};d.x=f;d.y=k;return d};b.prototype.KW=
function(a){this.Xlc=_geo.geotoolkit.map.Nd.tq.ab(a);return this};b.prototype.jI=function(){return this.Xlc};b.prototype.KHa=function(a){this.Ypc=_geo.geotoolkit.map.Nd.tq.ab(a);return this};b.prototype.Dv=function(){return this.Ypc};return b}();
_geo.geotoolkit.map.Nd.PXa=function(){function b(a){a=a||{};a.targetcoordinatesystem=_geo.geotoolkit.map.Nd.ue.lq().Lu(_geo.geotoolkit.map.Mw.cB);_geo.geotoolkit.map.Nd.pba.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Nd.pba);_geo.geotoolkit.da(b,"geotoolkit.map.coordinatesystems.LatLonTransformer");b.prototype.transform=function(a,b){return this.jI().je(a.x,a.y,b)};return b}();
_geo.geotoolkit.map.Wa.sJa=function(){function b(){}b.prototype.od=_geo.geotoolkit.Ia;b.prototype.getAttributes=_geo.geotoolkit.Ia;b.prototype.yd=_geo.geotoolkit.Ia;return b}();
_geo.geotoolkit.map.Wa.MN=function(){function b(a){this._id=a&&a.id||null;this.Ww=a&&a.attributes||{};this.ef=a&&a.geometry||null;this.LJ=null}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.sJa);_geo.geotoolkit.da(b,"geotoolkit.map.features.AbstractFeature");b.prototype.od=function(){return this._id};b.prototype.Kd=function(a){this._id=a;return this};b.prototype.yd=function(a){return a&&null!=this.LJ?this.LJ:this.ef};b.prototype.Xq=function(a){this.LJ=a;return this};b.prototype.eWb=function(){return this.$3c||
this.yd(!0)};b.prototype.fpd=function(a){this.$3c=a;return this};b.prototype.tea=function(){return this.Ylc=this.Ylc||{}};b.prototype.getAttributes=function(){return this.Ww};b.prototype.nA=_geo.geotoolkit.Ia;return b}();
_geo.geotoolkit.map.Wa.na=function(){function b(a){_geo.geotoolkit.map.Wa.MN.call(this,a)}var a=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.MN);_geo.geotoolkit.da(b,"geotoolkit.map.features.Point");b.prototype.nA=function(b){this.LJ={};a.bb(this.ef.x,this.ef.y);b.baa(a,a);this.LJ.x=a.getX();this.LJ.y=a.getY();return this};return b}();
_geo.geotoolkit.map.Wa.jO=function(){function b(a){_geo.geotoolkit.map.Wa.MN.call(this,a)}var a=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.MN);_geo.geotoolkit.da(b,"geotoolkit.map.features.MultiPoint");b.prototype.nA=function(b){this.LJ=[];for(var d=this.ef,e=this.LJ,c=0;c<d.length;c++){var f=d[c].x,k=d[c].y;a.bb(f,k);b.baa(a,a);e.push({x:a.getX(),y:a.getY()})}return this};return b}();
_geo.geotoolkit.map.Wa.ou=function(){function b(a){_geo.geotoolkit.map.Wa.MN.call(this,a)}var a=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.MN);_geo.geotoolkit.da(b,"geotoolkit.map.features.LineString");b.prototype.nA=function(b){this.LJ={};for(var d=this.ef.x,e=this.ef.y,c=[],f=[],k=0;k<d.length;++k)a.bb(d[k],e[k]),b.baa(a,a),c.push(a.getX()),f.push(a.getY());this.LJ.x=c;this.LJ.y=f;return this};return b}();
_geo.geotoolkit.map.Wa.iO=function(){function b(a){_geo.geotoolkit.map.Wa.MN.call(this,a)}var a=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.MN);_geo.geotoolkit.da(b,"geotoolkit.map.features.MultiLineString");b.prototype.nA=function(b){this.LJ=[];for(var d=this.ef,e=this.LJ,c=0;c<d.length;c++){for(var f=d[c].x,k=d[c].y,h=[],l=[],n=0;n<f.length;++n)a.bb(f[n],k[n]),b.baa(a,a),h.push(a.getX()),l.push(a.getY());e.push({x:h,y:l})}return this};return b}();
_geo.geotoolkit.map.Wa.Fc=function(){function b(a){_geo.geotoolkit.map.Wa.MN.call(this,a);(a=this.yd())&&Array.isArray(a.x)&&Array.isArray(a.y)&&(a.x[0]!==a.x[a.x.length-1]||a.y[0]!==a.y[a.y.length-1])&&(a.x.push(a.x[0]),a.y.push(a.y[0]))}var a=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.MN);_geo.geotoolkit.da(b,"geotoolkit.map.features.Polygon");b.prototype.nA=function(b){this.LJ={};for(var d=this.ef.x,e=this.ef.y,c=[],f=[],k=0;k<d.length;++k)a.bb(d[k],e[k]),b.baa(a,a),
c.push(a.getX()),f.push(a.getY());this.LJ.x=c;this.LJ.y=f;return this};return b}();
_geo.geotoolkit.map.Wa.ZQ=function(){function b(a){_geo.geotoolkit.map.Wa.MN.call(this,a);if((a=this.yd())&&Array.isArray(a))for(var b=0;b<a.length;b++){var e=a[b];Array.isArray(e.x)&&Array.isArray(e.y)&&(e.x[0]!==e.x[e.x.length-1]||e.y[0]!==e.y[e.y.length-1])&&(e.x.push(e.x[0]),e.y.push(e.y[0]))}}var a=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.MN);_geo.geotoolkit.da(b,"geotoolkit.map.features.MultiPolygon");b.prototype.nA=function(b){this.LJ=[];for(var d=this.ef,e=this.LJ,
c=0;c<d.length;c++){for(var f=d[c].x,k=d[c].y,h=[],l=[],n=0;n<f.length;++n)a.bb(f[n],k[n]),b.baa(a,a),h.push(a.getX()),l.push(a.getY());e.push({x:h,y:l})}return this};return b}();
_geo.geotoolkit.map.Wa.$G=function(){function b(a,b){for(var c=[],f=0;f<b;f++)c[f]=[];var g=0;a.forEach(function(a){c[g].push(a);g=(g+1)%b});return c}function a(a){this.jw=[];this.bAa=!1;this.IU=-1;_geo.geotoolkit.map.Wa.na.call(this,a);this.Fs=a&&a.node||null;this.by=a&&a.parent||null;this.j5c=a&&a.qkd||0;this.v2c=a&&a.jOb||g}var g=_geo.geotoolkit.util.Iterator.Zm([]);_geo.geotoolkit.fa(a,_geo.geotoolkit.map.Wa.na);_geo.geotoolkit.da(a,"geotoolkit.map.features.Aggregation");a.prototype.XPa=function(){return this.v2c};
a.prototype.JW=function(a){var b;if(this.wrb()===a)return this;if(a){var c,f=0;c=this;if(null!=c.getParent()){do c=c.getParent(),c.JW(!0),f++;while(null!=c.getParent());this.IU=c.IU}b=c.il().YSb();c=c.il().Iea();-1===this.IU&&this.N$c(b);f!==this.IU&&0===this.jw.length&&this.U$c(b,c,f)}else for(b=0;b<this.jw.length;b++)this.jw[b].JW(!1);this.bAa=a;null!=this.il()&&this.il().JW(a);return this};a.prototype.wrb=function(){return this.bAa};a.prototype.il=function(){return this.Fs};a.prototype.Ji=function(){return this.jw};
a.prototype.getParent=function(){return this.by};a.prototype.bg=function(){return null==this.getParent()?0:this.getParent().bg()+1};a.prototype.did=function(){return this.bg()===this.IU&&this.wrb()};a.prototype.U$c=function(a,e,c){var f=this.j5c*a-Math.floor(a/2),g=this.yd(!0),h=2*Math.PI/Math.pow(a,c+1);e*=c+1;c=b(this.XPa(),a);for(var l=0;l<a;l++){var n=f+l;this.jw.push(new _geo.geotoolkit.map.Wa.$G({jOb:_geo.geotoolkit.util.Iterator.Zm(c[l]),qkd:n,parent:this,id:c[l].length,geometry:{x:g.x,y:g.y,
offset:{x:Math.cos(h*n)*e,y:Math.sin(h*n)*e}},attributes:{}}))}};a.prototype.N$c=function(a){var b=this.IU=0,c=this.il().LVb()*a;for(this.XPa().forEach(function(){b++});b>c;)this.IU++,b=Math.floor(b/a)};return a}();_geo.geotoolkit.map.Wa.Zq.rXa=function(){function b(){}b.prototype.vb=_geo.geotoolkit.Ia;return b}();
_geo.geotoolkit.map.Wa.Zq.eAb=function(){function b(a){this.RZa=a}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.Zq.rXa);_geo.geotoolkit.da(b,"geotoolkit.map.features.strategies.AnnotationByAttribute");b.prototype.vb=function(a,b){var d=a.getAttributes();return d?d[this.RZa]:null};return b}();
_geo.geotoolkit.map.Wa.Zq.Pcb=function(){function b(){}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.Zq.rXa);_geo.geotoolkit.da(b,"geotoolkit.map.features.strategies.AnnotationById");b.prototype.vb=function(a,b){return a.od()};return b}();_geo.geotoolkit.map.Wa.Zq.Ieb=function(){function b(){}b.prototype.EP=_geo.geotoolkit.Ia;return b}();
_geo.geotoolkit.map.Wa.Zq.M0=function(){function b(a){this.RZa=a}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.Zq.Ieb);_geo.geotoolkit.da(b,"geotoolkit.map.features.strategies.IdByAttribute");b.prototype.EP=function(a){return a[this.RZa]};b.prototype.xDc=function(){_geo.geotoolkit.warn("geotoolkit.map.features.strategies.IdByAttribute.getPropertyName() is deprecated since 2.6");return this.RZa};b.prototype.X8=function(){return this.RZa};return b}();
_geo.geotoolkit.map.Wa.Lka.Kgb=function(){function b(a,b,e,c){this.R3c="string"===typeof a?a:null;this.c6c="string"===typeof b?b:"<br/>";this.YJb="number"===typeof e?e:5;this.c7c=!0===c}function a(a,b){if(null==a)return b.od();var e=b.getAttributes();return e&&e.hasOwnProperty(a)?e[a]:null}_geo.geotoolkit.da(b,"geotoolkit.map.features.formatters.SingleField");b.prototype.format=function(b,d){function e(b){b=a(f,b);k&&-1!==c.indexOf(b)||c.push(b)}var c=[],f=this.R3c,k=this.c7c;b=b||[];for(var h=0;h<
b.length;++h)if(b[h]instanceof _geo.geotoolkit.map.Wa.$G){var l=_geo.geotoolkit.util.Iterator.toArray(b[h].XPa());if(l.length>this.YJb+1&&!b[h].did()){for(var n=0;n<this.YJb;++n)e(l[n]);c.push("and "+(l.length-this.YJb)+" more\u2026")}else l.forEach(e)}else e(b[h]);return d+c.join(this.c6c)};return b}();
_geo.geotoolkit.map.Wa.Lka.DFb=function(){function b(a,b){this.S3c=a;this.Hq=!1!==b}_geo.geotoolkit.da(b,"geotoolkit.map.features.formatters.Table");b.prototype.format=function(a,b){if(!a||0===a.length)return b;var d,e,c,f=this.S3c;if(null==f){f={};for(d=0;d<a.length;++d)for(e in c=a[d].getAttributes(),c)c.hasOwnProperty(e)&&!f[e]&&(f[e]=!0);f=Object.keys(f)}b+="<table>";if(this.Hq)for(d=0;d<f.length;++d){var k="<tr><td>"+f[d]+":</td>";for(e=0;e<a.length;++e)c=a[e].getAttributes(),k+="<td>"+(null!=
c?c[f[d]]:null)+"</td>";b+=k+"</tr>"}else{b+="<tr>";for(d=0;d<f.length;++d)b+="<th>"+f[d]+"</th>";b+="</tr>";for(e=0;e<a.length;++e){b+="<tr>";for(d=0;d<f.length;++d)c=a[e].getAttributes(),b+="<td>"+(null!=c?c[f[d]]:null)+"</td>";b+="</tr>"}}return b+"</table>"};b.ab=function(a,b){a=a||{};var d=Object.keys(a);b=!1!==b;return function(e,c){if(0===e.length)return c;c+="<table>";var f,k,h;if(b)for(k=0;k<d.length;++k){var l="<tr><td>"+d[k]+":</td>";for(h=0;h<e.length;++h)f=a[d[k]](e[h]),l+="<td>"+f+"</td>";
c+=l+"</tr>"}else{c+="<tr>";for(k=0;k<d.length;++k)c+="<th>"+d[k]+"</th>";c+="</tr>";for(h=0;h<e.length;++h){c+="<tr>";for(k=0;k<d.length;++k)f=a[d[k]](e[h]),c+="<td>"+f+"</td>";c+="</tr>"}}return c+"</table>"}};return b}();_geo.geotoolkit.map.Wa.filters.uL=function(){function b(){}b.prototype.EE=_geo.geotoolkit.Ia;b.prototype.reset=_geo.geotoolkit.Ia;return b}();
_geo.geotoolkit.map.Wa.filters.fAb=function(){function b(a){this.Ll=a instanceof _geo.geotoolkit.scene.shapes.Text?a:new _geo.geotoolkit.scene.shapes.Text(a)}function a(a,b,e,c){var f=_geo.geotoolkit.map.util.Geometry.zV(a);b.apply(a,e);a=e.getBoundingBox(c);return f.$C(a)}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.filters.uL);_geo.geotoolkit.da(b,"geotoolkit.map.features.filters.AnnotationFit");b.qoa=_geo.geotoolkit.util.Iterator.Zm([]);b.prototype.EE=function(g,d,e){var c=e.la.annotations;if(!c)return b.qoa;
var f=c.strategy;if(!f)return b.qoa;var k=this.Ll;return new _geo.geotoolkit.util.DKa(g,function(b){var c=f.vb(b,e);if(!c)return!1;var g=e.OM(b);if(!g)return!1;k.jc(c);b=b.yd(!0);if(!Array.isArray(b))return a(b,g,k,d);for(var c=!1,p=0;p<b.length;++p){var r=b[p];r.Wl=r.Wl||{};!1!==r.Wl.nS&&(a(r,g,k,d)?(c=!0,r.Wl.nS=!0):r.Wl.nS=!1)}return c})};b.prototype.reset=function(){return this};return b}();
_geo.geotoolkit.map.Wa.filters.tAb=function(){function b(){}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.filters.uL);_geo.geotoolkit.da(b,"geotoolkit.map.features.filters.BiggestGeometry");b.qoa=_geo.geotoolkit.util.Iterator.Zm([]);b.prototype.EE=function(a,g,d){g=d.la.annotations;if(!g)return b.qoa;var e=g.strategy;return e?new _geo.geotoolkit.util.DKa(a,function(a){var b=e.vb(a,d);if(!b)return!1;a=a.yd(!0);if(Array.isArray(a)){var b=_geo.geotoolkit.map.util.Geometry.zV(a[0]),g,h=0,l;for(l=1;l<a.length;++l)g=
a[l],g=_geo.geotoolkit.map.util.Geometry.zV(g),g.aa()*g.ba()>b.aa()*b.ba()&&(b=g,h=l);for(l=0;l<a.length;++l)g=a[l],g.Wl=g.Wl||{},!1!==g.Wl.nS&&(g.Wl.nS=l===h,l!==h&&(g.Wl.qGc=!0))}return!0}):b.qoa};b.prototype.reset=function(){return this};return b}();
_geo.geotoolkit.map.Wa.filters.RAb=function(){function b(a){this.Ajb=a}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.filters.uL);_geo.geotoolkit.da(b,"geotoolkit.map.features.filters.ByType");b.prototype.EE=function(a,b,d){return new _geo.geotoolkit.util.DKa(a,function(a){if(Array.isArray(this.Ajb)){for(var b=0;b<this.Ajb.length;++b)if(_geo.geotoolkit.Pk(a,this.Ajb[b]))return!0;return!1}return _geo.geotoolkit.Pk(a,this.Ajb)}.bind(this))};b.prototype.reset=function(){return this};return b}();
_geo.geotoolkit.map.Wa.filters.meb=function(){function b(){}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.filters.uL);_geo.geotoolkit.da(b,"geotoolkit.map.features.filters.EvenOddGeometry");b.qoa=_geo.geotoolkit.util.Iterator.Zm([]);b.prototype.EE=function(a,g,d){g=d.la.annotations;if(!g)return b.qoa;var e=g.strategy;return e?new _geo.geotoolkit.util.DKa(a,function(a){var b=e.vb(a,d);if(!b)return!1;a=a.yd(!0);if(Array.isArray(a)){for(var b=!1,g=0;g<a.length;++g)if(Array.isArray(a[g].x)&&(!a[g].Wl||
!1!==a[g].Wl.nS)){for(var h=a[g].x[0],l=a[g].y[0],n=!1,p=0;p<a.length;++p)if(g!==p&&Array.isArray(a[p].x))for(var r=a[p],t=1;t<r.x.length;++t)r.y[t]>l!==r.y[t-1]>l&&h<r.x[t]+(r.x[t-1]-r.x[t])*(l-r.y[t])/(r.y[t-1]-r.y[t])&&(n=!n);a[g].Wl=a.Wl||{};n?(a[g].Wl.nS=!1,a[g].Wl.qGc=!0):b=a[g].Wl.nS=!0}return b}return!0}):b.qoa};b.prototype.reset=function(){return this};return b}();
_geo.geotoolkit.map.Wa.filters.dYa=function(){function b(a,b){this.Ll=a instanceof _geo.geotoolkit.scene.shapes.Text?a:new _geo.geotoolkit.scene.shapes.Text(a);this.Klc=null!=b?b:[];this.QR=[];this.Oqa=0}function a(a,b){return g(b)-g(a)}function g(a){a=a.yd(!0);Array.isArray(a)||(a=[a]);for(var b=_geo.geotoolkit.map.util.Geometry.zV(a[0]),c=b.aa()*b.ba(),d=1;d<a.length;++d)b=_geo.geotoolkit.map.util.Geometry.zV(a[d]),c=Math.max(c,b.aa()*b.ba());return c}var d=new _geo.geotoolkit.util.xc,e=_geo.geotoolkit.util.Iterator.Zm([]),
c=new _geo.geotoolkit.util.Rect;_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.filters.uL);_geo.geotoolkit.da(b,"geotoolkit.map.features.filters.NoAnnotationOverlap");b.prototype.EE=function(b,g,h){var l=h.la.annotations;if(!l)return e;var n=l.strategy;if(!n)return e;g.Ra().xk(d.setSize(1,1),d);return _geo.geotoolkit.util.Iterator.Zm(_geo.geotoolkit.util.Iterator.toArray(b).sort(a).filter(function(a){for(var b=0;b<this.Klc.length;++b)if(a instanceof this.Klc[b])return!0;b=n.vb(a,h);if(!b)return!1;var e=
h.TDa(a),f=e.OM();if(!f)return!1;var l=a.yd(!0),u=a.tea(),e=e.en();if(!Array.isArray(l))return f.apply(l,e,g),_geo.geotoolkit.map.util.oF.XCa(a,g.qj(),e,b,d),c.zb(e.uA()-u.Lwa,e.ny()-u.Kwa,e.uA()+u.Lwa,e.ny()+u.Kwa),!this.intersects(c);for(var v=!1,w=0;w<l.length;++w){var x=l[w];x.Wl=x.Wl||{};!1!==x.Wl.nS&&(f.apply(x,e,g),_geo.geotoolkit.map.util.oF.XCa(a,g.qj(),e,b,d),c.zb(e.uA()-u.Lwa,e.ny()-u.Kwa,e.uA()+u.Lwa,e.ny()+u.Kwa),this.intersects(c)?x.Wl.nS=!1:(v=!0,x.Wl.nS=!0))}return v}.bind(this)))};
b.prototype.reset=function(){this.QR=[];this.Oqa=0;return this};b.prototype.intersects=function(a){var b,c=a.sa();b=0;for(var d=this.QR.length-1,e;b<=d;)if(e=b+d>>1,this.QR[e].sa()>c)d=e-1;else if(this.QR[e].sa()<c)b=e+1;else{b=e;break}e=b;d=a.za();for(b=e;b<this.QR.length&&!(this.QR[b].sa()>d);++b)if(this.QR[b].intersects(a))return!0;for(b=e-1;0<=b&&!(this.QR[b].sa()+this.Oqa<c);--b)if(this.QR[b].intersects(a))return!0;this.QR.splice(e,0,a.clone());this.Oqa=Math.max(this.Oqa,a.aa());return!1};return b}();
_geo.geotoolkit.map.Wa.filters.eGb=function(){function b(a,b){this.uE=a;this.la={nooverlap:!1};this.setOptions(b);this.QR=[];this.G3c=_geo.geotoolkit.util.Iterator.Zm([])}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.filters.uL);_geo.geotoolkit.da(b,"geotoolkit.map.features.filters.VisibilityArea");b.prototype.setOptions=function(a){_geo.geotoolkit.Sb(a,this.la);return this};b.prototype.jb=function(){return _geo.geotoolkit.Sb(this.la,{})};b.prototype.EE=function(a,b,d){b=b.Ra();var e=d.Nb();this.uE.yc(0,
0);var c=this.uE.y8(b);d=c&&!c.isEmpty();if(!d)return this.G3c;var f=this.la.nooverlap,k=c.getX(),h=c.getY();return new _geo.geotoolkit.util.DKa(a,function(a){if(!(a instanceof _geo.geotoolkit.map.Wa.na))return!1;a=a.yd(!0);c.setX(a.x+k);c.setY(a.y+h);if(!e.intersects(c))return!1;if(!f)return!0;for(a=0;a<this.QR.length;a++)if(c.intersects(this.QR[a]))return!1;this.QR.push(new _geo.geotoolkit.util.Rect(c));return!0}.bind(this))};b.prototype.reset=function(){this.QR=[];return this};return b}();
_geo.geotoolkit.map.Wa.Nn.Zxa=function(){function b(){}b.prototype.apply=_geo.geotoolkit.Ia;return b}();_geo.geotoolkit.map.Wa.Nn.tJa=function(){function b(){}b.prototype.apply=_geo.geotoolkit.Ia;return b}();
_geo.geotoolkit.map.Wa.Nn.lb=function(){function b(a,b,e,c){this.x=a;this.y=b;this.size=e;this.geometry=c;this.Wgd();this.max=this.distance+e*Math.SQRT2}function a(b){this.wp=b||a.$D.RDb}_geo.geotoolkit.sg(a,_geo.geotoolkit.map.Wa.Nn.tJa);_geo.geotoolkit.da(a,"geotoolkit.map.features.adapters.Center");a.$D={PUc:"Centroid",$bc:"Incenter",L9b:"CentroidOrIncenter",RDb:"Mixed"};b.prototype.Wgd=function(){for(var a=!1,b=window.Infinity,e=1,c=this.geometry.x.length;e<c;e++)this.geometry.y[e]>this.y!==this.geometry.y[e-
1]>this.y&&this.x<this.geometry.x[e]+(this.geometry.x[e-1]-this.geometry.x[e])*(this.y-this.geometry.y[e])/(this.geometry.y[e-1]-this.geometry.y[e])&&(a=!a),b=Math.min(b,this.uRa(this.x,this.y,this.geometry.x[e-1],this.geometry.y[e-1],this.geometry.x[e],this.geometry.y[e]));this.distance=(a?1:-1)*Math.sqrt(b)};b.prototype.split=function(){var a=this.size/2;return[new b(this.x-a,this.y-a,a,this.geometry),new b(this.x+a,this.y-a,a,this.geometry),new b(this.x-a,this.y+a,a,this.geometry),new b(this.x+
a,this.y+a,a,this.geometry)]};b.prototype.uRa=function(a,b,e,c,f,k){var h=f-e,l=k-c,n=e,p=c;if(0!==h||0!==l)e=((a-e)*h+(b-c)*l)/(h*h+l*l),1<e?(n=f,p=k):0<e&&(n+=e*h,p+=e*l);h=a-n;l=b-p;return h*h+l*l};b.Udd=function(a){for(var d=0,e=0,c=0,f=1,k=a.x.length;f<k;f++)var h=a.x[f]*a.y[f-1]-a.x[f-1]*a.y[f],e=e+(a.x[f]+a.x[f-1])*h,c=c+(a.y[f]+a.y[f-1])*h,d=d+3*h;return new b(e/d,c/d,0,a)};b.mvb=function(a,b){for(var e=0,c=a.length-1,f;e<=c;)if(f=e+c>>1,a[f].max>b.max)c=f-1;else if(a[f].max<b.max)e=f+1;else{e=
f;break}a.splice(e,0,b)};a.prototype.apply=function(g,d,e){if(!g.Wl||!g.Wl.anchor)switch(g.Wl=g.Wl||{},g.x.length){case 0:g.Wl.anchor={x:0,y:0};break;case 1:g.Wl.anchor={x:g.x[0],y:g.y[0]};break;case 2:case 3:g.Wl.anchor={x:(g.x[0]+g.x[1])/2,y:(g.y[0]+g.y[1])/2};break;default:e=b.Udd(g);var c=[],f=b.mvb.bind(null,c),k=_geo.geotoolkit.map.util.Geometry.zV(g),h=Math.min(k.ba(),k.aa())/100,l;this.wp===a.$D.$bc||this.wp===a.$D.L9b&&0>e.distance?(l=Math.max(k.ba(),k.aa())/2,f(new b(k.Pc(),k.Qc(),l,g))):
this.wp===a.$D.RDb&&(l=Math.min(k.ba(),k.aa())/10+Math.max(0,-e.distance),f(new b(e.x,e.y,l,g)));for(;0<c.length;)k=c.pop(),k.distance>e.distance&&(e=k),k.max-e.distance>h&&k.split().forEach(f);g.Wl.anchor={x:e.x,y:e.y}}d.yc(g.Wl.anchor.x,g.Wl.anchor.y)};return a}();
_geo.geotoolkit.map.Wa.Nn.Kaa=function(){function b(a){this.HR=5;this.IR=0;this.setOptions(a)}var a=new _geo.geotoolkit.util.xc;_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.Nn.tJa);_geo.geotoolkit.da(b,"geotoolkit.map.features.adapters.Edge");b.prototype.setOptions=function(a){if(!a||!a.offset)return this;a.offset.hasOwnProperty("x")&&(this.HR=a.offset.x);a.offset.hasOwnProperty("y")&&(this.IR=a.offset.y);return this};b.prototype.apply=function(b,d,e){var c=this.HR,f=this.IR,k=b.x[0]>b.x[b.x.length-
1]?0:b.x.length-1;null==e||0===c&&0===f?d.yc(b.x[k],b.y[k]):(e=e instanceof _geo.geotoolkit.util.Ga?e:e.Ra(),a.setSize(c,f),e.xk(a,a),d.yc(b.x[k]+_geo.geotoolkit.util.Math.sign(c)*a.aa(),b.y[k]+_geo.geotoolkit.util.Math.sign(f)*a.ba()))};return b}();
_geo.geotoolkit.map.Wa.Nn.na=function(){function b(a){this.HR=a&&a.offset&&a.offset.x||0;this.IR=a&&a.offset&&a.offset.y||0}var a=new _geo.geotoolkit.util.xc;_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.Nn.Zxa);_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.Nn.tJa);_geo.geotoolkit.da(b,"geotoolkit.map.features.adapters.Point");b.prototype.setOptions=function(a){if(!a||!a.offset)return this;a.offset.hasOwnProperty("x")&&(this.HR=a.offset.x);a.offset.hasOwnProperty("y")&&(this.IR=a.offset.y);return this};
b.prototype.apply=function(b,d,e){if(e){var c=this.HR+(b.offset?b.offset.x:0),f=this.IR+(b.offset?b.offset.y:0);0!==c||0!==f?(a.setSize(c,f),e=e instanceof _geo.geotoolkit.util.Ga?e:e.Ra(),e.xk(a,a),d.yc(b.x+_geo.geotoolkit.util.Math.sign(c)*a.aa(),b.y+_geo.geotoolkit.util.Math.sign(f)*a.ba())):d.yc(b.x,b.y)}else d.yc(b.x,b.y)};return b}();
_geo.geotoolkit.map.Wa.Nn.ou=function(){function b(){}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.Nn.Zxa);_geo.geotoolkit.da(b,"geotoolkit.map.features.adapters.LineString");b.prototype.apply=function(a,b,d){b.Ne(a.x,a.y)};return b}();
_geo.geotoolkit.map.Wa.Nn.Fc=function(){function b(){}function a(a,b){var d=a.x,g=a.y,h=Math.min(d.length,g.length);if(0<h){b.moveTo(d[0],g[0]);for(var l=1;l<h;++l)b.lineTo(d[l],g[l]);b.close()}}var g=null,d=new _geo.geotoolkit.util.xc;_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.Nn.Zxa);_geo.geotoolkit.da(b,"geotoolkit.map.features.adapters.Polygon");b.prototype.apply=function(b,c,f){c.Ne(b.x,b.y);if(null==b.clip||null==f)c.ms(null);else{null==g?g=new _geo.geotoolkit.attributes.Jx(new _geo.geotoolkit.renderer.bf,
!0):g.yd().clear();var k=0,h=g.yd();if(b.clip[0]instanceof _geo.geotoolkit.util.Rect){k=f instanceof _geo.geotoolkit.util.Ga?f:f.Ra();f=b.clip[0];k.xk(d.setSize(1,1),d);var k=f.x-d.aa(),l=f.za()+d.aa(),n=f.y-d.ba();f=f.wa()+d.ba();h.moveTo(k,n);h.lineTo(l,n);h.lineTo(l,f);h.lineTo(k,f);h.lineTo(k,n);h.close();k=1}for(;k<b.clip.length;++k)a(b.clip[k],h);c.ms(g)}};return b}();
_geo.geotoolkit.map.Wa.Nn.Path=function(){function b(){}_geo.geotoolkit.sg(b,_geo.geotoolkit.map.Wa.Nn.Zxa);_geo.geotoolkit.da(b,"geotoolkit.map.features.adapters.Path");b.prototype.apply=function(a,b,d){b.clear();this.UPb(a,b)};b.prototype.UPb=function(a,b){var d,e=a.x,c=a.y;b.moveTo(e[0],c[0]);for(d=1;d<e.length;++d)b.lineTo(e[d],c[d]);if(null!=a.clip){for(d=a.clip[0]instanceof _geo.geotoolkit.util.Rect?1:0;d<a.clip.length;++d)this.UPb(a.clip[d],b);(d=b.sb())&&d.k5(!0)}return b};return b}();
_geo.geotoolkit.map.Wa.Hu.T5=function(){function b(){_geo.geotoolkit.util.EventDispatcher.call(this);this.tn=[]}_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.map.features.converters.BaseConverter");b.prototype.Rma=function(a){for(var b=0;b<a.length;++b)this.tn.push(a[b]);return null};b.prototype.xA=function(a){function b(a){return Array.isArray(a.x)?d.intersects(_geo.geotoolkit.map.util.Geometry.zV(a)):d.contains(a.x,a.y)}var d=a.bbox,e=a.filter;return this.tn.filter(function(a){var d=
a.yd(!0);return Array.isArray(d)?d.some(b)&&(e?e(a):!0):b(d)&&(e?e(a):!0)})};b.prototype.Mma=function(a){var b;a instanceof _geo.geotoolkit.util.Iterator?a.forEach(function(a){b=this.tn.indexOf(a);~b&&this.tn.splice(b,1)}.bind(this)):(b=this.tn.indexOf(a),~b&&this.tn.splice(b,1));return this};b.prototype.clear=function(){this.tn=[];return this};return b}();
_geo.geotoolkit.map.Wa.Hu.Cdb=function(){function b(a){_geo.geotoolkit.util.EventDispatcher.call(this);this.KL=[];if(Array.isArray(a))for(var b=0;b<a.length;++b)this.job(a[b]);else this.job(a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.map.features.converters.CompositeConverter");b.prototype.job=function(a){a instanceof _geo.geotoolkit.map.Wa.Hu.T5&&(this.mIb||(this.mIb=this.iGa.bind(this)),this.KL.push(a),a.kb(_geo.geotoolkit.map.layers.YG.$.fha,this.mIb));
return this};b.prototype.aLc=function(a){var b=this.KL.indexOf(a);~b&&(this.KL.splice(b,1),a.hb(_geo.geotoolkit.map.layers.YG.$.fha,this.mIb));return this};b.prototype.xA=function(a){for(var b=new _geo.geotoolkit.util.Joa,d,e=this.KL.length-1;0<=e;--e)d=this.KL[e].xA(a),null!=d&&b.concat(d);return b};b.prototype.Uid=function(a){null==this.kIb&&(this.kIb=function(a,b,e){for(a=this.KL.length-1;0<=a&&null!=e;--a)e=this.KL[a].Rma(e);this.Ja(_geo.geotoolkit.map.layers.YG.$.fha,this)}.bind(this),this.lIb=
function(a,b,e){for(a=this.KL.length-1;0<=a;--a)this.KL[a].Mma(e);this.Ja(_geo.geotoolkit.map.layers.YG.$.fha,this)}.bind(this),this.klc=function(a,b,e){if(b instanceof _geo.geotoolkit.map.Qa.RIa)this.lIb(a,b,e);else{for(a=this.KL.length-1;0<=a;--a)this.KL[a].clear();this.Ja(_geo.geotoolkit.map.layers.YG.$.fha,this)}}.bind(this));a.kb(_geo.geotoolkit.map.Qa.$.aw,this.kIb);a.kb(_geo.geotoolkit.map.Qa.$.GT,this.lIb);a.kb(_geo.geotoolkit.map.Qa.$.G0,this.klc);return this};b.prototype.Vqd=function(a){a.hb(_geo.geotoolkit.map.Qa.$.aw,
this.kIb);a.hb(_geo.geotoolkit.map.Qa.$.GT,this.lIb);a.hb(_geo.geotoolkit.map.Qa.$.G0,this.klc);return this};b.prototype.iGa=function(a){this.Ja(a,this)};return b}();
_geo.geotoolkit.map.Wa.Hu.hB=function(){function b(){_geo.geotoolkit.map.Wa.Hu.T5.call(this);var b=new a(this.tn,function(a){return a.Bi.intersects(b.Bi)});this.nMa=b}function a(a,b,d){_geo.geotoolkit.util.Daa.call(this,a,function(a){return a.Bi.intersects(this.Bi)&&(this.filter?this.filter(a.wDa):!0)}.bind(this));this.Bi=b;this.scale=d;this.filter=null}function g(a){var b=a.yd(!0);this.wDa=a;if(Array.isArray(b))for(this.R9a=[],this.CTa=[],this.Bi=null,a=0;a<b.length;++a){var d=_geo.geotoolkit.map.util.Geometry.zV(b[a]);
this.CTa.push(this.gvc(b[a]));this.R9a.push({x:[b[a].x[0]],y:[b[a].y[0]],Wl:{Iqb:d}});this.Bi=null!=this.Bi?this.Bi.union(d):d.clone()}else this.Bi=_geo.geotoolkit.map.util.Geometry.zV(b),this.R9a={x:[b.x[0]],y:[b.y[0]],Wl:{Iqb:this.Bi}},this.CTa=this.gvc(b)}function d(a,b,d){var e,g=-window.Infinity,n=-1,p,r=a.x[d]-a.x[b],t=a.y[d]-a.y[b];if(0!==r||0!==t)for(p=b+1;p<d;++p)e=Math.abs((a.x[p]-a.x[b])*t-(a.y[p]-a.y[b])*r),e>g&&(g=e,n=p);else for(p=b+1;p<d;++p)r=a.x[p]-a.x[b],t=a.y[p]-a.y[b],e=r*r+t*
t,e>g&&(g=e,n=p);return{id:n,distance:g}}function e(a){return Array.isArray(a)?a.every(e):Array.isArray(a.x)}g.prototype.gvc=function(a){var b=d(a,0,a.x.length-1);return{geometry:a,szb:{value:b.id,scale:b.distance}}};g.prototype.Sfa=function(a,b,e){for(var g=0,l=a.geometry.x.length-1,n,p=1,r=a.szb,t=[],q=[];r;)r.scale<e||1===l-g?(b.x[p]=a.geometry.x[l],b.y[p++]=a.geometry.y[l],g=l,r=t.pop(),l=q.pop()):(r.left||(n=d(a.geometry,g,r.value),r.left={value:n.id,scale:n.distance}),r.right||(n=d(a.geometry,
r.value,l),r.right={value:n.id,scale:n.distance}),t.push(r.right),q.push(l),l=r.value,r=r.left);b.x.length=p;b.y.length=p;4>=p&&4<=a.geometry.x.length&&(r=a.szb,e=a.geometry.x.length-1,r.left||(n=d(a.geometry,0,r.value),r.left={value:n.id,scale:n.distance}),r.right||(n=d(a.geometry,r.value,e),r.right={value:n.id,scale:n.distance}),b.x[0]=a.geometry.x[0],b.y[0]=a.geometry.y[0],r.left.scale>r.right.scale?(b.x[1]=a.geometry.x[r.left.value],b.y[1]=a.geometry.y[r.left.value],b.x[2]=a.geometry.x[r.value],
b.y[2]=a.geometry.y[r.value]):(b.x[1]=a.geometry.x[r.value],b.y[1]=a.geometry.y[r.value],b.x[2]=a.geometry.x[r.right.value],b.y[2]=a.geometry.y[r.right.value]),b.x[3]=a.geometry.x[e],b.y[3]=a.geometry.y[e],b.x.length=4,b.y.length=4)};g.prototype.getFeature=function(a){if(Array.isArray(this.CTa))for(var b=0;b<this.CTa.length;++b)this.Sfa(this.CTa[b],this.R9a[b],a);else this.Sfa(this.CTa,this.R9a,a);this.wDa.fpd(this.R9a);return this.wDa};_geo.geotoolkit.fa(a,_geo.geotoolkit.util.Daa);a.prototype.next=
function(){var a=_geo.geotoolkit.util.Daa.prototype.next.call(this);return null!=a?a.getFeature(this.scale):null};_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.Hu.T5);_geo.geotoolkit.da(b,"geotoolkit.map.features.converters.RDP");b.prototype.Rma=function(a){for(var b=[],d=0;d<a.length;++d){var h=a[d].yd(!0);e(h)?this.tn.push(new g(a[d])):b.push(a[d])}return b};b.prototype.xA=function(a){var b=a.scale;this.nMa.Bi=a.bbox;this.nMa.filter=a.filter;this.nMa.scale=1/(8*b*b);this.nMa.reset();return this.nMa};
b.prototype.Mma=function(a){if(a instanceof _geo.geotoolkit.util.Iterator)a.forEach(function(a){for(var b=0;b<this.tn.length;++b)if(this.tn[b].wDa===a){this.tn.splice(b,1);break}}.bind(this));else for(var b=0;b<this.tn;++b)if(this.tn[b].wDa===a){this.tn.splice(b,1);break}return this};b.prototype.clear=function(){_geo.geotoolkit.map.Wa.Hu.T5.prototype.clear.call(this);var b=new a(this.tn,function(a){return a.Bi.intersects(b.Bi)});this.nMa=b;return this};return b}();
_geo.geotoolkit.map.Wa.Hu.bAb=function(){function b(a){_geo.geotoolkit.map.Wa.Hu.T5.call(this);this.zKb=1;this.xh=2;this.pR=!0;this.gnb=0;this.BGb=3;this.fg=30;this.td={options:{},response:null};this.N2=null;this.Fqc=function(){this.td.response=this.yrb(this.td.options);this.td.timeout=null;this.Ja(_geo.geotoolkit.map.layers.YG.$.fha,this)}.bind(this);this.setOptions(a)}function a(a,b,d,e,g,n){this.Wa=Array.isArray(a)?a:[a];a=this.Wa[0].yd(!0);this.point=null!=d?d:a[0]||a;this.Bi=null!=e?e:new _geo.geotoolkit.util.Rect(this.point.x,
this.point.y,this.point.x,this.point.y);this.parent=null!=g?g:null;this.size=null!=n?n:0;this.options=b;this.right=this.left=null;this.Mwc=!1}function g(a,b){this.elements=[a,b];this.iterator=new _geo.geotoolkit.util.Joa(a.Wa,b.Wa);this.weight=a.Wa.length+b.Wa.length;this.point=e(a.point,a.Wa.length,b.point,b.Wa.length);this.Bi=a.Bi.clone().union(b.Bi);this.size=Math.max(this.Bi.ba(),this.Bi.aa())}function d(a,b){for(var d=0,e=a.length-1,g;d<=e;)if(g=d+e>>1,a[g].size>b.size)e=g-1;else if(a[g].size<
b.size)d=g+1;else if(a[g].point.x>b.point.x)e=g-1;else if(a[g].point.x<b.point.x)d=g+1;else if(a[g].point.y>b.point.y)e=g-1;else if(a[g].point.y<b.point.y)d=g+1;else{d=g;break}a.splice(d,0,b)}function e(a,b,d,e){return{x:(a.x*b+d.x*e)/(b+e),y:(a.y*b+d.y*e)/(b+e)}}g.prototype.JW=function(a){for(var b=0;b<this.elements.length;b++)this.elements[b].JW(a)};g.prototype.LVb=function(){return this.elements[0].LVb()};g.prototype.YSb=function(){return this.elements[0].YSb()};g.prototype.Iea=function(){return this.elements[0].Iea()};
g.prototype.e4a=function(a){if(_geo.geotoolkit.Pk(a,g)){for(var b=0;b<a.elements.length;++b)this.iterator.concat(a.elements[b].Wa),this.elements.push(a.elements[b]);this.point=e(a.point,a.weight,this.point,this.weight);this.weight+=a.weight}else this.elements.push(a),this.iterator.concat(a.Wa),this.point=e(a.point,a.Wa.length,this.point,this.weight),this.weight+=a.Wa.length;this.Bi.union(a.Bi);this.size=Math.max(this.Bi.ba(),this.Bi.aa());return this};g.prototype.$Rc=function(){return new _geo.geotoolkit.map.Wa.$G({geometry:this.point,
id:this.weight.toString(),attributes:{},jOb:this.iterator,node:this})};g.union=function(a,b){return _geo.geotoolkit.Pk(a,g)?a.e4a(b):_geo.geotoolkit.Pk(b,g)?b.e4a(a):new g(a,b)};a.prototype.JW=function(a){this.Mwc=a};a.prototype.LVb=function(){return this.options.Gjd};a.prototype.YSb=function(){return this.options.b8c};a.prototype.Iea=function(){return this.options.radius};a.prototype.bs=function(a,b,e,h,l){if(!h)return this.Wa.filter(function(b){var d=b.yd(!0);return(a?a.contains(d[0]||d):!0)&&(l?
l(b):!0)});var n=[this],p;h=b*b;for(var r=[],t=[],q={};0<n.length;)p=n.pop(),p.Mwc||a&&!p.Bi.intersects(a)||(p.size<=b?(p.i=Math.floor(p.point.x/b),p.Sq=Math.floor(p.point.y/b),q[p.i]=q[p.i]||{},q[p.i][p.Sq]=q[p.i][p.Sq]?g.union(q[p.i][p.Sq],p):p):(n.push(p.left),n.push(p.right)));var m,u,n=Object.keys(q);for(m=0;m<n.length;++m)for(p=Object.keys(q[n[m]]),u=0;u<p.length;++u){var v=q[n[m]][p[u]];v.i=+n[m];v.Sq=+p[u];d(t,v)}for(;0<t.length;)this.D7b(t.pop(),q,b,h,t);n=Object.keys(q);for(m=0;m<n.length;++m)for(p=
Object.keys(q[n[m]]),u=0;u<p.length;++u)q[n[m]][p[u]]&&r.push(q[n[m]][p[u]]);2<e&&(r=this.k8c(r,h,e,q));b=r.map(function(a){return a.$Rc()});return l?b.filter(l):b};a.prototype.dLc=function(a,b){if(a){var d=a.indexOf(b);-1!==d&&a.splice(d,1)}};a.prototype.D7b=function(a,b,d,e,l){var n=this.e$c(a,e,b);if(null!=n){var p=g.union(a,n);b[a.i][a.Sq]=null;b[n.i][n.Sq]=null;p.i=Math.floor(p.point.x/d);p.Sq=Math.floor(p.point.y/d);this.dLc(l,n);b[p.i][p.Sq]?(this.dLc(l,b[p.i][p.Sq]),b[p.i][p.Sq]=g.union(b[p.i][p.Sq],
p),b[p.i][p.Sq].i=p.i,b[p.i][p.Sq].Sq=p.Sq):b[p.i][p.Sq]=p;this.D7b(b[p.i][p.Sq],b,d,e,l);return!0}return!1};a.prototype.e$c=function(a,b,d){for(var e=null,g=window.Infinity,n=a.i-1;n<=a.i+1;++n)if(d[n])for(var p=a.Sq-1;p<=a.Sq+1;++p)if(d[n][p]&&d[n][p]!==a){var r=a.point.x-d[n][p].point.x,t=a.point.y-d[n][p].point.y,r=r*r+t*t;r<b&&r<g&&(g=r,e=d[n][p])}return e};a.prototype.addElement=function(b){for(var d=b.yd(!0),d=d[0]||d,g=this.M$c(d);null!=g.parent&&g.parent.size<g.zqd(d);)g=g.parent;var h=new a(g.Wa.slice(),
this.options,g.point,g.Bi.clone(),g,g.size),l=new a(b,this.options,d,null,g,0);null!=g.left&&(h.left=g.left,h.right=g.right,h.left.parent=h,h.right.parent=h);g.left=h;g.right=l;do g.J5a(d),g.point=e(g.point,g.Wa.length,d,1),g.size=Math.max(g.Bi.ba(),g.Bi.aa()),g.Wa.push(b),g=g.parent;while(null!=g)};a.prototype.$Rc=function(){return 1===this.Wa.length?this.Wa[0]:new _geo.geotoolkit.map.Wa.$G({geometry:this.point,id:this.Wa.length.toString(),attributes:{},jOb:_geo.geotoolkit.util.Iterator.Zm(this.Wa),
node:this})};a.prototype.k8c=function(a,b,d,e){function l(a){for(var c=[a];0<c.length;)a=c.pop(),null!=a.left?(c.push(a.left),c.push(a.right)):(a.i=Math.floor(a.point.x/b),a.Sq=Math.floor(a.point.y/b),n.push(a))}var n=[];a.forEach(function(a){if(_geo.geotoolkit.Pk(a,g)){if(a.weight<d){for(var b=0;b<a.elements.length;++b)l(a.elements[b]);e[a.i][a.Sq]=null}}else a.Wa.length<d&&(e[a.i][a.Sq]=null,l(a))});a=[];for(var p=b*b;0<n.length;){var r=n.pop(),t=this.D7b(r,e,b,p);t?(n.push.apply(n,a),a.length=
0):a.push(r)}p=Object.keys(e);for(r=0;r<p.length;++r)for(var t=Object.keys(e[p[r]]),q=0;q<t.length;++q)e[p[r]][t[q]]&&a.push(e[p[r]][t[q]]);return a};a.prototype.zqd=function(a){var b=Math.min(this.Bi.x,a.x),d=Math.max(this.Bi.za(),a.x),e=Math.min(this.Bi.y,a.y);a=Math.max(this.Bi.wa(),a.y);return Math.max(d-b,a-e)};a.prototype.J5a=function(a){a.x<this.Bi.sa()?(this.Bi.qb(this.Bi.za()-a.x),this.Bi.setX(a.x)):a.x>this.Bi.za()&&this.Bi.qb(a.x-this.Bi.sa());a.y<this.Bi.qa()?(this.Bi.Db(this.Bi.wa()-
a.y),this.Bi.setY(a.y)):a.y>this.Bi.wa()&&this.Bi.Db(a.y-this.Bi.qa())};a.prototype.M$c=function(a){var b=[this],d,e=window.Infinity,g=null;for(this.distance=this.wOb(a);0<b.length;)d=b.pop(),d.distance>=e||(null!=d.left?(d.left.distance=d.left.wOb(a),d.right.distance=d.right.wOb(a),d.left.distance<d.right.distance?(b.push(d.right),b.push(d.left)):(b.push(d.left),b.push(d.right))):(e=d.distance,g=d));return g};a.prototype.wOb=function(a){var b=Math.max(this.Bi.x-a.x,a.x-this.Bi.za(),0);a=Math.max(this.Bi.y-
a.y,a.y-this.Bi.wa(),0);return b*b+a*a};_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.Hu.T5);_geo.geotoolkit.da(b,"geotoolkit.map.features.converters.Aggregator");b.prototype.Rma=function(b){var d=[],e=!1;b.forEach(function(b){b instanceof _geo.geotoolkit.map.Wa.na?(null==this.N2?this.N2=new a(b,{Gjd:this.xh,radius:this.fg,b8c:this.BGb}):this.N2.addElement(b),e=!0):d.push(b)}.bind(this));e&&null!=this.td.options.bbox&&(this.td.response=this.yrb(this.td.options));return d};b.prototype.xA=function(a){null==
this.td.response?(this.td.response=this.yrb(a),this.td.options=a):a.bbox&&a.bbox.Pj(this.td.options.bbox)&&_geo.geotoolkit.util.Math.equals(a.scale,this.td.options.scale)||(this.td.options=a,0>=this.gnb?this.Fqc():(null!=this.td.timeout&&(0,window.clearTimeout)(this.td.timeout),this.td.timeout=(0,window.setTimeout)(this.Fqc,this.gnb)));a=a.filter;return null!=a&&null!=this.td.response?this.td.response.filter(a):this.td.response};b.prototype.Mma=function(a){null==this.VLb&&(this.VLb=function(a){if(null!=
this.N2&&a instanceof _geo.geotoolkit.map.Wa.na){for(var b=this.N2;null!=b.left;)b=-1<b.left.Wa.indexOf(a)?b.left:b.right;if(1===b.Wa.length&&b.Wa[0]===a){var c=b.parent;if(null==c)this.N2=null;else{var d=c.left===b?c.right:c.left,g=c.parent;if(null===g)this.N2.left=null,this.N2.right=null,d.parent=null,b.parent=null,this.N2=d;else{g.left===c?g.left=d:g.right=d;d.parent=g;b.parent=null;b=g;do b.Bi=b.left.Bi.clone().union(b.right.Bi),b.point=e(b.left.point,b.left.Wa.length,b.right.point,b.right.Wa.length),
b.size=Math.max(b.Bi.ba(),b.Bi.aa()),b.Wa.splice(b.Wa.indexOf(a),1),b=b.parent;while(null!=b)}}}}}.bind(this));a instanceof _geo.geotoolkit.util.Iterator?a.forEach(this.VLb):this.VLb(a);null!=this.td.options&&(this.td.response=this.yrb(this.td.options));return this};b.prototype.jb=function(){return{mindistance:this.zKb,min:this.xh,enabled:this.pR,timeout:this.gnb,amountAggregations:this.BGb,radius:this.fg}};b.prototype.setOptions=function(a){if(!a)return this;a=_geo.geotoolkit.toLowerCase(a);a.hasOwnProperty("mindistance")&&
(this.zKb=a.mindistance);a.hasOwnProperty("min")&&(this.xh=a.min);a.hasOwnProperty("enabled")&&(this.pR=a.enabled);a.hasOwnProperty("timeout")&&(this.gnb=a.timeout);a.hasOwnProperty("amountaggregations")&&(this.BGb=a.amountaggregations);a.hasOwnProperty("radius")&&(this.fg=a.radius);this.td.response=null;return this};b.prototype.yrb=function(a){var b=a.bbox,d=a.scale;a=a.filter;d=this.zKb/d;b=b?b.clone().fe(.1*b.aa(),.1*b.ba()):null;return null==this.N2?null:this.N2.bs(b,d,this.xh,this.pR,a)};b.prototype.clear=
function(){_geo.geotoolkit.map.Wa.Hu.T5.prototype.clear.call(this);null!=this.td.timeout&&(0,window.clearTimeout)(this.td.timeout);this.td={options:{},response:null};this.N2=null;return this};return b}();
_geo.geotoolkit.map.Qa.ed.LN=function(){function b(){this.QLa=[];this.xqa={}}_geo.geotoolkit.da(b,"geotoolkit.map.sources.connectors.AbstractConnector");b.prototype.send=_geo.geotoolkit.Ia;b.prototype.abort=function(a){var b;if(null==a){for(a=0;a<this.QLa.length;a++)this.m8(this.QLa[a]);this.QLa=[];b=Object.keys(this.xqa)}else if(this.xqa[a])b=[a];else return this;for(a=0;a<b.length;a++)this.m8(this.xqa[b[a]]),delete this.xqa[b[a]];return this};b.prototype.m8=function(a){return this};b.prototype.cob=
function(a,b){null!=a?this.xqa[a]=b:this.QLa.push(b);return this};b.prototype.ced=function(a){return this.xqa[a]};b.prototype.G$a=function(a,b){if(null!=a)return this.xqa[a]&&delete this.xqa[a],this;var d=this.QLa.indexOf(b);0<=d&&this.QLa.splice(d,1);return this};return b}();
_geo.geotoolkit.map.Qa.ed.L0=function(){function b(){_geo.geotoolkit.map.Qa.ed.LN.call(this);this.KAa=[];this.KY=[];this.Rca={}}function a(a,b){var c=a[1].priority,f=b[1].priority;return c===f?0:f-c}var g=6;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.ed.LN);_geo.geotoolkit.da(b,"geotoolkit.map.sources.connectors.HttpRequest");b.prototype.send=function(b,e,c){if(b){e=e||{};var f,k=e.key;this.Rca[k]&&(f=this.KY.indexOf(this.Rca[k]),this.KY.splice(f,1));if(this.KAa.length<g){var h=this;this.$kd(b,e,
function(a,b,d){d=h.KAa.indexOf(d);0<=d&&h.KAa.splice(d,1);0<h.KY.length&&(d=h.KY.shift(),h.Rca[d[1].key]&&delete h.Rca[d[1].key],h.send(d[0],d[1],d[2]));c(a,b)})}else{b=[b,e,c];if(null==e.priority)e.priority=-window.Infinity,this.KY.push(b);else{f=_geo.geotoolkit.util.Math.findIndex(b,this.KY,0,this.KY.length-1,a);if(0<=f)for(f++;f<this.KY.length;f++){if(0!==a(this.KY[f],b)){f--;break}}else f=~f;this.KY.splice(f,0,b)}null!=k&&(this.Rca[k]=b)}}else c(Error(this.getClassName()+": No url provided"))};
b.prototype.$kd=function(a,b,c){var f=new _geo.geotoolkit.window.XMLHttpRequest;f.open("GET",a,!0);b.responseType&&(f.responseType=b.responseType);var g=this,h=b.key;delete this.Rca[h];f.onload=function(){g.G$a(h,f);return 200<=f.status&&400>f.status||0===f.status?c(null,f.response,f):c(Error(g.getClassName()+": "+f.statusText+"("+a+")"),null,f)};f.onerror=function(){g.G$a(h,f);return c(Error(g.getClassName()+": "+f.statusText+"("+a+")"),null,f)};this.cob(h,f);f.send();this.KAa.push(f)};b.prototype.abort=
function(a){if(null!=a){var b;(b=this.ced(a))?(_geo.geotoolkit.map.Qa.ed.LN.prototype.abort.call(this,a),b=this.KAa.indexOf(b),this.KAa.splice(b,1)):this.Rca[a]&&(b=this.KY.indexOf(this.Rca[a]),this.KY.splice(b,1),delete this.Rca[a])}else _geo.geotoolkit.map.Qa.ed.LN.prototype.abort.call(this),this.KAa=[],this.KY=[],this.Rca={};return this};b.prototype.m8=function(a){a.abort();return this};return b}();
_geo.geotoolkit.map.Qa.ed.Hxa=function(){function b(){_geo.geotoolkit.map.Qa.ed.LN.call(this)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.ed.LN);_geo.geotoolkit.da(b,"geotoolkit.map.sources.connectors.DOMImage");b.prototype.send=function(a,b,d){if(a){var e;b&&b.dst?(e=b.dst,e.url=a):e=new _geo.geotoolkit.scene.shapes.Image({url:a,lazyloading:!0,crossorigin:"anonymous"});var c=this,f={image:e},k=b&&b.key;f.onload=function(){e.hb(_geo.geotoolkit.scene.shapes.Image.$.Ws,f.onload);c.G$a(k,f);d(null,e)};
e.kb(_geo.geotoolkit.scene.shapes.Image.$.Ws,f.onload);this.cob(k,f);e.x4()}else d(Error("geotoolkit.map.sources.connectors.DOMImage: No url provided"))};b.prototype.m8=function(a){a.image.hb(_geo.geotoolkit.scene.shapes.Image.$.Ws,a.onload);return this};return b}();
_geo.geotoolkit.map.Qa.ed.IEb=function(){function b(){_geo.geotoolkit.map.Qa.ed.Hxa.call(this);this.yoc=new _geo.geotoolkit.map.Qa.ed.L0}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.ed.Hxa);_geo.geotoolkit.da(b,"geotoolkit.map.sources.connectors.PreloadedImage");b.prototype.send=function(a,b,d){if(a){var e;e=b&&b.dst?b.dst:new _geo.geotoolkit.scene.shapes.Image({lazyloading:!0,crossorigin:"anonymous"});var c={image:e},f=this,k=b&&b.key;c.onload=function(){e.hb(_geo.geotoolkit.scene.shapes.Image.$.Ws,
c.onload);f.G$a(k,c);d(null,e)};this.yoc.send(a,{responseType:"blob",key:k,priority:b&&b.priority},function(a,b){a?d(a):(e.url=_geo.geotoolkit.window.URL.createObjectURL(b),e.kb(_geo.geotoolkit.scene.shapes.Image.$.Ws,c.onload),f.cob(k,c),e.x4())})}else d(Error("geotoolkit.map.sources.connectors.PreloadedImage: No url provided"))};b.prototype.abort=function(a){this.yoc.abort(a);_geo.geotoolkit.map.Qa.ed.Hxa.prototype.abort.call(this,a);return this};return b}();
_geo.geotoolkit.map.Qa.ed.tFb=function(){function b(a){_geo.geotoolkit.map.Qa.ed.LN.call(this);this.Ba=a&&a.data||null}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.ed.LN);_geo.geotoolkit.da(b,"geotoolkit.map.sources.connectors.Stub");b.prototype.send=function(a,b,d){return d(null,this.Ba)};b.prototype.abort=function(a){return this};return b}();
_geo.geotoolkit.map.Qa.ed.WebSocket=function(){function b(){_geo.geotoolkit.map.Qa.ed.LN.call(this)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.ed.LN);_geo.geotoolkit.da(b,"geotoolkit.map.sources.connectors.WebSocket");b.prototype.send=function(a,b,d){if(a){var e=new _geo.geotoolkit.window.WebSocket(a),c=b&&b.key;e.onerror=function(a){d(a)};e.onclose=function(a){this.G$a(c,e);d(a)}.bind(this);e.onmessage=function(a){d(null,a.data)};this.cob(c,e)}else d(Error(this.getClassName()+": No url provided"))};
b.prototype.m8=function(a){a.close();return this};return b}();
_geo.geotoolkit.map.Qa.ed.LEb=function(){function b(a){_geo.geotoolkit.map.Qa.ed.LN.call(this);this.Aq=a&&a.connector||new _geo.geotoolkit.map.Qa.ed.L0;this.ct=a&&a.callback||null}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.ed.LN);_geo.geotoolkit.da(b,"geotoolkit.map.sources.connectors.Proxy");b.prototype.send=function(a,b,d){var e=this;this.Aq.send(a,b,function(a,b){"function"===typeof e.ct&&(b=e.ct(a,b));d(a,b)})};b.prototype.abort=function(a){this.Aq.abort(a);return this};return b}();
_geo.geotoolkit.map.Qa.ed.jxa=function(){function b(a){_geo.geotoolkit.map.Qa.ed.LN.call(this);this.Aq=a&&a.connector||new _geo.geotoolkit.map.Qa.ed.L0;this.eNb=new _geo.geotoolkit.map.Qa.ed.L0}var a={};_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.ed.LN);_geo.geotoolkit.da(b,"geotoolkit.map.sources.connectors.ArcGISToken");b.prototype.send=function(b,d,e){if(!b)return this.Aq.send(b,d,e);var c=b.split(/(\/FeatureServer|\/MapServer|\/StreamServer|\/ImageServer|\?)/,2).join("");a[c]&&(b+=(0<=b.indexOf("?")?
"&":"?")+"token="+a[c]);var f=this;this.Aq.send(b,d,function(k,h){if(k||"string"!==typeof h)return e(k,h);try{h=JSON.parse(h)}catch(n){return e(null,h)}if(!h.error||h.error.code!==_geo.geotoolkit.M6b.kcc&&h.error.code!==_geo.geotoolkit.M6b.vic)return e(null,h);if(!d.token)return e(Error(f.getClassName()+": Authorization token should be specified"));var l=b.indexOf("/rest/");if(0>l)return e(Error(f.getClassName()+": Can't find info url"));l=b.substr(0,l)+"/rest/info?f=json";f.eNb.send(l,d,function(h,
k){if(h)return e(h);if("string"===typeof k)try{k=JSON.parse(k)}catch(l){return e(l,k)}if(!k.authInfo||!k.authInfo.isTokenBasedSecurity)return e(Error(f.getClassName()+": Not a token based security"));if(!k.authInfo.tokenServicesUrl)return e(Error(f.getClassName()+": Can't find a token service url"));var r=k.authInfo.tokenServicesUrl+"?f=json&serverUrl="+c+"&token="+d.token;f.eNb.send(r,d,function(h,k){if(h)return e(h);if("string"===typeof k)try{k=JSON.parse(k)}catch(l){return e(l,k)}if(!k.token)return e(null,
k);a[c]=k.token;f.send(b,d,e);return null});return null});return null});return null};b.prototype.abort=function(a){this.eNb.abort(a);this.Aq.abort(a);return this};return b}();
_geo.geotoolkit.map.Qa.jl.EQ=function(){function b(a){this.Aq=a&&a.connector||new _geo.geotoolkit.map.Qa.ed.L0;this.Ma=a&&a.settings||{};this.Sib=null;this.$ib=!1;this.ONa=null;this.WO={};for(var b=_geo.geotoolkit.map.util.oF.C_b(a),d=0;d<b.length;++d)this.P$(b[d],a[b[d]])}_geo.geotoolkit.da(b,"geotoolkit.map.sources.loaders.AbstractLoader");b.prototype.Rs=function(a){null!=a&&(this.Ma=a);return this};b.prototype.Ve=function(){if(null==this.ONa){var a=this;this.$ib=!1;this.ONa=new _geo.geotoolkit.util.Promise(function(b,
d){var e=a.ME();null==e?b(a):(e=_geo.geotoolkit.map.util.oF.GPa(e,a.WO),a.Aq.send(e,a.vla(),function(c,e){if(c)_geo.geotoolkit.warn(c),d(c);else try{a.parse(e,function(c){a.$ib=!0;b(c)})}catch(k){_geo.geotoolkit.warn(k),d(k)}}))})}return this.ONa};b.prototype.wFa=function(){return this.$ib};b.prototype.clear=function(){this.$ib=!1;this.Aq.abort();null!=this.ONa&&(this.ONa.abort(),this.ONa=null);return this};b.prototype.parse=_geo.geotoolkit.Ia;b.prototype.ME=_geo.geotoolkit.Ia;b.prototype.vla=function(){return null};
b.prototype.P$=function(a,b){"string"===typeof b&&(b=(0,window.encodeURI)(b));this.WO[a.toLowerCase()]=b;return this};b.prototype.ZCa=function(a){if(null==a)return this;for(var b in a.WO)a.WO.hasOwnProperty(b)&&(this.WO[b]=a.WO[b]);return this};b.prototype.gQa=function(){return this.Sib};return b}();
_geo.geotoolkit.map.Qa.jl.Hx=function(){function b(a){a=a||{};a.connector=a.connector||new _geo.geotoolkit.map.Qa.ed.jxa;_geo.geotoolkit.map.Qa.jl.EQ.call(this,a)}function a(a){return"esriFieldTypeOID"===a.type}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.jl.EQ);_geo.geotoolkit.da(b,"geotoolkit.map.sources.loaders.ArcGISFeature");b.prototype.parse=function(a,b){"string"===typeof a&&(a=JSON.parse(a));if(null!=a.error)throw _geo.geotoolkit.map.util.Gz.warn(a.error),Error("ArcGISFeature server returned error!");
var e=a.drawingInfo||{},c=a.spatialReference||a.sourceSpatialReference;this.Ma.fvb=this.Ma.fvb&&(!a.advancedQueryCapabilities||a.advancedQueryCapabilities.supportsPagination);this.Ma.tjd=a.maxRecordCount;this.Ma.cab||!a.minScale&&!a.maxScale||(this.Ma.cab=[0<a.minScale?1/a.minScale:null,0<a.maxScale?1/a.maxScale:null]);Array.isArray(a.layers)?(this.Ma.layers=this.M_b(a.layers,a.type),this.Ma.alpha=1,this.nHa(a.fullExtent,c)):(this.Ma.id=this.jTc(a.fields,a.displayField),this.Ma.kx=this.ixc(a),this.Ma.xQ=
_geo.geotoolkit.map.util.Gz.zJc(e.labelingInfo),this.Ma.Ff=_geo.geotoolkit.map.util.Gz.parse(a,this.Ma.url,this.Ma.xQ),this.Ma.layers=[],this.Ma.alpha=0<e.transparency?(100-e.transparency)/100:1,this.Ma.DFa=a.id,this.Ma.Bid=a.name,this.Ma.Cid=a.type,this.nHa(a.extent,c));this.Ma.gYb=this.cVb(a.initialExtent,c);this.Sib=a.copyrightText;b(this)};b.prototype.ME=function(){return this.Ma.url?this.Ma.url+"?f=json":null};b.prototype.vla=function(){return{token:this.Ma.Nwa}};b.prototype.nHa=function(a,b){var e=
this.Ma.xm;if(null==a)this.Ma.$d=e.Dv().xr();else{this.O5b(a.spatialReference||b);var c=new _geo.geotoolkit.util.na((0,window.parseFloat)(a.xmin),(0,window.parseFloat)(a.ymin)),f=new _geo.geotoolkit.util.na((0,window.parseFloat)(a.xmax),(0,window.parseFloat)(a.ymax));e.transform(c,c);e.transform(f,f);this.Ma.$d=new _geo.geotoolkit.util.Rect(c.x,c.y,f.x,f.y)}return this};b.prototype.cVb=function(a,b){if(!a)return this.Ma.$d;b=a.spatialReference||b;var e=b.wkid||b.wkt||b,c=this.Ma.xm.jI();if(c.KM()===
e)e=this.Ma.xm;else{e=_geo.geotoolkit.map.Nd.tq.ab(e);if(!e)return this.Ma.$d;e=new _geo.geotoolkit.map.Nd.pba({initialcoordinatesystem:e,targetcoordinatesystem:this.Ma.xm.Dv()})}var c=new _geo.geotoolkit.util.na((0,window.parseFloat)(a.xmin),(0,window.parseFloat)(a.ymin)),f=new _geo.geotoolkit.util.na((0,window.parseFloat)(a.xmax),(0,window.parseFloat)(a.ymax));e.transform(c,c);e.transform(f,f);return new _geo.geotoolkit.util.Rect(c.x,c.y,f.x,f.y)};b.prototype.O5b=function(a){a=a.wkid||a.wkt||a;
var b=this.Ma.xm.jI();if(b.KM()===a)return this;b=_geo.geotoolkit.map.Nd.tq.ab(a);if(!b)throw Error("ArcGISFeature: coordinate system ("+a+") is not supported, use geotoolkit.map.coordinatesystems.Registry to register it manually.");this.Ma.Vsa.KHa(b);this.Ma.xm.KW(b);return this};b.prototype.M_b=function(a,b){for(var e="Group Layer"===b?this.Ma.url.substr(0,this.Ma.url.lastIndexOf("/"))+"/":this.Ma.url+"/",c=0;c<a.length;++c){var f=a[c],k=a[f.parentLayerId];null!=k&&(0<k.minScale&&(f.minScale=0<
f.minScale?Math.min(f.minScale,k.minScale):k.minScale),0<k.maxScale&&(f.maxScale=0<f.maxScale?Math.max(f.maxScale,k.maxScale):k.maxScale));f.url=e+f.id}return a.reverse()};b.prototype.jTc=function(b,d){var e=this.Ma.id instanceof _geo.geotoolkit.map.Wa.Zq.M0?this.Ma.id.X8():this.Ma.id;if(Array.isArray(b)&&0<b.length&&b.every(function(a){return a.name!==e}))if("string"===typeof d)e=d;else var c=b.filter(a),e=0<c.length?c[0].name:b[0].name;return this.Ma.id instanceof _geo.geotoolkit.map.Wa.Zq.M0&&
this.Ma.id.X8()===e?this.Ma.id:new _geo.geotoolkit.map.Wa.Zq.M0(e)};b.prototype.ixc=function(a){if(!Array.isArray(a.fields))return null;var b=null,e=a.fields.map(function(a){"esriFieldTypeOID"===a.type&&(b=a.name);return a.name});this.Ma.fwd=b;if("*"===this.Ma.kx)return e;var c=a.drawingInfo&&a.drawingInfo.renderer||{};a=[this.Ma.id.X8(),a.displayField,c.field,c.field1,c.field2,c.field3];var f=[];Array.isArray(this.Ma.kx)&&(a=a.concat(this.Ma.kx));if(Array.isArray(c.visualVariables))for(var k=0;k<
c.visualVariables.length;++k)a.push(c.visualVariables[k].field);for(c=0;c<a.length;++c)k=a[c],null!=k&&-1<e.indexOf(k)&&-1===f.indexOf(k)&&f.push(k);return 0<f.length?f:e};return b}();
_geo.geotoolkit.map.Qa.jl.bB=function(){function b(a){a=a||{};a.connector=a.connector||new _geo.geotoolkit.map.Qa.ed.jxa;_geo.geotoolkit.map.Qa.jl.EQ.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.jl.EQ);_geo.geotoolkit.da(b,"geotoolkit.map.sources.loaders.ArcGISImage");b.prototype.parse=function(a,b){"string"===typeof a&&(a=JSON.parse(a));if(null!=a.error)throw _geo.geotoolkit.map.util.Gz.warn(a.error),Error("ArcGISImage server returned error!");var d=a.spatialReference||a.sourceSpatialReference;
this.Ma.hL=this.Ma.hL||[];if(Array.isArray(a.layers)){if(0===this.Ma.hL.length)for(var e=0;e<a.layers.length;++e){var c=a.layers[e];!0!==c.defaultVisibility||c.subLayerIds||this.Ma.hL.push(c.id)}this.Ma.layers=this.M_b(a.layers,a.type);this.Ma.layers=a.layers;this.nHa(a.fullExtent,d)}else this.Ma.layers=null,this.nHa(a.extent,d);this.Ma.gYb=this.cVb(a.initialExtent,d);this.Sib=a.copyrightText;b(this)};b.prototype.clear=function(){this.Ma.layers=[];_geo.geotoolkit.map.Qa.jl.EQ.prototype.clear.call(this)};
b.prototype.ME=function(){return this.Ma.url?this.Ma.url+"?f=pjson":null};b.prototype.vla=function(){return{token:this.Ma.Nwa}};b.prototype.nHa=function(a,b){this.O5b(a.spatialReference||b);var d=this.Ma.xm,e=new _geo.geotoolkit.util.na((0,window.parseFloat)(a.xmin),(0,window.parseFloat)(a.ymin)),c=new _geo.geotoolkit.util.na((0,window.parseFloat)(a.xmax),(0,window.parseFloat)(a.ymax));d.transform(e,e);d.transform(c,c);this.Ma.$d=new _geo.geotoolkit.util.Rect(e.x,e.y,c.x,c.y);return this};b.prototype.cVb=
function(a,b){if(!a)return this.Ma.$d;b=a.spatialReference||b;var d=b.wkid||b.wkt||b,e=this.Ma.xm.jI();if(e.KM()===d)d=this.Ma.xm;else{d=_geo.geotoolkit.map.Nd.tq.ab(d);if(!d)return this.Ma.$d;d=new _geo.geotoolkit.map.Nd.pba({initialcoordinatesystem:d,targetcoordinatesystem:this.Ma.xm.Dv()})}var e=new _geo.geotoolkit.util.na((0,window.parseFloat)(a.xmin),(0,window.parseFloat)(a.ymin)),c=new _geo.geotoolkit.util.na((0,window.parseFloat)(a.xmax),(0,window.parseFloat)(a.ymax));d.transform(e,e);d.transform(c,
c);return new _geo.geotoolkit.util.Rect(e.x,e.y,c.x,c.y)};b.prototype.O5b=function(a){a=a.wkid||a.wkt||a;var b=this.Ma.xm.jI();if(b.KM()===a)return this;b=_geo.geotoolkit.map.Nd.tq.ab(a);if(!b)throw Error("ArcGISImage: coordinate system ("+a+") is not supported, use geotoolkit.map.coordinatesystems.Registry to register it manually.");this.Ma.Vsa.KHa(b);this.Ma.xm.KW(b);return this};b.prototype.hQ=function(a){this.Ma.url?this.Ma.T9?this.Ma.T9.data?a(null,this.Ma.T9.data):this.Ma.T9.error?a(this.Ma.T9.error):
this.Ma.T9.Tob.push(a):(this.Ma.T9={Tob:[a]},a=this.Ma.url.endsWith("/")?"":"/",a=this.Ma.url+a+"legend?f=json",a=_geo.geotoolkit.map.util.oF.GPa(a,this.WO),this.Aq.send(a,null,function(a,b){if(a)this.hvb(a,b);else{if("string"===typeof b)try{b=JSON.parse(b)}catch(c){this.hvb(c,b);return}var e=_geo.geotoolkit.map.util.Gz.sld(b,this.Ma.url);e?this.hvb(null,e):this.hvb(Error(b&&b.error||"Wrong Legend received"))}}.bind(this))):a(Error("Cannot load ArcGIS legend: no server provided"))};b.prototype.hvb=
function(a,b){this.Ma.T9.error=a;this.Ma.T9.data=b;for(var d=0;d<this.Ma.T9.Tob.length;++d)this.Ma.T9.Tob[d](a,b);this.Ma.T9.Tob=[]};b.prototype.M_b=function(a,b){for(var d="Group Layer"===b?this.Ma.url.substr(0,this.Ma.url.lastIndexOf("/"))+"/":this.Ma.url+"/",e=0;e<a.length;++e){var c=a[e],f=a[c.parentLayerId];null!=f&&(0<f.minScale&&(c.minScale=0<c.minScale?Math.min(c.minScale,f.minScale):f.minScale),0<f.maxScale&&(c.maxScale=0<c.maxScale?Math.max(c.maxScale,f.maxScale):f.maxScale));c.url=d+c.id}return a};
return b}();
_geo.geotoolkit.map.Qa.jl.gAb=function(){function b(a){_geo.geotoolkit.map.Qa.jl.bB.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.jl.bB);_geo.geotoolkit.da(b,"geotoolkit.map.sources.loaders.ArcGISTile");b.prototype.parse=function(a,b){"string"===typeof a&&(a=JSON.parse(a));if(null!=a.error)throw _geo.geotoolkit.map.util.Gz.warn(a.error),Error("ArcGISTile server returned error!");var d=a.spatialReference||a.sourceSpatialReference;this.nHa(Array.isArray(a.layers)?a.fullExtent:a.extent,d);
d=(d=a.tileInfo)?d.lods:null;if(Array.isArray(d)&&0<d.length){for(var e=window.Infinity,c=-window.Infinity,f=0;f<d.length;++f){var k=d[f].level;null!=k&&(e=Math.min(e,k),c=Math.max(c,k))}this.Ma.H4=e;this.Ma.n_=c}this.Ma.Usa=function(a,b,c){return"/tile/"+a+"/"+b+"/"+c};this.Sib=a.copyrightText;b(this)};return b}();
_geo.geotoolkit.map.Qa.jl.Ty=function(){function b(a){_geo.geotoolkit.map.Qa.jl.EQ.call(this,a)}function a(a){return a.map(function(a){return'BoundingBox[CRS="EPSG:'+a+'"]'}).join(", ")}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.jl.EQ);_geo.geotoolkit.da(b,"geotoolkit.map.sources.loaders.WMS");b.prototype.parse=function(b,d){"string"===typeof b&&(b=_geo.geotoolkit.map.util.nB.parse(b));var e=b.querySelectorAll("GetMap > Format");this.trd(e);for(var c=b.querySelectorAll('Layer[queryable="1"] > Name'),
e=[],f=0;f<c.length;++f){var k=c[f].firstChild?c[f].firstChild.nodeValue:null;if(null!=k)if(0===this.Ma.hL.length){this.Ma.hL.push(k);e=[c[f].parentNode];break}else 0<=this.Ma.hL.indexOf(k)&&e.push(c[f].parentNode)}for(var c=this.Ma.xm.Dv(),k=[c.KM()],f=null,k=a(k),h=0;h<e.length;++h){var l=e[h].querySelector(k);if(null!=l){var n=+l.getAttribute("minx"),p=+l.getAttribute("miny"),r=+l.getAttribute("maxx"),l=+l.getAttribute("maxy");f?(f.Bga(n,p),f.Bga(r,l)):f=new _geo.geotoolkit.util.Rect(n,p,r,l)}}this.Ma.$d=
null!=f?f.intersect(c.xr()):c.xr();d(this)};b.prototype.ME=function(){return this.Ma.url?this.Ma.url+"?service=WMS&version="+this.Ma.version+"&request=GetCapabilities":null};b.prototype.trd=function(a){var b=this.Ma.format;if(null!=b)for(var e=0;e<a.length;++e)if(a[e].firstChild&&a[e].firstChild.nodeValue===b)return this;if(0<a.length&&a[0].firstChild)this.Ma.format=a[0].firstChild.nodeValue;else throw Error("No formats available");return this};return b}();
_geo.geotoolkit.map.Qa.jl.FL=function(){function b(a){_geo.geotoolkit.map.Qa.jl.EQ.call(this,a)}function a(a,b){g=g||new _geo.geotoolkit.util.na;var d="number"===typeof a?[a,b]:a.textContent.split(" ");return g.bb(+d[0],+d[1])}var g,d;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.jl.EQ);_geo.geotoolkit.da(b,"geotoolkit.map.sources.loaders.WFS");b.prototype.parse=function(a,b){"string"===typeof a&&(a=_geo.geotoolkit.map.util.nB.parse(a));if(a.querySelector("ExceptionReport"))throw Error("Wrong GetCapabilities info!");
d=d||new _geo.geotoolkit.util.Rect;for(var f=null,g=this.Vcd(a.querySelectorAll("FeatureTypeList > FeatureType")),h=0;h<g.length;++h)f=this.Uqd(g[h],f);if(null!=f){var g=this.Ma.xm.Dv(),h=f.di(),l=f.Sn();g.transform(h.x,h.y,h);g.transform(l.x,l.y,l);this.Ma.$d=f.zb(h.x,h.y,l.x,l.y)}else this.Ma.$d=this.Ma.xm.Dv().xr();b(this)};b.prototype.ME=function(){return this.Ma.url?this.Ma.url+"?service=WFS&version="+this.Ma.version+"&request=GetCapabilities":null};b.prototype.Uqd=function(b,c){var f=b.querySelector("DefaultSRS, DefaultCRS"),
g=this.Ma.xm.jI();f&&f.textContent&&(f=f.textContent.match(/\d+$/),null!=f&&g.KM()!==+f[0]&&((g=_geo.geotoolkit.map.Nd.ue.lq().Lu(f[0]))?(this.Ma.xm.KW(g),this.Ma.Vsa.KHa(g)):_geo.geotoolkit.warn("WFS: coordinate system ("+f[0]+") is not supported, use geotoolkit.map.coordinatesystems.Registry to register it manually.")));if(f=b.querySelector("LatLongBoundingBox"))return g=a(+f.getAttribute("minx"),+f.getAttribute("miny")),c=c?c.Bga(g.x,g.y):d.zb(g.x,g.y,g.x,g.y),g=a(+f.getAttribute("maxx"),+f.getAttribute("maxy")),
c.Bga(g.x,g.y),c;if(f=b.querySelector("WGS84BoundingBox")||b.querySelector("BoundingBox"))g=a(f.querySelector("LowerCorner")),c=c?c.Bga(g.x,g.y):d.zb(g.x,g.y,g.x,g.y),g=a(f.querySelector("UpperCorner")),c.Bga(g.x,g.y);return c};b.prototype.Vcd=function(a){for(var b=[],d=null,g=0;g<a.length;++g){var h=a[g].querySelector("Name");h&&(d=null===d?g:d,(Array.isArray(this.Ma.fIa)&&0<=this.Ma.fIa.indexOf(h.textContent)||this.Ma.fIa===h.textContent)&&b.push(a[g]))}0===b.length&&null!==d&&(this.Ma.fIa=a[d].querySelector("Name").textContent,
b.push(a[d]));return b};return b}();
_geo.geotoolkit.map.Qa.jl.wC=function(){function b(a){_geo.geotoolkit.map.Qa.jl.EQ.call(this,a)}var a="{quadkey}",g="{tileId}",d="{zoom}",e="{subdomain}",c="{culture}";_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.jl.EQ);_geo.geotoolkit.da(b,"geotoolkit.map.sources.loaders.Bing");b.prototype.parse=function(b,k){"string"===typeof b&&(b=JSON.parse(b));if(200!==b.statusCode){var h=b.errorDetails;_geo.geotoolkit.warn("BingMap server returned error ("+b.statusCode+"): "+(Array.isArray(h)&&0<h.length?h.join("\n"):
b.statusDescription));throw Error("BingMap server returned error!");}var h=this.atb(b),l=h.imageUrl.replace(c,this.Ma.zQb),n=l.indexOf(e),p=l.indexOf(a),r=l.indexOf(g),t=l.indexOf(d),p=Math.min.apply(null,[p,r,t,l.length].filter(function(a){return-1!==a})),q=l.substr(0,p),m=_geo.geotoolkit.map.util.oF.vAc(l.substr(p),[a,g,d]);this.Ma.url=0>n?q:h.imageUrlSubdomains.map(function(a){return q.replace(e,a)});"number"===typeof h.imageWidth&&(this.Ma.Gw=h.imageWidth);"number"===typeof h.imageHeight&&(this.Ma.Fw=
h.imageHeight);"number"===typeof h.zoomMax&&(this.Ma.n_=h.zoomMax);"number"===typeof h.zoomMin&&(this.Ma.H4=h.zoomMin);if("number"===typeof h.tilesX&&"number"===typeof h.tilesY){l=h.tilesX;n=h.tilesY;this.Ma.oAd=l;this.Ma.pAd=n;this.Ma.z4={};for(p=this.Ma.n_;p>=this.Ma.H4;--p)this.Ma.z4[p]={cC:l-1,PE:n-1,scale:1<<p},l=Math.ceil(l/2),n=Math.ceil(n/2);l=_geo.geotoolkit.map.Nd.ue.lq().Lu(_geo.geotoolkit.map.Mw.wba);r=l.xr();n=l.transform(this.Ma.bPa.x,this.Ma.bPa.y);p=r.aa()/this.Ma.z4[this.Ma.n_].scale;
r=r.ba()/this.Ma.z4[this.Ma.n_].scale;p=h.tilesX*p/2;h=h.tilesY*r/2;h=new _geo.geotoolkit.util.Rect(n.x-p,n.y-h,n.x+p,n.y+h);this.Ma.xm.Dv()!==l&&(l=l.Tea(this.Ma.xm.Dv()),l.ob(h,h));this.Ma.$d=h}else this.Ma.$d=this.Ma.xm.Dv().xr();this.Ma.Usa=function(b,c,e){for(var f="",h=0;h<m.length;++h)switch(m[h]){case a:f+=this.Afd(b,c,e);break;case g:f+=this.mgd(b,c,e);break;case d:f+=b;break;default:f+=m[h]}return f}.bind(this);k(this)};b.prototype.ME=function(){var a="http://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+
this.Ma.YRa+"?c="+this.Ma.zQb;null!=this.Ma.key&&(a+="&key="+this.Ma.key);if(null!=this.Ma.bPa)a+="&centerPoint="+this.Ma.bPa.y+","+this.Ma.bPa.x;else if(this.Ma.YRa===_geo.geotoolkit.map.Qa.wC.iha.c9b||this.Ma.YRa===_geo.geotoolkit.map.Qa.wC.iha.e9b||this.Ma.YRa===_geo.geotoolkit.map.Qa.wC.iha.d9b)throw Error("Bing Maps Birdseye imagery requires centerPoint parameter!");return a};b.prototype.atb=function(a){if(!Array.isArray(a.resourceSets))return null;for(var b=0;b<a.resourceSets.length;++b){var c=
a.resourceSets[b];if(c&&Array.isArray(c.resources))for(var d=0;d<c.resources.length;++d){var e=c.resources[d];if(e&&e.imageUrl)return e}}return null};b.prototype.Afd=function(a,b,c){var d="";for(a=1<<a-1;0<a;a>>=1){var e=0;0!==(c&a)&&e++;0!==(b&a)&&(e+=2);d+=e}return d};b.prototype.mgd=function(a,b,c){a=this.Ma.z4&&this.Ma.z4[a]?this.Ma.z4[a].cC+1:1<<a;return a*b+c};return b}();
_geo.geotoolkit.map.Qa.jl.zq=function(){function b(a){_geo.geotoolkit.map.Qa.jl.Hx.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.jl.Hx);_geo.geotoolkit.da(b,"geotoolkit.map.sources.loaders.Stream");b.prototype.parse=function(a,b){"string"===typeof a&&(a=JSON.parse(a));if(null!=a.error)throw _geo.geotoolkit.map.util.Gz.warn(a.error),Error("ArcGIS Stream server returned error!");var d=a.drawingInfo,e=a.spatialReference||a.sourceSpatialReference;this.Ma.id=this.jTc(a.fields,a.displayField);
this.Ma.kx=this.ixc(a);this.Ma.xQ=_geo.geotoolkit.map.util.Gz.zJc(d.labelingInfo);this.Ma.Ff=_geo.geotoolkit.map.util.Gz.parse(a,this.Ma.url,this.Ma.xQ);this.Ma.alpha=0<d.transparency?(100-d.transparency)/100:1;this.nHa(a.extent,e);d=a.streamUrls;this.Ma.qRc=[];for(var e=this.Ma.xm.jI().KM(),c=0;c<d.length;++c)for(var f=d[c],k=null!=f.token?"token="+f.token+"&":"",f=f.urls,h=0;h<f.length;++h)this.Ma.qRc.push(f[h]+"/subscribe?"+k+"outSR="+e);b(this)};return b}();
_geo.geotoolkit.map.Qa.jl.yF=function(){function b(a){_geo.geotoolkit.map.Qa.jl.EQ.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.jl.EQ);_geo.geotoolkit.da(b,"geotoolkit.map.sources.loaders.VectorTile");b.prototype.parse=function(a,b){"string"===typeof a&&(a=JSON.parse(a));this.Ma.$d=this.Ma.xm.Dv().xr();if(null!=a.tiles&&0<a.tiles.length){var d=_geo.geotoolkit.map.util.oF.vAc(a.tiles[0],["{x}","{y}","{z}"]);this.Ma.Usa=function(a,b,e){for(var g="",l=0;l<d.length;++l)switch(d[l]){case "{x}":g+=
e;break;case "{y}":g+=b;break;case "{z}":g+=a;break;default:g+=d[l]}return g}}if(a.tileMap){var e=_geo.geotoolkit.map.util.oF.GPa(this.Ma.url+a.tileMap,this.WO);this.Aq.send(e,null,function(a,b){if(!a){if("string"===typeof b)try{b=JSON.parse(b)}catch(d){return}this.Ma.WRc=b.index}}.bind(this))}this.Ma.BRc||a.defaultStyles?(e=this.Ma.BRc||this.Ma.url+a.defaultStyles,e=_geo.geotoolkit.map.util.oF.GPa(e,this.WO),this.Aq.send(e,null,function(a,d){if(a)_geo.geotoolkit.warn(a);else{if("string"===typeof d)try{d=
JSON.parse(d)}catch(e){_geo.geotoolkit.warn(e);b(this);return}this.Ma.layers=[];this.Ma.Fg=_geo.geotoolkit.map.util.KDb.Dvb(d);b(this)}}.bind(this))):b(this)};b.prototype.ME=function(){return this.Ma.url?this.Ma.url+"?f=json":null};b.HJc=function(a){if("string"===typeof a)try{a=JSON.parse(a)}catch(b){return null}a=a.sources;if(!a)return null;for(var g in a){var d=a[g];if(null!=d&&"string"===typeof d.type&&"vector"===d.type.toLowerCase()&&"string"===typeof d.url)return d.url}return null};return b}();
_geo.geotoolkit.map.Qa.Bg.Xv=function(){function b(a){a=a||{};_geo.geotoolkit.util.EventDispatcher.call(this);this.Ma=a.settings||{};this.Aq=a.connector||new _geo.geotoolkit.map.Qa.ed.L0;this.WO={};for(var b=_geo.geotoolkit.map.util.oF.C_b(a),d=0;d<b.length;++d)this.P$(b[d],a[b[d]]);this.sp=0}_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.AbstractFormat");b.prototype.Rs=function(a){null!=a&&(this.Ma=a);return this};b.prototype.zS=function(a,
b){b=b||this.Ma.url;if(null==b)return null;var d;Array.isArray(b)?(d=b[this.sp],this.sp=(this.sp+1)%b.length):d=b;return _geo.geotoolkit.map.util.oF.GPa(a?d+a:d,this.WO)};b.prototype.Ve=function(a){var b=function(a,b){a?_geo.geotoolkit.warn(a):this.uz()||this.parse(b)}.bind(this);if(Array.isArray(this.Ma.url))for(var d=0;d<this.Ma.url.length;++d)this.Aq.send(this.zS(),a,b);else this.Aq.send(this.zS(),a,b);return this};b.prototype.parse=_geo.geotoolkit.Ia;b.prototype.dispose=function(){null!=this.Aq&&
this.Aq.abort();_geo.geotoolkit.util.EventDispatcher.prototype.dispose.call(this)};b.prototype.abort=function(a){null!=this.Aq&&this.Aq.abort(a);return this};b.prototype.P$=function(a,b){"string"===typeof b&&(b=(0,window.encodeURI)(b));this.WO[a.toLowerCase()]=b;return this};b.prototype.ZCa=function(a){if(null==a)return this;for(var b in a.WO)a.WO.hasOwnProperty(b)&&(this.WO[b]=a.WO[b]);return this};return b}();
_geo.geotoolkit.map.Qa.Bg.bB=function(){function b(a){a=a||{};a.connector=a.connector||new _geo.geotoolkit.map.Qa.ed.jxa({connector:new _geo.geotoolkit.map.Qa.ed.Hxa});_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a);this.LIb=a.geometryconnector||new _geo.geotoolkit.map.Qa.ed.L0}function a(a){for(var b="&layers=show:"+a[0],e=1;e<a.length;e++)b+=","+a[e];return b}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.ArcGISImage");b.prototype.Ve=function(b){var d=
b.left,e=b.right,c=b.top,f=b.bottom,k=b.width,h=b.height,l=this.Ma.url;if(!l)return this;var n=l.endsWith("/")?"":"/",p=a(this.Ma.hL),r="export",t=new _geo.geotoolkit.scene.shapes.Image({lazyloading:!0,ax:(d+e)/2,ay:(c+f)/2,width:e-d,height:f-c,ispointingup:!0,alignment:_geo.geotoolkit.util.Da.lb,crossorigin:"anonymous"});if((l+n).endsWith("ImageServer/"))r="exportImage",p="";else if(0===this.Ma.hL.length)return this.Ja(_geo.geotoolkit.scene.shapes.Image.$.Ws,t,null),this;l=this.Ma.xm.Dv().KM();d=
n+r+("?bbox="+d+"%2C"+c+"%2C"+e+"%2C"+f+"&size="+k+"%2C"+h)+p+"&transparent=true&imageSR="+l+"&bboxSR="+l+"&f=image";this.Aq.send(this.zS(d),{token:this.Ma.Nwa,dst:t,key:b.key},function(a,b){a?_geo.geotoolkit.warn(a):this.uz()||this.Ja(_geo.geotoolkit.scene.shapes.Image.$.Ws,b,b.url)}.bind(this));return this};b.prototype.$S=function(a){if(!this.Ma.url)return this;var b=a.geometry,e=this.Ma.url.endsWith("/")?"":"/",c=null!=a.layer?a.layer+"/":"",f=this.Ma.xm.Dv(),k=f.xr(),f=f.KM(),h;if(b instanceof
_geo.geotoolkit.util.na)h="esriGeometryPoint",b=b.getX()+","+b.getY();else if(b instanceof _geo.geotoolkit.util.Rect)h="esriGeometryEnvelope",b=b.sa()+","+b.qa()+","+b.za()+","+b.wa();else if(b instanceof _geo.geotoolkit.util.Fc){var l=b.Wf(),n=b.Jg();h="esriGeometryPolygon";for(var b=(0,window.encodeURI)('{"rings":[['),p=0;p<l.length;p++)var r=k.sa()+(l[p]+k.aa()-k.sa())%k.aa(),b=b+("["+r+","+n[p]+"]"),b=b+(p+1!==l.length?",":(0,window.encodeURI)("]]}"))}else return this;this.LIb.send(this.zS(e+
c+"query?geometryType="+h+"&geometry="+b+"&inSR="+f+"&outFields=*&f=json"),{key:a.key},function(b,c){if("string"===typeof c)try{c=JSON.parse(c)}catch(d){c={}}this.Ja(_geo.geotoolkit.map.Qa.$.p6,this,{layer:a.layer,data:c})}.bind(this));return this};b.prototype.Yja=function(a){this.LIb.abort(a);return this};b.prototype.G9=function(a){if(!this.Ma.url)return this;var b=a.left,e=a.right,c=a.top,f=a.bottom,k=a.width,h=a.height,l=this.Ma.url.endsWith("/")?"":"/",n=this.Ma.xm.Dv(),p=n.xr(),n=n.KM(),r,t,
q=a.geometry;if(q instanceof _geo.geotoolkit.util.na)r="esriGeometryPoint",t=q.getX()+","+q.getY();else if(q instanceof _geo.geotoolkit.util.Rect)r="esriGeometryPolygon",t='{"rings":[['+("["+q.sa()+","+q.qa()+"],"),t+="["+q.za()+","+q.qa()+"],",t+="["+q.za()+","+q.wa()+"],",t+="["+q.sa()+","+q.wa()+"],",t+="["+q.sa()+","+q.qa()+"]",t+="]]}";else if(q instanceof _geo.geotoolkit.util.Fc){var m=q.Wf(),q=q.Jg();r="esriGeometryPolygon";t='{"rings":[[';for(var u=0;u<m.length;u++){var v=p.sa()+(m[u]+p.aa()-
p.sa())%p.aa();t+="["+v+","+q[u]+"]";t+=u+1!==m.length?",":"]]}"}}else return this;p=l+"identify?f=json&geometryType="+r+"&geometry="+t;(this.Ma.url+l).endsWith("ImageServer/")?p=p+("&inSR="+n)+("&pixelSize={x:"+Math.abs(e-b)/k+",y:"+Math.abs(c-f)/h+"}"):(p+="&mapExtent="+b+","+c+","+e+","+f,p+="&imageDisplay="+k+","+h,p+="&sr="+n,null!=a.layers&&(p+="&layers="+a.layers),p+="&tolerance=0");p=(0,window.encodeURI)(p);this.LIb.send(this.zS(p),{key:a.key},function(a,b){if("string"===typeof b)try{b=JSON.parse(b),
b.results&&!b.features&&(b.features=b.results)}catch(c){b={}}this.Ja(_geo.geotoolkit.map.Qa.$.p6,this,{layer:-1,data:b})}.bind(this));return this};return b}();
_geo.geotoolkit.map.Qa.Bg.Hx=function(){function b(a){a=a||{};a.connector=a.connector||new _geo.geotoolkit.map.Qa.ed.jxa;_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a);this.Nza=[];this.tBa=null;this.Eoc=this.omd.bind(this)}function a(a){return Array.isArray(a)&&0<a.length?"&outFields="+a.join("%2C"):""}var g=200,d=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.ArcGISFeature");b.prototype.Ve=function(b){function c(a,d){if(a)_geo.geotoolkit.warn(a);
else{if("string"===typeof d)try{d=JSON.parse(d)}catch(f){_geo.geotoolkit.warn(f);return}var g=!1;if(null!=d.error)if(504===d.error.code)g=!0;else{_geo.geotoolkit.map.util.Gz.warn(d.error);return}if(!0===d.exceededTransferLimit||g){if(!r.Ma.fvb||g){var g=(b.left+b.right)/2,h=(b.top+b.bottom)/2;r.Ve({left:b.left,top:b.top,right:g,bottom:h,key:b.key});r.Ve({left:b.left,top:h,right:g,bottom:b.bottom,key:b.key});r.Ve({left:g,top:b.top,right:b.right,bottom:h,key:b.key});r.Ve({left:g,top:h,right:b.right,
bottom:b.bottom,key:b.key});return}t+=r.Ma.tjd;r.Aq.send(r.zS(p+"&resultOffset="+t),{token:r.Ma.Nwa,key:b.key},c)}Array.isArray(d.features)&&0<d.features.length&&(r.Nza.push.apply(r.Nza,d.features),null==r.tBa&&(r.tBa=(0,window.setTimeout)(r.Eoc,0)))}}var f=this.Ma.Vsa;f.cb(d.bb(b.left,b.top),d);var g=d.getX(),h=d.getY();f.cb(d.bb(b.right,b.bottom),d);var f=d.getX(),l=d.getY(),n=a(this.Ma.kx),p="/query?geometryType=esriGeometryEnvelope&geometry="+(0,window.encodeURIComponent)(g+","+h+","+f+","+l)+
"&spatialRel=esriSpatialRelIntersects"+n+"&returnExceededLimitFeatures=false&resultType=standard&returnDistinctValues=false&f=json",r=this,t=0;this.Aq.send(this.zS(p),{token:this.Ma.Nwa,key:b.key},c);return this};b.prototype.omd=function(){this.tBa=null;if(!this.uz()){for(var a=[],b=this.Ma.xm,d=Date.now(),k=this.Ma.id.X8();0<this.Nza.length&&!(Date.now()>=d+g);){var h=this.Nza.shift(),l=h.geometry,n=h.attributes,h=h.symbol,h=_geo.geotoolkit.map.util.Gz.wma(h)||_geo.geotoolkit.map.util.Gz.Yta(n,this.Ma.Ff);
if(null==h||null==l)_geo.geotoolkit.warn("ArcGISFeature: feature "+(null==h?"style":"geometry")+" is not defined");else{var p=l[this.Ma.Ff.type[2]]||l,p=_geo.geotoolkit.map.util.Gz.vma(p,b);if(1<p.length)l=this.Ma.Ff.type[1];else if(1===p.length)l=this.Ma.Ff.type[0],p=p[0];else continue;n=new l({id:n[k],geometry:p,attributes:n});n.Ez=h;a.push(n)}}this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,a);0<this.Nza.length&&(this.tBa=(0,window.setTimeout)(this.Eoc,0))}};b.prototype.abort=function(a){_geo.geotoolkit.map.Qa.Bg.Xv.prototype.abort.call(this,
a);null!=this.tBa&&((0,window.clearTimeout)(this.tBa),this.tBa=null);0<this.Nza.length&&(this.Nza=[])};return b}();
_geo.geotoolkit.map.Qa.Bg.eH=function(){function b(a){_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.GeoJSON");b.prototype.parse=function(a){"string"===typeof a&&(a=JSON.parse(a));var b=this.Ma.xm;a=_geo.geotoolkit.map.util.eH.parse(a,this.Ma.id,b.transform.bind(b));this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,a);return this};return b}();
_geo.geotoolkit.map.Qa.Bg.Ty=function(){function b(a){a=a||{};a.connector=a.connector||new _geo.geotoolkit.map.Qa.ed.Hxa;_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a)}function a(a){for(var b="&layers="+a[0],e=1;e<a.length;++e)b+=","+a[e];return b}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.WMS");b.prototype.Ve=function(b){var d=b.left,e=b.right,c=b.top,f=b.bottom,k=b.width,h=b.height,l=this.Ma.xm.Dv().KM(),n=new _geo.geotoolkit.scene.shapes.Image({lazyloading:!0,
ax:(d+e)/2,ay:(c+f)/2,width:e-d,height:f-c,ispointingup:!0,alignment:_geo.geotoolkit.util.Da.lb,crossorigin:"anonymous"});if(0===this.Ma.hL.length)return this.Ja(_geo.geotoolkit.scene.shapes.Image.$.Ws,n,null),this;var p=a(this.Ma.hL),k="?service=WMS&request=GetMap&version="+this.Ma.version+p+"&styles=&crs=EPSG:"+l+"&bbox="+d+"%2C"+c+"%2C"+e+"%2C"+f+"&width="+k+"&height="+h+"&format="+this.Ma.format+"&transparent="+this.Ma.transparent;this.Aq.send(this.zS(k),{dst:n,key:b.key},function(a,b){a?_geo.geotoolkit.warn(a):
this.uz()||(b.Cd(_geo.geotoolkit.util.Da.lb),b.yc((d+e)/2,(c+f)/2),b.TI(!0),b.setSize(e-d,f-c),this.Ja(_geo.geotoolkit.scene.shapes.Image.$.Ws,b,b.url))}.bind(this));return this};return b}();
_geo.geotoolkit.map.Qa.Bg.xX=function(){function b(a){_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.KML");b.prototype.parse=function(a){"string"===typeof a&&(a=_geo.geotoolkit.map.util.nB.parse(a));var b=this.Ma.xm,d=function(){this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,null)}.bind(this);a=_geo.geotoolkit.map.util.xX.parse(a,this.Ma.id,b.transform.bind(b),d);this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,a);
return this};return b}();
_geo.geotoolkit.map.Qa.Bg.FL=function(){function b(a){this.rk=a&&a.format||"json";this._parser=a&&a.parser||new _geo.geotoolkit.map.Qa.Bg.eH;this.Djc=function(a,b,c){this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,c)}.bind(this);this._parser.kb(_geo.geotoolkit.map.Qa.$.aw,this.Djc);a=a||{};a.format=null;_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a)}var a=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.WFS");b.prototype.Rs=function(a){null!=
a&&(this.Ma=a,this._parser.Rs(a));return this};b.prototype.Ve=function(b){var d=this.Ma.Vsa;d.cb(a.bb(b.left,b.top),a);var e=a.getX(),c=a.getY();d.cb(a.bb(b.right,b.bottom),a);var f=a.getX(),k=a.getY(),h;h=this.Ma.fIa;h=Array.isArray(h)?"typeNames=("+h.join(")(")+")":"1.1.0">=this.Ma.version?"typeName="+h:"typeNames=("+h+")";d="1.1.0"<=this.Ma.version&&4326===d.Dv().KM()?c+","+e+","+k+","+f:e+","+c+","+f+","+k;d="?service=WFS&request=GetFeature&outputFormat="+this.rk+"&"+h+"&bbox="+d+"&version="+
this.Ma.version;this.Aq.send(this.zS(d),{key:b.key},function(a,b){a?_geo.geotoolkit.warn(a):this.uz()||this._parser.parse(b)}.bind(this));return this};b.prototype.dispose=function(){this._parser.hb(_geo.geotoolkit.map.Qa.$.aw,this.Djc);this._parser.dispose();_geo.geotoolkit.map.Qa.Bg.Xv.prototype.dispose.call(this)};return b}();
_geo.geotoolkit.map.Qa.Bg.Dk=function(){function b(a){a=a||{};a.connector=a.connector||new _geo.geotoolkit.map.Qa.ed.IEb;this.HH=a.formatterfunction;a.formatterfunction=null;_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.Tile");b.prototype.Ve=function(a){var b=a.z,d=a.x,e=a.y,c=this.HH||this.Ma.Usa,b=c?c(b,e,d):null;this.Aq.send(this.zS(b),{dst:a.dst,key:a.key,priority:a.priority},function(a,b){a?_geo.geotoolkit.warn(a):
this.uz()||this.Ja(_geo.geotoolkit.scene.shapes.Image.$.Ws,b,b.url)}.bind(this));return this};b.prototype.ela=function(){return this.HH};b.prototype.oHa=function(a){this.HH=a;return this};return b}();
_geo.geotoolkit.map.Qa.Bg.QN=function(){function b(a){_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a)}function a(b){return Array.isArray(b)?b.map(a):b.toUpperCase()}function g(a,b){if(Array.isArray(b))for(var d=0;d<b.length;++d){if(0<=a.indexOf(b[d].toUpperCase()))return b[d]}else if(0<=a.indexOf(b))return b;return null}var d=new _geo.geotoolkit.util.na,e=",";_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.CSV");b.Jod=function(a){e=a};b.prototype.parse=
function(b){"string"===typeof b&&(b=_geo.geotoolkit.data.sdb.lvc(b,this.Ma.Vbd||e));if(2>b.length)return this;var f=a(b[0]),k=f.length,h=g(f,a(this.Ma.t8b)),l=g(f,a(this.Ma.w8b));if(null==h||null==l)return this;for(var n=[],p=1,r=b[p];p<b.length;r=b[++p])if(r.length===k){for(var t={},q={},m=0;m<k;++m)t[b[0][m]]=r[m],f[m]===h?null!=r[m]&&(q.x=_geo.geotoolkit.map.Nd.cB.ZRc(r[m])):f[m]===l&&null!=r[m]&&(q.y=_geo.geotoolkit.map.Nd.cB.ZRc(r[m]));this.Ma.xm.Dv().transform(q.x,q.y,d);q.x=d.x;q.y=d.y;r=_geo.geotoolkit.map.util.Gz.Yta(t,
this.Ma.Ff);t=new _geo.geotoolkit.map.Wa.na({id:this.Ma.id.EP(t),attributes:t,geometry:q});null!=r&&(t.Ez=r);n.push(t)}this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,n);return this};return b}();
_geo.geotoolkit.map.Qa.Bg.J0=function(){function b(a){_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.GeoRSS");b.prototype.parse=function(a){"string"===typeof a&&(a=_geo.geotoolkit.map.util.nB.parse(a));var b=this.Ma.xm;a=_geo.geotoolkit.map.util.J0.parse(a,this.Ma.id,b.transform.bind(b));this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,a);return this};return b}();
_geo.geotoolkit.map.Qa.Bg.zq=function(){function b(a){a=a||{};a.connector=a.connector||new _geo.geotoolkit.map.Qa.ed.jxa({connector:new _geo.geotoolkit.map.Qa.ed.WebSocket});_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.Stream");b.prototype.parse=function(a){"string"===typeof a&&(a=JSON.parse(a));var b=this.Ma.xm,d=this.Ma.id.X8(),e=a.attributes;a=a.geometry;if(null!=this.Ma.Ff){if(a)if(a=a[this.Ma.Ff.type[2]]||
a,a=_geo.geotoolkit.map.util.Gz.vma(a,b),1<a.length)b=this.Ma.Ff.type[1];else if(1===a.length)b=this.Ma.Ff.type[0],a=a[0];else return this;else b=_geo.geotoolkit.map.Wa.na,a={x:window.NaN,y:window.NaN};d=new b({id:e[d],geometry:a,attributes:e});e=_geo.geotoolkit.map.util.Gz.Yta(e,this.Ma.Ff);null!=e&&(d.Ez=e);this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,[d])}return this};b.prototype.zS=function(a,b){return _geo.geotoolkit.map.Qa.Bg.Xv.prototype.zS.call(this,a,b||this.Ma.qRc)};return b}();
_geo.geotoolkit.map.Qa.Bg.yF=function(){function b(a){a=a||{};a.connector=a.connector||new _geo.geotoolkit.map.Qa.ed.L0;this.Ma=this.Ma||{};this.Ma.Fg={};_geo.geotoolkit.map.Qa.Bg.Dk.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Dk);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.VectorTile");b.prototype.Ve=function(a){var b=a.z,d=a.x,e=a.y,c=this.Ma.Usa||this.HH,c=c?c(b,e,d):null,f=a.dst,k=this;this.Aq.send(this.zS(c),{responseType:"arraybuffer",key:a.key},function(a,c){if(a)_geo.geotoolkit.warn(a);
else if(!this.uz()){var n=k.Ma.xm,n=_geo.geotoolkit.map.util.KDb.parse(c,d,e,b,k.Ma.id,n.transform.bind(n),k.Ma.Fg,k.Ma.layers);0<n.names.length&&(f.vna=n,this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,f))}}.bind(this));return this};return b}();
_geo.geotoolkit.map.Qa.Bg.Raa=function(){function b(a){a=a||{};a.connector=a.connector||new _geo.geotoolkit.map.Qa.ed.L0;_geo.geotoolkit.map.Qa.Bg.Xv.call(this,a);this.ct=null}var a,g;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Bg.Xv);_geo.geotoolkit.da(b,"geotoolkit.map.sources.formats.Lerc");b.prototype.Ve=function(a){var b=this.Ma.url;if(!b)return this;var c=this.E6c||1,f=b.endsWith("/")?"":"/",b=(b+f).endsWith("ImageServer/")?"exportImage":"export",g=this.Ma.xm.Dv().KM(),h,l,n,p,r,t;if(1<c){t=
c/a.width*(a.right-a.left);t=Math.round(this.Ma.$d.width/t)||1;var q=this.Ma.$d.width/t,c=c/a.height*(a.bottom-a.top),c=Math.round(this.Ma.$d.height/c)||1,m=this.Ma.$d.height/c;h=Math.floor((a.left-this.Ma.$d.x)/q);var u=Math.ceil((a.right-this.Ma.$d.x)/q),v=Math.floor((a.top-this.Ma.$d.y)/m),w=Math.ceil((a.bottom-this.Ma.$d.y)/m);l=this.Ma.$d.x+h*q;n=this.Ma.$d.x+(u+1)*q;p=this.Ma.$d.y+v*m;r=this.Ma.$d.y+(w+1)*m;h="?bbox="+l+"%2C"+p+"%2C"+n+"%2C"+r+"&size="+(u-h+1)+"%2C"+(w-v+1);f=f+b+h+"&transparent=true&imageSR="+
g+"&bboxSR="+g+"&f=image&format=lerc&renderingRule=%7B%22rasterFunction%22%3A%22Resample%22%2C%22rasterFunctionArguments%22%3A%7B%22ResamplingType%22%3A10%2C%22InputCellSize%22%3A%7B%22x%22%3A"+1/t+"%2C%22y%22%3A"+1/c+"%7D%7D%7D";this.Aq.send(this.zS(f),{responseType:"arraybuffer",key:a.key},function(a,b){if(a)_geo.geotoolkit.warn(a);else if(!this.uz()){b=this.qld(b,l,r,q,m);for(var c=0;c<b.length;++c){var d=_geo.geotoolkit.map.util.Gz.Yta(b[c].getAttributes(),this.Ma.Ff);null!=d&&(b[c].Ez=d)}this.Ja(_geo.geotoolkit.map.Qa.$.aw,
this,b)}}.bind(this))}else l=a.left,n=a.right,p=a.top,r=a.bottom,t=a.width,c=a.height,h="?bbox="+l+"%2C"+p+"%2C"+n+"%2C"+r+"&size="+t+"%2C"+c,this.Aq.send(this.zS(f+b+h+"&transparent=true&imageSR="+g+"&bboxSR="+g+"&f=image&format=lerc"),{responseType:"arraybuffer",key:a.key},function(a,b){if(a)_geo.geotoolkit.warn(a);else if(!this.uz()){var c=this.mld(b),c=new _geo.geotoolkit.scene.shapes.Image({url:c,alignment:_geo.geotoolkit.util.Da.lb,ax:(l+n)/2,ay:(p+r)/2,ispointingup:!0,width:n-l,height:p-r});
c.kb(_geo.geotoolkit.scene.shapes.Image.$.Ws,this.nc())}}.bind(this));return this};b.prototype.qld=function(a,b,c,f,g){var h=_geo.geotoolkit.map.util.Raa.decode(a);a=h.width;var l=h.height,n=h.Fj,h=h.mask,p=[];c-=g/2;for(var r=0,t=0;t<l;c-=g,t++)for(var q=b+f/2,m=0;m<a;q+=f,m++)h&&!h[r]||p.push(new _geo.geotoolkit.map.Wa.na({attributes:{Magnitude:n[0]&&n[0][r],Direction:n[1]&&n[1][r]},geometry:{x:q,y:c}})),r++;return p};b.prototype.mld=function(b){var e=_geo.geotoolkit.map.util.Raa.decode(b),c=e.width,
f=e.height;b=e.Fj;var g=e.mask;a=null!=a?a.setSize(c,f):new _geo.geotoolkit.renderer.canvas.Mr(c,f,!0);var h=a.Lk().getImageData(0,0,c,f),l=h.data,n,p,c=c*f,f=b.length;if(1===f)if(f=e.Ts[0].minValue,e=e.Ts[0].maxValue,p=255/(e-f),g)for(n=0;n<c;n++)g[n]?(e=this.ac((b[0][n]-f)*p),l[4*n]=e.Bl(),l[4*n+1]=e.zl(),l[4*n+2]=e.xl(),l[4*n+3]=e.Km()):(l[4*n]=0,l[4*n+1]=0,l[4*n+2]=0,l[4*n+3]=0);else for(n=0;n<c;n++)e=this.ac((b[0][n]-f)*p),l[4*n]=e.Bl(),l[4*n+1]=e.zl(),l[4*n+2]=e.xl(),l[4*n+3]=e.Km();else if(3<=
f)if(f=Math.min.apply(null,e.Ts.map(function(a){return a.minValue})),e=Math.max.apply(null,e.Ts.map(function(a){return a.maxValue})),p=255/(e-f),g)for(n=0;n<c;n++)g[n]?(l[4*n]=(b[0][n]-f)*p,l[4*n+1]=(b[1][n]-f)*p,l[4*n+2]=(b[2][n]-f)*p,l[4*n+3]=255):(l[4*n]=0,l[4*n+1]=0,l[4*n+2]=0,l[4*n+3]=0);else for(n=0;n<c;n++)l[4*n]=(b[0][n]-f)*p,l[4*n+1]=(b[1][n]-f)*p,l[4*n+2]=(b[2][n]-f)*p,l[4*n+3]=255;a.Lk().putImageData(h,0,0);return a.Kk().toDataURL()};b.prototype.nc=function(){if(null==this.ct){var a=this;
this.ct=function(b,c,f){c.hb(_geo.geotoolkit.scene.shapes.Image.$.Ws,a.ct);a.Ja(_geo.geotoolkit.scene.shapes.Image.$.Ws,c,f)}}return this.ct};b.prototype.ac=function(a){this.dt=this.dt||{};a=Math.round(a);if(!this.dt[a]){var b=this.ae||g;null==b&&(b=g=new _geo.geotoolkit.util.ym({values:[0,1],colors:["black","white"]}));this.dt[a]=b.ac(a/255)}return this.dt[a]};b.prototype.P$=function(a,b){a=a.toLowerCase();"colorprovider"===a&&b instanceof _geo.geotoolkit.util.Ie?this.ae=b:"symboltilesize"===a?this.E6c=
b:_geo.geotoolkit.map.Qa.Bg.Xv.prototype.P$.call(this,a,b);return this};return b}();
_geo.geotoolkit.map.Qa.Ej.$W=function(){function b(a,b){_geo.geotoolkit.util.EventDispatcher.call(this);this.rk=a;this.Ma=b;null!=a&&this.hN(a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.map.sources.managers.AbstractManager");b.prototype.dispose=function(){this.clear();null!=this.rk&&this.rk.dispose();_geo.geotoolkit.util.EventDispatcher.prototype.dispose.call(this)};b.prototype.hN=_geo.geotoolkit.Ia;b.prototype.Ve=_geo.geotoolkit.Ia;b.prototype.clear=
function(){this.abort();return this};b.prototype.abort=function(){this.rk.abort();return this};return b}();
_geo.geotoolkit.map.Qa.Ej.Wh=function(){function b(a,b){_geo.geotoolkit.map.Qa.Ej.$W.call(this,a,b);this.fS=null;this.Nia={};this.Fm={};this.PNa=null;this.d0a=this.Mra=!1;this.Bu=window.Infinity}var a=new _geo.geotoolkit.util.Rect,g=new _geo.geotoolkit.util.Rect;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Ej.$W);_geo.geotoolkit.da(b,"geotoolkit.map.sources.managers.Vector");b.prototype.Ve=function(b,e){if(!this.Ma.url)return this;var c=this.Ma.$d,f=this.Ma.mode,g=this.Ma.resolution,h,l;if(null!=b){if(!b.intersects(c))return this;
b=a.zb(b).intersect(c)}else f=_geo.geotoolkit.map.Wa.Toa.Qna,b=c;var n=e?e.Ya():_geo.geotoolkit.util.Ga.N0,p=n.Ab();switch(f){case _geo.geotoolkit.map.Wa.Toa.Qna:return this.Hrb(0,0)?this.Mra=!1:(this.Mra=!0,this.d0a=!1,this.rk.abort(),this.s$a(c,n),this.lxb(0,0,!0)),this;case _geo.geotoolkit.map.Wa.Toa.Z8b:if(null!=this.PNa&&this.PNa.Pj(b)&&_geo.geotoolkit.util.Math.equals(this.Bu,p))return this;this.Mra=!0;this.d0a=!1;this.rk.abort();this.PNa=this.PNa?this.PNa.zb(b):b.clone();this.Bu=p;this.rMc(function(){this.s$a(this.PNa,
n)});return this;case _geo.geotoolkit.map.Wa.Toa.Dk:f=new _geo.geotoolkit.util.xc(256,256);n.xk(f,f);h=f.aa();l=f.ba();_geo.geotoolkit.util.Math.equals(this.Bu,p)||(this.d0a=this.Mra=!0,this.rk.abort(),this.Fm={},this.Bu=p);break;case _geo.geotoolkit.map.Wa.Toa.Mx:this.Mra=!1;this.d0a=!0;h=c.aa()/g;l=c.ba()/g;break;default:return this}var r=Math.floor((b.sa()-c.sa())/h),t=Math.ceil((b.za()-c.sa())/h),q=Math.floor((b.qa()-c.qa())/l),m=Math.ceil((b.wa()-c.qa())/l);this.rMc(function(){for(var b=a.qb(h).Db(l),
d=r;d<t;d++)for(var e=q;e<m;e++)this.Hrb(d,e)||(this.s$a(b.setX(c.sa()+d*h).setY(c.qa()+e*l),n),this.lxb(d,e,!0))});return this};b.prototype.hN=function(){var a=this.oSb.bind(this),b=function(b,e,g){b===_geo.geotoolkit.map.Qa.$.aw&&null!=g&&(this.Mra&&(this.Nia={},this.Mra=!1,this.Ja(_geo.geotoolkit.map.Qa.$.G0,this)),this.d0a&&(g=g.filter(a)));this.Ja(b,this,g)}.bind(this);this.rk.kb(_geo.geotoolkit.map.Qa.$.aw,b);this.rk.kb(_geo.geotoolkit.map.Qa.$.GT,b);this.rk.kb(_geo.geotoolkit.map.Qa.$.G0,b);
return this};b.prototype.Hrb=function(a,b){return this.Fm[a]&&this.Fm[a][b]};b.prototype.lxb=function(a,b,c){this.Fm[a]=this.Fm[a]||{};this.Fm[a][b]=c;return this};b.prototype.s$a=function(a,b){b.ob(a,g);this.rk.Ve({left:a.sa(),top:a.qa(),right:a.za(),bottom:a.wa(),width:g.aa(),height:g.ba()})};b.prototype.oSb=function(a){var b=_geo.geotoolkit.map.util.oF.gzb(a.yd());return null==this.Nia[b]?(this.Nia[b]=a,!0):_geo.geotoolkit.map.util.oF.pSb(a,this.Nia[b])?!1:(Array.isArray(this.Nia[b])?this.Nia[b].push(a):
this.Nia[b]=[this.Nia[b],a],!0)};b.prototype.O6a=function(){return this.rk};b.prototype.rMc=function(a){null!=this.fS&&(0,window.clearTimeout)(this.fS);this.fS=(0,window.setTimeout)(function(){a.call(this);this.fS=null}.bind(this),this.Ma.timeout)};b.prototype.abort=function(){null!=this.fS&&((0,window.clearTimeout)(this.fS),this.fS=null);return _geo.geotoolkit.map.Qa.Ej.$W.prototype.abort.call(this)};b.prototype.clear=function(){_geo.geotoolkit.map.Qa.Ej.$W.prototype.clear.call(this);this.Fm={};
this.Nia={};this.Bu=window.Infinity;this.Mra=!1;return this};return b}();
_geo.geotoolkit.map.Qa.Ej.Image=function(){function b(a,b,d){a=a.ob(b);b=Math.floor(a.sa());var g=Math.ceil(a.za());b<d.sa()?(g+=d.sa()-b,g=Math.min(g,d.za()),b=d.sa()):g>d.za()&&(b+=d.za()-g,b=Math.max(b,d.sa()),g=d.za());var h=Math.floor(a.qa()),l=Math.ceil(a.wa());h<d.qa()?(l+=d.qa()-h,l=Math.min(l,d.wa()),h=d.qa()):l>d.wa()&&(h+=d.wa()-l,h=Math.max(h,d.qa()),l=d.wa());return a.zb(b,h,g,l)}function a(a,b){var d=1E-5;return b.sa()>=a.sa()-d&&b.za()<=a.za()+d&&b.qa()>=a.qa()-d&&b.wa()<=a.wa()+d}
function g(a,b){_geo.geotoolkit.map.Qa.Ej.$W.call(this,a,b);this.nw=[]}var d=.001;_geo.geotoolkit.fa(g,_geo.geotoolkit.map.Qa.Ej.$W);_geo.geotoolkit.da(g,"geotoolkit.map.sources.managers.Image");g.prototype.Ve=function(a,c){this.Ma.rVa||(a=c.Nb(!0));var d=c.Ya(),g=d.Ab(),g=this.vi(a,g);if(!g)return this;null!=this.fS&&((0,window.clearTimeout)(this.fS),this.fS=null);this.fS=(0,window.setTimeout)(function(){for(var a=d.ob(this.Ma.rVa?this.Ma.$d:this.Ma.xm.Dv().xr()),c=0;c<this.nw.length;++c){var e=
this.nw[c];if(!this.nw[c].rwb){var g=b(d,e.bounds,a);d.qe(g,e.bounds);var k=Math.round(g.aa()),g=Math.round(g.ba());this.rk.Ve({left:e.bounds.getX(),top:e.bounds.qa(),right:e.bounds.za(),bottom:e.bounds.wa(),width:Math.max(k,1),height:Math.max(g,1)});e.rwb=!0}}this.fS=null}.bind(this),this.Ma.timeout);return this};g.prototype.vi=function(b,c){var d=this.Ma.xm.Dv().xr(),g=[];if(d.$C(b))this.Ma.rVa&&b.intersect(this.Ma.$d),b.isEmpty()||g.push(b);else{var h=b.clone().intersect(d);this.Ma.rVa&&h.intersect(this.Ma.$d);
h.isEmpty()||g.push(h);h=b.getX()>d.getX()?d.aa():-d.aa();h=d.clone().intersect(b.translate(-h,0));this.Ma.rVa&&h.intersect(this.Ma.$d);h.isEmpty()||g.push(h)}var l,h=this.Ma.fe*b.aa(),n=this.Ma.fe*b.ba(),p=this.Ma.rVa?this.Ma.$d:d;if(!_geo.geotoolkit.util.Math.equals(this.Bu,c)||0===g.length){this.Bu=c;this.nw=[];for(d=0;d<g.length;++d)this.nw.push({bounds:g[d].fe(h,n).intersect(p),rwb:!1});return!0}for(var r=[],t=!1,d=0;d<g.length;d++){for(l=0;l<this.nw.length&&!a(this.nw[l].bounds,g[d]);l++);l===
this.nw.length?(r.push({bounds:g[d].fe(h,n).intersect(p),rwb:!1}),t=!0):(this.nw[l].rwb||(g[d].fe(h,n).intersect(p),t=t||this.nw[l].bounds.$C(g[d]),this.nw[l].bounds.union(g[d])),0>r.indexOf(this.nw[l])&&r.push(this.nw[l]))}this.nw=r;return t};g.prototype.hN=function(){this.rk.kb(_geo.geotoolkit.scene.shapes.Image.$.Ws,function(a,b){for(var f=!0,g=0;g<this.nw.length;++g)this.nw[g].bounds.Pj(b.ga(),d)?this.nw[g].tGc=b:this.nw[g].tGc||(f=!1);f&&(f=this.nw.map(function(a){return a.tGc}),this.Ja(a,this,
f))}.bind(this));return this};g.prototype.abort=function(){null!=this.fS&&((0,window.clearTimeout)(this.fS),this.fS=null);return _geo.geotoolkit.map.Qa.Ej.$W.prototype.abort.call(this)};g.prototype.clear=function(){_geo.geotoolkit.map.Qa.Ej.$W.prototype.clear.call(this);this.nw=[];this.jo=[];this.Bu=null;return this};return g}();
_geo.geotoolkit.map.Qa.Ej.Dk=function(){function b(a,b){_geo.geotoolkit.map.Qa.Ej.$W.call(this,a,b);this.mA={};this.Hza=0;this.sv={};this._z=this.kP=-1;this.XC={}}function a(a,b,c){return Math.round(Math.log(a/b/c)/Math.LN2)}function g(a){a=Math.sin(a*Math.PI/180);a=Math.log((1+a)/(1-a))/2;return Math.max(Math.min(a,Math.PI),-Math.PI)/2}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Ej.$W);_geo.geotoolkit.da(b,"geotoolkit.map.sources.managers.Tile");b.prototype.Ve=function(a,b){var c=b.Ya();if(null==
this.Ma.$d||a.isEmpty()||!this.Ma.$d.intersects(a)||!c)return this;var c=this.RCa(a.clone().intersect(this.Ma.$d),c),f=c.z;this.$7b(f,c.pFa,c.x0b);this.SNb(c.pFa.wD,c.pFa.RE,c.pFa.cC,c.pFa.PE);this._z=f;var g=this.kP;-1===g?this.kP=f:g!==f&&(g=this.vSb(),g>=this.Ma.H4&&(this.kP=g));g=Date.now();this.qwb(f,c.x0b,g);this.qwb(f,c.pFa,g);return this};b.prototype.hN=function(){this.rk.kb(_geo.geotoolkit.scene.shapes.Image.$.Ws,function(a,b){this.XC[b.ih+"x"+b.TH]=null;this.sv[b.ih][b.TH]=b;this._z===b.ih&&
this.N8a()&&this.Ja(_geo.geotoolkit.map.Qa.$.RX,this,null)}.bind(this));this.rk.kb(_geo.geotoolkit.scene.shapes.Image.$.Neb,function(a,b){this.XC[b.ih+"x"+b.TH]="N/A";this.Hza--}.bind(this));return this};b.prototype.RCa=function(b,e){function c(a,b,c,d){var e=Math.floor((a.sa()-p.sa())/b);b=Math.ceil((a.za()-p.sa())/b)-1;var f=Math.floor((a.qa()-p.qa())/c);a=Math.ceil((a.wa()-p.qa())/c)-1;return{wD:Math.max(e,0),cC:Math.min(b,d.aa()-1),RE:Math.max(f,0),PE:Math.min(a,d.ba()-1)}}var f=e.ob(b),k=this.Ma.xm.Dv(),
h=k.je(b.sa(),b.qa()),l=k.je(b.za(),b.wa()),n=(g(l.y)-g(h.y))/Math.PI,h=l.x-h.x,h=(0>h?h+360:h)/360,n=a(f.ba(),this.Ma.Fw,n),h=a(f.aa(),this.Ma.Gw,h),n=Math.min(n,h),n=_geo.geotoolkit.util.Math.clamp(n,this.Ma.H4,this.Ma.n_),p=e.ob(k.xr()),k=this.PM(n),h=p.aa()/k.aa(),l=p.ba()/k.ba(),r=this.PM(),t=p.aa()/r.aa(),q=p.ba()/r.ba(),m=e.ob(this.Ma.$d);return{z:n,x0b:c(f,h,l,k),Srd:c(f,t,q,r),pFa:c(f.fe(f.aa()/10,f.ba()/10).intersect(m),h,l,k)}};b.prototype.vSb=function(){if(this.N8a())return this._z;if(this.kP>
this._z)return this.kP;var a=this._z,b;for(b in this.mA)if(this.mA[b]){var c=this.mA[b].i,f=this.mA[b].Sq,g;for(g=this._z;g>this.Ma.H4&&(!this.sv[g]||!this.sv[g][c+"x"+f]);g--)c=Math.floor(c/2),f=Math.floor(f/2);a=Math.min(a,g)}return a};b.prototype.qwb=function(a,b,c){this.sv[a]=this.sv[a]||{};for(var f=Math.floor((b.wD+b.cC)/2),g=Math.floor((b.RE+b.PE)/2),h=0,l=(b.cC-b.wD+1)*(b.PE-b.RE+1),n=1,p=0,r=1,t=0;h<l;)f>=b.wD&&f<=b.cC&&g>=b.RE&&g<=b.PE&&(this.yva(a,f,g,c),h++),f+=n,g+=p,++t===r&&(t=0,0===
n?(n=-p,p=0,r++):(p=n,n=0))};b.prototype.yva=function(a,b,c,f){var g=b+"x"+c,h=a+"x"+g,l=this.sv[a][g]||this.XC[h];null!=l?l.timestamp=f:(l=this.oDc(),l.sp=b,l.wqa=c,l.ih=a,l.TH=g,l.loaded=!1,l.timestamp=f,this.XC[h]=l,this.rk.Ve({z:a,x:b,y:c,dst:l,key:h,priority:f}))};b.prototype.SNb=function(a,b,c,f){for(var g=Object.keys(this.XC),h=0===a||this.PM().aa()-1===c,l=0;l<g.length;l++){var n=this.XC[g[l]];n&&!this.Bua(n,h,a,b,c,f)&&(this.rk.abort(g[l]),this.XC[g[l]]=null,n instanceof _geo.geotoolkit.scene.shapes.Image&&
(n.dispose(),this.Hza--))}return this};b.prototype.Bua=function(a,b,c,f,g,h){if(a.ih!==this._z)return!1;if(!b)return a.sp>=c&&a.sp<=g&&a.wqa>=f&&a.wqa<=h;for(b=Math.max(a.sp-1,0);b<=a.sp+1;b++)for(c=Math.max(a.wqa-1,0);c<=a.wqa+1;c++)if(this.mA[b+"x"+c])return!0;return!1};b.prototype.Cpb=function(){return new _geo.geotoolkit.scene.shapes.Image({lazyloading:!0,crossorigin:"anonymous"})};b.prototype.oDc=function(){if(this.Hza>this.Ma.Mvb&&0<this.Ma.Mvb){for(var a=null,b=window.Infinity,c=this.Ma.H4;c<
this.Ma.n_;++c)if(this.sv[c]&&(c!==this.kP||c===this._z))for(var f in this.sv[c]){var g=this.sv[c][f];g&&b>g.timestamp&&(c!==this._z||!this.mA[f])&&(a=g,b=a.timestamp)}if(null!=a)return this.sv[a.ih][a.TH]=null,a}this.Hza++;return this.Cpb()};b.prototype.N8a=function(){for(var a in this.mA)if(this.mA[a]&&(!this.sv[this._z]||!this.sv[this._z][a]))return!1;return!0};b.prototype.$7b=function(a,b,c){var f,g;if(this._z===a){if(0!==c.wD&&c.cC!==this.PM().aa()-1)for(g in this.mA)this.mA[g]&&(b=this.mA[g].i,
f=this.mA[g].Sq,b<c.wD||b>c.cC||f<c.RE||f>c.PE)&&(this.mA[b+"x"+f]=null);for(b=c.wD;b<=c.cC;b++)for(f=c.RE;f<=c.PE;f++)this.mA[b+"x"+f]=this.mA[b+"x"+f]||{i:b,Sq:f}}else if(a<this._z){c={};for(g in this.mA)if(this.mA[g]){b=this.mA[g].i;f=this.mA[g].Sq;for(var h=a;h<this._z;++h)b=Math.floor(b/2),f=Math.floor(f/2);h=b+"x"+f;c[h]||(c[h]={i:b,Sq:f})}this.mA=c}else for(this.mA={},b=c.wD;b<=c.cC;b++)for(f=c.RE;f<=c.PE;f++)this.mA[b+"x"+f]={i:b,Sq:f}};b.prototype.clear=function(){_geo.geotoolkit.map.Qa.Ej.$W.prototype.clear.call(this);
for(var a in this.sv)for(var b in this.sv[a])this.sv[a][b]instanceof _geo.geotoolkit.scene.shapes.Image&&this.sv[a][b].dispose();this.mA={};this.Hza=0;this.sv={};this.kP=-1;return this};b.prototype.abort=function(){_geo.geotoolkit.map.Qa.Ej.$W.prototype.abort.call(this);for(var a in this.XC)this.XC[a]instanceof _geo.geotoolkit.scene.shapes.Image&&(this.XC[a].dispose(),this.Hza--);this.XC={};return this};b.prototype.AA=function(){return this.sv[this.kP]||{}};b.prototype.PM=function(a){null==a&&(a=
this.kP);a=0<a?1<<a:1;var b=this.Ma.xm.jI().xr();if(!b||b.aa()===b.ba())return new _geo.geotoolkit.util.xc(a,a);if(b.aa()>b.ba())return b=Math.round(b.aa()/b.ba()),new _geo.geotoolkit.util.xc(a*b,a);b=Math.round(b.ba()/b.aa());return new _geo.geotoolkit.util.xc(a,a*b)};b.prototype.E9=function(){return-1===this._z?this.Ma.H4:this._z};b.prototype.ela=function(){return this.rk instanceof _geo.geotoolkit.map.Qa.Bg.Dk?this.rk.ela():null};b.prototype.oHa=function(a){this.rk instanceof _geo.geotoolkit.map.Qa.Bg.Dk&&
this.rk.oHa(a);return this};return b}();
_geo.geotoolkit.map.Qa.Ej.wC=function(){function b(a,b){_geo.geotoolkit.map.Qa.Ej.Dk.call(this,a,b)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Ej.Dk);_geo.geotoolkit.da(b,"geotoolkit.map.sources.managers.Bing");b.prototype.RCa=function(a,b){function d(a,b,c,d){var e=Math.floor((a.sa()-h.sa())/b);b=Math.ceil((a.za()-h.sa())/b)-1;var f=Math.floor((a.qa()-h.qa())/c);a=Math.ceil((a.wa()-h.qa())/c)-1;return{wD:Math.max(e,0),cC:Math.min(b,d.cC),RE:Math.max(f,0),PE:Math.min(a,d.PE)}}var e=_geo.geotoolkit.map.Qa.Ej.Dk.prototype.RCa.call(this,
a,b);if(null==this.Ma.z4)return e;var c=this.Ma.z4[e.z],f=this.Ma.xm.Dv(),k=b.ob(a),h=b.ob(this.Ma.$d),l=b.ob(f.xr()),f=h.aa()/(c.cC+1),n=h.ba()/(c.PE+1),p=this.Ma.z4[this.kP]||c,r=l.aa()/p.scale,l=l.ba()/p.scale;return{z:e.z,x0b:d(k,f,n,c),Srd:d(k,r,l,p),pFa:d(k.fe(k.aa()/10,k.ba()/10).intersect(h),f,n,c)}};b.prototype.PM=function(a){null==a&&(a=this.kP);if(0<=a&&this.Ma.z4&&this.Ma.z4[this.Ma.n_]){var b=this.Ma.z4[this.Ma.n_];a=1<<this.Ma.n_-a;return new _geo.geotoolkit.util.xc((b.cC+1)/a,(b.PE+
1)/a)}return _geo.geotoolkit.map.Qa.Ej.Dk.prototype.PM.call(this,a)};return b}();
_geo.geotoolkit.map.Qa.Ej.yF=function(){function b(a,b){_geo.geotoolkit.map.Qa.Ej.Dk.call(this,a,b)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Ej.Dk);_geo.geotoolkit.da(b,"geotoolkit.map.sources.managers.VectorTile");b.prototype.hN=function(){this.rk.kb(_geo.geotoolkit.map.Qa.$.aw,function(a,b,d){this.XC[d.ih+"x"+d.TH]=null;this.sv[d.ih][d.TH]=d;if(d.Zla){for(a=0;a<d.Zla.length;a++)b=d.Zla[a],this.XC[b.ih+"x"+b.TH]=null,this.sv[b.ih][b.TH]=b,b.vna=d.vna;d.Zla=null}this.mA&&!this.N8a()||this.Ja(_geo.geotoolkit.map.Qa.$.RX,
this,null)}.bind(this));return this};b.prototype.Cpb=function(){return{}};b.prototype.AA=function(a,b){var d=new _geo.geotoolkit.util.Joa,e=this.sv[this.kP];if(!e)return d;var c=1<<this.kP,f=0,k=0,h=c-1,l=c-1;if(null!=a)var n=this.Ma.xm.Dv().xr(),p=n.aa()/c,c=n.ba()/c,f=Math.max(f,Math.floor((a.sa()-n.sa())/p)),k=Math.max(k,Math.floor((n.wa()-a.wa())/c)),h=Math.min(h,Math.ceil((a.za()-n.sa())/p)-1),l=Math.min(l,Math.ceil((n.wa()-a.qa())/c)-1);var n=[],p=[],r;for(r in e)if(e[r]&&e[r].sp>=f&&e[r].sp<=
h&&e[r].wqa>=k&&e[r].wqa<=l&&(c=e[r].vna,0<c.names.length&&-1===n.indexOf(c))){var t=c.names;if(0===p.length)p=t.slice();else{var q=p.indexOf(t[0]);-1===q&&(p.unshift(t[0]),q=0);for(var m=1;m<t.length;++m){var u=p.indexOf(t[m]);-1===u?p.splice(++q,0,t[m]):u>q&&(q=u)}}c.i=0;n.push(c)}for(e=0;e<p.length;++e)if(f=p[e],k=this.Ma.Fg&&this.Ma.Fg[f],!k||this.kP>=k.HZb&&this.kP<=k.sZb)for(k=0;k<n.length;++k)h=n[k].layers[f],null!=h&&0<h.length&&d.concat(h);"function"===typeof b&&(d=new _geo.geotoolkit.util.DKa(d,
b));return d};b.prototype.clear=function(){for(var a in this.sv)for(var b in this.sv[a])this.sv[a][b]=null;this.sv={};_geo.geotoolkit.map.Qa.Ej.Dk.prototype.clear.call(this);return this};b.prototype.abort=function(){for(var a in this.XC)null!=this.XC[a]&&this.Hza--;this.XC={};_geo.geotoolkit.map.Qa.Ej.Dk.prototype.abort.call(this);return this};b.prototype.PM=function(a){null==a&&(a=this.kP);a=0<a?1<<a:1;return new _geo.geotoolkit.util.xc(a,a)};b.prototype.yva=function(a,b,d,e){var c=b+"x"+d,f=a+"x"+
c,k=this.sv[a][c]||this.XC[f];if(null!=k)k.timestamp=e;else{if(Array.isArray(this.Ma.WRc)&&0<a)for(var h=1<<a-1,l=k=0,n=0,p=this.Ma.WRc;0<h;){var r=0<(h&b)?1:0,t=0<(h&d)?1:0,q=(t<<1)+r,l=(l<<1)+r,n=(n<<1)+t;k++;if(!Array.isArray(p[q])&&(l!==b||n!==d||k!==a)){h=l+"x"+n;p=k+"x"+h;r=this.oDc();r.sp=b;r.wqa=d;r.ih=a;r.TH=c;r.timestamp=e;if(this.sv[k][h]){r.vna=this.sv[k][h].vna;this.sv[a][c]=r;return}this.XC[p]||_geo.geotoolkit.map.Qa.Ej.Dk.prototype.yva.call(this,k,l,n,e);this.XC[p].Zla=this.XC[p].Zla||
[];this.XC[p].Zla.push(r);this.XC[f]=r;return}p=p[q];h>>=1}_geo.geotoolkit.map.Qa.Ej.Dk.prototype.yva.call(this,a,b,d,e)}};b.prototype.Bua=function(a,b,d,e,c,f){if(_geo.geotoolkit.map.Qa.Ej.Dk.prototype.Bua.call(this,a,b,d,e,c,f))return!0;if(!a.Zla)return!1;for(var k=0;k<a.Zla.length;k++)if(_geo.geotoolkit.map.Qa.Ej.Dk.prototype.Bua.call(this,a.Zla[k],b,d,e,c,f))return!0;return!1};return b}();
_geo.geotoolkit.map.Qa.Ej.bB=function(){function b(a,b){_geo.geotoolkit.map.Qa.Ej.Image.call(this,a,b);this.ef=null;this.mY={}}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Ej.Image);_geo.geotoolkit.da(b,"geotoolkit.map.sources.managers.ArcGISImage");b.prototype.$S=function(a){var b,d=[],e=[],c=this.Ma.q7b||this.Ma.hL;if(this.hHc(a))for(b=0;b<c.length;++b){var f=c[b];this.mY.hasOwnProperty(f)?e.push.apply(e,this.mY[f]):d.push(f)}else d=c,this.ef=a,this.mY={},this.rk.Yja();for(b=0;b<d.length;++b)this.rk.$S({geometry:a,
layer:d[b]}),this.mY[d[b]]=null;return 0===d.length||0<e.length?e:null};b.prototype.G9=function(a,b){if(this.hHc(a)){var d=[],e;for(e in this.mY)this.mY.hasOwnProperty(e)&&d.push.apply(d,this.mY[e]);return d}this.mY={};this.ef=a;d=this.Ma.q7b||this.Ma.hL;e=b.Nb();var c=b.Ya(),c=c.ob(e).round();this.rk.G9({geometry:a,left:e.sa(),right:e.za(),top:e.qa(),bottom:e.wa(),width:c.aa(),height:c.ba(),layers:"all:"+d.join(",")});return null};b.prototype.hHc=function(a){if(a===this.ef)return!0;if(a instanceof
_geo.geotoolkit.util.Rect&&this.ef instanceof _geo.geotoolkit.util.Rect)return a.Pj(this.ef);if(a instanceof _geo.geotoolkit.util.na&&this.ef instanceof _geo.geotoolkit.util.na)return a.AM(this.ef);if(a instanceof _geo.geotoolkit.util.Fc&&this.ef instanceof _geo.geotoolkit.util.Fc){if(a.getSize()!==this.ef.getSize())return!1;var b=a.getSize(),d=a.Wf();a=a.Jg();for(var e=this.ef.Wf(),c=this.ef.Jg(),f=0;f<b;f++)if(d[f]!==e[f]||a[f]!==c[f])return!1;return!0}return!1};b.prototype.hN=function(){_geo.geotoolkit.map.Qa.Ej.Image.prototype.hN.call(this);
this.rk.kb(_geo.geotoolkit.map.Qa.$.p6,function(a,b,d){a=d.layer;b=d.data;if(Array.isArray(b.features)&&0<b.features.length)this.mY[a]=_geo.geotoolkit.map.util.Gz.wld(b,a);else{this.mY[a]=[];for(var e in this.mY)if(!this.mY[e]||0<this.mY[e].length)return}this.Ja(_geo.geotoolkit.map.Qa.$.p6,this,d)}.bind(this));return this};b.prototype.Yja=function(){this.rk.Yja();return this};return b}();
_geo.geotoolkit.map.Qa.$={aw:"FeatureAdded",GT:"FeatureRemoved",G0:"FeaturesCleared",Ws:"ImageLoaded",Meb:"ImageCleared",RX:"TilesUpdated",p6:"InfoUpdated"};
_geo.geotoolkit.map.Qa.O5=function(){function b(a){_geo.geotoolkit.util.EventDispatcher.call(this);a=a||{};this.Tnc=a.ondataloaded;this.Alb=a.ondatafailed;var b=_geo.geotoolkit.map.Nd.tq.ab(a.system||_geo.geotoolkit.map.Mw.wba),d=_geo.geotoolkit.map.Nd.tq.ab(_geo.geotoolkit.map.Mw.wba);this.Ma=this.Ma||{};this.Ma.xm=d.Tea(b);this.Ma.Vsa=b.Tea(d);this.M2a=this.mE=this.Ln=this.Ma.url=null;b=a.format;null!=b&&(b.Rs(this.Ma),this.rua(b));this.bhd(a.loader);a=a.url||a.server;null!=a&&this.OW(a)}_geo.geotoolkit.fa(b,
_geo.geotoolkit.util.EventDispatcher);_geo.geotoolkit.da(b,"geotoolkit.map.sources.AbstractSource");b.prototype.Ve=function(a,b){if(null==this.Ln||a.isEmpty())return this;if(null==this.mE||this.mE.wFa())this.aP={Bi:a,sfa:b},this.Ln.Ve(a,b);else if(null==this.aP)this.aP={Bi:a,sfa:b,scale:b.Ya().Ab()},this.LFa();else{var d=b.Ya().Ab();_geo.geotoolkit.util.Math.equals(d,this.aP.scale)&&b===this.aP.sfa?this.aP.Bi.union(a):(this.aP.Bi=a,this.aP.scale=d,this.aP.sfa=b)}return this};b.prototype.OW=function(a){if(this.Ma.url===
a)return this;this.Ma.url=a||null;this.M2a=null;this.clear();return this};b.prototype.wFa=function(){return null==this.mE||this.mE.wFa()};b.prototype.u9=function(){return this.Ma.url};b.prototype.LFa=function(){null==this.M2a&&(this.M2a=null==this.mE?_geo.geotoolkit.util.Promise.resolve(this):this.mE.Ve().then(this.r_b.bind(this),this.Xkd.bind(this)));return this.M2a};b.prototype.xa=function(){return this.Ma.$d};b.prototype.VA=function(a){a=_geo.geotoolkit.map.Nd.tq.ab(a);var b=this.Ma.xm.Dv();a!==
b&&a&&(this.Ma.xm.KHa(a),this.Ma.Vsa.KW(a),null==this.mE&&a&&(this.Ma.$d=a.xr()));return this};b.prototype.lI=function(){return this.Ma.xm.Dv()};b.prototype.KW=function(a){a=_geo.geotoolkit.map.Nd.tq.ab(a);var b=this.Ma.xm.jI();a!==b&&(this.Ma.xm.KW(a),this.Ma.Vsa.KHa(a));return this};b.prototype.jI=function(){return this.Ma.xm.jI()};b.prototype.rXb=function(){return this.Ma.xm};b.prototype.mFc=function(){return this.Ma.Vsa};b.prototype.rua=_geo.geotoolkit.Ia;b.prototype.bhd=function(a){null!=a?(a.Rs(this.Ma),
this.mE=a):this.Ma.$d=this.lI().xr();return this};b.prototype.r_b=function(){"function"===typeof this.Tnc&&this.Tnc();this.Ja(_geo.geotoolkit.scene.Node.$.ss,this,this.Ma.$d);null!=this.aP&&_geo.geotoolkit.util.Math.equals(this.aP.scale,this.aP.sfa.Ya().Ab())&&this.Ve(this.aP.Bi,this.aP.sfa);return this};b.prototype.Xkd=function(a){"function"===typeof this.Alb&&this.Alb(a);return this};b.prototype.Kda=function(a,b){if(this.hasOwnProperty(a)&&"function"===typeof this[a])this[a](b);return this};b.prototype.clear=
function(){null!=this.mE&&this.mE.clear();this.update();return this};b.prototype.update=function(){null!=this.Ln&&(this.Ln.clear(),null!=this.aP&&this.Ve(this.aP.Bi,this.aP.sfa));return this};b.prototype.dispose=function(){this.Alb=this.Alb=null;null!=this.mE&&this.mE.clear();null!=this.Ln&&this.Ln.dispose();_geo.geotoolkit.util.EventDispatcher.prototype.dispose.call(this)};b.prototype.gQa=function(){return null!=this.mE?this.mE.gQa():null};return b}();
_geo.geotoolkit.map.Wa.Toa={Qna:"All",Z8b:"Bbox",Dk:"Tile",Mx:"Grid"};
_geo.geotoolkit.map.Qa.Wh=function(){function b(a){a=a||{};a.format=a.format||new _geo.geotoolkit.map.Qa.Bg.eH;var b=_geo.geotoolkit.Ca(a,{idfield:"name",requestresolution:10,mode:_geo.geotoolkit.map.Wa.Toa.Qna,timeout:50},!0);this.tn=new _geo.geotoolkit.util.Joa;this.Ma=this.Ma||{};this.Ma.id=new _geo.geotoolkit.map.Wa.Zq.M0(b.idfield);this.Ma.resolution=b.requestresolution;this.Ma.mode=b.mode;this.Ma.timeout=b.timeout;_geo.geotoolkit.map.Qa.O5.call(this,a)}function a(a){var b,c;if(Array.isArray(a.x)){b=
[];c=[];for(var f=0;f<a.x.length;++f)g.bb(a.x[f],a.y[f]),this.transform(g,g),b[f]=g.x,c[f]=g.y}else g.bb(a.x,a.y),g=this.transform(g,g),b=g.x,c=g.y;return{x:b,y:c}}var g=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.O5);_geo.geotoolkit.da(b,"geotoolkit.map.sources.Vector");b.prototype.rua=function(a){this.Ln=new _geo.geotoolkit.map.Qa.Ej.Wh(a,this.Ma);this.Ln.kb(_geo.geotoolkit.map.Qa.$.aw,function(a,b,d){this.lob(d,!1)}.bind(this));this.Ln.kb(_geo.geotoolkit.map.Qa.$.G0,
function(a,b){this.lka()}.bind(this));return this};b.prototype.$Sa=function(a,b){this.Ve(a,b);return this};b.prototype.lob=function(b,e){if(!1!==e){var c=this.rXb(),f=a.bind(c);b.forEach(function(a){var b=a.yd(),c;if(Array.isArray(b)){c=[];for(var d=0;d<b.length;++d)c.push(f(b[d]))}else c=f(b);a.Xq(c)})}this.tn.concat(b);this.Ja(_geo.geotoolkit.map.Qa.$.aw,this,b);return this};b.prototype.oTa=function(a){for(this.tn.reset();this.tn.Xf();)if(this.tn.next()===a){this.Ja(_geo.geotoolkit.map.Qa.$.GT,
this,a);break}return this};b.prototype.clear=function(){this.lka();_geo.geotoolkit.map.Qa.O5.prototype.clear.call(this);return this};b.prototype.lka=function(){this.Ja(_geo.geotoolkit.map.Qa.$.G0,this,this.tn);this.tn=new _geo.geotoolkit.util.Joa;return this};b.prototype.Iua=function(a){null!=this.Ln&&this.Ln.O6a().parse(a);return this};b.prototype.zLc=function(a){this.Ma.url=a;null!=this.Ln&&this.Ln.Ve()};b.prototype.v5=function(a){this.Ma.id.X8()!==a&&(this.Ma.id=new _geo.geotoolkit.map.Wa.Zq.M0(a));
return this};b.prototype.eua=function(){return this.Ma.id.X8()};b.prototype.FHa=function(a){this.Ma.resolution=a;return this};b.prototype.DWb=function(){return this.Ma.resolution};return b}();
_geo.geotoolkit.map.Qa.Image=function(){function b(a){a=a||{};this.Ma=this.Ma||{};this.Ma.fe=a.hasOwnProperty("inflate")?a.inflate:.2;this.Ma.timeout=a.hasOwnProperty("timeout")?a.timeout:50;this.Ma.rVa=a.hasOwnProperty("uselayerlimits")?a.uselayerlimits:!1;this.Ma.hL=[];_geo.geotoolkit.map.Qa.O5.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.O5);_geo.geotoolkit.da(b,"geotoolkit.map.sources.Image");b.prototype.rua=function(a){this.Ln=new _geo.geotoolkit.map.Qa.Ej.Image(a,this.Ma);this.Ln.kb(_geo.geotoolkit.map.Qa.$.Ws,
function(a,b,e){this.Ja(_geo.geotoolkit.map.Qa.$.Ws,this,e)}.bind(this));return this};b.prototype.clear=function(){this.Ja(_geo.geotoolkit.map.Qa.$.Meb,this,null);_geo.geotoolkit.map.Qa.O5.prototype.clear.call(this);return this};b.prototype.L3b=function(a){this.Ma.fe=a;return this};b.prototype.bVb=function(){return this.Ma.fe};b.prototype.gL=function(a){this.Ma.hL=a?Array.isArray(a)?a:[a]:[];this.update();return this};b.prototype.mFa=function(a){var b=[];if(null!=a)for(var d=0;d<this.Ma.hL.length;++d){var e=
this.Ma.hL[d];(Array.isArray(a)?-1===a.indexOf(e):e!==a)&&b.push(e)}this.Ma.hL=b;this.update();return this};b.prototype.TP=function(){return this.Ma.hL};b.prototype.getLayers=function(){return this.Ma.layers};return b}();
_geo.geotoolkit.map.Qa.Dk=function(){function b(a){a=_geo.geotoolkit.Ca(a,{tilewidth:256,tileheight:256,imagepool:400,token:null,minlod:0,maxlod:15},!0);this.Ma=this.Ma||{};this.Ma.Nwa=a.token;this.Ma.Gw=a.tilewidth;this.Ma.Fw=a.tileheight;this.Ma.H4=a.minlod;this.Ma.n_=a.maxlod;this.Ma.Mvb=a.imagepool;a.format=a.format||new _geo.geotoolkit.map.Qa.Bg.Dk({formatterfunction:a.formatterfunction});_geo.geotoolkit.map.Qa.O5.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.O5);_geo.geotoolkit.da(b,
"geotoolkit.map.sources.Tile");b.prototype.rua=function(a){this.Ln=new _geo.geotoolkit.map.Qa.Ej.Dk(a,this.Ma);this.Ln.kb(_geo.geotoolkit.map.Qa.$.RX,function(a,b,e){this.Ja(_geo.geotoolkit.map.Qa.$.RX,this,e)}.bind(this));return this};b.prototype.clear=function(){null!=this.Ln&&this.Ln.clear();_geo.geotoolkit.map.Qa.O5.prototype.clear.call(this);return this};b.prototype.AA=function(){return null!=this.Ln?this.Ln.AA():{}};b.prototype.PM=function(){return null!=this.Ln?this.Ln.PM():new _geo.geotoolkit.util.xc(1,
1)};b.prototype.A7a=function(){return this.Ma.H4};b.prototype.x7a=function(){return this.Ma.n_};b.prototype.bua=function(){return this.Ma.Gw};b.prototype.aua=function(){return this.Ma.Fw};b.prototype.ja=function(a){if(null==a)return this;a.hasOwnProperty("tilewidth")&&(this.Ma.Gw=a.tilewidth);a.hasOwnProperty("tileheight")&&(this.Ma.Fw=a.tileheight);a.hasOwnProperty("minlod")&&(this.Ma.H4=a.minlod);a.hasOwnProperty("maxlod")&&(this.Ma.n_=a.maxlod);a.hasOwnProperty("imagepool")&&(this.Ma.Mvb=a.imagepool);
(a.hasOwnProperty("url")||a.hasOwnProperty("server"))&&this.OW(a.url||a.server);return this};b.prototype.ela=function(){return this.Ln?this.Ln.ela():null};b.prototype.oHa=function(a){this.Ln&&this.Ln.oHa(a);return this};b.prototype.E9=function(){return null!=this.Ln?this.Ln.E9():this.Ma.H4};return b}();
_geo.geotoolkit.map.Qa.RIa=function(){function b(a){this.SF=[];if(Array.isArray(a))for(var b=0;b<a.length;++b)this.kob(a[b]);else this.kob(a);a={format:null};_geo.geotoolkit.map.Qa.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.CompositeSource");b.prototype.kob=function(a){if(a instanceof _geo.geotoolkit.map.Qa.Wh){this.eAa||(this.eAa=this.Dkd.bind(this));var b=this.SF.indexOf(a);0>b&&(this.SF.push(a),a.kb(_geo.geotoolkit.map.Qa.$.aw,this.eAa),
a.kb(_geo.geotoolkit.map.Qa.$.GT,this.eAa),a.kb(_geo.geotoolkit.map.Qa.$.G0,this.eAa))}return this};b.prototype.bLc=function(a){var b=this.SF.indexOf(a);~b&&(a.lka(),this.SF.splice(b,1),a.hb(_geo.geotoolkit.map.Qa.$.aw,this.eAa),a.hb(_geo.geotoolkit.map.Qa.$.GT,this.eAa),a.hb(_geo.geotoolkit.map.Qa.$.G0,this.eAa));return this};b.prototype.kAc=function(){return this.SF};b.prototype.rua=function(){return this};b.prototype.Ve=function(a,b){for(var d=0;d<this.SF.length;++d)this.SF[d].Ve(a,b);return this};
b.prototype.VA=function(a){this.Kda("setMapCoordinateSystem",a);return this};b.prototype.KW=function(a){this.Kda("setInitialCoordinateSystem",a);return this};b.prototype.FHa=function(a){this.Kda("setRequestResolution",a);return this};b.prototype.v5=function(a){this.Kda("setUniqueField",a);return this};b.prototype.clear=function(){this.Kda("clear");return this};b.prototype.dispose=function(){this.Kda("dispose")};b.prototype.Kda=function(a,b){_geo.geotoolkit.map.Qa.Wh.prototype.Kda.call(this,a,b);for(var d=
0;d<this.SF.length;++d)this.SF[d].Kda(a,b);return this};b.prototype.Dkd=function(a,b,d){this.Ja(a,this,d)};return b}();
_geo.geotoolkit.map.Qa.Hx=function(){function b(a){a=a||{};a=_geo.geotoolkit.Ca(a,{layer:null,format:a.format||new _geo.geotoolkit.map.Qa.Bg.Hx,loader:a.hasOwnProperty("loader")?a.loader:new _geo.geotoolkit.map.Qa.jl.Hx,idfield:a.idfield||(a.getfeatureid instanceof _geo.geotoolkit.map.Wa.Zq.M0?a.getfeatureid.X8():"name"),offsetsupport:!1,requestfields:null,token:null,scalerange:null,layerid:null},!0);this.SF={};this.Ma=this.Ma||{};this.Ma.Nwa=a.token;this.Ma.cab=a.scalerange;this.Ma.kx=a.requestfields;
this.Ma.layers=[];this.Ma.alpha=1;this.Ma.xQ=null;this.Ma.DFa=a.layerid;this.Ma.fvb=a.offsetsupport;this.yi=null==a.layer||Array.isArray(a.layer)?a.layer:[a.layer];this.Ija=null;this.bOa=[];this.BAa=null;_geo.geotoolkit.map.Qa.Wh.call(this,a)}var a=_geo.geotoolkit.util.zf.Za().Tb("px"),g=_geo.geotoolkit.util.zf.Za().Tb("metre");_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.ArcGISFeature");b.prototype.QPc=function(a){this.Ma.kx=a;return this};b.prototype.oRa=
function(){return this.Ma.kx};b.prototype.getLayers=function(){return this.Ma.layers};b.prototype.AEa=function(a){if(null==this.SF[a])for(var b=this.Ma.layers,c=0;c<b.length;++c){var f=b[c];if(f.id===a){b=0<f.minScale||0<f.maxScale?[0<f.minScale?1/f.minScale:null,0<f.maxScale?1/f.maxScale:null]:null;this.SF[a]=new _geo.geotoolkit.map.Qa.Hx({system:this.jI(),idfield:this.eua(),scalerange:b,server:f.url,mode:this.Ma.mode,offsetsupport:this.Ma.fvb,requestresolution:this.Ma.resolution,requestfields:this.Ma.kx,
layerid:a});null==this.mE?this.SF[a].mE=null:this.SF[a].mE.ZCa(this.mE);f=this.SF[a].Ln;f.O6a().ZCa(this.Ln.O6a());this.SF[a].lI(this.lI());break}}return this.SF[a]};b.prototype.O8a=function(){return 0<this.Ma.layers.length};b.prototype.Irb=function(){return this.Ma.alpha};b.prototype.gtb=function(){return this.Ma.cab};b.prototype.Pka=function(){return this.Ma.xQ};b.prototype.gL=function(a){this.yi=null==a||Array.isArray(a)?a:[a];this.yi=null!=this.yi?this.yi.map(function(a){return"string"==typeof a?
+a:a}):this.yi;this.update();return this};b.prototype.b7a=function(){return this.Ma.gYb};b.prototype.TP=function(){return this.yi};b.prototype.r_b=function(){if(this.O8a()){this.Ija=this.Ija||function(a,b,c){if(a===_geo.geotoolkit.map.Qa.$.aw)for(var d in this.SF){if(this.SF[d]===b){for(var e=0;e<c.length;e++)c[e].tea().DFa=+d;break}}else a===_geo.geotoolkit.map.Qa.$.G0&&(a=_geo.geotoolkit.map.Qa.$.GT);this.Ja(a,b,c)}.bind(this);for(var a=[],b=0;b<this.Ma.layers.length;++b){var c=this.Ma.layers[b].id;
!0===this.Ma.layers[b].defaultVisibility&&a.push(c);if(!Array.isArray(this.yi)||0<=this.yi.indexOf(c))c=this.AEa(c),null!=c&&(c.kb(_geo.geotoolkit.map.Qa.$.aw,this.Ija),c.kb(_geo.geotoolkit.map.Qa.$.GT,this.Ija),c.kb(_geo.geotoolkit.map.Qa.$.G0,this.Ija),this.bOa.push(c))}null==this.yi&&(this.yi=a)}_geo.geotoolkit.map.Qa.Wh.prototype.r_b.call(this);return this};b.prototype.Ve=function(b,e){var c=this.Ma.cab;if(null!=c){var f=e.Ya(),f=f?a.convert(f.Ab(),g):null;if(null!=f&&(null!=c[0]&&c[0]>f||null!=
c[1]&&c[1]<f))return this}if(!this.O8a())_geo.geotoolkit.map.Qa.Wh.prototype.Ve.call(this,b,e);else if(0<this.bOa.length)for(c=this.TP(),f=0;f<this.bOa.length;++f)null!==this.bOa[f].Ma.DFa&&-1===c.indexOf(this.bOa[f].Ma.DFa)||this.bOa[f].Ve(b,e);return this};b.prototype.dispose=function(){if(Array.isArray(this.yi)&&null!=this.Ija)for(var a=0;a<this.yi.length;++a){var b=this.AEa(this.yi[a]);null!=b&&(b.hb(_geo.geotoolkit.map.Qa.$.aw,this.Ija),b.hb(_geo.geotoolkit.map.Qa.$.GT,this.Ija),b.hb(_geo.geotoolkit.map.Qa.$.G0,
this.Ija))}this.SF=null;_geo.geotoolkit.map.Qa.Wh.prototype.dispose.call(this)};b.prototype.hQ=function(a){if(this.mE)if(this.BAa)a(null,this.BAa);else{var b=this;this.LFa().then(function(){if(b.O8a())_geo.geotoolkit.util.Promise.all(b.Ma.layers.map(function(a){return b.AEa(a.id).LFa()})).then(function(){b.BAa=[];b.Ma.layers.reverse().forEach(function(a){b.AEa(a.id).hQ(function(a,c){a||b.BAa.push(c)})});a(null,b.BAa)});else{var c=b.Ma.cab;b.BAa={layerId:b.Ma.DFa,layerName:b.Ma.Bid,layerType:b.Ma.Cid,
minScale:c&&c[0]?1/c[0]:null,maxScale:c&&c[1]?1/c[1]:null,legend:_geo.geotoolkit.map.util.Gz.lad(b.Ma.Ff)};a(null,b.BAa)}})}else a(Error("Cannot query ArcGIS legend, no loader provided!"))};return b}();
_geo.geotoolkit.map.Qa.bB=function(){function b(a){a=a||{};a.format=a.format instanceof _geo.geotoolkit.map.Qa.Bg.bB?a.format:new _geo.geotoolkit.map.Qa.Bg.bB;a.loader=a.hasOwnProperty("loader")?a.loader:new _geo.geotoolkit.map.Qa.jl.bB;this.Ma=this.Ma||{};this.Ma.Nwa=a.token;this.Ma.q7b=null;_geo.geotoolkit.map.Qa.Image.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Image);_geo.geotoolkit.da(b,"geotoolkit.map.sources.ArcGISImage");b.prototype.rua=function(a){this.Ln=new _geo.geotoolkit.map.Qa.Ej.bB(a,
this.Ma);a=function(a,b,e){this.Ja(a,this,e)}.bind(this);this.Ln.kb(_geo.geotoolkit.map.Qa.$.Ws,a);this.Ln.kb(_geo.geotoolkit.map.Qa.$.p6,a);return this};b.prototype.hQ=function(a){this.mE?this.mE.hQ(a):a(Error("Cannot query ArcGIS legend, no loader provided!"))};b.prototype.$S=function(a){return this.wFa()?this.Ln.$S(a):[]};b.prototype.Yja=function(){this.Ln.Yja();return this};b.prototype.G9=function(a,b){return this.wFa()?this.Ln.G9(a,b):[]};b.prototype.b7a=function(){return this.Ma.gYb};b.prototype.f6b=
function(a){this.Ma.q7b=null==a?null:Array.isArray(a)?a:[a];return this};return b}();_geo.geotoolkit.map.Qa.eH=function(){function b(a){a=a||{};a.format=a.format||new _geo.geotoolkit.map.Qa.Bg.eH;_geo.geotoolkit.map.Qa.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.GeoJSON");return b}();
_geo.geotoolkit.map.Qa.xX=function(){function b(a){a=a||{};a.format=a.format||new _geo.geotoolkit.map.Qa.Bg.xX;_geo.geotoolkit.map.Qa.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.KML");return b}();
_geo.geotoolkit.map.Qa.FL=function(){function b(a){a=a||{};a.format=a.format||new _geo.geotoolkit.map.Qa.Bg.FL;a.loader=a.hasOwnProperty("loader")?a.loader:new _geo.geotoolkit.map.Qa.jl.FL;this.Ma=this.Ma||{};this.Ma.version=a.version||"1.1.0";this.Ma.fIa=a.featureTypes||null;_geo.geotoolkit.map.Qa.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.WFS");b.prototype.dxb=function(a){this.Ma.fIa=a;return this};b.prototype.qUb=function(){return this.Ma.fIa};
return b}();
_geo.geotoolkit.map.Qa.Ty=function(){function b(a){a=a||{};a.format=a.format instanceof _geo.geotoolkit.map.Qa.Bg.Ty?a.format:new _geo.geotoolkit.map.Qa.Bg.Ty;a.loader=a.hasOwnProperty("loader")?a.loader:new _geo.geotoolkit.map.Qa.jl.Ty;a.system=a.system||_geo.geotoolkit.map.Mw.cB;this.Ma=this.Ma||{};this.Ma.version=a.hasOwnProperty("version")?a.version:"1.3.0";this.Ma.transparent=a.hasOwnProperty("transparent")?a.transparent:!0;this.Ma.format=a.imageformat||null;_geo.geotoolkit.map.Qa.Image.call(this,a)}
_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Image);_geo.geotoolkit.da(b,"geotoolkit.map.sources.WMS");b.prototype.Wva=function(a){this.Ma.format=a;return this};b.prototype.tEa=function(){return this.Ma.format};b.prototype.NHa=function(a){this.Ma.transparent=a;return this};b.prototype.bFa=function(){return this.Ma.transparent};b.prototype.setVersion=function(a){this.Ma.version=a;return this};b.prototype.f_=function(){return this.Ma.version};return b}();
_geo.geotoolkit.map.Qa.QN=function(){function b(a){a=_geo.geotoolkit.Ca(a,{system:_geo.geotoolkit.map.Mw.cB,format:a&&a.format||new _geo.geotoolkit.map.Qa.Bg.QN,delimiter:",",latitudefield:["latitude","lat"],longitudefield:["longitude","lon"]},!0);this.Ma=this.Ma||{};this.Ma.Vbd=a.delimiter;this.Ma.t8b=a.longitudefield;this.Ma.w8b=a.latitudefield;_geo.geotoolkit.map.Qa.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.CSV");b.prototype.Axb=
function(a){if("string"===typeof a||Array.isArray(a))this.Ma.w8b=a;return this};b.prototype.sVb=function(){return this.Ma.w8b};b.prototype.Jxb=function(a){if("string"===typeof a||Array.isArray(a))this.Ma.t8b=a;return this};b.prototype.FVb=function(){return this.Ma.t8b};return b}();
_geo.geotoolkit.map.Qa.J0=function(){function b(a){a=a||{};a.format=a.format||new _geo.geotoolkit.map.Qa.Bg.J0;_geo.geotoolkit.map.Qa.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.GeoRSS");return b}();
_geo.geotoolkit.map.Qa.zq=function(){function b(a){a=a||{};a.format=a.format||new _geo.geotoolkit.map.Qa.Bg.zq;a.loader=a.hasOwnProperty("loader")?a.loader:new _geo.geotoolkit.map.Qa.jl.zq;this.Ma=this.Ma||{};this.Ma.Nwa=a.token;_geo.geotoolkit.map.Qa.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.Stream");return b}();
_geo.geotoolkit.map.Qa.wC=function(){function b(a){a=_geo.geotoolkit.Ca(a,{loader:a&&a.loader||new _geo.geotoolkit.map.Qa.jl.wC,format:a&&a.format||new _geo.geotoolkit.map.Qa.Bg.Dk,key:null,culture:"en-US",centerpoint:null,imageryset:b.iha.aAb},!0);this.Ma=this.Ma||{};this.Ma.YRa=a.imageryset;this.Ma.zQb=a.culture;this.Ma.key=a.key;this.Ma.bPa=a.centerpoint;_geo.geotoolkit.map.Qa.Dk.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Dk);_geo.geotoolkit.da(b,"geotoolkit.map.sources.Bing");b.iha=
{I8b:"Aerial",aAb:"AerialWithLabels",UTc:"AerialWithLabelsOnDemand",c9b:"Birdseye",e9b:"BirdseyeWithLabels",d9b:"BirdseyeV2",DUc:"CanvasDark",FUc:"CanvasLight",EUc:"CanvasGray",ygc:"Road",g0c:"RoadOnDemand",KZc:"OrdnanceSurvey"};b.prototype.rua=function(a){this.Ln=new _geo.geotoolkit.map.Qa.Ej.wC(a,this.Ma);this.Ln.kb(_geo.geotoolkit.map.Qa.$.RX,function(a,b,e){this.Ja(_geo.geotoolkit.map.Qa.$.RX,this,e)}.bind(this));return this};b.prototype.D3b=function(a){this.Ma.YRa!==a&&(this.Ma.YRa=a,this.clear(),
this.M2a=null,this.LFa());return this};b.prototype.V3b=function(a){this.Ma.key=a;return this};b.prototype.w2b=function(a){this.Ma.zQb=a;return this};b.prototype.oab=function(a){this.Ma.bPa=a;return this};return b}();
_geo.geotoolkit.map.Qa.yF=function(){function b(a){a=_geo.geotoolkit.Ca(a,{styleurl:null,format:a&&a.format||new _geo.geotoolkit.map.Qa.Bg.yF,loader:a&&a.hasOwnProperty("loader")?a.loader:new _geo.geotoolkit.map.Qa.jl.yF,tilewidth:256,tileheight:256,imagepool:400,minlod:0,maxlod:15},!0);this.Ma=this.Ma||{};this.Ma.Gw=a.tilewidth;this.Ma.Fw=a.tileheight;this.Ma.H4=a.minlod;this.Ma.n_=a.maxlod;this.Ma.Mvb=a.imagepool;this.Ma.BRc=a.styleurl;_geo.geotoolkit.map.Qa.Wh.call(this,a)}_geo.geotoolkit.fa(b,
_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.VectorTile");b.prototype.rua=function(a){this.Ln=new _geo.geotoolkit.map.Qa.Ej.yF(a,this.Ma);this.Ln.kb(_geo.geotoolkit.map.Qa.$.RX,function(a,b,e){this.Ja(_geo.geotoolkit.map.Qa.$.RX,this)}.bind(this));return this};b.prototype.AA=function(a,b){return null!=this.Ln?this.Ln.AA(a,b):{}};return b}();
_geo.geotoolkit.map.Qa.Raa=function(){function b(a){a=a||{};a.format=a.format||new _geo.geotoolkit.map.Qa.Bg.Raa({symbolTileSize:50});_geo.geotoolkit.map.Qa.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Qa.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.sources.Lerc");return b}();
_geo.geotoolkit.map.Wa.Ff.yT=function(){function b(a){a=a||{};this.uE=a.shape;this.ct=a.shapecallback;this.l0a=a.geometrytoshape;this.KIb=a.geometrytotext;this.Lb=a.textshape||new _geo.geotoolkit.scene.shapes.Text({preservereadingorientation:!0,ispointingup:!0});null!=this.uE&&this.uE.ke(!1);this.Lb.ke(!1)}_geo.geotoolkit.da(b,"geotoolkit.map.features.templates.BaseTemplate");b.prototype.jb=function(){var a={};a.shape=this.uE;a.shapecallback=this.ct;a.geometrytoshape=this.l0a;a.geometrytotext=this.KIb;
a.textshape=this.Lb;return a};b.prototype.setOptions=function(a){if(null==a)return this;null!=a.shape&&(this.uE=a.shape);null!=a.geometrytoshape&&(this.l0a=a.geometrytoshape);null!=a.geometrytotext&&(this.KIb=a.geometrytotext);null!=a.textshape&&(this.Lb=a.textshape);a.hasOwnProperty("shapecallback")&&(this.ct=a.shapecallback);return this};b.prototype.Ob=function(){return this.uE};b.prototype.ila=function(){return this.l0a};b.prototype.OM=function(){return this.KIb};b.prototype.en=function(){return this.Lb};
b.prototype.Vta=function(){return this.ct};return b}();
_geo.geotoolkit.map.Wa.Ff.na=function(){function b(a){a=a||{};a.shape=a.shape||new _geo.geotoolkit.scene.shapes.Symbol(0,0,8,8,_geo.geotoolkit.util.Da.lb,!0,_geo.geotoolkit.scene.shapes.hc.Hz,new _geo.geotoolkit.attributes.Aa("black"),new _geo.geotoolkit.attributes.Fa("white"));a.geometrytoshape=a.geometrytoshape||new _geo.geotoolkit.map.Wa.Nn.na;a.geometrytotext=a.geometrytotext||a.geometrytoshape;_geo.geotoolkit.map.Wa.Ff.yT.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.Ff.yT);_geo.geotoolkit.da(b,
"geotoolkit.map.features.templates.Point");return b}();
_geo.geotoolkit.map.Wa.Ff.ou=function(){function b(a){a=a||{};a.shape=a.shape||new _geo.geotoolkit.scene.shapes.Il({linestyle:{color:"black",width:1}});a.shape instanceof _geo.geotoolkit.scene.shapes.Il&&a.shape.nC(!1);a.geometrytoshape=a.geometrytoshape||new _geo.geotoolkit.map.Wa.Nn.ou;a.geometrytotext=a.geometrytotext||new _geo.geotoolkit.map.Wa.Nn.Kaa;_geo.geotoolkit.map.Wa.Ff.yT.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.Ff.yT);_geo.geotoolkit.da(b,"geotoolkit.map.features.templates.LineString");
return b}();_geo.geotoolkit.map.Wa.Ff.Fc=function(){function b(a){a=a||{};a.shape=a.shape||new _geo.geotoolkit.scene.shapes.Fc({linestyle:{color:"black",width:1},fillstyle:{color:"white"}});a.geometrytoshape=a.geometrytoshape||new _geo.geotoolkit.map.Wa.Nn.Fc;a.geometrytotext=a.geometrytotext||new _geo.geotoolkit.map.Wa.Nn.lb;_geo.geotoolkit.map.Wa.Ff.yT.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.Ff.yT);_geo.geotoolkit.da(b,"geotoolkit.map.features.templates.Polygon");return b}();
_geo.geotoolkit.map.Wa.Ff.$G=function(){function b(a){a=a||{};a.shape=a.shape||new _geo.geotoolkit.scene.shapes.Symbol(0,0,25,25,_geo.geotoolkit.util.Da.lb,!0,_geo.geotoolkit.scene.shapes.hc.Hz,new _geo.geotoolkit.attributes.Aa("black"),new _geo.geotoolkit.attributes.Fa("white"));this.alc=a.expandedshape||new _geo.geotoolkit.scene.shapes.Symbol(0,0,25,25,_geo.geotoolkit.util.Da.lb,!0,_geo.geotoolkit.scene.shapes.hc.Hz,new _geo.geotoolkit.attributes.Aa("black"),new _geo.geotoolkit.attributes.Fa("green"));
this.$kc=a.expandedline||new _geo.geotoolkit.scene.shapes.Line;this.$kc.Dw({from:new _geo.geotoolkit.util.na,to:new _geo.geotoolkit.util.na});this.ae=a.colorprovider||null;this.N3c=a.expandedcolorprovider||new _geo.geotoolkit.util.ym({values:[0,1,2],colors:[new _geo.geotoolkit.util.rb(255,0,0,255),new _geo.geotoolkit.util.rb(0,255,0,255),new _geo.geotoolkit.util.rb(0,0,255,255)]});a.textshape=a.textshape||new _geo.geotoolkit.scene.shapes.Text({textstyle:"white",preservereadingorientation:!0,ispointingup:!0});
a.geometrytoshape=a.geometrytoshape||new _geo.geotoolkit.map.Wa.Nn.na;a.geometrytotext=a.geometrytotext||a.geometrytoshape;_geo.geotoolkit.map.Wa.Ff.yT.call(this,a);this.dQc(a.shapecallback)}var a=new _geo.geotoolkit.scene.shapes.Fn;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.Wa.Ff.yT);_geo.geotoolkit.da(b,"geotoolkit.map.features.templates.Aggregation");b.prototype.setOptions=function(a){if(null==a)return this;_geo.geotoolkit.map.Wa.Ff.yT.setOptions.call(this,a);a.hasOwnProperty("shapecallback")&&this.dQc(a.shapecallback);
return this};b.prototype.ved=function(){return this.alc};b.prototype.ued=function(b,d,e){this.l0a.apply(d.eWb(),a,e);d=a.pj();this.l0a.apply(b,a,e);b=a.pj();return this.$kc.Dw({from:d,to:b})};b.prototype.dQc=function(a){this.ct=function(b,e,c){var f=c&&!c.Gd();if(f){var k;e===this.alc?k=this.N3c.ac(b.bg()):null!=this.ae&&(k=this.ae.ac(b.od()));k&&((f=e.sb())?f.setColor(k):e.ta(k))}null!=a&&a.call(this,b,e,c)}.bind(this);return this};return b}();
_geo.geotoolkit.map.layers.Gx=function(){function b(a){this.la=this.la||{};_geo.geotoolkit.scene.Node.call(this,a);a=_geo.geotoolkit.Sb(a,{system:_geo.geotoolkit.map.Mw.wba,limits:null,source:null,alpha:1,layerfilter:null},!0);var b=a.system;this.vHb=_geo.geotoolkit.map.Nd.tq.ab(b);this.Oc=null;this.setOptions(a);this.kC(a.source||a.sources);this.M2=this.NAa=this.td=null;this.R2=!1}_geo.geotoolkit.fa(b,_geo.geotoolkit.scene.Node);_geo.geotoolkit.da(b,"geotoolkit.map.layers.AbstractLayer");b.prototype.mb=
function(){return this.ee()};b.prototype.Nb=function(a){var b=this.getParent(),d=this.xa(),e=null;null!=b&&null!=b.xa()&&(e=this.Ya(),e=null==e?new _geo.geotoolkit.util.Rect(b.om(a)):e.qe(b.om(a)));if(null!=d&&null!=e)a||e.intersect(d);else return d;return e};b.prototype.xa=function(){if(null!=this.ai)return this.ai.clone();if(null!=this.Oc){var a=this.Oc.xa();if(null!=a)return a}this.uu||(this.uu=this.jK());return this.uu?this.uu.clone():null};b.prototype.Sa=function(a){this.ai=a?a.clone():null;
this.Ja(_geo.geotoolkit.scene.Node.$.ss,this,this.ai);return this};b.prototype.xr=function(){return null!=this.uu?this.uu.clone():null};b.prototype.jK=function(){return null!=this.NAa?this.NAa.xr():null};b.prototype.EBc=function(){return this.Uy};b.prototype.HOc=function(a){this.Uy!==a&&(this.Uy=a,this.la.alpha=a,this.ma());return this};b.prototype.jb=function(){return _geo.geotoolkit.Sb(this.la,{})};b.prototype.setOptions=function(a){_geo.geotoolkit.Sb(a,this.la);a&&a.hasOwnProperty("limits")&&this.Sa(a.limits);
this.rca=this.la.layerfilter;this.Uy=this.la.alpha;return this};b.prototype.Lu=function(){return this.vHb};b.prototype.mk=function(a){this.R2!==a&&(this.R2=a,this.ma());return this};b.prototype.Cr=function(){return this.R2};b.prototype.render=function(a){!this.vo||this.rca&&!this.rca.filter(this,a)||(this.td&&!a.Gd()?this.td.render(a):this.Qh(a))};b.prototype.Qh=_geo.geotoolkit.Ia;b.prototype.ee=function(){return null!=this.getParent()?this.getParent().ee():null};b.x9c=function(a){var b=null,d=[];
a.forEach(function(a){a instanceof _geo.geotoolkit.scene.shapes.Fn&&a.ZB()?d.push(a.pj()):a.ga&&(a=a.ga())&&(null==b?b=a.clone():b.union(a))});0<d.length&&(a=_geo.geotoolkit.util.Ec.getBoundingBox(d),null==b?b=a:b.union(a));return b};b.prototype.Tl=function(a){if(this.td===a)return this;this.td&&this.td.Cx(null);a&&a.WB()&&a.Cx(null);if(this.td=a)this.td.Cx(this),this.td.MW(this.Qh.bind(this));return this};b.prototype.ma=function(a,b){this.td&&(a?this.td.ma(a,b):this.td.yg());a||(a=this.xa());_geo.geotoolkit.scene.Node.prototype.ma.call(this,
a,b);return this};b.prototype.EM=function(){return this.td};b.prototype.oV=function(){this.td&&(this.td.Cx(null),this.td.MW(null));this.td=null;return this};b.prototype.ka=function(){var a=_geo.geotoolkit.scene.Node.prototype.ka.call(this);a.url=this.u9();return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);_geo.geotoolkit.scene.Node.prototype.ja.call(this,a);a.hasOwnProperty("url")&&this.OW(a.url);return this};b.prototype.lI=function(){return this.NAa};b.prototype.VA=
function(a){this.NAa=_geo.geotoolkit.map.Nd.tq.ab(a);null!=this.Oc&&this.Oc.VA(this.NAa);return this};b.prototype.cb=function(a,b,d,e){b=b instanceof _geo.geotoolkit.map.Nd.tq?b:_geo.geotoolkit.map.Nd.ue.lq().Lu(b);d=d instanceof _geo.geotoolkit.map.Nd.tq?d:_geo.geotoolkit.map.Nd.ue.lq().Lu(d);if(null!=b&&null!=d){if(null==this.M2||this.M2.jI()!==b||this.M2.Dv()!==d)this.M2=d.Tea(b);return this.M2.transform(a,e)}return null};b.prototype.baa=function(a,b){var d=this.Lu(),e=this.lI();return this.cb(a,
d,e,b)};b.prototype.bcb=function(a,b){var d=this.Lu(),e=this.lI();return this.cb(a,e,d,b)};b.prototype.OW=function(a){null!=this.Oc&&this.Oc.OW(a);return this};b.prototype.u9=function(){return null!=this.Oc?this.Oc.u9():null};b.prototype.dispose=function(){null!=this.Oc&&this.Oc.dispose();this.td&&this.Tl(null);_geo.geotoolkit.scene.Node.prototype.dispose.call(this)};b.prototype.Hf=function(){return this.Oc};b.prototype.Un=function(a,b){return[]};b.prototype.j4=function(){return null};b.prototype.kC=
_geo.geotoolkit.Ia;return b}();
_geo.geotoolkit.map.layers.YG=function(){function b(a){a=_geo.geotoolkit.Sb(a,{source:null,converters:a&&a.hasOwnProperty("converters")?a.converters:null,features:{filter:null},annotations:{visible:!1,strategy:new _geo.geotoolkit.map.Wa.Zq.Pcb},tooltip:{visible:!1,formatter:new _geo.geotoolkit.map.Wa.Lka.Kgb}});var e=this,c=new _geo.geotoolkit.map.Wa.Hu.T5;Array.isArray(a.converters)?c=[c].concat(a.converters):a.converters&&(c=[c,a.converters]);this.KL=(new _geo.geotoolkit.map.Wa.Hu.Cdb(c)).kb(_geo.geotoolkit.map.layers.YG.$.fha,function(){e.ma();
e.Ja(b.$.fha,e)});this.O2=this.iGa.bind(this);_geo.geotoolkit.map.layers.Gx.call(this,a);a=a.annotations.text;a instanceof _geo.geotoolkit.scene.shapes.Text?this.$hb=a:(a=_geo.geotoolkit.Sb(a,{preservereadingorientation:!0,ispointingup:!0}),this.$hb=new _geo.geotoolkit.scene.shapes.Text(a))}function a(a){a.Wl&&!0!==a.Wl.qGc&&!1===a.Wl.nS&&(a.Wl.nS=!0)}function g(a,b){if(!a||!b)return!1;for(var c in b)if(a[c]!==b[c])return!1;return!0}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Gx);_geo.geotoolkit.da(b,
"geotoolkit.map.layers.AbstractFeatureLayer");b.$={fha:"FeaturesUpdated"};b.prototype.xA=function(a){var b=this.getParent();if(!b)return _geo.geotoolkit.util.Iterator.Zm([]);var c=null;a instanceof _geo.geotoolkit.map.util.xha&&(c=a.yd(),a=a.getFilter());b=null!=c?c:b.xa();return this.KL.xA({bbox:b,filter:a||null,scale:Math.abs(this.Ya().Ab())})};b.prototype.OM=_geo.geotoolkit.Ia;b.prototype.jAc=function(a){for(var b=this.xA(),c;b.Xf();)if(c=b.next(),c.od()===a)return c;return null};b.prototype.$Sa=
function(a){var b;a instanceof _geo.geotoolkit.map.util.xha||"function"!==typeof a||(a=new _geo.geotoolkit.map.util.xha({filter:a}));b=a.yd();if(null==b)b=_geo.geotoolkit.util.Iterator.toArray(this.xA());else{var c=new _geo.geotoolkit.selection.am;b=b instanceof _geo.geotoolkit.util.Rect?c.select(this,b):b instanceof _geo.geotoolkit.util.na?c.select(this,b.getX(),b.getY()):c.select(this,b.x,b.y)}if(!b||1>b.length)return[];var f=a.ka(),k=a.getName(),h=a.getFilter();return b.filter(function(a){return null!=
k&&a.getName()!==k||null!=f&&!g(a.getAttributes(),f)?!1:null!=h?h(a):!0})};b.prototype.u$=function(a,b){a.forEach(function(a){a instanceof _geo.geotoolkit.scene.Node&&a.ib()&&(b.Gd()&&b.El(a),a.render(b))})};b.prototype.MGa=function(a,b){var c=this.la.geometrytotext;if(c){var f=this.la.annotations;if(f){var g=f.strategy;if(g){var h=this.$hb;a.forEach(function(a){if(a instanceof _geo.geotoolkit.scene.Node&&a.ib()){var d=g.vb(a,this);if(d)if(a=a.yd(!0),Array.isArray(a))for(var f,r=0;r<a.length;++r)f=
a[r],f.Wl&&!1===f.Wl.nS||(c.apply(f,h,b),h.jc(d),h.render(b));else c.apply(a,h,b),h.jc(d),h.render(b)}}.bind(this))}}}};b.prototype.Dob=function(a,b,c){a.reset();if(!b)return a;Array.isArray(b)||(b=[b]);var f=this;b.forEach(function(b){if(!_geo.geotoolkit.nG(b,_geo.geotoolkit.map.Wa.filters.uL))throw Error("Not a geotoolkit.map.features.filters.IFilter instance");b.reset();a=b.EE(a,c,f)});return a};b.prototype.ILc=function(b){b.forEach(function(b){b=b.yd(!0);Array.isArray(b)&&b.forEach(a)})};b.prototype.Qh=
function(a){null!=a.Lk&&1!==this.Uy&&(a.save(),a.Lk().globalAlpha=this.Uy);var b=a.Gd()?new _geo.geotoolkit.map.util.xha({geometry:this.Nb()}):new _geo.geotoolkit.map.util.xha({geometry:a.qj()}),b=this.xA(b),c=this.la.features.filter;c&&(b=this.Dob(b,c,a));this.u$(b,a);if(this.la.annotations.visible&&!a.Gd()){if(c=this.la.annotations.filter)this.ILc(b),b=this.Dob(b,c,a);this.MGa(b,a)}null!=a.Lk&&1!==this.Uy&&a.restore()};b.prototype.VA=function(a){_geo.geotoolkit.map.layers.Gx.prototype.VA.call(this,
a);if(a=this.lI())null!=this.Oc&&this.Oc.VA(a),this.Fz();return this};b.prototype.EMc=function(a){this.$hb.Ib()!==a&&(this.$hb.wb(a),this.ma());return this};b.prototype.kC=function(a){if(this.Oc===a)return this;Array.isArray(a)?a=1===a.length?a[0]:new _geo.geotoolkit.map.Qa.RIa(a):null==a&&(a=new _geo.geotoolkit.map.Qa.Wh);null!=this.Oc&&(this.Oc.hb(_geo.geotoolkit.scene.Node.$.ss,this.O2),this.Oc.hb(_geo.geotoolkit.map.Qa.$.aw,this.O2),this.Oc.hb(_geo.geotoolkit.map.Qa.$.GT,this.O2),this.KL.Vqd(this.Oc));
this.Oc=a;null!=this.Oc&&(this.Oc.KW(this.vHb),this.Oc.kb(_geo.geotoolkit.scene.Node.$.ss,this.O2),this.Oc.kb(_geo.geotoolkit.map.Qa.$.aw,this.O2),this.Oc.kb(_geo.geotoolkit.map.Qa.$.GT,this.O2),this.KL.Uid(this.Oc),a=this.la.url||this.la.server,null!=a&&null==this.Oc.u9()&&this.Oc.OW(a));return this};b.prototype.j4=function(){return!0===this.la.tooltip.visible?this.la.tooltip.formatter:null};b.prototype.ka=function(){var a=_geo.geotoolkit.map.layers.Gx.prototype.ka.call(this);a.annotations=this.la.annotations.visible;
a.tooltip=this.la.tooltip.visible;return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);_geo.geotoolkit.map.layers.Gx.prototype.ja.call(this,a);"boolean"===typeof a.annotations&&(this.la.annotations.visible=a.annotations);"boolean"===typeof a.tooltip&&(this.la.tooltip.visible=a.tooltip);return this};b.prototype.setOptions=function(a){a&&a.annotations&&a.annotations.text&&a.annotations.text.textstyle&&this.EMc(a.annotations.text.textstyle);_geo.geotoolkit.map.layers.Gx.prototype.setOptions.call(this,
a);return this};b.prototype.Fz=function(a){this.ai||(null==a||Array.isArray(a)||a instanceof _geo.geotoolkit.util.Iterator||(a=[a]),this.uu=this.jK(a),this.Ja(_geo.geotoolkit.scene.Node.$.ss,this,this.uu))};b.prototype.Vbb=function(){var a=this.xA(),b=new _geo.geotoolkit.map.Nd.PXa({initialcoordinatesystem:this.lI()});return _geo.geotoolkit.map.util.eH.Vbb(a,b.transform.bind(b))};b.prototype.iGa=function(a,b,c){this.Fz(a!==_geo.geotoolkit.map.Qa.$.GT?c:null)};b.prototype.dispose=function(){null!=
this.KL&&this.KL.dispose();_geo.geotoolkit.map.layers.Gx.prototype.dispose.call(this)};return b}();
_geo.geotoolkit.map.layers.kba=function(){function b(a){if(!a||!a.templates)throw Error("options.templates must be provided");this.tn=[];this.vCa=this.iZ=null;this.vJb=!1;this.D2={};var b=Array.isArray(a.templates)?a.templates:[a.templates];b.forEach(function(a){for(var b=Array.isArray(a.featureclassname)?a.featureclassname:[a.featureclassname],c=0;c<b.length;++c)this.D2[b[c]]=a.template}.bind(this));this.yMb=[];this.bAa=null;this.uib=!0;_geo.geotoolkit.map.layers.YG.call(this,a);this.Tl(new _geo.geotoolkit.scene.Rk)}
function a(a){a=a.tea();a.VXb=!1;a.Lwa=null;a.Kwa=null}function g(a){return a instanceof _geo.geotoolkit.map.Wa.$G}var d=new _geo.geotoolkit.map.Wa.Ff.yT,e=new _geo.geotoolkit.util.na,c=new _geo.geotoolkit.util.Rect,f=new _geo.geotoolkit.util.Rect,k=new _geo.geotoolkit.util.xc,h=new _geo.geotoolkit.scene.shapes.Path,l=new _geo.geotoolkit.map.Wa.Nn.Path;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.YG);_geo.geotoolkit.da(b,"geotoolkit.map.layers.Template");b.prototype.HLc=function(a,b){a?_geo.geotoolkit.Pk(a,
_geo.geotoolkit.map.Wa.sJa)&&(a=[a]):(a=this.tn,this.yMb=[]);a.forEach(function(a){a.Ez=null});b||this.ma();return this};b.prototype.pUb=function(a){return this.D2[a]};b.prototype.TDa=function(a){var b=this.D2[a.getClassName()];if(!a.Ez)return b;if(!b)return a.Ez;var c=void 0===a.Ez.Vta()?b.Vta():a.Ez.Vta();d.setOptions({shape:a.Ez.Ob()||b.Ob(),geometrytoshape:a.Ez.ila()||b.ila(),geometrytotext:a.Ez.OM()||b.OM(),textshape:a.Ez.en()||b.en(),shapecallback:c});return d};b.prototype.Yta=function(a){return"string"===
typeof a?this.pUb(a):a instanceof _geo.geotoolkit.map.Wa.MN?a.Ez?a.Ez:this.pUb(a.getClassName()):null};b.prototype.HUa=function(a,b,c){"string"===typeof a?this.D2[a]=b:(_geo.geotoolkit.nG(a,_geo.geotoolkit.map.Wa.sJa)&&(a=[a]),0>this.yMb.indexOf(b)&&this.yMb.push(b),a.forEach(function(a){a.Ez=b}));c||this.ma();return this};b.prototype.oxd=function(){var a=0,b;for(b in this.D2)this.D2.hasOwnProperty(b)&&++a;return a};b.prototype.zed=function(){for(var a in this.D2)if(this.D2.hasOwnProperty(a))return this.D2[a];
return null};b.prototype.jK=function(a){function b(a){g.apply(a,e,C);var k;e instanceof _geo.geotoolkit.scene.shapes.Fn&&e.ZB()?(k=(k=e.Xa())?2*k.aa():0,k=e.eea(C,e.uA(),e.ny(),e.aa()+k,e.ba()+k),A=null!=A?A.union(k):k):(k=e.ga(),A=null!=A?A.union(k):k.clone());F.la.annotations.visible&&h.apply(a,f,C);F.Vpd(x,d,a,k,D,c)}function c(a,b){var d={};Array.isArray(a.x)?(d.x=a.x.map(function(a){return a+b}),d.y=a.y.slice()):(d.x=a.x+b,d.y=a.y);E.push(d)}if(!a)return this.uu=null,0<this.tn.length?this.jK(this.tn):
null;var d,e,f,g,h,l,x,A=null,z=this.getRoot(),C,D;z instanceof _geo.geotoolkit.map.Map&&(D=z.Lu().xr(),(z=z.xa())&&D&&(C=_geo.geotoolkit.util.Ga.hf(D,z)));C=C||this.Ya()||_geo.geotoolkit.util.Ga.N0;var E=[];C.xk(k.setSize(1,1),k);var F=this;a.forEach(function(a){d=F.TDa(a);null!=d&&(e=d.Ob(),f=d.en(),g=d.ila(),h=d.OM(),x=a,l=a.yd(!0),Array.isArray(l)?l.forEach(b):b(l),0<E.length&&(a.Xq(E.concat(l).reverse()),E.length=0))});null!=A&&(this.uu?this.uu.union(A):this.uu=A);return this.uu};b.prototype.Vpd=
function(a,b,d,e,g,h){if(g&&!a.tea().Ypd){a.tea().Ypd=!0;c.zb(g).translate(g.aa(),0);f.zb(g).translate(-g.aa(),0);var l=!1,v=!1;c.intersects(e)&&(l=!0,h(d,-g.aa()));f.intersects(e)&&(v=!0,h(d,g.aa()));(e=this.la.annotations.strategy)&&this.la.annotations.visible&&(e=e.vb(a,this))&&(b=b.en(),!l&&_geo.geotoolkit.map.util.oF.XCa(a,c,b,e,k)&&h(d,-g.aa()),!v&&_geo.geotoolkit.map.util.oF.XCa(a,f,b,e,k)&&h(d,g.aa()))}};b.prototype.uh=function(a,b){if(-1<this.tn.indexOf(a)){a.la.geometry=b;var c=this.lI();
c&&"function"===typeof a.nA&&a.nA(this);this.uu=this.jK();this.ma()}return this};b.prototype.Ada=function(a){if(null==a)return this;Array.isArray(a)||(a=[a]);a.forEach(function(a){a.nA(this)}.bind(this));this.Oc.lob(a,!1);this.ai||(this.uu=this.jK(_geo.geotoolkit.util.Iterator.bn(a)),this.Ja(_geo.geotoolkit.scene.Node.$.ss,this,this.uu));this.ma();return this};b.prototype.oTa=function(a){if(null==a)return this;var b=!1;_geo.geotoolkit.util.Iterator.bn(a).forEach(function(a){var c=this.tn.indexOf(a);
-1<c&&(this.Oc.oTa(a),b=!0)}.bind(this));b&&(this.ai||(this.uu=this.jK(),this.Ja(_geo.geotoolkit.scene.Node.$.ss,this,this.uu)),this.ma());return this};b.prototype.lka=function(){this.Oc.lka();this.tn=[];return this};b.prototype.EMc=function(a){for(var b in this.D2)this.D2.hasOwnProperty(b)&&this.D2[b].en().wb(a);this.ma();return this};b.prototype.render=function(a){!this.vo||this.rca&&!this.rca.filter(this,a)||(this.td&&!a.Gd()&&(this.uib||this.td.jSa())?this.td.render(a):this.Qh(a),this.snd(a))};
b.prototype.Qh=function(a){a.Gd()&&(a.ta(_geo.geotoolkit.attributes.Fa.Ui),a.zc(this.xa()));null!=a.Lk&&1!==this.Uy&&(a.save(),a.Lk().globalAlpha=this.Uy);this.Yld(a);this.u$(this.iZ,a);this.fKc(a);this.la.annotations.visible&&!a.Gd()&&(this.uib||this.la.annotations.visibleonzoom||(this.vCa=this.vCa.filter(g)),this.MGa(this.vCa,a));null!=a.Lk&&1!==this.Uy&&a.restore()};b.prototype.u$=function(a,b){var c,d,e=this;a.forEach(function(a){d=a.tea();if(!d.VXb&&(c=e.TDa(a))){b.Gd()&&b.El(a);var f=a.eWb();
if(Array.isArray(f))for(var g=0;g<f.length;++g)e.tLc(a,f[g],c,b);else e.tLc(a,f,c,b)}})};b.prototype.Yld=function(b){var c=b.Ra(),d=c.Ab();c.xk(k.setSize(1,1),k);this.Cpa={};h.clear();null!=this.Oc&&this.Oc.$Sa(this.Nb(),this);if(null==this.iZ||this.vJb||(this.uib||this.td&&this.td.jSa())&&!_geo.geotoolkit.util.Math.equals(this.H2c,d)){this.H2c=d;this.vJb=!1;this.iZ=this.xA(new _geo.geotoolkit.map.util.xha({geometry:this.xa()}));if(c=this.la.features.filter)this.iZ=this.Dob(this.iZ,c,b);this.iZ=_geo.geotoolkit.util.Iterator.toArray(this.iZ);
this.iZ.forEach(a);this.la.annotations.visible&&((c=this.la.annotations.filter)?(d=new _geo.geotoolkit.util.Iga(this.iZ),this.ILc(d),this.vCa=this.Dob(d,c,b),this.vCa=_geo.geotoolkit.util.Iterator.toArray(this.vCa)):this.vCa=this.iZ)}};b.prototype.fKc=function(a){h.render(a);h.clear()};b.prototype.tLc=function(a,b,d,e){var f=d.Ob(),g=a.tea(),u=d.ila(),v=d.Vta();if(f.ib()){d=e.qj();if(v){if(u.apply(b,f,e),v(a,f,e),!f.ie(e))return}else if(Array.isArray(b.x))if(d.intersects(_geo.geotoolkit.map.util.Geometry.zV(b)))if(e.Gd())u.apply(b,
f,e);else{g=f.Xa();f=f.sb();h.Xa()===g&&h.sb()===f?l.UPb(b,h):(h.render(e),h.ua(g),h.ta(f),l.apply(b,h));return}else return;else{if(f.ZB&&f.ZB()&&(a=f.aa()*k.width,v=f.ba()*k.height,f.bPb(b.x,b.y,a,v,_geo.geotoolkit.util.Ga.N0,c),!d.intersects(c)))return;a=Math.floor((b.x-d.x)/k.width);d=Math.floor((b.y-d.y)/k.height);d=(a+d)*(a+d+1)/2+a;g.VXb=!0;if(this.Cpa[d]){if(this.Cpa[d]===f)return;if(Array.isArray(this.Cpa[d]))if(-1===this.Cpa[d].indexOf(f))this.Cpa[d].push(f);else return;else this.Cpa[d]=
[this.Cpa[d],f]}else this.Cpa[d]=f;u.apply(b,f,e)}0<h.yd().getLength()&&(h.render(e),h.clear());g.VXb=!1;f.render(e)}};b.prototype.yod=function(a){this.uib=a;return this};b.prototype.xa=function(){if(null!=this.ai)return this.ai;var a=this.Oc?this.Oc.xa():null;this.uu||(this.uu=this.jK());null!=a&&null!=this.uu&&this.uu.union(a);return this.uu?(null!=a&&this.uu.union(a),this.uu):null!=a?a:this.NAa?this.NAa.xr():null};b.prototype.OM=function(a){(a=this.Yta(a))||(a=this.zed());return a.OM()};b.prototype.MGa=
function(a,b){var c=this.la.annotations;if(c){var d=c.strategy;if(d){var e,f,g,h;a.forEach(function(a){if(h=d.vb(a,this))if(e=this.TDa(a))if(g=e.en(),f=e.OM(),g.ib()){var c=a.yd(!0);if(Array.isArray(c))for(var l=0;l<c.length;++l)c[l].Wl&&!1===c[l].Wl.nS||(f.apply(c[l],g,b),_geo.geotoolkit.map.util.oF.XCa(a,b.qj(),g,h,k)&&(g.jc(h),g.render(b)));else c.Wl&&!1===c.Wl.nS||(f.apply(c,g,b),_geo.geotoolkit.map.util.oF.XCa(a,b.qj(),g,h,k)&&(g.jc(h),g.render(b)))}}.bind(this))}}};b.prototype.Un=function(a,
b){function d(c,e,f){if(!_geo.geotoolkit.scene.shapes.Shape.bW(f.ga(),f.Yb(),w))return!1;if(c instanceof _geo.geotoolkit.map.Wa.ou||c instanceof _geo.geotoolkit.map.Wa.iO)return c=new _geo.geotoolkit.selection.FEb(a,b,v),c.hpb(e.x,e.y,!1);c=new _geo.geotoolkit.selection.kKa(a,b);return c.hpb(e.x,e.y,!0)}var g=this.lI();if(!g)return[];var h=this.Ya();a=h.Ue(a,e);g=g.xr();a.getX()<g.getX()?a.x+=g.aa():a.getX()>g.za()&&(a.x-=g.aa());g=this.xa();if(!this.iZ||!g||!g.contains(a))return[];h.xk(k.setSize(1,
1),k);b=(b||2)*k.aa();var l=this,u=[],v,w=f.zb(a.x-b,a.y-b,a.x+b,a.y+b),g=new _geo.geotoolkit.util.Joa(this.iZ,this.bAa);g.forEach(function(a){var b=l.TDa(a);if(b){var e=b.Ob(),f=b.ila(),g=a.yd(!0),b=b.Vta();if(e.ib()&&g){v=null!=e.Xa()?e.Xa().aa()*k.width:k.width;Array.isArray(g)||(g=[g]);for(var n=0;n<g.length;++n)if(f.apply(g[n],e,h),Array.isArray(g[n].x)){if(b&&b(a,e),d(a,g[n],e)){u.push(a);break}}else{b&&b(a,e);var p=e.aa(),t=e.ba();e.ZB&&e.ZB()&&(p*=k.width,t*=k.height);var H=e.uA(),G=e.ny();
e.bPb(H,G,p,t,_geo.geotoolkit.util.Ga.N0,c);if(w.intersects(c)){u.push(a);break}}}}});return u.reverse()};b.prototype.VA=function(a){_geo.geotoolkit.map.layers.YG.prototype.VA.call(this,a);a&&this.tn.forEach(function(a){a.nA(this)}.bind(this));return this};b.prototype.iGa=function(a,b,c){var d=this,e=null;a===_geo.geotoolkit.map.Qa.$.aw?e=function(a){d.tn.push(a)}:a===_geo.geotoolkit.map.Qa.$.GT&&(e=function(a){a=d.tn.indexOf(a);0<=a&&d.tn.splice(a,1)});_geo.geotoolkit.util.Iterator.bn(c).forEach(function(a){e&&
e(a);if(a=d.TDa(a)){var b=a.Ob();if(b instanceof _geo.geotoolkit.scene.shapes.Image&&!b.loaded){var c=function(){b.hb(_geo.geotoolkit.scene.shapes.Image.$.Ws,c);d.ma()};b.kb(_geo.geotoolkit.scene.shapes.Image.$.Ws,c)}}});_geo.geotoolkit.map.layers.YG.prototype.iGa.call(this,a,b,c)};b.prototype.NNc=function(a){this.bAa=a;return this};b.prototype.snd=function(a){if(!this.bAa)return this;var b=this.la.annotations&&this.la.annotations.strategy,c,d,e,f,g,h=a.Gd(),k,l,A,z,C=this;this.bAa.forEach(function(D){k=
C.TDa(D);if(k instanceof _geo.geotoolkit.map.Wa.Ff.$G&&(l=k.ved(),d=k.en(),A=k.ila(),c=k.OM(),z=k.Vta(),l.ib())){var E=D.eWb();Array.isArray(E)||(E=[E]);f=D.getParent();b&&(e=b.vb(D,this),d.jc(e));for(var F=0;F<E.length;++F)A.apply(E[F],l,a),c.apply(E[F],d,a),z&&z(D,l,a),f&&(g=k.ued(E[F],f,a),g.render(a)),h&&a.El(D),l.render(a),h&&a.El(null),b&&d.ib()&&d.render(a)}});return this};b.prototype.ma=function(a,b){this.vJb=!0;_geo.geotoolkit.map.layers.YG.prototype.ma.call(this,a,b)};return b}();
_geo.geotoolkit.map.layers.Image=function(){function b(a){var b=this;this.O2=function(a,c,f){b.Ja(_geo.geotoolkit.scene.Node.$.ss,b,f)};this.Anb=function(a,c,f){b.jo=f;b.ma()};this.jo=null;_geo.geotoolkit.map.layers.Gx.call(this,a)}var a=new _geo.geotoolkit.util.Rect;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Gx);_geo.geotoolkit.da(b,"geotoolkit.map.layers.Image");b.prototype.render=function(a){if(this.vo&&(null==this.rca||this.rca.filter(this,a)))if(a.Gd())this.KMa&&(a.ta(_geo.geotoolkit.attributes.Fa.Ui),
a.zc(this.Rb));else{var b=this.Nb(!0);null!=b&&(this.Oc.Ve(b,this),this.td?this.td.render(a):this.Qh(a))}};b.prototype.Qh=function(a){null!=a.Lk&&1!==this.Uy&&(a.save(),a.Lk().globalAlpha=this.Uy);if(null!=this.jo)for(var b=0;b<this.jo.length;b++)this.nwb(this.jo[b],a);null!=a.Lk&&1!==this.Uy&&a.restore()};b.prototype.nwb=function(b,d){if(b.ie(d)){var e=d.Ra(),c=d.$e(),f=b.ga(),k=e.ob(f,a);_geo.geotoolkit.util.Math.equals(c.sa(),k.sa(),1)?k.setX(c.getX()):_geo.geotoolkit.util.Math.equals(c.za(),k.za(),
1)?k.setX(c.za()-k.aa()):k.setX(Math.round(k.getX()));e.qe(k,k);b.Ea(k);b.render(d);b.Ea(f)}};b.prototype.getLayers=function(){return null!=this.Oc?this.Oc.getLayers():null};b.prototype.TP=function(){return null!=this.Oc?this.Oc.TP():null};b.prototype.gL=function(a){null!=this.Oc&&this.Oc.gL(a);return this};b.prototype.mFa=function(a){null!=this.Oc&&this.Oc.mFa(a);return this};b.prototype.kC=function(a){if(this.Oc===a)return this;null!=this.Oc&&(this.Oc.hb(_geo.geotoolkit.scene.Node.$.ss,this.O2),
this.Oc.hb(_geo.geotoolkit.map.Qa.$.Ws,this.Anb),this.Oc.hb(_geo.geotoolkit.map.Qa.$.Meb,this.Anb));this.Oc=a;null!=this.Oc&&(this.Oc.kb(_geo.geotoolkit.scene.Node.$.ss,this.O2),this.Oc.kb(_geo.geotoolkit.map.Qa.$.Ws,this.Anb),this.Oc.kb(_geo.geotoolkit.map.Qa.$.Meb,this.Anb),a=this.la.url||this.la.server,null!=a&&null==this.Oc.u9()&&this.Oc.OW(a));return this};b.prototype.ka=function(){var a=_geo.geotoolkit.map.layers.Gx.prototype.ka.call(this);a.showlayers=this.TP();return a};b.prototype.ja=function(a){if(null==
a)return this;a=_geo.geotoolkit.rc(a);a.hasOwnProperty("showlayers")&&(this.mFa(),this.gL(a.showlayers));_geo.geotoolkit.map.layers.Gx.prototype.ja.call(this,a);return this};return b}();
_geo.geotoolkit.map.layers.Wh=function(){function b(a){a=a||{};a.source=a.source||a.sources||new _geo.geotoolkit.map.Qa.Wh;null==a.templates&&(a.templates=[]);_geo.geotoolkit.map.layers.kba.call(this,a);null!=a.idfield&&this.Oc.v5(a.idfield);for(var b=[_geo.geotoolkit.map.Wa.Fc.getClassName(),_geo.geotoolkit.map.Wa.ZQ.getClassName(),_geo.geotoolkit.map.Wa.ou.getClassName(),_geo.geotoolkit.map.Wa.iO.getClassName(),_geo.geotoolkit.map.Wa.na.getClassName(),_geo.geotoolkit.map.Wa.jO.getClassName(),_geo.geotoolkit.map.Wa.$G.getClassName()],
d=0;d<b.length;++d)if(null==this.pUb(b[d])){var e=this.LTb(b[d]);null!=e&&this.HUa(b[d],e,!0)}null!=a.data&&this.Oc.Iua(a.data)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.kba);_geo.geotoolkit.da(b,"geotoolkit.map.layers.Vector");b.prototype.Iua=function(a){this.Oc.Iua(a);return this};b.prototype.v5=function(a){this.Oc.v5(a);return this};b.prototype.eua=function(){return this.Oc.eua()};b.prototype.LTb=function(a){switch(a){case _geo.geotoolkit.map.Wa.Fc.getClassName():case _geo.geotoolkit.map.Wa.ZQ.getClassName():return new _geo.geotoolkit.map.Wa.Ff.Fc;
case _geo.geotoolkit.map.Wa.ou.getClassName():case _geo.geotoolkit.map.Wa.iO.getClassName():return new _geo.geotoolkit.map.Wa.Ff.ou;case _geo.geotoolkit.map.Wa.na.getClassName():case _geo.geotoolkit.map.Wa.jO.getClassName():return new _geo.geotoolkit.map.Wa.Ff.na;case _geo.geotoolkit.map.Wa.$G.getClassName():return new _geo.geotoolkit.map.Wa.Ff.$G}return null};b.prototype.ka=function(){var a=_geo.geotoolkit.map.layers.YG.prototype.ka.call(this);a.idfield=this.Oc.eua();return a};b.prototype.ja=function(a){if(null==
a)return this;a=_geo.geotoolkit.rc(a);"string"===typeof a.idfield&&this.Oc.v5(a.idfield);_geo.geotoolkit.map.layers.YG.prototype.ja.call(this,a);return this};return b}();
_geo.geotoolkit.map.layers.Dk=function(){function b(a){a=_geo.geotoolkit.Ca(a,{tilewidth:256,tileheight:256,minlod:0,maxlod:15,imagepool:400,source:null,format:a&&a.formatterfunction?new _geo.geotoolkit.map.Qa.Bg.Dk({formatterfunction:a.formatterfunction}):null,url:null},!0);a.source=a.source||new _geo.geotoolkit.map.Qa.Dk(a);var b=this;this.O2=function(a,e,c){b.Ja(_geo.geotoolkit.scene.Node.$.ss,b,c)};this.Nra=function(a,e,c){b.ma(c)};_geo.geotoolkit.map.layers.Gx.call(this,a)}_geo.geotoolkit.fa(b,
_geo.geotoolkit.map.layers.Gx);_geo.geotoolkit.da(b,"geotoolkit.map.layers.Tile");b.prototype.render=function(a){!this.vo||this.rca&&!this.rca.filter(this,a)||(a.Gd()?(a.ta(_geo.geotoolkit.attributes.Fa.Ui),a.zc(this.xa())):this.td?this.td.render(a):this.Qh(a))};b.prototype.Qh=function(a){if(null!=this.u9()&&null!=this.lI()){var b=this.Nb(),d=a.$e();this.Oc.Ve(b,this);var b=a.Ra(),e=this.lI().xr(),c=b.transform(e);a.save();a.kc(_geo.geotoolkit.util.Ga.N0);var e=this.Oc.PM(),e={width:c.aa()/e.aa(),
height:c.ba()/e.ba()},d={wD:Math.floor((d.sa()-c.sa())/e.width),cC:Math.ceil((d.za()-c.sa())/e.width),RE:Math.floor((d.qa()-c.qa())/e.height),PE:Math.ceil((d.wa()-c.qa())/e.height)},f=c.sa()+d.wD*e.width,c=c.qa()+d.RE*e.height,k=this.Oc.AA();null!=a.Lk&&1!==this.Uy&&(a.Lk().globalAlpha=this.Uy);for(var h in k)k[h]instanceof _geo.geotoolkit.scene.shapes.Image&&this.nwb(k[h],a,d,f,c,e);a.kc(b);a.restore()}};b.prototype.nwb=function(a,b,d,e,c,f){var k=a.sp,h=a.wqa;if(null==a.image||k<d.wD||k>d.cC||h<
d.RE||h>d.PE)return this;a=a.image;var l=Math.round(e+(k-d.wD)*f.width),n=Math.round(c+(h-d.RE)*f.height);e=Math.round(e+(k-d.wD+1)*f.width);d=Math.round(c+(h-d.RE+1)*f.height);b.drawImage(a,0,0,a.width,a.height,l,n,e-l,d-n);return this};b.prototype.A7a=function(){return this.Oc.A7a()};b.prototype.x7a=function(){return this.Oc.x7a()};b.prototype.$Ec=function(){return new _geo.geotoolkit.util.xc(this.Oc.bua(),this.Oc.aua())};b.prototype.lOc=function(a){this.Oc.oHa(a);return this};b.prototype.WUb=function(){return this.Oc.ela()};
b.prototype.kC=function(a){if(this.Oc===a)return this;null!=this.Oc&&(this.Oc.hb(_geo.geotoolkit.scene.Node.$.ss,this.O2),this.Oc.hb(_geo.geotoolkit.map.Qa.$.RX,this.Nra));this.Oc=a;null!=this.Oc&&(this.Oc.kb(_geo.geotoolkit.scene.Node.$.ss,this.O2),this.Oc.kb(_geo.geotoolkit.map.Qa.$.RX,this.Nra),a=this.la.url||this.la.server,null!=a&&null==this.Oc.u9()&&this.Oc.OW(a));return this};b.prototype.ka=function(){var a=_geo.geotoolkit.map.layers.Gx.prototype.ka.call(this);a.tilewidth=this.Oc.bua();a.tileheight=
this.Oc.aua();a.minlod=this.Oc.A7a();a.maxlod=this.Oc.x7a();a.formatterfunction=this.Oc.WUb();return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);a.formatterfunction&&(this.Oc=new _geo.geotoolkit.map.Qa.Dk({formatterfunction:a.formatterfunction}));this.Oc.ja(a);_geo.geotoolkit.map.layers.Gx.prototype.ja.call(this,a);return this};b.prototype.QOc=function(a,b){this.Oc.ja({minlod:a,maxlod:b});return this};b.prototype.E9=function(){return this.Oc.E9()};b.prototype.GQc=
function(a,b){this.Oc.ja({tilewidth:a,tileheight:b});return this};return b}();
_geo.geotoolkit.map.layers.Shape=function(){function b(a){_geo.geotoolkit.map.layers.Gx.call(this,a);this.Fh=new _geo.geotoolkit.scene.lGb({clipchild:!1});this.Xx=function(){this.ma()}.bind(this);this.Fh.Qt(this.Xx);this.Fh.Sa(this.vHb.xr())}var a=new _geo.geotoolkit.util.na;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Gx);_geo.geotoolkit.da(b,"geotoolkit.map.layers.Shape");b.prototype.Xk=function(a,b){_geo.geotoolkit.map.layers.Gx.prototype.Xk(this,a,b);a(this.Fh,b)};b.prototype.jK=function(){return _geo.geotoolkit.map.layers.Gx.x9c(this.fs())};
b.prototype.VA=function(a){_geo.geotoolkit.map.layers.Gx.prototype.VA.call(this,a);this.Fh.Sa(this.lI().xr());return this};b.prototype.fs=function(a){return this.Fh.Ji(a)};b.prototype.addShape=function(a){if(null==a)return this;_geo.geotoolkit.util.Iterator.bn(a).forEach(function(a){this.Fh.va(a);this.Fh.pab(a,!0)}.bind(this));this.ai||(this.uu=this.jK(),this.Ja(_geo.geotoolkit.scene.Node.$.ss,this,this.uu));this.ma();return this};b.prototype.lLc=function(a,b){if(null==a)return this;var e=!1,c;if(a instanceof
_geo.geotoolkit.scene.Node)c=[a];else if(Array.isArray(a))c=a;else if(a instanceof _geo.geotoolkit.util.Iterator)c=_geo.geotoolkit.util.Iterator.toArray(a);else throw Error("Wrong parameter type");var f=this.Fh.Uc();c.forEach(function(a){this.Fh.removeChild(a);this.Fh.pab(a,!1);f!==this.Fh.Uc()&&(this.Ja(_geo.geotoolkit.scene.Node.$.Us,this,a),b&&"function"===typeof a.dispose&&a.dispose(),e=!0,f--)}.bind(this));e&&(this.ai||(this.uu=this.jK(),this.Ja(_geo.geotoolkit.scene.Node.$.ss,this,this.uu)),
this.ma());return this};b.prototype.cuc=function(a){var b=this.Fh.Ji();this.Fh.jh(a);this.Ja(_geo.geotoolkit.scene.Node.$.Us,this,b);this.ai||(this.uu=this.jK(),this.Ja(_geo.geotoolkit.scene.Node.$.ss,this,this.uu));return this};b.prototype.Qh=function(a){null!=a.Lk&&1!==this.Uy&&(a.save(),a.Lk().globalAlpha=this.Uy);this.Fh.render(a);null!=a.Lk&&1!==this.Uy&&a.restore()};b.prototype.kC=function(){return this};b.prototype.j4=function(){return this.la.tooltip&&this.la.tooltip.visible?this.la.tooltip.formatter:
null};b.prototype.Un=function(b,d){var e=this.lI();if(!e)return[];var c=this.Ya();b=c.Ue(b,a);e=e.xr();b.getX()<e.getX()?b.x+=e.aa():b.getX()>e.za()&&(b.x-=e.aa());var f=this.xa(),e=this.Fh.Uc();if(!e||!f||!f.contains(b))return[];d=(d||2)/c.Ab();for(var c=new _geo.geotoolkit.util.Rect(b.x-d,b.y-d,b.x+d,b.y+d),f=[],k=0;k<e;++k){var h=this.Fh.vc(k);if(h.ib()){var l=h.ga&&h.ga();_geo.geotoolkit.scene.shapes.Shape.bW(l,h.Yb(),c)&&f.push(h)}}return f};b.prototype.dispose=function(){this.Fh.Vu(this.Xx);
this.Fh.dispose();_geo.geotoolkit.map.layers.Gx.prototype.dispose.call(this)};return b}();
_geo.geotoolkit.map.layers.Ty=function(){function b(a){a=_geo.geotoolkit.Ca(a,{imageformat:null,layers:null,version:"1.3.0",transparent:!0,inflate:.2,timeout:50});var b=a.source||new _geo.geotoolkit.map.Qa.Ty(a);null!=a.imageformat&&b.Wva(a.imageformat);null!=a.layers&&b.gL(a.layers);a.source=b;_geo.geotoolkit.map.layers.Image.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Image);_geo.geotoolkit.da(b,"geotoolkit.map.layers.WMS");b.prototype.Wva=function(a){this.Oc instanceof _geo.geotoolkit.map.Qa.Ty&&
this.Oc.Wva(a);return this};b.prototype.tEa=function(){return this.Oc instanceof _geo.geotoolkit.map.Qa.Ty?this.Oc.tEa():null};b.prototype.NHa=function(a){this.Oc instanceof _geo.geotoolkit.map.Qa.Ty&&this.Oc.NHa(a);return this};b.prototype.bFa=function(){return this.Oc instanceof _geo.geotoolkit.map.Qa.Ty?this.Oc.bFa():null};b.prototype.setVersion=function(a){this.Oc instanceof _geo.geotoolkit.map.Qa.Ty&&this.Oc.setVersion(a);return this};b.prototype.f_=function(){return this.Oc instanceof _geo.geotoolkit.map.Qa.Ty?
this.Oc.f_():null};b.prototype.ka=function(){var a=_geo.geotoolkit.map.layers.Image.prototype.ka.call(this);a.format=this.tEa();a.version=this.f_();a.inflate=this.Oc instanceof _geo.geotoolkit.map.Qa.Ty?this.Oc.bVb():null;a.transparent=this.bFa();return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);this.Oc instanceof _geo.geotoolkit.map.Qa.Ty&&(a.hasOwnProperty("format")&&this.Oc.Wva(a.format),a.hasOwnProperty("layers")&&this.Oc.gL(a.layers),a.hasOwnProperty("version")&&
this.Oc.setVersion(a.version),a.hasOwnProperty("inflate")&&this.Oc.L3b(a.inflate),a.hasOwnProperty("transparent")&&this.Oc.NHa(a.transparent));_geo.geotoolkit.map.layers.Image.prototype.ja.call(this,a);return this};return b}();
_geo.geotoolkit.map.layers.FL=function(){function b(a){a=_geo.geotoolkit.Ca(a,{source:a&&(a.source||a.sources)||new _geo.geotoolkit.map.Qa.FL,templates:[],server:null});_geo.geotoolkit.map.layers.Wh.call(this,a);null!=a.featureTypes&&this.Oc.dxb(a.featureTypes)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.layers.WFS");b.prototype.ka=function(){var a=_geo.geotoolkit.map.layers.Wh.prototype.ka.call(this);a.featureTypes=this.Oc instanceof _geo.geotoolkit.map.Qa.FL?
this.Oc.qUb():null;return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);null!=a.featuretypes&&this.Oc instanceof _geo.geotoolkit.map.Qa.FL&&this.Oc.dxb(a.featuretypes);_geo.geotoolkit.map.layers.Wh.prototype.ja.call(this,a);return this};return b}();
_geo.geotoolkit.map.layers.bB=function(){function b(a){a=_geo.geotoolkit.Sb(a,{source:a&&a.source||new _geo.geotoolkit.map.Qa.bB,tooltip:{visible:!1,formatter:new _geo.geotoolkit.map.Wa.Lka.Kgb(null,null,window.Infinity,!0)}});this.Ioc=function(a,b,d){this.Ja(_geo.geotoolkit.map.Qa.$.p6,this,d)}.bind(this);_geo.geotoolkit.map.layers.Image.call(this,a);a.tooltip.layers&&this.Hf().f6b(a.tooltip.layers)}var a=new _geo.geotoolkit.util.na,g=new _geo.geotoolkit.util.xc;_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Image);
_geo.geotoolkit.da(b,"geotoolkit.map.layers.ArcGISImage");b.prototype.hQ=function(a){var b=this.Hf();b instanceof _geo.geotoolkit.map.Qa.bB?b.hQ(a):a(Error("ArcGISImage source should be used to query a legend"));return this};b.prototype.Un=function(b,e){var c=this.lI();if(!c)return[];var f=c.xr(),c=this.Ya();b=c.Ue(b,a);b.getX()<f.getX()?b.x+=f.aa():b.getX()>f.za()&&(b.x-=f.aa());f=this.xa();if(!f||!f.contains(b))return[];e=null==e?2:e;c.xk(g.setSize(e,e),g);return this.Oc.G9(new _geo.geotoolkit.util.Rect(b.getX()-
g.aa(),b.getY()-g.ba(),b.getX()+g.aa(),b.getY()+g.ba()),this)};b.prototype.j4=function(){return!0===this.la.tooltip.visible?this.la.tooltip.formatter:null};b.prototype.kC=function(a){if(this.Oc===a)return this;null!=this.Oc&&this.Oc.hb(_geo.geotoolkit.map.Qa.$.p6,this.Ioc);_geo.geotoolkit.map.layers.Image.prototype.kC.call(this,a);null!=this.Oc&&this.Oc.kb(_geo.geotoolkit.map.Qa.$.p6,this.Ioc);return this};return b}();
_geo.geotoolkit.map.layers.Hx=function(){function b(a){a=_geo.geotoolkit.Ca(a,{source:a&&(a.source||a.sources)||new _geo.geotoolkit.map.Qa.Hx,templates:[],annotations:{}},!0);_geo.geotoolkit.map.util.oF.Zuc(a.annotations,"filter",_geo.geotoolkit.map.Wa.filters.meb);var b;b=Array.isArray(a.source)?1===a.source.length?a.source[0]:new _geo.geotoolkit.map.Qa.RIa(a.source):a.source;null!=a.requestresolution&&b.FHa(a.requestresolution);null!=a.idfield&&b.v5(a.idfield);null!=a.requestfields&&b.Kda("setRequestFields",
a.requestfields);a.source=b;_geo.geotoolkit.map.layers.Wh.call(this,a);null!=a.layer&&this.Oc instanceof _geo.geotoolkit.map.Qa.Hx&&this.Oc.gL(a.layer)}var a=_geo.geotoolkit.util.zf.Za().Tb("px"),g=_geo.geotoolkit.util.zf.Za().Tb("metre");_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.layers.ArcGISFeature");b.prototype.oRa=function(){return this.Oc.oRa()};b.prototype.ka=function(){var a=_geo.geotoolkit.map.layers.Wh.prototype.ka.call(this);a.requestresolution=
this.Oc.DWb();return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);0<a.requestresolution&&this.FHa(a.requestresolution);_geo.geotoolkit.map.layers.Wh.prototype.ja.call(this,a);return this};b.prototype.gL=function(a){null!=this.Oc&&this.Oc.gL(a);return this};b.prototype.TP=function(){return null!=this.Oc?this.Oc.TP():null};b.prototype.kC=function(b){_geo.geotoolkit.map.layers.Wh.prototype.kC.call(this,b);if(null!=this.Oc){var e=this;this.Oc.LFa().then(function(b){if(null!=
b){1===e.Uy&&(e.Uy=b.Irb());var d=new _geo.geotoolkit.map.Wa.filters.dYa(b.Pka());e.la.annotations.filter.push(d);b=b.gtb();null==e.rca&&null!=b&&(e.rca=new _geo.geotoolkit.scene.filters.Vz({minscale:g.convert(b[0],a),minscaleinclusive:!1,maxscale:g.convert(b[1],a),maxscaleinclusive:!1}))}})}return this};b.prototype.u$=function(b,e){var c=[],f=[],k=this.TP();b.forEach(function(a){var b=a.tea().DFa;if(null==b)f.push(a);else if(null==k||-1!==k.indexOf(b))c[b]=c[b]||[],c[b].push(a)});c=c.reverse();0<
f.length&&c.push(f);var h=a.convert(e.Ra().Ab(),g);c.forEach(function(a){if(0!==a.length){var b=a[0].tea(),c=(b=a!==f?this.Oc.AEa(b.DFa):null)?b.gtb():null;null!=c&&(null!=c[0]&&c[0]>h||null!=c[1]&&c[1]<h)||(b=b?b.Irb():1,null!=e.Lk&&(e.Lk().globalAlpha=this.Uy*b),_geo.geotoolkit.map.layers.Wh.prototype.u$.call(this,a,e),_geo.geotoolkit.map.layers.Wh.prototype.fKc.call(this,e))}}.bind(this))};b.prototype.hQ=function(a){var b=this.Hf();b instanceof _geo.geotoolkit.map.Qa.Hx?b.hQ(a):a(Error("ArcGISFeature source should be used to query a legend"));
return this};return b}();_geo.geotoolkit.map.layers.eH=function(){function b(a){a=a||{};a.source=a.source||a.sources||new _geo.geotoolkit.map.Qa.eH;_geo.geotoolkit.map.layers.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.layers.GeoJSON");b.prototype.XHc=function(a){this.Oc.Iua(a);return this};return b}();
_geo.geotoolkit.map.layers.xX=function(){function b(a){a=a||{};a.source=a.source||a.sources||new _geo.geotoolkit.map.Qa.xX;_geo.geotoolkit.map.layers.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.layers.KML");return b}();
_geo.geotoolkit.map.layers.QN=function(){function b(a){a=_geo.geotoolkit.Ca(a,{source:a&&(a.source||a.sources)||new _geo.geotoolkit.map.Qa.QN,system:_geo.geotoolkit.map.Mw.cB,latitudefield:null,longitudefield:null},!0);_geo.geotoolkit.map.layers.Wh.call(this,a);null!=a.latitudefield&&this.Oc.Axb(a.latitudefield);null!=a.longitudefield&&this.Oc.Jxb(a.longitudefield)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.layers.CSV");b.prototype.ka=function(){var a=
_geo.geotoolkit.map.layers.Wh.prototype.ka.call(this);a.latitudefield=this.Oc instanceof _geo.geotoolkit.map.Qa.QN?this.Oc.sVb():null;a.longitudefield=this.Oc instanceof _geo.geotoolkit.map.Qa.QN?this.Oc.FVb():null;return a};b.prototype.ja=function(a){if(null==a)return this;a=_geo.geotoolkit.rc(a);this.Oc instanceof _geo.geotoolkit.map.Qa.QN&&(null!=a.latitudefield&&this.Oc.Axb(a.latitudefield),null!=a.longitudefield&&this.Oc.Jxb(a.longitudefield));_geo.geotoolkit.map.layers.Wh.prototype.ja.call(this,
a);return this};return b}();_geo.geotoolkit.map.layers.J0=function(){function b(a){a=a||{};a.system=a.system||_geo.geotoolkit.map.Mw.cB;a.source=a.source||a.sources||new _geo.geotoolkit.map.Qa.J0;_geo.geotoolkit.map.layers.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.layers.GeoRSS");return b}();
_geo.geotoolkit.map.layers.zq=function(){function b(a){a=a||{};a.source=a.source||a.sources||new _geo.geotoolkit.map.Qa.zq;_geo.geotoolkit.map.layers.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.layers.Stream");return b}();
_geo.geotoolkit.map.layers.wC=function(){function b(a){a=_geo.geotoolkit.Ca(a,{source:a&&(a.source||a.sources)||new _geo.geotoolkit.map.Qa.wC},!0);null!=a.key&&a.source.V3b(a.key);null!=a.culture&&a.source.w2b(a.culture);null!=a.centerpoint&&a.source.oab(a.centerpoint);null!=a.imageryset&&a.source.D3b(a.imageryset);_geo.geotoolkit.map.layers.Dk.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Dk);_geo.geotoolkit.da(b,"geotoolkit.map.layers.Bing");b.prototype.Qh=function(a){var b=this.Nb(!0),
d=a.$e();this.Oc.Ve(b,this);var b=a.Ra(),e=b.transform(this.xa());a.save();a.kc(_geo.geotoolkit.util.Ga.N0);var c=this.Oc.PM(),c={width:e.aa()/c.aa(),height:e.ba()/c.ba()},d={wD:Math.floor((d.sa()-e.sa())/c.width),cC:Math.ceil((d.za()-e.sa())/c.width),RE:Math.floor((d.qa()-e.qa())/c.height),PE:Math.ceil((d.wa()-e.qa())/c.height)},f=e.sa()+d.wD*c.width,e=e.qa()+d.RE*c.height,k=this.Oc.AA();null!=a.Lk&&1!==this.Uy&&(a.Lk().globalAlpha=this.Uy);for(var h in k)k[h]instanceof _geo.geotoolkit.scene.shapes.Image&&
this.nwb(k[h],a,d,f,e,c);a.kc(b);a.restore()};return b}();
_geo.geotoolkit.map.layers.yF=function(){function b(a){a=a||{};a.source=a.source||a.sources||new _geo.geotoolkit.map.Qa.yF(a);a.converters=a.converters||null;this.Nra=function(a,b,e){this.iZ=null;this.ma(e)}.bind(this);_geo.geotoolkit.map.layers.Wh.call(this,a)}_geo.geotoolkit.fa(b,_geo.geotoolkit.map.layers.Wh);_geo.geotoolkit.da(b,"geotoolkit.map.layers.VectorTile");b.prototype.xA=function(a){var b=this.getParent();if(!b)return _geo.geotoolkit.util.Iterator.Zm([]);var d=null;a instanceof _geo.geotoolkit.map.util.xha&&
(d=a.yd(),a=a.getFilter());b=null!=d?d:b.xa();return this.Oc.AA(b,a)};b.prototype.kC=function(a){if(this.Oc===a)return this;null!=this.Oc&&this.Oc.hb(_geo.geotoolkit.map.Qa.$.RX,this.Nra);null!=a&&a.kb(_geo.geotoolkit.map.Qa.$.RX,this.Nra);_geo.geotoolkit.map.layers.Wh.prototype.kC.call(this,a);return this};b.prototype.LTb=function(a){a=_geo.geotoolkit.map.layers.Wh.prototype.LTb.call(this,a);return null!=a?(a.Ob().Ka(!1),a):null};return b}();
_geo.geotoolkit.map.ia.K8b=function(){function b(a){this.HY=null;_geo.geotoolkit.controls.ia.Selection.call(this,a);this.h5b(_geo.geotoolkit.controls.ia.er.pWa);this.addListener(_geo.geotoolkit.controls.ia.Soa.$.nma,function(a,b){var e=b.getSelection();if(null!=e){for(var c=null,f=null,k=0;k<=e.length;k++)e[k]instanceof _geo.geotoolkit.map.Wa.$G?c=e[k]:e[k]instanceof _geo.geotoolkit.map.layers.kba&&(f=e[k]);if(null!=f){e=!1;null==c?null!=this.HY&&(this.HY.JW(!1),this.HY=null,e=!0):c.wrb()?(c.JW(!1),
c===this.HY&&(this.HY=null,e=!0)):c.getParent()?c.JW(!0):(null!=this.HY&&this.HY.JW(!1),c.JW(!0),this.HY=c,e=!0);if(null==this.HY)f.NNc(null);else{c=[this.HY];for(k=0;k<c.length;++k)c[k].wrb()&&c.push.apply(c,c[k].Ji());c.reverse();f.NNc(c)}e&&f.ma()}}}.bind(this));this.yb("aggregation-selection")}_geo.geotoolkit.fa(b,_geo.geotoolkit.controls.ia.Selection);_geo.geotoolkit.da(b,"geotoolkit.map.tools.AggregationSelection");b.prototype.cc=function(a){_geo.geotoolkit.controls.ia.Selection.cc.call(this,
a);a||null==this.HY||(this.HY.JW(!1),this.HY=null);return this};return b}();
_geo.geotoolkit.map.util.oF=function(){function b(a,b,c){if(!(0>b))for(var f=0;f<a.length;++f){if(b<a[f].length){a.splice(f,1,a[f].substr(0,b),c,a[f].substr(b+c.length));break}b-=a[f].length}}function a(){}var g={};g[_geo.geotoolkit.map.Wa.$G.getClassName()]=0;g[_geo.geotoolkit.map.Wa.na.getClassName()]=1;g[_geo.geotoolkit.map.Wa.jO.getClassName()]=1;g[_geo.geotoolkit.map.Wa.ou.getClassName()]=2;g[_geo.geotoolkit.map.Wa.iO.getClassName()]=2;g[_geo.geotoolkit.map.Wa.Fc.getClassName()]=3;g[_geo.geotoolkit.map.Wa.ZQ.getClassName()]=
3;_geo.geotoolkit.da(a,"geotoolkit.map.util.FeatureUtil");a.Zuc=function(a,b,c){Array.isArray(a[b])||(a[b]=null==a[b]?[]:[a[b]]);a=a[b];for(b=0;b<a.length;++b)if(a[b]instanceof c)return a[b];a.push(new c);return a[a.length-1]};a.quc=function(a,b){return g[a.getClassName()]-g[b.getClassName()]};a.gzb=function(b){var e,c=0;if(Array.isArray(b))for(e=0;e<b.length;++e)c+=a.gzb(b[e]);else{var f=b.x,g=b.y;b=b.clip;if(Array.isArray(b))for(e=0;e<b.length;++e)c+=a.gzb(b[e]);if(Array.isArray(f))for(e=0;e<f.length;++e)c+=
f[e]+g[e];else c+=f+g}return c};a.nqb=function(b,e){var c;if(Array.isArray(b)){var f=b.length;if(!Array.isArray(e)||e.length!==f)return!1;for(c=0;c<f;++c)if(!a.nqb(b[c],e[c]))return!1;return!0}if(Array.isArray(e))return!1;c=Array.isArray(b.x);f=Array.isArray(e.x);if(c!==f)return!1;var f=Array.isArray(b.y),g=Array.isArray(e.y);if(f!==g)return!1;var g=null!=b.clip,h=null!=e.clip;if(g!==h)return!1;if(c)for(c=0;c<b.x.length;++c){if(b.x[c]!==e.x[c])return!1}else if(b.x!==e.x)return!1;if(f)for(c=0;c<b.y.length;++c){if(b.y[c]!==
e.y[c])return!1}else if(b.y!==e.y)return!1;return g?a.nqb(b.clip,e.clip):!0};a.pSb=function(b,e){if(!Array.isArray(e)){var c=b.getAttributes(),f=e.getAttributes(),g=b.yd(),h=e.yd();return JSON.stringify(c)===JSON.stringify(f)&&a.nqb(g,h)}for(c=0;c<e.length;++c)if(a.pSb(b,e[c]))return!0;return!1};a.C_b=function(a){var b=[];if(null==a)return b;for(var c=Object.keys(a),f=0;f<c.length;++f){var g=c[f];"settings"!==g&&"connector"!==g&&null!=a[g]&&b.push(g)}return b};a.GPa=function(a,b){var c=[],f;for(f in b)c.push(f+
"="+b[f]);if(0===c.length)return a;f=0<=a.indexOf("?")?a+"&":a+"?";return f+c.join("&")};a.vAc=function(a,e){for(var c=[a],f=0;f<e.length;++f)b(c,a.indexOf(e[f]),e[f]);return c.filter(function(a){return""!==a})};a.XCa=function(a,b,c,f,g){a=a.tea();a.PRc&&a.ORc||(c.jc(f),a.PRc=c.aa()/2,a.ORc=c.ba()/2);a.Lwa&&a.Kwa||(a.Lwa=a.PRc*g.width,a.Kwa=a.ORc*g.height);f=c.uA()-a.Lwa;c=c.ny()-a.Kwa;return b.intersects(f,c,2*a.Lwa,2*a.Kwa)};return a}();
_geo.geotoolkit.map.util.Gz=function(){function b(){}function a(a){this.b3c=null!=a?a:!0;this.VL=[];this.gd=[]}var g,d,e,c,f=_geo.geotoolkit.util.zf.Za().Tb("pt"),k=new _geo.geotoolkit.util.rb(0,0,0,0),h=new _geo.geotoolkit.util.na;a.prototype.qob=function(a,b){if(this.b3c)if("string"===typeof b){var c=b.substr(-2),d=(0,window.parseFloat)(b);b="pt"===c?f.convert(d,"px"):d}else b=f.convert(b,"px");for(c=0;c<this.VL.length;++c)if(a<this.VL[c]){this.VL.splice(c,0,a);this.gd.splice(c,0,b);return}this.VL.push(a);
this.gd.push(b)};a.prototype.getValue=function(a){if(1>=this.VL.length||this.VL[0]>=a)return this.gd[0]||0;for(var b=1;b<this.VL.length;++b)if(this.VL[b]>=a)return a=(a-this.VL[b-1])/(this.VL[b]-this.VL[b-1]),this.gd[b-1]+a*(this.gd[b]-this.gd[b-1]);return this.gd[this.gd.length-1]};a.prototype.re=function(){return 0<this.VL.length};_geo.geotoolkit.da(b,"geotoolkit.map.util.ArcGIS");b.parse=function(a,c,d){var e=a.drawingInfo||{},e=e.renderer,f={renderer:e,type:b.K_b(a.geometryType)};if(!e)return f;
var g=b.yld(e);switch(e.type){case "simple":f.symbol={bp:g,g3:b.wma(e.symbol,c,d)};break;case "uniqueValue":var h=e.uniqueValueInfos;for(a=0;a<h.length;a++)f[h[a].value]={bp:g,g3:b.wma(h[a].symbol,c,d)};null!=e.defaultSymbol&&(f.yPa={bp:g,label:e.defaultLabel,g3:b.wma(e.defaultSymbol,c,d)});break;case "classBreaks":f.Qob=[];f.ipb={};h=e.classBreakInfos;for(a=0;a<h.length;a++)f.Qob[a]={bp:g,label:h[a].label,g3:b.wma(h[a].symbol,c,d)},f.ipb[a]={xh:h[a].classMinValue,fi:h[a].classMaxValue};null!=e.defaultSymbol&&
(f.yPa={bp:g,label:e.defaultLabel,g3:b.wma(e.defaultSymbol,c,d)});break;case "vectorField":f=b.Dld(e,f,g);break;default:_geo.geotoolkit.warn("This renderer type is not supported!")}return f};b.wma=function(a,c,e){if(null==a)return null;c=b.CJc(a,c);switch(a.type){case "esriSMS":null==d&&(d={esriSMSSquare:_geo.geotoolkit.scene.shapes.hc.Zoa,esriSMSCircle:_geo.geotoolkit.scene.shapes.hc.Hz,esriSMSCross:_geo.geotoolkit.scene.shapes.hc.BWa,esriSMSDiamond:_geo.geotoolkit.scene.shapes.hc.gJa,esriSMSTriangle:_geo.geotoolkit.scene.shapes.hc.gpa,
esriSMSX:_geo.geotoolkit.scene.shapes.hc.BWa,"default":_geo.geotoolkit.scene.shapes.hc.Hz});c=b.yvb(a.outline);var f=null!=c?2*c.aa():0;return new _geo.geotoolkit.map.Wa.Ff.na({shape:new _geo.geotoolkit.scene.shapes.Symbol({painter:null!=d[a.style]?d[a.style]:d["default"],width:a.size+f,height:a.size+f,sizeisindevicespace:!0,ax:a.xoffset,ay:a.yoffset,fillstyle:b.Ph(a.color),linestyle:c}),textshape:e});case "esriPMS":return new _geo.geotoolkit.map.Wa.Ff.na({shape:new _geo.geotoolkit.scene.shapes.Image({ax:a.xoffset,
ay:a.yoffset,width:a.width,height:a.height,alignment:_geo.geotoolkit.util.Da.lb,ispointingup:!0,sizeisindevicespace:!0,url:c}),textshape:e});case "esriSFS":return new _geo.geotoolkit.map.Wa.Ff.Fc({shape:new _geo.geotoolkit.scene.shapes.Fc({fillstyle:b.rld(a),linestyle:b.yvb(a.outline)}),textshape:e});case "esriPFS":return new _geo.geotoolkit.map.Wa.Ff.Fc({shape:new _geo.geotoolkit.scene.shapes.Fc({fillstyle:new _geo.geotoolkit.attributes.Fa({pattern:new _geo.geotoolkit.attributes.vL({url:c})}),linestyle:b.yvb(a.outline)}),
textshape:e});case "esriSLS":return new _geo.geotoolkit.map.Wa.Ff.ou({shape:new _geo.geotoolkit.scene.shapes.Il({linestyle:b.yvb(a)}),textshape:e})}return null};b.CJc=function(a,b){if(null!=a.imageData){var c=a.contentType||"image/png";return"data:"+c+";base64,"+a.imageData}return null!=a.url?b+a.url:null};b.Ph=function(a){return Array.isArray(a)?new _geo.geotoolkit.util.rb(a[0],a[1],a[2],a[3]):a};b.yvb=function(a){if(null==a)return null;null==g&&(g={esriSLSDash:_geo.geotoolkit.attributes.Aa.qH.vBb,
esriSLSDashDot:_geo.geotoolkit.attributes.Aa.qH.wBb,esriSLSDashDotDot:_geo.geotoolkit.attributes.Aa.qH.xBb,esriSLSDot:_geo.geotoolkit.attributes.Aa.qH.jJa,esriSLSSolid:_geo.geotoolkit.attributes.Aa.qH.Ry,"default":_geo.geotoolkit.attributes.Aa.qH.Ry});return new _geo.geotoolkit.attributes.Aa({color:b.Ph(a.color),width:null!=a.width?a.width:1,style:null!=g[a.style]?g[a.style]:g["default"]})};b.GI=function(a){if(null==a)return null;var b=null!=a.size?a.size+"pt ":"12px ",c=null!=a.family?a.family:"sans-serif",
d=null!=a.style?a.style+" ":"";a=null!=a.weight?a.weight+" ":"";return a+d+b+c};b.uld=function(a){if(null==a)return null;null==e&&(e={esriSFSSolid:null,esriSFSNull:new _geo.geotoolkit.attributes.vL({src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+ICA8cmVjdCB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIGZpbGw9J25vbmUnLz48L3N2Zz4="}),esriSFSHollow:new _geo.geotoolkit.attributes.vL({src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+ICA8cmVjdCB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIGZpbGw9J25vbmUnLz48L3N2Zz4="}),
esriSFSHorizontal:new _geo.geotoolkit.attributes.vL({src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+ICA8cmVjdCB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIGZpbGw9J25vbmUnIC8+ICA8cmVjdCB4PScwJyB5PScwJyB3aWR0aD0nMTAnIGhlaWdodD0nMScgZmlsbD0nYmxhY2snIC8+PC9zdmc+"}),esriSFSVertical:new _geo.geotoolkit.attributes.vL({src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+ICA8cmVjdCB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIGZpbGw9J25vbmUnIC8+ICA8cmVjdCB4PScwJyB5PScwJyB3aWR0aD0nMScgaGVpZ2h0PScxMCcgZmlsbD0nYmxhY2snIC8+PC9zdmc+"}),
esriSFSForwardDiagonal:new _geo.geotoolkit.attributes.vL({src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+ICA8cmVjdCB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIGZpbGw9J25vbmUnLz4gIDxwYXRoIGQ9J00wLDAgbDEwLDEwJyBzdHJva2U9J2JsYWNrJyBzdHJva2Utd2lkdGg9JzEnLz48L3N2Zz4="}),esriSFSBackwardDiagonal:new _geo.geotoolkit.attributes.vL({src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+ICA8cmVjdCB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIGZpbGw9J25vbmUnLz4gIDxwYXRoIGQ9J00tMSwxIGwyLC0yICAgICAgICAgICBNMCwxMCBsMTAsLTEwICAgICAgICAgICBNOSwxMSBsMiwtMicgc3Ryb2tlPSdibGFjaycgc3Ryb2tlLXdpZHRoPScxJy8+PC9zdmc+"}),
esriSFSCross:new _geo.geotoolkit.attributes.vL({src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+ICA8cmVjdCB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIGZpbGw9J25vbmUnLz4gIDxwYXRoIGQ9J001LDAgbDAsMTAgICAgICAgICAgIE0wLDUgbDEwLDAnIHN0cm9rZT0nYmxhY2snIHN0cm9rZS13aWR0aD0nMScvPjwvc3ZnPg=="}),esriSFSDiagonalCross:new _geo.geotoolkit.attributes.vL({src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+ICA8cmVjdCB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIGZpbGw9J25vbmUnLz4gIDxwYXRoIGQ9J00wLDAgbDEwLDEwICAgICAgICAgICBNMTAsMCBsLTEwLDEwJyBzdHJva2U9J2JsYWNrJyBzdHJva2Utd2lkdGg9JzEnLz48L3N2Zz4="})});
return e[a]};b.rld=function(a){var c=b.uld(a.style);a=b.Ph(a.color);return null!=c?new _geo.geotoolkit.attributes.Fa({color:k,pattern:c,foreground:a}):new _geo.geotoolkit.attributes.Fa({color:a})};b.vma=function(a,b){var c=[];if(!Array.isArray(a))return h.bb(a.x,a.y),b&&b.transform(h,h),[{x:h.x,y:h.y}];for(var d=0<a.length&&Array.isArray(a[0][0]),e=0;e<a.length;e++)if(!d)h.bb(a[e][0],a[e][1]),b&&b.transform(h,h),c.push({x:h.x,y:h.y});else if(Array.isArray(a[e])){for(var f={x:[],y:[]},g=0;g<a[e].length;g++)h.bb(a[e][g][0],
a[e][g][1]),b&&b.transform(h,h),f.x.push(h.x),f.y.push(h.y);c.push(f)}return c};b.zJc=function(a){return Array.isArray(a)&&0!==a.length?b.Bld(a[0].symbol):null};b.Bld=function(a){if(null==a)return null;var c=b.Ph(a.backgroundColor),d=b.Ph(a.borderLineColor),e=null!=a.borderLineSize?a.borderLineSize:1,f=b.vld(a.labelPlacement),g=null==a.haloColor?null:new _geo.geotoolkit.attributes.Aa({color:b.Ph(a.haloColor),size:null==a.haloSize?1:a.haloSize/.75});return new _geo.geotoolkit.scene.shapes.Text({textstyle:new _geo.geotoolkit.attributes.eb({color:b.Ph(a.color),
font:b.GI(a.font),alignment:"center",outline:g}),ispointingup:!0,fillstyle:c?new _geo.geotoolkit.attributes.Fa(c):null,linestyle:d?new _geo.geotoolkit.attributes.Aa(d,e):null,alignment:f})};b.vld=function(a){if("string"!==typeof a)return _geo.geotoolkit.util.Da.lb;var b=-1<a.indexOf("Left"),c=!b&&-1<a.indexOf("Right");return-1<a.indexOf("Above")?b&&_geo.geotoolkit.util.Da.MFb||c&&_geo.geotoolkit.util.Da.xic||_geo.geotoolkit.util.Da.Og:-1<a.indexOf("Below")?b&&_geo.geotoolkit.util.Da.r9b||c&&_geo.geotoolkit.util.Da.s9b||
_geo.geotoolkit.util.Da.Ei:b&&_geo.geotoolkit.util.Da.We||c&&_geo.geotoolkit.util.Da.Ng||_geo.geotoolkit.util.Da.lb};b.Yta=function(a,c){if(!c)return null;var d,e=c.renderer;switch(e.type){case "simple":return b.BRa(c.symbol,a);case "uniqueValue":for(var f=1;e.hasOwnProperty("field"+f);){d=a[e["field"+f]];if(null!=c[d])return b.BRa(c[d],a);f++}break;case "classBreaks":d=+a[e.field];for(f=0;f<c.Qob.length;f++){var g=c.ipb[f].xh||(0<f?c.ipb[f-1].fi:e.minValue);if(d>=g&&d<=c.ipb[f].fi)return b.BRa(c.Qob[f],
a)}break;case "vectorField":f=c.rga;d=e.attributeField;if(!a.hasOwnProperty(d))for(g in d=d.toLowerCase(),a)if(g.toLowerCase()===d){e.attributeField=g;break}d=a[e.attributeField];if(!f||null==d)break;for(e=1;e<f.length-1;++e)if(d<f[e])return b.BRa(c.x5[e-1],a);return b.BRa(c.x5[c.x5.length-1],a)}return b.BRa(c.yPa,a)};b.K_b=function(a){switch(a){case "esriGeometryPoint":return[_geo.geotoolkit.map.Wa.na,_geo.geotoolkit.map.Wa.jO,null];case "esriGeometryMultipoint":return[_geo.geotoolkit.map.Wa.na,
_geo.geotoolkit.map.Wa.jO,"points"];case "esriGeometryPath":case "esriGeometryLine":case "esriGeometryPolyline":return[_geo.geotoolkit.map.Wa.ou,_geo.geotoolkit.map.Wa.iO,"paths"];default:return[_geo.geotoolkit.map.Wa.Fc,_geo.geotoolkit.map.Wa.ZQ,"rings"]}};b.warn=function(a){if(null!=a){var b=a.code,c=a.details;a=a.message;_geo.geotoolkit.warn("ArcGIS layer returned error ("+b+"):\n"+(Array.isArray(c)&&0<c.length?c.join("\n"):a))}};b.Dld=function(a,c,d){var e=new _geo.geotoolkit.attributes.Aa("black",
1.5),f=b.JJc("M15 32 15 16 10 23 16 3 22 23 17 16 17 32"),g;switch(a.style.toLowerCase()){case "wind_speed":g=b.bad(.5,.3,e);a=[g,g];f="M25 0 25 40 M25 35 17.5 37.5;M25 0 25 40 10 45 25 40;M25 0 25 40 10 45 25 40 M25 35 17.5 37.5;M25 0 25 40 10 45 25 40 M25 35 10 40;M25 0 25 40 10 45 25 40 M25 35 10 40 25 35 M25 30 17.5 32.5;M25 0 25 40 10 45 25 40 M25 35 10 40 25 35 M25 30 10 35;M25 0 25 40 10 45 25 40 M25 35 10 40 25 35 M25 30 10 35 25 30 M25 25 17.5 27.5;M25 0 25 40 10 45 25 40 M25 35 10 40 25 35 M25 30 10 35 25 30 M25 25 10 30;M25 0 25 40 10 45 25 40 M25 35 10 40 25 35 M25 30 10 35 25 30 M25 25 10 30 25 25 M25 20 17.5 22.5;M25 0 25 40 10 40 25 35;M25 0 25 40 10 40 25 35 M25 30 17.5 32.5;M25 0 25 40 10 40 25 35 M25 30 10 35;M25 0 25 40 10 40 25 35 M25 30 10 35 25 30 M25 25 17.5 27.5;M25 0 25 40 10 40 25 35 M25 30 10 35 25 30 M25 25 10 30;M25 0 25 40 10 40 25 35 M25 30 10 35 25 30 M25 25 10 30 25 25 M25 20 17.5 22.5;M25 0 25 40 10 40 25 35 M25 30 10 35 25 30 M25 25 10 30 25 25 M25 20 10 25;M25 0 25 40 10 40 25 35 M25 30 10 35 25 30 M25 25 10 30 25 25 M25 20 10 25 25 20 M25 15 17.5 17.5;M25 0 25 40 10 40 25 35 M25 30 10 35 25 30 M25 25 10 30 25 25 M25 20 10 25 25 20 M25 15 10 20;M25 0 25 40 10 40 25 35 M25 30 10 35 25 30 M25 25 10 30 25 25 M25 20 10 25 25 20 M25 15 10 20 25 15 M25 10 17.5 12.5;M25 0 25 40 10 40 25 35 10 35 25 30;M25 0 25 40 10 40 25 35 10 35 25 30 M25 25 17.5 27.5;M25 0 25 40 10 40 25 35 10 35 25 30 M25 25 10 30;M25 0 25 40 10 40 25 35 10 35 25 30 M25 25 10 30 M25 25 M25 20 17.5 22.5;M25 0 25 40 10 40 25 35 10 35 25 30 M25 25 10 30 M25 25 M25 20 10 25;M25 0 25 40 10 40 25 35 10 35 25 30 M25 25 10 30 M25 25 M25 20 10 25 M25 20 M25 15 17.5 17.5;M25 0 25 40 10 40 25 35 10 35 25 30 M25 25 10 30 M25 25 M25 20 10 25 M25 20 M25 15 10 20;M25 0 25 40 10 40 25 35 10 35 25 30 M25 25 10 30 M25 25 M25 20 10 25 M25 20 M25 15 10 20 M25 15 M25 10 17.5 12.5;M25 0 25 40 10 40 25 35 10 35 25 30 M25 25 10 30 M25 25 M25 20 10 25 M25 20 M25 15 10 20 M25 15 M25 10 10 15;M25 0 25 40 10 40 25 35 10 35 25 30 M25 25 10 30 M25 25 M25 20 10 25 M25 20 M25 15 10 20 M25 15 M25 10 10 15 M25 10 M25 5 17.5 7.5".split(";");
c.rga=[0,5];for(var h=0,k=10;150>=k;h++,k+=5)c.rga.push(k),a.push(b.JJc(f[h]).ua(e));c.x5=b.tka(a,d);break;case "single_arrow":g=f.ta("#005ce6");break;case "classified_arrow":g=f.ta("#38a800");c.rga=[0,1E-6,3.5,7,10.5,14];c.x5=b.tka(f,d,["#38a800","#8b3500","#ffff00","#ff8000","#ff0000"]);break;case "beaufort_m":g=f.ta("#d62f27");c.rga=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];c.x5=b.tka(f,d,"#4575b5 #6589b8 #849eba #a2b4bd #c0ccbe #dee3bf #ffffbf #ffdca1 #fab984 #f59869 #ed7551 #e81515".split(" "));
break;case "beaufort_km":g=f.ta("#d62f27");c.rga=[0,.72,6.48,11.88,19.44,30.6,39.6,50.76,61.92,74.88,87.84,102.96,117.72];c.x5=b.tka(f,d,"#4575b5 #6589b8 #849eba #a2b4bd #c0ccbe #dee3bf #ffffbf #ffdca1 #fab984 #f59869 #ed7551 #e81515".split(" "));break;case "beaufort_ft":g=f.ta("#d62f27");c.rga=[0,.656168,5.905512,10.826772,17.716536,27.88714,36.08924,46.259844,56.430448,68.241472,80.052496,93.832024,107.283468];c.x5=b.tka(f,d,"#4575b5 #6589b8 #849eba #a2b4bd #c0ccbe #dee3bf #ffffbf #ffdca1 #fab984 #f59869 #ed7551 #e81515".split(" "));
break;case "beaufort_mi":g=f.ta("#d62f27");c.rga=[0,.447388,4.026492,7.381902,12.079476,19.01399,24.60634,31.540854,38.475368,46.528352,54.581336,63.976484,73.147938];c.x5=b.tka(f,d,"#4575b5 #6589b8 #849eba #a2b4bd #c0ccbe #dee3bf #ffffbf #ffdca1 #fab984 #f59869 #ed7551 #e81515".split(" "));break;case "beaufort_kn":g=f.ta("#d62f27");c.rga=[0,1,3,6,10,16,21,27,33,40,47,55,63];c.x5=b.tka(f,d,"#2892c7 #59a2ba #81b3ab #a0c29b #bfd48a #dae677 #fafa64 #fcd553 #fcb366 #fa8d34 #f76e2a #f0471d".split(" "));
break;case "ocean_current_m":g=f.ta("#b1b1b1");c.rga=[0,.5,1,1.5,2];c.x5=b.tka(f,d,["#4e1a99","#b31b1a","#ca801a","#b1b1b1"]);break;case "ocean_current_kn":g=f.ta("#b1b1b1");c.rga=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];c.x5=b.tka(f,d,"#000000 #002564 #4e1a99 #970064 #b31b1a #b14e1a #ca801a #b1b334 #b1b1b1".split(" "));break;case "simple_scalar":var v=(new _geo.geotoolkit.scene.shapes.Path({fillstyle:"black",linestyle:null})).moveTo(.4,.4).lineTo(.4,.6).lineTo(.6,.6).lineTo(.6,.4);g=function(a,b,c){c.ua(e);
_geo.geotoolkit.scene.shapes.hc.Hz.call(this,a,b,c);v.render(c)};break}c.yPa=new _geo.geotoolkit.map.Wa.Ff.na({shape:new _geo.geotoolkit.scene.shapes.Symbol({width:40,height:40,sizeisindevicespace:!0,painter:g})});return c};b.bad=function(a,b,c){var d=new _geo.geotoolkit.util.Rect(.5-a,.5-a,.5+a,.5+a),e=new _geo.geotoolkit.util.Rect(.5-b,.5-b,.5+b,.5+b);return function(a,b,f){f.ua(c);_geo.geotoolkit.scene.shapes.hc.Hz.call(this,a,d,f);_geo.geotoolkit.scene.shapes.hc.Hz.call(this,a,e,f)}};b.JJc=function(a){var c=
new _geo.geotoolkit.scene.shapes.Path({linestyle:null});a=a.split(" ");for(var d=0;d<a.length;)switch(a[d][0]){case "M":c.moveTo(+a[d++].substr(1),+a[d++]);break;case "L":c.lineTo(+a[d++].substr(1),+a[d++]);break;default:c.lineTo(+a[d++],+a[d++]);break}return b.fkd(c)};b.tka=function(a,b,c){var d=[],e=new _geo.geotoolkit.map.Wa.Nn.na,f=Array.isArray(a),g=Array.isArray(c),h,k=f?a.length:c.length,w,x;for(h=0;h<k;++h)x=g?c[h]:c,w=f?a[h]:a.clone(),"function"!==typeof w&&null!=x&&w.ta(x).ua(x),d.push({bp:b,
g3:new _geo.geotoolkit.map.Wa.Ff.na({shape:new _geo.geotoolkit.scene.shapes.Symbol({sizeisindevicespace:!0,painter:w}),geometrytoshape:e})});return d};b.fkd=function(a){var b=a.ga(),c=Math.max(b.aa(),b.ba()),d=c/2,e=d-b.Pc(),b=d-b.Qc(),c=1/c;a.Td(new _geo.geotoolkit.util.Ga(c,0,0,c,e*c,b*c));return a};b.Eld=function(a){if(!a||!Array.isArray(a.visualVariables))return[];for(var c,d=[],e=0;e<a.visualVariables.length;++e){c=a.visualVariables[e];switch(c.type){case "colorInfo":c=b.kld(c);break;case "sizeInfo":c=
b.zld(c);break;case "transparencyInfo":c=b.Cld(c);break;case "rotationInfo":c.rotationExpression=c.valueExpression||c.field&&"["+c.field+"]";c=b.GJc(c);break;default:c=null}c&&d.push(c)}return d};b.Qqb=function(a,b,c,d){var e=0;if(null!=b){if(a.hasOwnProperty(b))e=+a[b];else{c=b.toLowerCase();for(var f in a)if(f.toLowerCase()===c){e=+a[f];break}}return d?e/+a[d]:e}if(null==c)return 0;e=c.KAd();for(f=0;f<e.length;++f)e[f].value=+a[e[f].name];e=c.Hh(e);return d?e/+a[d]:e};b.Cld=function(c){if(!Array.isArray(c.stops))return null;
var d=c.field,e=c.normalizationField,f=c.stops,g;if(!d&&(g=b.uvb(c.valueExpression),!g))return null;var h=new a(!1);for(c=0;c<f.length;++c)h.qob(f[c].value,1-f[c].transparency/100);return h.re()?function(a,c){var f=b.Qqb(a,d,g,e);c.HN=+h.getValue(f).toFixed(2)}:null};b.uvb=function(a){if(!a)return null;var b=[];a=a.replace(/\[[^\s]+]/g,function(a){a=a.substr(1,a.length-2);b.push(a);return a});if(0===b.length)return null;c=c||new _geo.geotoolkit.selection.mKa({});return c.parse(b.join(",")+" => "+
a)};b.zld=function(c){var d=new a,e=c.field,f=c.normalizationField,g=c.stops,h;if(!e&&(h=b.uvb(c.valueExpression),!h))return null;null!=c.minSize&&null!=c.minDataValue&&d.qob(c.minDataValue,c.minSize);null!=c.maxSize&&null!=c.maxDataValue&&d.qob(c.maxDataValue,c.maxSize);if(Array.isArray(g))for(c=0;c<g.length;++c)d.qob(g[c].value,g[c].size);return d.re()?function(a,c){var g=b.Qqb(a,e,h,f);c.size=d.getValue(g)}:null};b.kld=function(a){if(!Array.isArray(a.stops))return null;var c=[],d=[],e=a.field,
f=a.normalizationField,g=a.stops,h;if(!e&&(h=b.uvb(a.valueExpression),!h))return null;for(a=0;a<g.length;++a)d.push(g[a].value),c.push(b.Ph(g[a].color));var k=new _geo.geotoolkit.util.ym({values:d,colors:c});return function(a,c){var d=b.Qqb(a,e,h,f);c.color=k.ac(d)}};b.GJc=function(a){var c=a.rotationType,d=b.uvb(a.rotationExpression),e=null,f=a.normalizationField;if(!d)if("vectorField"===a.type)e="Direction";else return null;var g,h;c&&"arithmetic"===c.toLowerCase()?(g=1,h=-Math.PI/2):(g=-1,h=Math.PI);
var k=!0,v=2*Math.PI;return function(a,c){var l=b.Qqb(a,e,d,f);k&&(l<-v||l>v)&&(h=_geo.geotoolkit.util.Math.radToDeg(h),k=!1);c.angle=h+g*l;k&&(c.angle=_geo.geotoolkit.util.Math.radToDeg(c.angle));c.angle=1.8*Math.round(c.angle/1.8);c.angle=_geo.geotoolkit.util.Math.degToRad(c.angle)}};b.yld=function(a){var c=b.Eld(a);(a=b.GJc(a))&&c.push(a);return 0===c.length?null:function(a){for(var b={},d=0;d<c.length;++d)c[d](a,b);return b}};b.BRa=function(a,b){if(!a||!a.g3)return null;var c=a.g3,d=a.bp;if(null==
d)return c;a.ctc=a.ctc||[];for(var e=a.ctc,f=c.Ob(),d=d(b),g=0;g<e.length;++g)if(d.color===e[g].params.color&&d.HN===e[g].params.HN&&d.angle===e[g].params.angle&&d.size===e[g].params.size)return e[g].Ez;f=f.clone();g=f.Xa();null!=g&&(null!=d.color&&g.setColor(d.color),null!=d.HN&&g.setColor(_geo.geotoolkit.util.oi.yN(g.ac(),d.HN)));g=f.sb();null!=g&&(null!=d.color&&g.setColor(d.color),null!=d.HN&&g.setColor(_geo.geotoolkit.util.oi.yN(g.ac(),d.HN)));f instanceof _geo.geotoolkit.scene.shapes.Fn&&(null!=
d.size&&f.setSize(d.size,d.size),null!=d.angle&&(f.TI(!1),f.NW(d.angle)));null!=d.HN&&f instanceof _geo.geotoolkit.scene.shapes.Image&&f.gbb(d.HN);c=new _geo.geotoolkit.map.Wa.Ff.yT({shape:f,geometrytoshape:c.ila(),geometrytotext:c.OM(),textshape:c.en()});e.push({params:d,Ez:c});return c};b.sld=function(a,c){if(!a||a.error||!Array.isArray(a.layers))return null;for(var d=a.layers,e=[],f=0;f<d.length;++f){var g=[];d[f].legend=d[f].legend||[];for(var h=0;h<d[f].legend.length;h++){var k=d[f].legend[h];
g.push({label:k.label,image:b.CJc(k,c),width:k.width,height:k.height,values:k.values})}e.push({layerId:d[f].layerId,layerName:d[f].layerName,layerType:d[f].layerType,minScale:d[f].minScale,maxScale:d[f].maxScale,legend:g})}return e};b.wld=function(a,c){for(var d=a.displayFieldName,e=!a.hasOwnProperty("geometryType"),f=!e&&b.K_b(a.geometryType),g=[],h=0;h<a.features.length;h++){var k=a.features[h],v,w=k.geometry;if(w)if(e&&(f=b.K_b(k.geometryType)),w=b.vma(w[f[2]]||w),1<w.length)v=f[1];else if(1===
w.length)v=f[0],w=w[0];else continue;else w={x:window.NaN,y:window.NaN},v=_geo.geotoolkit.map.Wa.na;var x=k.attributes||{};x.layerId=k.hasOwnProperty("layerId")?k.layerId:c;g.push(new v({attributes:x,id:k.hasOwnProperty("value")?k.value:x[d],geometry:w}))}return g};b.lad=function(a){if(!a)return[];var c=a.renderer,d=[];switch(c.type){case "simple":d.push(b.g5a(a.symbol.g3,c.label));break;case "uniqueValue":for(var e=c.uniqueValueInfos||[],c=0;c<e.length;c++)d.push(b.g5a(a[e[c].value].g3,e[c].label));
break;case "classBreaks":e=a.Qob||[];for(c=0;c<e.length;c++)d.push(b.g5a(e[c].g3,e[c].label));break;case "vectorField":for(e=a.x5||[],c=0;c<e.length;c++)d.push(b.g5a(e[c].g3))}a.yPa&&d.push(b.g5a(a.yPa.g3,a.yPa.label));return d.filter(function(a){return null!=a})};b.g5a=function(a,b){if(!a)return null;var c=a.Ob(),d=20,e=20;if(c instanceof _geo.geotoolkit.scene.shapes.Image)return d=c.aa(),e=c.ba(),{width:d,height:e,label:b||"",image:c.ka().url};var f=new _geo.geotoolkit.util.Rect(0,0,d,e),g=new _geo.geotoolkit.renderer.canvas.Mr(d,
e),h=g.QEa();c instanceof _geo.geotoolkit.scene.shapes.Fn?c.ZB()?(c.yc(_geo.geotoolkit.scene.shapes.Fn.U8(f,c.tw())),c.render(h)):(d=c.aa(),e=c.ba(),d<=e?c.setSize(d*f.ba()/e,f.ba()):c.setSize(f.aa(),e*f.aa()/d),c.render(h),c.setSize(d,e)):(h.ua(c.Xa(),f),h.ta(c.sb(),f),c instanceof _geo.geotoolkit.scene.shapes.Il?h.xn([f.sa(),f.za()],[f.Qc(),f.Qc()]):h.Ik([f.sa(),f.sa(),f.za(),f.za()],[f.qa(),f.wa(),f.wa(),f.Qc()]));g.Lq();return{width:g.aa(),height:g.ba(),label:b||"",image:g.Kk().toDataURL()}};
return b}();_geo.geotoolkit.map.util.Geometry=function(){function b(){}_geo.geotoolkit.da(b,"geotoolkit.map.util.Geometry");b.zV=function(a){a.Wl||(a.Wl={});a.Wl.Iqb||(a.Wl.Iqb=Array.isArray(a.x)?_geo.geotoolkit.util.Ec.getBoundingBox(a.x,a.y):new _geo.geotoolkit.util.Rect(a.x,a.y,a.x,a.y));return a.Wl.Iqb};b.aHc=function(a){var b=0,d=a.x;a=a.y;for(var e=d.length-1,c=0;c<d.length;e=c++)b+=(d[c]-d[e])*(a[c]+a[e]);return 0<b};return b}();
_geo.geotoolkit.map.util.xha=function(){function b(a){var b={geometry:null,properties:null,name:null,filter:null},b=_geo.geotoolkit.Ca(a,b);this.ef=b.geometry;this.q2=b.properties;this.nd=b.name;this.sB=b.filter}_geo.geotoolkit.da(b,"geotoolkit.map.util.Query");b.prototype.Xq=function(a){this.ef=a;return this};b.prototype.ja=function(a){this.q2=a;return this};b.prototype.yb=function(a){this.nd=a;return this};b.prototype.getName=function(){return this.nd};b.prototype.yd=function(){return this.ef};
b.prototype.ka=function(){return this.q2};b.prototype.setFilter=function(a){this.sB=a;return this};b.prototype.getFilter=function(){return this.sB};return b}();
_geo.geotoolkit.map.util.hdc=function(){function b(a){a=_geo.geotoolkit.Ca(a,{x:20,y:10,width:160,height:40,textstyle:new _geo.geotoolkit.attributes.eb({color:"black",autosize:!0}),linestyle:new _geo.geotoolkit.attributes.Aa({color:"black",width:2}),alignment:_geo.geotoolkit.util.Da.Ij,textalign:_geo.geotoolkit.util.Da.lb,tickheight:.25,metric:!0,sizeisindevicespace:!0},!0);_geo.geotoolkit.scene.shapes.Fn.call(this,a);this.gY=a.x/a.width;this.hY=a.y/a.height;this.dnb=a.tickheight;a.metric?(this.hh=
g,this.Sca=[.2,1,5,10,20,50,100,200,500,1E3,2E3,5E3,1E4,2E4,5E4,1E5,2E5,5E5,1E6,2E6],this.Pi="< 1m;1 m;5 m;10 m;20 m;50 m;100 m;200 m;500 m;1 km;2 km;5 km;10 km;20 km;50 km;100 km;200 km;500 km;1000 km;2000 km".split(";")):(this.hh=d,this.Sca=[.2,1,5,20,50,100,200,500,1E3,2E3,5280,10560,26400,52800,105600,264E3,528E3,1056E3,264E4,528E4],this.Pi="< 1 ft;1 ft;5 ft;20 ft;50 ft;100 ft;200 ft;500 ft;1000 ft;2000 ft;1 mi;2 mi;5 mi;10 mi;20 mi;50 mi;100 mi;200 mi;500 mi;1000 mi".split(";"));this.SAa=null;
this.$mc=!1;this.Lb=new _geo.geotoolkit.scene.shapes.Text({textstyle:a.textstyle,sizeisindevicespace:!0,alignment:a.textalign});if(a=this.Xa())a.hHa(_geo.geotoolkit.attributes.Aa.dJ.OKa),a.Yd(!0)}var a=_geo.geotoolkit.util.zf.Za().Tb("px"),g=_geo.geotoolkit.util.zf.Za().Tb("metre"),d=_geo.geotoolkit.util.zf.Za().Tb("ft"),e=new _geo.geotoolkit.util.Rect;_geo.geotoolkit.fa(b,_geo.geotoolkit.scene.shapes.Fn);_geo.geotoolkit.da(b,"geotoolkit.map.util.MapScale");b.prototype.iga=function(a){for(var b=this.hh.convert(this.width/
a,g),d=1;b>this.Sca[d]&&d<this.Sca.length;)d++;this.SAa=g.convert(this.Sca[d-1]*a,this.hh);this.SAa=Math.min(this.SAa,this.width)/this.width;this.Lb.jc(this.Pi[d-1]);a=this.Xa()?this.Xa().aa():0;a=(a+1)/this.aa();e.setX(this.gY+a).setY(this.hY).qb(this.SAa-2*a).Db(1);a=_geo.geotoolkit.scene.shapes.Fn.U8(e,this.Lb.tw());this.Lb.yc(a);this.ma();return this};b.prototype.gIc=function(b){if(!this.$mc){var d=_geo.geotoolkit.scene.shapes.Fn.U8(b.Mc().ga(),this.tw());this.yc(d);this.$mc=!0}this.iga(b.FA().convert(b.Fta(!0),
a))};b.prototype.render=function(a){a=null!=this.mb()?a.qc(this.mb()):a;this.yk(a);var b=a.Ra(),d=this.T8(a.Ra());a.kc(d);a.ua(this.Xa());a.Pd(this.gY,this.hY,this.gY,this.hY+this.dnb);a.Pd(this.gY,this.hY+this.dnb,this.gY+this.SAa,this.hY+this.dnb);a.Pd(this.gY+this.SAa,this.hY,this.gY+this.SAa,this.hY+this.dnb);this.Lb.render(a);a.kc(b);this.hk(a)};return b}();
_geo.geotoolkit.map.util.eH=function(){function b(){}function a(a){return Math.round(100*a)/100}var g=new _geo.geotoolkit.util.na;_geo.geotoolkit.da(b,"geotoolkit.map.util.GeoJSON");b.parse=function(a,e,c,f){e||(e=new _geo.geotoolkit.map.Wa.Zq.M0("name"));f||(f=[0,1]);var g=[];Array.isArray(a)||(a=[a]);for(var h=0;h<a.length;++h)b.BJc(a[h],e,c,f,g);return g};b.BJc=function(a,e,c,f,g){if(null!=a.crs){var h=b.lld(a.crs,c);c=h.Kad;f=h.I$c||f}switch(a.type){case "Point":case "LineString":case "Polygon":case "MultiPoint":case "MultiLineString":case "MultiPolygon":case "GeometryCollection":b.wvb(a,
c,f,null,{},g);break;case "Feature":h=a.properties||{};e=e.EP(h)||a.id;b.wvb(a.geometry,c,f,e,h,g);break;case "FeatureCollection":for(a=a.features,h=0;h<a.length;++h)b.BJc(a[h],e,c,f,g)}};b.wvb=function(a,e,c,f,g,h){var l,n=null;if(!a)return _geo.geotoolkit.warn("GeoJSON: geometry cannot be null"),null;switch(a.type){case "Point":l=b.kva(a.coordinates,e,c);n=_geo.geotoolkit.map.Wa.na;break;case "LineString":l=b.iva(a.coordinates,e,c);n=_geo.geotoolkit.map.Wa.ou;break;case "Polygon":l=b.$9a(a.coordinates,
e,c);n=_geo.geotoolkit.map.Wa.Fc;break;case "MultiPoint":l=b.ROa(b.kva,a.coordinates,e,c);n=_geo.geotoolkit.map.Wa.jO;break;case "MultiLineString":l=b.ROa(b.iva,a.coordinates,e,c);n=_geo.geotoolkit.map.Wa.iO;break;case "MultiPolygon":l=b.ROa(b.$9a,a.coordinates,e,c);n=_geo.geotoolkit.map.Wa.ZQ;break;case "GeometryCollection":a=a.geometries;for(var p=JSON.stringify(g),r=0;r<a.length;++r)b.wvb(a[r],e,c,f,JSON.parse(p),h);break}return null!=n?(e=new n({id:f,geometry:l,attributes:g}),h&&h.push(e),e):
null};b.ROa=function(a,b,c,f){for(var g=[],h=0;h<b.length;h++)g.push(a(b[h],c,f));return g};b.$9a=function(a,e,c){var f=b.iva(a[0],e,c);if(1<a.length){var g=_geo.geotoolkit.map.util.Geometry.zV(f);f.clip=[g];for(g=1;g<a.length;++g)f.clip.push(b.iva(a[g],e,c))}return f};b.iva=function(a,b,c){for(var f=[],k=[],h=0;h<a.length;h++)g.bb(a[h][c[0]],a[h][c[1]]),b&&(g=b(g,g)),f.push(g.getX()),k.push(g.getY());return{x:f,y:k}};b.kva=function(a,b,c){g.bb(a[c[0]],a[c[1]]);b&&(g=b(g,g));return{x:g.getX(),y:g.getY()}};
b.lld=function(a,b){function c(a){var b=a.split(":");if(7===b.length){a=b[4];b=b[6];if("EPSG"===a)return+b;if("OGC"===a&&("CRS84"===b||"CRS83"===b||"CRS27"===b))return 4269}return null}var f=a.properties,g=null;switch(a.type){case "EPSG":g=+f.code;break;case "OGC":g=c(f.urn);break;case "name":g=c(f.name)}var h=_geo.geotoolkit.map.Nd.ue.lq(),l=null;switch(g){case 102100:case 3857:l=h.Lu(_geo.geotoolkit.map.Mw.wba);break;case 4326:case 4269:l=h.Lu(_geo.geotoolkit.map.Mw.cB)}return{Kad:null!=l?function(a,
c){var d=l.je(a.x,a.y,c);return null!=b?b(d):d}:b,I$c:a.coordinate_order||f.coordinate_order}};b.Vbb=function(a,e,c){function f(a){if(a instanceof _geo.geotoolkit.map.Wa.$G)for(a=a.XPa(),a.reset();a.Xf();)g.push(b.aSc(a.next(),e,c));else g.push(b.aSc(a,e,c))}c||(c=[0,1]);var g=[];a instanceof _geo.geotoolkit.util.Iterator||Array.isArray(a)?a.forEach(f):f(a);return 1===g.length?g[0]:{type:"FeatureCollection",features:g}};b.aSc=function(a,e,c){var f={type:"Feature",properties:a.getAttributes(),geometry:{}},
g=a.yd(!0);a instanceof _geo.geotoolkit.map.Wa.na?(f.geometry.type="Point",f.geometry.coordinates=b.cSc(g,e,c)):a instanceof _geo.geotoolkit.map.Wa.ou?(f.geometry.type="LineString",f.geometry.coordinates=b.bSc(g,e,c)):a instanceof _geo.geotoolkit.map.Wa.Fc?(f.geometry.type="Polygon",f.geometry.coordinates=b.xna(g,e,c)):a instanceof _geo.geotoolkit.map.Wa.jO?(f.geometry.type="MultiPoint",f.geometry.coordinates=b.ROa(b.cSc,g,e,c)):a instanceof _geo.geotoolkit.map.Wa.iO?(f.geometry.type="MultiLineString",
f.geometry.coordinates=b.ROa(b.bSc,g,e,c)):a instanceof _geo.geotoolkit.map.Wa.ZQ&&(f.geometry.type="MultiPolygon",f.geometry.coordinates=b.ROa(b.xna,g,e,c));return f};b.cSc=function(b,e,c){var f=[];g.bb(b.x,b.y);e&&(g=e(g,g));f[c[0]]=a(g.getX());f[c[1]]=a(g.getY());return f};b.bSc=function(b,e,c){var f=[],k=b.x;b=b.y;for(var h=0;h<k.length;++h)f[h]=[],g.bb(k[h],b[h]),e&&(g=e(g,g)),f[h][c[0]]=a(g.getX()),f[h][c[1]]=a(g.getY());return f};b.xna=function(b,e,c){var f=[],k,h=b.x,l=b.y;for(k=0;k<h.length;++k)f[k]=
[],g.bb(h[k],l[k]),e&&(g=e(g,g)),f[k][c[0]]=a(g.getX()),f[k][c[1]]=a(g.getY());f=[f];b=b.clip;if(Array.isArray(b))for(h=0;h<b.length;++h){var l=b[h].x,n=b[h].y,p=[];for(k=0;k<l.length;++k)p[k]=[],g.bb(l[k],n[k]),e&&(g=e(g,g)),p[k][c[0]]=a(g.getX()),p[k][c[1]]=a(g.getY());f.push(p)}return f};return b}();
_geo.geotoolkit.map.util.xX=function(){function b(){}function a(a,b,d){a.kb(_geo.geotoolkit.scene.shapes.Image.$.Ws,function(){if(null!=b&&1!==b){var g=a.UUb();a.setSize(b*g.width,b*g.height)}null!=d&&d()});return a}var g=new _geo.geotoolkit.util.na,d={Point:[_geo.geotoolkit.map.Wa.na,_geo.geotoolkit.map.Wa.jO],LineString:[_geo.geotoolkit.map.Wa.ou,_geo.geotoolkit.map.Wa.iO],"LinearRing, Polygon":[_geo.geotoolkit.map.Wa.Fc,_geo.geotoolkit.map.Wa.ZQ]};_geo.geotoolkit.da(b,"geotoolkit.map.util.KML");
b.parse=function(a,c,d,g,h,l){l=l||[];switch(a.nodeName){case "Document":case "#document":var n=_geo.geotoolkit.map.util.nB.AW(a,"Style, StyleMap",!0);h=b.Dvb(n,h,g);case "kml":case "Folder":a=_geo.geotoolkit.map.util.nB.AW(a,"Document, kml, Folder, Placemark",!0);for(n=0;n<a.length;++n)b.parse(a[n],c,d,g,h,l);return l;case "Placemark":c=b.pld(a,c,d);if(0===c.length)return l;break;default:return l}d=b.FI(a,"styleUrl");for(g=0;g<c.length;++g)d&&h&&h[d]&&h[d][c[g].getClassName()]&&(c[g].Ez=h[d][c[g].getClassName()]),
l.push(c[g]);return l};b.Dvb=function(d,c,f){if(0===d.length)return c;c=_geo.geotoolkit.Sb(c,{});for(var g=0;g<d.length;++g){var h,l;h=d[g];var n=h.getAttribute("id")||"";if("StyleMap"===h.tagName){var p=h.querySelectorAll("Pair"),r=!1;for(l=0;l<p.length;++l)if("normal"===b.FI(p[l],"key")){var t;(t=b.FI(p[l],"styleUrl"))?c["#"+n]=c[t]:(h=b.DV(p[l],"Style"),r=!0);break}if(!r)continue}t=l=r=p=null;var q;h=h.querySelectorAll("IconStyle, LineStyle, PolyStyle");for(var m=0;m<h.length;++m){var u=h[m];switch(u.tagName){case "IconStyle":t=
b.DV(u,"Icon");l=b.FI(t,"href");q=b.FI(u,"scale");break;case "LineStyle":t=b.FI(u,"color");p=new _geo.geotoolkit.attributes.Aa({color:b.Ph(t)||"black",width:b.FI(u,"width")||1});break;case "PolyStyle":t=b.FI(u,"color");r=new _geo.geotoolkit.attributes.Fa({color:b.Ph(t)});break}}if(null!=l)h=new _geo.geotoolkit.map.Wa.Ff.na({shape:a(new _geo.geotoolkit.scene.shapes.Image({url:l,alignment:_geo.geotoolkit.util.Da.lb,sizeisindevicespace:!0,ispointingup:!0,linestyle:null}),q,f)}),l={},l[_geo.geotoolkit.map.Wa.na.getClassName()]=
h,l[_geo.geotoolkit.map.Wa.jO.getClassName()]=h;else if(null!=p)h=new _geo.geotoolkit.map.Wa.Ff.ou({shape:new _geo.geotoolkit.scene.shapes.Il({linestyle:p})}),l={},l[_geo.geotoolkit.map.Wa.ou.getClassName()]=h,l[_geo.geotoolkit.map.Wa.iO.getClassName()]=h,null!=r&&(h=new _geo.geotoolkit.map.Wa.Ff.Fc({shape:new _geo.geotoolkit.scene.shapes.Fc({linestyle:p,fillstyle:r})}),l[_geo.geotoolkit.map.Wa.Fc.getClassName()]=h,l[_geo.geotoolkit.map.Wa.ZQ.getClassName()]=h);else continue;c["#"+n]=l}return c};
b.DV=function(a,b){return _geo.geotoolkit.map.util.nB.AW(a,b,!1)};b.FI=function(a,c){var d=b.DV(a,c);return d?d.textContent:null};b.Ph=function(a){if(null==a)return null;var b=((0,window.parseInt)(a.substr(0,2),16)/256).toFixed(2),d=(0,window.parseInt)(a.substr(2,2),16),g=(0,window.parseInt)(a.substr(4,2),16);a=(0,window.parseInt)(a.substr(6,2),16);return"rgba("+a+","+g+","+d+","+b+")"};b.pld=function(a,c,f){if(null==a)return null;c=c instanceof _geo.geotoolkit.map.Wa.Zq.M0?c.X8():"name";c=b.FI(a,
c);var g=_geo.geotoolkit.map.util.nB.lIa(a);a=b.DV(a,"MultiGeometry")||a;var h=[],l;for(l in d)if(d.hasOwnProperty(l)){for(var n=_geo.geotoolkit.map.util.nB.AW(a,l,!0),p=[],r=0;r<n.length;++r)p.push(b.vma(n[r],f));0!==p.length&&h.push(new (d[l][Math.sign(p.length-1)])({id:c,attributes:g,geometry:1===p.length?p[0]:p}))}return h};b.vma=function(a,c){switch(a.nodeName){case "Point":return b.kva(a,c);case "LineString":case "LinearRing":return b.iva(a,c);case "Polygon":var d=b.DV(a,"outerBoundaryIs"),
g=a.getElementsByTagName("innerBoundaryIs"),d=b.iva(b.DV(d,"LinearRing"),c);if(0<g.length){var h=_geo.geotoolkit.map.util.Geometry.zV(d);d.clip=[h];for(h=0;h<g.length;++h){var l=b.DV(g[h],"LinearRing");d.clip.push(b.iva(l,c))}}return d}return null};b.kva=function(a,c){if(null==a)return null;var d=b.FI(a,"coordinates"),d=d?d.split(","):[window.NaN,window.NaN];g.bb(+d[0],+d[1]);c&&(g=c(g,g));return{x:g.getX(),y:g.getY()}};b.iva=function(a,c){var d=a&&b.FI(a,"coordinates");if(null==d)return null;for(var d=
d.split(" "),k=[],h=[],l=0;l<d.length;++l){var n=d[l].split(",");2>n.length||(g.bb(+n[0],+n[1]),c&&(g=c(g,g)),k.push(g.getX()),h.push(g.getY()))}return{x:k,y:h}};return b}();
_geo.geotoolkit.map.util.J0=function(){function b(){}var a={point:_geo.geotoolkit.map.Wa.na,line:_geo.geotoolkit.map.Wa.ou,polygon:_geo.geotoolkit.map.Wa.Fc},g=new _geo.geotoolkit.util.na;_geo.geotoolkit.da(b,"geotoolkit.map.util.GeoRSS");b.parse=function(a,e,c){var f=[];b.J_b(a.querySelectorAll("entry"),e,c,f);b.J_b(a.querySelectorAll("channel > item"),e,c,f);var g=_geo.geotoolkit.map.util.nB.AW(a,"entry, channel",!0);a=0<g.length&&g[0].parentNode||a;for(var h=0;h<g.length;++h)a.removeChild(g[h]);
b.RA(a,e,c,f);return f};b.J_b=function(a,e,c,f){for(var g=0;g<a.length;++g)b.RA(a[g],e,c,f);return f};b.RA=function(a,e,c,f){var g=b.IJc(a,e,c)||b.OJc(a,e,c);g?f.push(g):_geo.geotoolkit.map.util.pbc.parse(a,e,c,f)};b.IJc=function(d,e,c){for(var f=Object.keys(a),g=0;g<f.length;++g){var h=_geo.geotoolkit.map.util.nB.AW(d,f[g],!1);if(h&&h.textContent)return d=_geo.geotoolkit.map.util.nB.lIa(d),f=a[f[g]],new f({id:e.EP(d),attributes:d,geometry:b.vma(h.textContent,c)})}if((h=_geo.geotoolkit.map.util.nB.AW(d,
"box",!1))&&h.textContent){c=b.vma(h.textContent,c);if(2!==c.x.length)return null;d=_geo.geotoolkit.map.util.nB.lIa(d);return new _geo.geotoolkit.map.Wa.Fc({id:e.EP(d),attributes:d,geometry:{x:[c.x[0],c.x[0],c.x[1],c.x[1]],y:[c.y[0],c.y[1],c.y[1],c.y[0]]}})}return null};b.vma=function(a,b){for(var c=a.trim().split(/,\s*|\s+/),f=[],k=[],h=0;h<c.length;h+=2)g.bb(+c[h+1]||0,+c[h]||0),b&&(g=b(g,g)),f.push(g.x),k.push(g.y);return 1<f.length?{x:f,y:k}:{x:f[0]||0,y:k[0]||0}};b.OJc=function(a,b,c){var f,
k,h,l=a.querySelector("based_near");if(l){f=l.attributes;for(var n=0;n<f.length;++n){var p=f[n].name,p=p.substr(p.lastIndexOf(":")+1).toLowerCase();"lat"===p?k=f[n].value:"long"===p&&(h=f[n].value)}a=l.parentNode||a}else(k=a.querySelector("lat_long"))&&k.textContent?(k=k.textContent.trim().split(/,\s*|\s+/),h=k[1],k=k[0]):(k=(k=a.querySelector("lat"))&&k.textContent,h=(h=a.querySelector("long"))&&h.textContent);return null!=k&&null!=h?(f=_geo.geotoolkit.map.util.nB.lIa(a),g.bb(+h||0,+k||0),c&&(g=
c(g,g)),new _geo.geotoolkit.map.Wa.na({id:b.EP(f),attributes:f,geometry:{x:g.x,y:g.y}})):null};return b}();
_geo.geotoolkit.map.util.pbc=function(){function b(){}function a(a,b,c){var d;for(d=0;d<c.length;++d){var e=c[d].split(",");if(-1<e.indexOf(b))return a}for(d=0;d<c.length;++d)if(b=a.querySelector(c[d]))return b;return null}var g=new _geo.geotoolkit.util.na,d=["MultiGeometry"],e=["MultiPoint"],c=["MultiCurve","Curve"],f=["MultiSurface, MultiSolid","Polygon, Solid, Surface, PolyhedralSurface, TriangulatedSurface"],k=["Point"],h=["LineString"],l=["Envelope"];_geo.geotoolkit.da(b,"geotoolkit.map.util.GML");
b.parse=function(g,p,r,t,q){q=q||g;t=t||[];var m,u=g.nodeName.lastIndexOf(":"),v=-1===u?g.nodeName:g.nodeName.substr(u+1);if(m=a(g,v,d)){u=m.querySelectorAll("geometryMember");0===u.length&&(u=(u=m.querySelector("geometryMember"))&&u.children||[]);for(g=0;g<u.length;++g)b.parse(u[g],p,r,t,q);return t}u=[];if(m=a(g,v,e)){v=_geo.geotoolkit.map.util.nB.AW(m,"pointMembers, pointMember",!0);for(g=0;g<v.length;++g)for(var w=_geo.geotoolkit.map.util.nB.AW(v[g],"Point",!0),x=0;x<w.length;++x)(m=b.kva(w[g],
r))&&u.push(m);b.Ada(u,p,q,_geo.geotoolkit.map.Wa.na,_geo.geotoolkit.map.Wa.jO,t)}else if(m=a(g,v,c)){v=m.querySelectorAll("LineString, LineStringSegment");for(g=0;g<v.length;++g)(m=b.W9a(v[g],r))&&u.push(m);b.Ada(u,p,q,_geo.geotoolkit.map.Wa.ou,_geo.geotoolkit.map.Wa.iO,t)}else if(m=a(g,v,f)){v=m.querySelectorAll("exterior");for(g=0;g<v.length;++g)(m=b.$9a(v[g],r))&&u.push(m);b.Ada(u,p,q,_geo.geotoolkit.map.Wa.Fc,_geo.geotoolkit.map.Wa.ZQ,t)}else if(m=a(g,v,k))(m=b.kva(m,r))&&u.push(m),b.Ada(u,p,
q,_geo.geotoolkit.map.Wa.na,_geo.geotoolkit.map.Wa.jO,t);else if(m=a(g,v,h))(m=b.W9a(m,r))&&u.push(m),b.Ada(u,p,q,_geo.geotoolkit.map.Wa.ou,_geo.geotoolkit.map.Wa.iO,t);else if(m=a(g,v,l))(m=b.AJc(m,r))&&u.push(m),b.Ada(u,p,q,_geo.geotoolkit.map.Wa.Fc,_geo.geotoolkit.map.Wa.ZQ,t);return t};b.kva=function(a,c){if(!a)return null;var d=_geo.geotoolkit.map.util.nB.AW(a,"pos, coordinates",!1);return d&&d.textContent?b.Avb(d.textContent,c):null};b.AJc=function(a,c){if(!a)return null;var d=_geo.geotoolkit.map.util.nB.AW(a,
"lowerCorner, upperCorner",!0);if(2===d.length&&d[0].textContent&&d[1].textContent){var e=b.Avb(d[0].textContent,c),d=b.Avb(d[1].textContent,c);return{x:[e.x,e.x,d.x,d.x],y:[e.y,d.y,d.y,e.y]}}return b.W9a(a,c)};b.Avb=function(a,b){var c=a.trim().split(/,\s*|\s+/);g.bb(+c[1]||0,+c[0]||0);b&&(g=b(g,g));return{x:g.x,y:g.y}};b.W9a=function(a,b){if(!a)return null;var c,d,e=[],f=[],h=0<a.childElementCount?_geo.geotoolkit.map.util.nB.AW(a,"posList, coordinates",!1):a;if(h&&h.textContent){var k=h.getAttribute("srsDimension")||
2;d=h.textContent.trim().split(/,\s*|\s+/);for(c=0;c<d.length;c+=k)g.bb(+d[c+1]||0,+d[c]||0),b&&(g=b(g,g)),e.push(g.x),f.push(g.y)}else for(h=a.querySelectorAll("pos, coordinates"),c=0;c<h.length;++c)h[c].textContent&&(d=h[c].textContent.trim().split(/,\s*|\s+/),g.bb(+d[1]||0,+d[0]||0),b&&(g=b(g,g)),e.push(g.x),f.push(g.y));return 2>=e.length?null:{x:e,y:f}};b.$9a=function(a,c){if(!a)return null;var d=b.F_b(a,c),e=a.parentNode,e=e&&e.querySelectorAll("interior");if(!e||0===e.length||!d)return d;var f=
_geo.geotoolkit.map.util.Geometry.zV(d);d.clip=[f];for(f=0;f<e.length;++f){var g=b.F_b(e[f],c);g&&d.clip.push(g)}return d};b.F_b=function(a,c){var d=_geo.geotoolkit.map.util.nB.AW(a,"LinearRing",!1)||a.querySelector("LineString, LineStringSegment");return b.W9a(d,c)};b.Ada=function(a,b,c,d,e,f){0!==a.length&&(c=_geo.geotoolkit.map.util.nB.lIa(c),1===a.length?f.push(new d({id:b.EP(c),attributes:c,geometry:a[0]})):f.push(new e({id:b.EP(c),attributes:c,geometry:a})))};return b}();
_geo.geotoolkit.map.util.Lhb=function(){function b(){}var a,g;_geo.geotoolkit.da(b,"geotoolkit.map.util.WebMap");b.load=function(b,e){a=a||new _geo.geotoolkit.map.Qa.ed.L0;a.send(e,null,function(a,e){if(a)_geo.geotoolkit.warn(a);else{if("string"===typeof e)try{e=JSON.parse(e)}catch(g){_geo.geotoolkit.warn(g);return}for(var k=_geo.geotoolkit.map.util.Lhb.parse(e),h=0;h<k.length;++h)b.ZF(k[h])}})};b.wod=function(a){g=a};b.parse=function(d){d=new _geo.geotoolkit.util.Joa(d&&d.baseMap&&d.baseMap.baseMapLayers||
[],d&&d.operationalLayers||[]);for(var e=[],c=[];d.Xf();){var f=d.next(),k,h,l=f.hasOwnProperty("opacity")?f.opacity:1,n=f.layerType||f.type;switch(n){case "ArcGISImageServiceVectorLayer":k=new _geo.geotoolkit.map.layers.Wh({url:f.url,alpha:l,source:new _geo.geotoolkit.map.Qa.Raa({loader:b.xsc(f,_geo.geotoolkit.map.Qa.jl.Hx),format:new _geo.geotoolkit.map.Qa.Bg.Raa({symbolTileSize:f.symbolTileSize})})});break;case "ArcGISImageServiceLayer":case "ArcGISMapServiceLayer":k=new _geo.geotoolkit.map.layers.bB({url:f.url,
alpha:l});null!=f.visibleLayers&&k.gL(f.visibleLayers);break;case "ArcGISTiledImageServiceLayer":case "ArcGISTiledMapServiceLayer":k=new _geo.geotoolkit.map.layers.Dk({loader:new _geo.geotoolkit.map.Qa.jl.gAb,url:f.url,alpha:l,formatterfunction:function(a,b,c){return"/tile/"+a+"/"+b+"/"+c}});break;case "WebTiledLayer":k=new _geo.geotoolkit.map.layers.Dk(b.Ald(f.templateUrl,f.subDomains));break;case "WMS":k=new _geo.geotoolkit.map.layers.Ty({url:f.mapUrl,alpha:l});break;case "ArcGISFeatureLayer":null!=
f.url?k=new _geo.geotoolkit.map.layers.Hx({source:new _geo.geotoolkit.map.Qa.Hx({loader:b.xsc(f,_geo.geotoolkit.map.Qa.jl.Hx)}),alpha:l,url:f.url}):h="ArcGISFeatureLayer with featureCollection are not supported!!!";break;case "KML":k=new _geo.geotoolkit.map.layers.xX({system:_geo.geotoolkit.map.Mw.cB,alpha:l,url:f.url});break;case "OpenStreetMap":k=new _geo.geotoolkit.map.layers.Dk({url:["//a.tile.openstreetmap.org/","//b.tile.openstreetmap.org/","//c.tile.openstreetmap.org/"],formatterfunction:function(a,
b,c){return a+"/"+c+"/"+b+".png"}});break;case "CSV":var n=f.layerDefinition,p=f.locationInfo;k=new _geo.geotoolkit.map.layers.QN({source:new _geo.geotoolkit.map.Qa.QN({idfield:n&&n.objectIdField,latitudefield:p&&p.latitudeFieldName,longitudefield:p&&p.longitudeFieldName,url:f.url,alpha:l,loader:new _geo.geotoolkit.map.Qa.jl.Hx({connector:new _geo.geotoolkit.map.Qa.ed.tFb({data:n})})})});break;case "ArcGISStreamLayer":k=new _geo.geotoolkit.map.layers.zq({url:f.url,alpha:l});break;case "GeoRSS":var n=
_geo.geotoolkit.map.util.Gz.wma(f.pointSymbol),p=_geo.geotoolkit.map.util.Gz.wma(f.lineSymbol),r=_geo.geotoolkit.map.util.Gz.wma(f.polygonSymbol),t=[];null!=n&&(t.push({featureclassname:_geo.geotoolkit.map.Wa.na.getClassName(),template:n}),t.push({featureclassname:_geo.geotoolkit.map.Wa.jO.getClassName(),template:n}));null!=p&&(t.push({featureclassname:_geo.geotoolkit.map.Wa.ou.getClassName(),template:p}),t.push({featureclassname:_geo.geotoolkit.map.Wa.iO.getClassName(),template:p}));null!=r&&(t.push({featureclassname:_geo.geotoolkit.map.Wa.Fc.getClassName(),
template:r}),t.push({featureclassname:_geo.geotoolkit.map.Wa.ZQ.getClassName(),template:r}));k=new _geo.geotoolkit.map.layers.J0({url:f.url,alpha:l,templates:t});break;case "BingMapsAerial":case "BingMapsRoad":case "BingMapsHybrid":null==g?h="Bing Maps API key is not set. Use "+b.getClassName()+".setBingMapsKey() to support Bing layers in Webmap.":(p={BingMapsAerial:_geo.geotoolkit.map.Qa.wC.iha.I8b,BingMapsRoad:_geo.geotoolkit.map.Qa.wC.iha.ygc,BingMapsHybrid:_geo.geotoolkit.map.Qa.wC.iha.aAb},k=
new _geo.geotoolkit.map.layers.wC({imagerySet:p[n],alpha:l,key:g}));break;case "VectorTileLayer":k=new _geo.geotoolkit.map.layers.yF({system:_geo.geotoolkit.map.Mw.cB,source:new _geo.geotoolkit.map.Qa.yF({styleUrl:f.styleUrl}),alpha:l,annotations:{visible:!0,filter:new _geo.geotoolkit.map.Wa.filters.dYa}});var q;null==f.styleUrl?h="VectorTile layer hasn't styleUrl property.":"string"===typeof f.styleUrl?a.send(f.styleUrl,null,function(a,c){a?_geo.geotoolkit.warn(a):(q=_geo.geotoolkit.map.Qa.jl.yF.HJc(c),
null!=q&&k.OW(b.FJc(q,f.styleUrl)))}):"object"===typeof f.styleUrl?(q=_geo.geotoolkit.map.Qa.jl.yF.HJc(f.styleUrl),null!=q&&k.OW(b.FJc(q,f.styleUrl))):h="VectorTile layer has wrong styleUrl property.";break;case "WFS":k=new _geo.geotoolkit.map.layers.FL({alpha:l,server:f.url});break}null==k?(h||(h=f.layerType+" layer type is not supported!!!"),_geo.geotoolkit.warn(h)):f.isReference?c.push(k):e.push(k)}return e.concat(c)};b.Ald=function(a,b){var c={},f=[a.indexOf("{level}"),a.indexOf("{col}"),a.indexOf("{row}")].filter(function(a){return-1!==
a});if(0===f.length)return c;var f=Math.min.apply(null,f),g=a.substr(0,f),h=a.substr(f);c.formatterfunction=function(a,b,c){return h.replace("{level}",a).replace("{col}",c).replace("{row}",b)};c.server=Array.isArray(b)?b.map(function(a){return g.replace("{subDomain}",a)}):[g];return c};b.FJc=function(a,b){if(a.startsWith("http")||a.startsWith("//"))return a;var c=b.split("/"),f=a.split("/"),g=c[c.length-1];(!g||0<=g.indexOf("."))&&c.pop();for(g=0;g<f.length;g++)".."===f[g]?c.pop():""!==f[g]&&"."!==
f[g]&&c.push(f[g]);return c.join("/")};b.xsc=function(a,b){if(!a||!a.layerDefinition||!a.layerDefinition.drawingInfo)return new b;var c=a.layerDefinition.drawingInfo;return new b({connector:new _geo.geotoolkit.map.Qa.ed.LEb({callback:function(a,b){if(a||!b)return b;if("string"===typeof b)try{b=JSON.parse(b)}catch(d){return b}null!=c&&(b.drawingInfo=c);return b}})})};return b}();
_geo.geotoolkit.map.util.KDb=function(){function b(a){return a.getAttributes()[this]}function a(a){return a.id}function g(a){return a instanceof _geo.geotoolkit.map.Wa.na||a instanceof _geo.geotoolkit.map.Wa.jO?"Point":a instanceof _geo.geotoolkit.map.Wa.ou||a instanceof _geo.geotoolkit.map.Wa.iO?"LineString":"Polygon"}function d(){return!0}function e(){}function c(a){this.OCa=window.ArrayBuffer.isView&&window.ArrayBuffer.isView(a)?a:new window.Uint8Array(a||0);this.type=this.cg=0;this.length=this.OCa.length}
function f(a,b,c){return c?4294967296*b+(a>>>0):4294967296*(b>>>0)+(a>>>0)}function k(a,b,c,d,e){var f;f=8*e-d-1;var g=(1<<f)-1,h=g>>1,k=-7;e=c?e-1:0;var l=c?-1:1,m=a[b+e];e+=l;c=m&(1<<-k)-1;m>>=-k;for(k+=f;0<k;k-=8)c=256*c+a[b+e],e+=l;f=c&(1<<-k)-1;c>>=-k;for(k+=d;0<k;k-=8)f=256*f+a[b+e],e+=l;if(0===c)c=1-h;else{if(c===g)return f?window.NaN:m?-window.Infinity:window.Infinity;f+=Math.pow(2,d);c-=h}return(m?-1:1)*f*Math.pow(2,c-d)}function h(a,b){E=0;this.layers=a.r0b(l,{},b)}function l(a,b,c){3===
a&&(a=new n(c,c.GG()+c.cg),a.length&&(b[a.name]=a,a.MTc=E++))}function n(a,b){this.version=1;this.name=null;this.IPa=4096;this.length=0;this.ENa=a;this.VL=[];this.gd=[];this.tn=[];a.r0b(p,this,b);this.length=this.tn.length}function p(a,b,c){switch(a){case 15:b.version=c.GG();break;case 1:b.name=c.tva();break;case 5:b.IPa=c.GG();break;case 2:b.tn.push(c.cg);break;case 3:b.VL.push(c.tva());break;case 4:var d=null;for(a=c.GG()+c.cg;c.cg<a;)d=c.GG()>>3,d=1===d?c.tva():2===d?c.Lmd():3===d?c.Kmd():4===
d?c.Rmd():5===d?c.GG():6===d?c.t0b():7===d?c.Imd():null;b.gd.push(d)}}function r(a,b,c,d){for(var e=0;e<a.length;e++){var f=a[e],g=180-360*(f.y+c)/d;a[e]=[360*(f.x+b)/d-180,360/Math.PI*Math.atan(Math.exp(g*Math.PI/180))-90]}}function t(a,b,c,d,e){this.properties={};this.IPa=c;this.type=0;this.ENa=a;this.ef=-1;this.VL=d;this.gd=e;a.r0b(u,this,b)}function q(a){if(1>=a.length)return[a];for(var b=[],c,d,e=0;e<a.length;e++){var f=m(a[e]);0!==f&&(void 0===d&&(d=0>f),d===0>f?(c&&b.push(c),c=[a[e]]):c&&c.push(a[e]))}c&&
b.push(c);return b}function m(a){var b=0,c,d,e=a.length,f=0;for(d=e-1;f<e;d=f++)c=a[f],d=a[d],b+=(d.x-c.x)*(c.y+d.y);return b}function u(a,b,c){switch(a){case 1:b.id=c.GG();break;case 2:for(a=c.GG()+c.cg;c.cg<a;){var d=b.VL[c.GG()],e=b.gd[c.GG()];b.properties[d]=e}break;case 3:b.type=c.GG();break;case 4:b.ef=c.cg;break}}var v=[0,1],w,x=new _geo.geotoolkit.util.na,A=new _geo.geotoolkit.util.Fc,z=_geo.geotoolkit.map.Nd.ue.lq().Lu(_geo.geotoolkit.map.Mw.wba),C=z.xr(),D=["Unknown","Point","LineString",
"Polygon"];t.prototype.$id=function(){var a=this.ENa;a.cg=this.ef;for(var b=a.GG()+a.cg,c=1,d=0,e=0,f=0,g=[],h;a.cg<b;)if(0>=d&&(d=a.GG(),c=d&7,d>>=3),d--,1===c||2===c){e+=a.t0b();f+=a.t0b();1===c&&(h&&g.push(h),h=[]);if(!h)throw Error("Mapbox wrong data found: wrong geometry found");h.push({x:e,y:f})}else if(7===c)h&&h.push({x:h[0].x,y:h[0].y});else throw Error("Mapbox wrong data found: unknown command "+c);h&&g.push(h);return g};t.prototype.Gqd=function(a,b,c,d,e){c*=this.IPa;a*=this.IPa;b*=this.IPa;
var f=this.$id(),g=D[this.type],h,k;switch(this.type){case 1:k=[];for(h=0;h<f.length;h++)k[h]=f[h][0];f=k;r(f,a,b,c);break;case 2:for(h=0;h<f.length;h++)r(f[h],a,b,c);break;case 3:f=q(f);for(h=0;h<f.length;h++)for(k=0;k<f[h].length;k++)r(f[h][k],a,b,c);break}c=1===f.length?{type:g,coordinates:f[0]}:{type:"Multi"+g,coordinates:f};d=d.EP(this.properties)||this.properties.id;return _geo.geotoolkit.map.util.eH.wvb(c,e,v,d,this.properties)};n.prototype.wDa=function(a){this.ENa.cg=this.tn[a];a=this.ENa.GG()+
this.ENa.cg;return new t(this.ENa,a,this.IPa,this.VL,this.gd)};var E;c.Z1c=0;c.lXc=1;c.wUc=2;c.kXc=5;c.prototype={destroy:function(){this.OCa=null},r0b:function(a,b,c){for(c=c||this.length;this.cg<c;){var d=this.GG(),e=d>>3,f=this.cg;this.type=d&7;a(e,b,this);this.cg===f&&this.dqd(d)}return b},Lmd:function(){var a=k(this.OCa,this.cg,!0,23,4);this.cg+=4;return a},Kmd:function(){var a=k(this.OCa,this.cg,!0,52,8);this.cg+=8;return a},GG:function(a){var b=this.OCa,c,d;d=b[this.cg++];c=d&127;if(128>d)return c;
d=b[this.cg++];c|=(d&127)<<7;if(128>d)return c;d=b[this.cg++];c|=(d&127)<<14;if(128>d)return c;d=b[this.cg++];c|=(d&127)<<21;if(128>d)return c;d=b[this.cg];c|=(d&15)<<28;var e;d=b[this.cg++];e=(d&112)>>4;if(128>d)return f(c,e,a);d=b[this.cg++];e|=(d&127)<<3;if(128>d)return f(c,e,a);d=b[this.cg++];e|=(d&127)<<10;if(128>d)return f(c,e,a);d=b[this.cg++];e|=(d&127)<<17;if(128>d)return f(c,e,a);d=b[this.cg++];e|=(d&127)<<24;if(128>d)return f(c,e,a);d=b[this.cg++];if(128>d)return f(c,e|(d&1)<<31,a);throw Error("Mapbox wrong data found: expected varint not more than 10 bytes");
},Rmd:function(){return this.GG(!0)},t0b:function(){var a=this.GG();return 1===a%2?(a+1)/-2:a/2},Imd:function(){return Boolean(this.GG())},tva:function(){for(var a=this.GG()+this.cg,b="",c=this.cg,d=this.OCa;c<a;){var e=d[c],f=null,g=239<e&&4||223<e&&3||191<e&&2||1;if(c+g>a)break;var h,k,l;if(1===g)128>e&&(f=e);else if(2===g)h=d[c+1],128===(h&192)&&(f=(e&31)<<6|h&63,127>=f&&(f=null));else if(3===g){if(h=d[c+1],k=d[c+2],128===(h&192)&&128===(k&192)&&(f=(e&15)<<12|(h&63)<<6|k&63,2047>=f||55296<=f&&
57343>=f))f=null}else 4===g&&(h=d[c+1],k=d[c+2],l=d[c+3],128===(h&192)&&128===(k&192)&&128===(l&192)&&(f=(e&15)<<18|(h&63)<<12|(k&63)<<6|l&63,65535>=f||1114112<=f))&&(f=null);null===f?(f=65533,g=1):65535<f&&(f-=65536,b+=String.fromCharCode(f>>>10&1023|55296),f=56320|f&1023);b+=String.fromCharCode(f);c+=g}this.cg=a;return b},dqd:function(a){a&=7;if(a===c.Z1c)for(;127<this.OCa[this.cg++];);else if(a===c.wUc)this.cg=this.GG()+this.cg;else if(a===c.kXc)this.cg+=4;else if(a===c.lXc)this.cg+=8;else throw Error("Mapbox wrong data found: unknown type: "+
a);}};_geo.geotoolkit.da(e,"geotoolkit.map.util.Mapbox");e.parse=function(a,b,d,f,g,k,l){g=g||new _geo.geotoolkit.map.Wa.Zq.M0("name");f=1<<f;var m=C.width/f,n=C.height/f,p=C.x+m*b,q=C.y+n*(f-d-1);z.je(p,q,x);k&&(x=k(x,x));var r=new _geo.geotoolkit.util.Rect(x.x,x.y,x.x,x.y);z.je(p+m,q+n,x);k&&(x=k(x,x));r.Bga(x.x,x.y);a=new c(a);for(var t=(new h(a)).layers,m=Object.keys(t).sort(function(a,b){return t[b].MTc-t[a].MTc}),n={},p=[],q=0;q<m.length;q++){for(var u=m[q],v=l&&l[u],w=[],A=0;A<t[u].length;++A){var D=
t[u].wDa(A).Gqd(b,d,f,g,k);if(D){var E=D.yd();if(D instanceof _geo.geotoolkit.map.Wa.Fc)e.npb(E,r);else if(D instanceof _geo.geotoolkit.map.Wa.ZQ){var da=E[0];e.npb(da,r);for(var Z=1;Z<E.length;){var ba=_geo.geotoolkit.map.util.Geometry.aHc(E[Z]);e.npb(E[Z],r);ba?(da=E[Z],Z++):(da.clip=da.clip||[],da.clip.push(E[Z]),E.splice(Z,1))}}e.Bsc(D,v);w.push(D)}}0<w.length&&(p.push(m[q]),n[m[q]]=w)}a.destroy();return{layers:n,names:p}};e.npb=function(a,b){A.Ne(a.x,a.y).lub(b);a.x=A.Wf();a.y=A.Jg();var c=a.clip;
if(c)for(var d=c[0]instanceof _geo.geotoolkit.util.Rect?1:0;d<c.length;++d)A.Ne(c[d].x,c[d].y).lub(b),c[d].x=A.Wf(),c[d].y=A.Jg()};e.Dvb=function(a){a=a.layers;for(var b={},c=0;c<a.length;++c)e.LJc(a[c],b);return b};e.Bsc=function(a,b){if(!b||!Array.isArray(b.Fg))return a;b=b.Fg;for(var c=0;c<b.length;++c)if(b[c].filter(a)){a.Ez=b[c].Ez;"function"===typeof b[c].EP&&a.Kd(b[c].EP(a));break}return a};e.LJc=function(a,b){b[a["source-layer"]]||(b[a["source-layer"]]={Fg:[],ea:e.DJc(a.layout),HZb:-window.Infinity,
sZb:window.Infinity});var c=b[a["source-layer"]];null!=a.minzoom&&(c.HZb=Math.max(c.HZb,a.minzoom));null!=a.maxzoom&&(c.sZb=Math.min(c.sZb,a.maxzoom));var d={filter:e.vvb(a.filter)};w=w||new _geo.geotoolkit.scene.shapes.Text({visible:!1});var f=a.paint||{};switch(a.type){case "fill":case "fill-extrusion":d.Ez=new _geo.geotoolkit.map.Wa.Ff.Fc({shape:new _geo.geotoolkit.scene.shapes.Fc({fillstyle:e.Ph(f["fill-color"],f["fill-opacity"],c.ea.fillColor),linestyle:e.xZb(f,c.ea.pf),visible:"none"!==f.visibility&&
c.ea.visible}),textshape:w});break;case "line":d.Ez=new _geo.geotoolkit.map.Wa.Ff.ou({shape:new _geo.geotoolkit.scene.shapes.Il({linestyle:e.xZb(f,c.ea.pf),visible:"none"!==f.visibility&&c.ea.visible}),textshape:w});break;case "circle":var g=e.vW(f["circle-radius"],c.ea.Z9c);d.Ez=new _geo.geotoolkit.map.Wa.Ff.na({shape:new _geo.geotoolkit.scene.shapes.Symbol({painter:_geo.geotoolkit.scene.shapes.hc.Hz,width:2*g,height:2*g,fillstyle:e.Ph(f["circle-color"],f["circle-opacity"],c.ea.Y9c),linestyle:null,
visible:"none"!==f.visibility&&c.ea.visible}),textshape:w});break;case "symbol":var h=f["text-field"]||a.layout&&a.layout["text-field"]||c.ea.Aqd;null!=h?(g=a.layout&&"line"===a.layout["symbol-placement"]&&_geo.geotoolkit.map.Wa.Ff.ou||a.layout&&"line-center"===a.layout["symbol-placement"]&&_geo.geotoolkit.map.Wa.Ff.Fc||_geo.geotoolkit.map.Wa.Ff.na,d.Ez=new g({shape:w,textshape:new _geo.geotoolkit.scene.shapes.Text({textstyle:e.vIc(f,c.ea.Be),preservereadingorientation:!0,ispointingup:!0})}),d.EP=
function(a){var b=a.getAttributes();return h.replace(/\{\w+\}/g,function(a){return b[a.substr(1,a.length-2)]})}):d.Ez=new _geo.geotoolkit.map.Wa.Ff.na({textshape:w});break;default:return}c.Fg.push(d)};e.DJc=function(a){a=a||{};return{visible:"none"!==a.visibility,pf:e.EJc(a),Aqd:e.vW(a["text-field"],null),Be:e.MJc(a),fillColor:e.Ph(a["fill-color"],a["fill-opacity"],"white"),Z9c:e.vW(a["circle-radius"],5),Y9c:e.Ph(a["circle-color"],a["circle-opacity"],"white")}};e.MJc=function(a){if(null==a["text-font"]&&
null==a["text-size"]&&null==a["text-color"]&&a["text-field"])return null;var b=e.vW(a["text-size"],16),c=Array.isArray(a["text-font"])&&a["text-font"][0]||"sans-serif";return new _geo.geotoolkit.attributes.eb({color:e.Ph(a["text-color"],a["text-opacity"],"black"),font:b+"px "+c})};e.vIc=function(a,b){if(null==a["text-font"]&&null==a["text-size"]&&null==a["text-color"])return b;var c=b?b.N7a():null,d=c?(0,window.parseFloat)(c.fontsize):16,f=c?c.fontfamily:"sans-serif",c=b?b.ac():"black",d=e.vW(a["text-size"],
d),f=Array.isArray(a["text-font"])&&a["text-font"][0]||f;return new _geo.geotoolkit.attributes.eb({color:e.Ph(a["text-color"],a["text-opacity"],c),font:d+"px "+f})};e.EJc=function(a){if(null==a["line-color"]&&null==a["line-width"])return null;var b=e.vW(a["line-width"],1);return new _geo.geotoolkit.attributes.Aa({width:b,color:e.Ph(a["line-color"],a["line-opacity"],"black"),pattern:Array.isArray(a["line-dasharray"])?a["line-dasharray"].map(function(a){return a*b}):null,linejoin:a["line-join"]||_geo.geotoolkit.attributes.Aa.bO.Zaa,
linecap:a["line-cap"]||_geo.geotoolkit.attributes.Aa.dJ.Rga})};e.xZb=function(a,b){if(null==a["line-color"]&&null==a["line-width"])return b;var c=b?b.aa():1,d=b?b.ac():"black",f=b?b.Ol():null,g=b?b.CQa():_geo.geotoolkit.attributes.Aa.bO.Zaa,h=b?b.hta():_geo.geotoolkit.attributes.Aa.dJ.Rga,k=e.vW(a["line-width"],c);return new _geo.geotoolkit.attributes.Aa({color:e.Ph(a["line-color"],a["line-opacity"],d),width:k,pattern:Array.isArray(a["line-dasharray"])?a["line-dasharray"].map(function(a){return a*
k}):f,linejoin:a["line-join"]||g,linecap:a["line-cap"]||h})};e.Ph=function(a,b,c){a=e.vW(a,c);b=e.vW(b,null);return null==b?a:_geo.geotoolkit.util.oi.yN(a,255*b)};e.vW=function(a,b){return null==a?b:"object"===typeof a?Array.isArray(a.stops)&&0<a.stops.length?a.stops[0][1]:b:a};e.vvb=function(c){if(!Array.isArray(c)||0===c.length)return d;var f,h,k=c[1],l=c[2],m="$type"===k&&g||"$id"===k&&a||b;switch(c[0]){case "has":return function(a){return void 0!==m.call(k,a)};case "!has":return function(a){return void 0===
m.call(k,a)};case "==":return function(a){return m.call(k,a)===l};case "!=":return function(a){return m.call(k,a)!==l};case ">":return function(a){return m.call(k,a)>l};case ">=":return function(a){return m.call(k,a)>=l};case "<":return function(a){return m.call(k,a)<l};case "<=":return function(a){return m.call(k,a)<=l};case "in":case "!in":var n=c.slice(2);h="!in"===c[0];return function(a){return-1===n.indexOf(m.call(k,a))===h};case "all":var p=[];for(f=1;f<c.length;++f)p.push(e.vvb(c[f]));return function(a){return p.every(function(b){return b(a)})};
case "any":case "none":var q=[];for(f=1;f<c.length;++f)q.push(e.vvb(c[f]));h="any"===c[0];return function(a){return q.some(function(b){return b(a)})===h}}return d};return e}();
_geo.geotoolkit.map.util.Raa=function(){var b=function(){function a(b,c,d){var e={},f=new window.Uint8Array(b,c,10);e.Jka=String.fromCharCode.apply(null,f);if("CntZImage"!==e.Jka.trim())throw Error("Unexpected file identifier string: "+e.Jka);c+=10;var g=new window.DataView(b,c,24);e.xDa=g.getInt32(0,!0);e.VV=g.getInt32(4,!0);e.height=g.getUint32(8,!0);e.width=g.getUint32(12,!0);e.Nua=g.getFloat64(16,!0);c+=24;if(!d)if(g=new window.DataView(b,c,16),e.mask={},e.mask.L4=g.getUint32(0,!0),e.mask.d$=
g.getUint32(4,!0),e.mask.TE=g.getUint32(8,!0),e.mask.maxValue=g.getFloat32(12,!0),c+=16,0<e.mask.TE){d=new window.Uint8Array(Math.ceil(e.width*e.height/8));var g=new window.DataView(b,c,e.mask.TE),f=g.getInt16(0,!0),k=2,m=0;do{if(0<f)for(;f--;)d[m++]=g.getUint8(k++);else for(var u=g.getUint8(k++),f=-f;f--;)d[m++]=u;f=g.getInt16(k,!0);k+=2}while(k<e.mask.TE);if(-32768!==f||m<d.length)throw Error("Unexpected end of mask RLE encoding");e.mask.WOa=d;c+=e.mask.TE}else 0===(e.mask.TE|e.mask.L4|e.mask.maxValue)&&
(e.mask.WOa=new window.Uint8Array(Math.ceil(e.width*e.height/8)));g=new window.DataView(b,c,16);e.Fj={};e.Fj.L4=g.getUint32(0,!0);e.Fj.d$=g.getUint32(4,!0);e.Fj.TE=g.getUint32(8,!0);e.Fj.maxValue=g.getFloat32(12,!0);c+=16;d=e.Fj.d$;f=e.Fj.L4;d+=0<e.width%d?1:0;f+=0<e.height%f?1:0;e.Fj.NOb=[];for(m=k=0;m<f;m++)for(u=0;u<d;u++){var v=0,g=b.byteLength-c,g=new window.DataView(b,c,Math.min(10,g)),w={};e.Fj.NOb[k++]=w;var x=g.getUint8(0);v++;w.encoding=x&63;if(3<w.encoding)throw Error("Invalid block encoding ("+
w.encoding+")");if(2===w.encoding)c++;else{if(0!==x&&2!==x){x>>=6;w.Lyd=x;if(2===x)w.offset=g.getInt8(1),v++;else if(1===x)w.offset=g.getInt16(1,!0),v+=2;else if(0===x)w.offset=g.getFloat32(1,!0),v+=4;else throw Error("Invalid block offset type");if(1===w.encoding)if(x=g.getUint8(v),v++,w.MOb=x&63,x>>=6,w.Jyd=x,2===x)w.I9a=g.getUint8(v),v++;else if(1===x)w.I9a=g.getUint16(v,!0),v+=2;else if(0===x)w.I9a=g.getUint32(v,!0),v+=4;else throw Error("Invalid valid pixel count type");}c+=v;if(3!==w.encoding)if(0===
w.encoding){x=(e.Fj.TE-1)/4;if(x!==Math.floor(x))throw Error("uncompressed block has invalid length");g=new window.ArrayBuffer(4*x);v=new window.Uint8Array(g);v.set(new window.Uint8Array(b,c,4*x));g=new window.Float32Array(g);w.o0b=g;c+=4*x}else 1===w.encoding&&(x=Math.ceil(w.I9a*w.MOb/8),g=Math.ceil(x/4),g=new window.ArrayBuffer(4*g),v=new window.Uint8Array(g),v.set(new window.Uint8Array(b,c,x)),w.R6b=new window.Uint32Array(g),c+=x)}}e.Hsa=c;return e}function b(a,c,d,f,g){var k=0,q=a.Fj.d$,m=a.Fj.L4,
u=Math.floor(a.width/q),v=Math.floor(a.height/m),w=2*a.Nua,x=Number.MAX_VALUE;d=d||(a.mask?a.mask.WOa:null);var A;c=new c(a.width*a.height);g&&d&&(A=new window.Uint8Array(a.width*a.height));for(var z=new window.Float32Array(u*v),C,D,E=0;E<=m;E++){var F=E!==m?v:a.height%m;if(0!==F)for(var K=0;K<=q;K++){var H=K!==q?u:a.width%q;if(0!==H){var G=E*a.width*v+K*u,J=a.width-H,I=a.Fj.NOb[k],O=[],M=0,L=0;2>I.encoding?(0===I.encoding?O=I.o0b:(e(I.R6b,I.MOb,I.I9a,I.offset,w,z,a.Fj.maxValue),O=z),M=0):L=2===I.encoding?
0:I.offset;var N;if(d)for(D=0;D<F;D++){G&7&&(N=d[G>>3],N<<=G&7);for(C=0;C<H;C++)G&7||(N=d[G>>3]),N&128?(A&&(A[G]=1),g=2>I.encoding?O[M++]:L,x=x>g?g:x,c[G++]=g):(A&&(A[G]=0),c[G++]=f),N<<=1;G+=J}else if(2>I.encoding)for(D=0;D<F;D++){for(C=0;C<H;C++)g=O[M++],x=x>g?g:x,c[G++]=g;G+=J}else for(x=x>L?L:x,D=0;D<F;D++){for(C=0;C<H;C++)c[G++]=L;G+=J}if(1===I.encoding&&M!==I.I9a)throw Error("Block and Mask do not match");k++}}}return{cT:c,A_:A,minValue:x}}function e(a,b,c,d,e,f,g){var k=(1<<b)-1,u=0,v,w=0,
x,A,z=Math.ceil((g-d)/e);v=4*a.length-Math.ceil(b*c/8);a[a.length-1]<<=8*v;for(v=0;v<c;v++)0===w&&(A=a[u++],w=32),w>=b?(x=A>>>w-b&k,w-=b):(w=b-w,x=(A&k)<<w&k,A=a[u++],w=32-w,x+=A>>>w),f[v]=x<z?d+x*e:g;return f}function c(a){for(var b=a.Fj.d$*a.Fj.L4,c={},d=0;d<b;d++){var e=a.Fj.NOb[d];0===e.encoding?c.kwd=!0:1===e.encoding?c[e.MOb]=!0:c[0]=!0}return Object.keys(c)}function f(a){return{Jka:a.Jka,xDa:a.xDa,VV:a.VV,height:a.height,width:a.width,Nua:a.Nua,Hsa:a.Hsa,mask:a.mask?{d$:a.mask.d$,L4:a.mask.L4,
TE:a.mask.TE,maxValue:a.mask.maxValue}:null,Fj:{d$:a.Fj.d$,L4:a.Fj.L4,TE:a.Fj.TE,maxValue:a.Fj.maxValue,s_:a.s_}}}var k={Qbd:-3.4027999387901484E38,decode:function(e,l){l=l||{};var n=l.D5a||null===l.D5a,n=a(e,l.bSa||0,n),p=null!==l.s_?l.s_:k.Qbd,r=b(n,l.mva||window.Float32Array,l.D5a,p,l.bod),p={width:n.width,height:n.height,Z_b:r.cT,minValue:r.minValue,maxValue:n.Fj.maxValue,s_:p};r.A_&&(p.TFa=r.A_);l.aod&&n.mask&&(p.D5a=n.mask.WOa?n.mask.WOa:null);l.ULc&&(p.JPa=f(n),l.Gvd&&(p.JPa.kvd=c(n)));return p}};
return k}(),a=function(){function a(b,d,e){this.WG=b;this.left=d;this.right=e}var b={ySc:function(a,b,d,e,g,n,p,r){var t=(1<<d)-1,q=0,m,u=0,v,w;m=4*a.length-Math.ceil(d*e/8);a[a.length-1]<<=8*m;if(g)for(m=0;m<e;m++)0===u&&(w=a[q++],u=32),u>=d?(v=w>>>u-d&t,u-=d):(u=d-u,v=(w&t)<<u&t,w=a[q++],u=32-u,v+=w>>>u),b[m]=g[v];else for(g=Math.ceil((r-n)/p),m=0;m<e;m++)0===u&&(w=a[q++],u=32),u>=d?(v=w>>>u-d&t,u-=d):(u=d-u,v=(w&t)<<u&t,w=a[q++],u=32-u,v+=w>>>u),b[m]=v<g?n+v*p:r},Xqd:function(a,b,d,e,g,n){var p=
(1<<b)-1,r=0,t=0,q=t=0,m,u=[],q=4*a.length-Math.ceil(b*d/8);a[a.length-1]<<=8*q;for(var v=Math.ceil((n-e)/g),w=0;w<d;w++)0===t&&(m=a[r++],t=32),t>=b?(q=m>>>t-b&p,t-=b):(t=b-t,q=(m&p)<<t&p,m=a[r++],t=32-t,q+=m>>>t),u[w]=q<v?e+q*g:n;u.unshift(e);return u},zSc:function(a,b,d,e,g,n,p,r){var t=(1<<d)-1,q=0,m,u=0,v=0,w,x,A;if(g)for(m=0;m<e;m++)0===u&&(x=a[q++],u=32,v=0),u>=d?(w=x>>>v&t,u-=d,v+=d):(A=d-u,w=x>>>v&t,x=a[q++],u=32-A,w|=(x&(1<<A)-1)<<d-A,v=A),b[m]=g[w];else for(g=Math.ceil((r-n)/p),m=0;m<e;m++)0===
u&&(x=a[q++],u=32,v=0),u>=d?(w=x>>>v&t,u-=d,v+=d):(A=d-u,w=x>>>v&t,x=a[q++],u=32-A,w|=(x&(1<<A)-1)<<d-A,v=A),b[m]=w<g?n+w*p:r;return b},Yqd:function(a,b,d,e,g,n){for(var p=(1<<b)-1,r=0,t=0,q=0,m=0,u=0,v,w=[],x=Math.ceil((n-e)/g),A=0;A<d;A++)0===q&&(v=a[r++],q=32,u=0),q>=b?(m=v>>>u&p,q-=b,u+=b):(t=b-q,m=v>>>u&p,v=a[r++],q=32-t,m|=(v&(1<<t)-1)<<b-t,u=t),w[A]=m<x?e+m*g:n;w.unshift(e);return w},cld:function(a,b,d,e){var g=(1<<d)-1,n=0,p=0,r,t;r=4*a.length-Math.ceil(d*e/8);a[a.length-1]<<=8*r;for(var q=
0;q<e;q++)0===p&&(t=a[n++],p=32),p>=d?(r=t>>>p-d&g,p-=d):(p=d-p,r=(t&g)<<p&g,t=a[n++],p=32-p,r+=t>>>p),b[q]=r;return b},dld:function(a,b,d,e){for(var g=(1<<d)-1,n=0,p=0,r=0,t,q,m,u=0;u<e;u++)0===p&&(q=a[n++],p=32,r=0),p>=d?(t=q>>>r&g,p-=d,r+=d):(m=d-p,t=q>>>r&g,q=a[n++],p=32-m,t|=(q&(1<<m)-1)<<d-m,r=m),b[u]=t;return b}},e={IXc:12,i$c:function(a){for(var b=65535,d=65535,e=a.length,g=Math.floor(e/2),n=0;g;){var p=359<=g?359:g,g=g-p;do b+=a[n++]<<8,d+=b+=a[n++];while(--p);b=(b&65535)+(b>>>16);d=(d&65535)+
(d>>>16)}e&1&&(d+=b+=a[n]<<8);return((d&65535)+(d>>>16)<<16|(b&65535)+(b>>>16))>>>0},Mmd:function(a,b){var d=b.ik,e=new window.Uint8Array(a,d,6),g={};g.Jka=String.fromCharCode.apply(null,e);if(0!==g.Jka.lastIndexOf("Lerc2",0))throw Error("Unexpected file identifier string (expect Lerc2): "+g.Jka);var d=d+6,e=new window.DataView(a,d,8),n=e.getInt32(0,!0);g.xDa=n;d+=4;3<=n&&(g.Ptc=e.getUint32(4,!0),d+=4);e=new window.DataView(a,d,12);g.height=e.getUint32(0,!0);g.width=e.getUint32(4,!0);d+=8;4<=n?(g.e$=
e.getUint32(8,!0),d+=4):g.e$=1;e=new window.DataView(a,d,40);g.Yua=e.getUint32(0,!0);g.BZb=e.getInt32(4,!0);g.LCa=e.getInt32(8,!0);g.VV=e.getInt32(12,!0);g.Nua=e.getFloat64(16,!0);g.z8b=e.getFloat64(24,!0);g.xcb=e.getFloat64(32,!0);d+=40;b.Zt=g;b.ik=d;if(3<=n&&(d=this.i$c(new window.Uint8Array(a,d-(4<=n?52:48),g.LCa-14)),d!==g.Ptc))throw Error("Checksum failed.");return!0},U9c:function(a,b){var d=b.Zt,e=this.rzc(d.VV),g=d.e$*this.nrb(d.VV),n=this.GKc(a,b.ik,e,g),e=this.GKc(a,b.ik+g,e,g);b.ik+=2*g;
for(var p=!0,g=0;g<d.e$;g++)if(n[g]!==e[g]){p=!1;break}d.yIc=n;d.rZb=e;return p},GKc:function(a,b,d,e){if(d===window.Uint8Array)a=new window.Uint8Array(a,b,e);else{var g=new window.ArrayBuffer(e),n=new window.Uint8Array(g);n.set(new window.Uint8Array(a,b,e));a=new d(g)}return a},Qmd:function(a,b){var d=b.ik,e=b.Zt,g=e.width*e.height,n=e.Yua,p=new window.DataView(a,d,4),e={};e.TE=p.getUint32(0,!0);d+=4;if((0===n||g===n)&&0!==e.TE)throw Error("invalid mask");if(0===n)n=new window.Uint8Array(Math.ceil(g/
8)),e.WOa=n,p=new window.Uint8Array(g),b.Fj.A_=p,d+=e.TE;else if(0<e.TE){var n=new window.Uint8Array(Math.ceil(g/8)),p=new window.DataView(a,d,e.TE),r=p.getInt16(0,!0),t=2,q=0,m=0;do{if(0<r)for(;r--;)n[q++]=p.getUint8(t++);else for(m=p.getUint8(t++),r=-r;r--;)n[q++]=m;r=p.getInt16(t,!0);t+=2}while(t<e.TE);if(-32768!==r||q<n.length)throw Error("Unexpected end of mask RLE encoding");p=new window.Uint8Array(g);for(t=r=0;t<g;t++)t&7?(r=n[t>>3],r<<=t&7):r=n[t>>3],r&128&&(p[t]=1);b.Fj.A_=p;e.WOa=n;d+=e.TE}b.ik=
d;b.mask=e;return!0},Jmd:function(a,b,d){var g=b.ik,l=b.Zt,n=l.e$,p=l.width*l.height,r=l.VV,l=l.Yua*e.nrb(r)*n,r=b.Fj.A_;if(d===window.Uint8Array)a=new window.Uint8Array(a,g,l);else{var t=new window.ArrayBuffer(l),q=new window.Uint8Array(t);q.set(new window.Uint8Array(a,g,l));a=new d(t)}if(a.length===p*n)b.Fj.cT=a;else if(b.Fj.cT=new d(p*n),q=d=0,1<n)for(var m=0;m<n;m++)for(q=m*p,t=0;t<p;t++)r[t]&&(b.Fj.cT[q+t]=a[d++]);else for(t=0;t<p;t++)r[t]&&(b.Fj.cT[t]=a[d++]);b.ik=g+l;return!0},Omd:function(b,
d){var k=this.IXc,h=new window.DataView(b,d.ik,16);d.ik+=16;var l=h.getInt32(0,!0);if(2>l)throw Error("unsupported Huffman version");var l=h.getInt32(4,!0),n=h.getInt32(8,!0),h=h.getInt32(12,!0);if(n>=h)return!1;var p=new window.Uint32Array(h-n);e.Ivc(b,d,p);var r=[],t,q,m;for(t=n;t<h;t++)q=t-(t<l?0:l),r[q]={first:p[t-n],fab:null};t=b.byteLength-d.ik;var p=Math.ceil(t/4),p=new window.ArrayBuffer(4*p),u=new window.Uint8Array(p);u.set(new window.Uint8Array(b,d.ik,t));var p=new window.Uint32Array(p),
u=0,v,w=0;v=p[0];for(t=n;t<h;t++)q=t-(t<l?0:l),m=r[q].first,0<m&&(r[q].fab=v<<u>>>32-m,32-u>=m?(u+=m,32===u&&(u=0,w++,v=p[w])):(u+=m-32,w++,v=p[w],r[q].fab|=v>>>32-u));var x=v=0,A=new a;for(t=0;t<r.length;t++)void 0!==r[t]&&(v=Math.max(v,r[t].first));var x=v>=k?k:v,k=[],z,C;for(t=n;t<h;t++)if(q=t-(t<l?0:l),m=r[q].first,0<m)if(n=[m,q],m<=x)for(q=r[q].fab<<x-m,z=1<<x-m,m=0;m<z;m++)k[q|m]=n;else for(q=r[q].fab,z=A,--m;0<=m;m--)(C=q>>>m&1)?(z.right||(z.right=new a),z=z.right):(z.left||(z.left=new a),
z=z.left),0!==m||z.WG||(z.WG=n[1]);return{Kbd:k,pkd:x,okd:v,szb:A,R6b:p,kqd:w,G8c:u}},Nmd:function(a,b,d){var e=b.Zt,g=e.e$,n=b.Zt.height,p=b.Zt.width,r=p*n,t=this.Omd(a,b);a=t.Kbd;var q=t.szb,m=t.R6b,u=t.kqd,v=t.G8c,w=t.pkd,t=t.okd,x=0===b.Zt.VV?128:0,A,z,C=b.Fj.A_,D,E,F,K,H,G,J=0;0<v&&(u++,v=0);var I=m[u],O=1===b.Gcd,M=new d(r*g),L=M,N;for(N=0;N<e.e$;N++){1<g&&(L=new d(M.buffer,r*N,r),J=0);if(b.Zt.Yua===p*n)for(F=H=0;F<n;F++)for(K=0;K<p;K++,H++){z=0;A=D=I<<v>>>32-w;32-v<w&&(A=D|=m[u+1]>>>64-v-w);
if(a[A])z=a[A][1],v+=a[A][0];else for(D=I<<v>>>32-t,32-v<t&&(D|=m[u+1]>>>64-v-t),A=q,G=0;G<t;G++)if(A=(E=D>>>t-G-1&1)?A.right:A.left,!A.left&&!A.right){z=A.WG;v=v+G+1;break}32<=v&&(v-=32,u++,I=m[u]);z-=x;O?(z=0<K?z+J:0<F?z+L[H-p]:z+J,z&=255,J=L[H]=z):L[H]=z}else for(F=H=0;F<n;F++)for(K=0;K<p;K++,H++)if(C[H]){z=0;A=D=I<<v>>>32-w;32-v<w&&(A=D|=m[u+1]>>>64-v-w);if(a[A])z=a[A][1],v+=a[A][0];else for(D=I<<v>>>32-t,32-v<t&&(D|=m[u+1]>>>64-v-t),A=q,G=0;G<t;G++)if(A=(E=D>>>t-G-1&1)?A.right:A.left,!A.left&&
!A.right){z=A.WG;v=v+G+1;break}32<=v&&(v-=32,u++,I=m[u]);z-=x;O?(z=0<K&&C[H-1]?z+J:0<F&&C[H-p]?z+L[H-p]:z+J,z&=255,J=L[H]=z):L[H]=z}b.ik=b.ik+4*(u+1)+(0<v?4:0)}b.Fj.cT=M},Ivc:function(a,e,g,h,l){var n=e.Zt,p=n.xDa,r=0,t=new window.DataView(a,e.ik,5),q=t.getUint8(0);r++;var m=q>>6,u=0===m?4:3-m,v=0<(q&32),m=q&31,q=0;if(1===u)q=t.getUint8(r),r++;else if(2===u)q=t.getUint16(r,!0),r+=2;else if(4===u)q=t.getUint32(r,!0),r+=4;else throw Error("Invalid valid pixel count type");var u=2*n.Nua,w,x;l=1<n.e$?
n.rZb[l]:n.xcb;if(v){e.d5a.kjd++;v=t.getUint8(r);r++;n=Math.ceil((v-1)*m/8);w=Math.ceil(n/4);w=new window.ArrayBuffer(4*w);x=new window.Uint8Array(w);e.ik+=r;x.set(new window.Uint8Array(a,e.ik,n));r=new window.Uint32Array(w);e.ik+=n;for(t=0;v-1>>>t;)t++;n=Math.ceil(q*t/8);w=Math.ceil(n/4);w=new window.ArrayBuffer(4*w);x=new window.Uint8Array(w);x.set(new window.Uint8Array(a,e.ik,n));a=new window.Uint32Array(w);e.ik+=n;e=3<=p?b.Yqd(r,m,v-1,h,u,l):b.Xqd(r,m,v-1,h,u,l);3<=p?b.zSc(a,g,t,q,e):b.ySc(a,
g,t,q,e)}else e.d5a.I8c++,t=m,e.ik+=r,0<t&&(n=Math.ceil(q*t/8),w=Math.ceil(n/4),w=new window.ArrayBuffer(4*w),x=new window.Uint8Array(w),x.set(new window.Uint8Array(a,e.ik,n)),a=new window.Uint32Array(w),e.ik+=n,3<=p?null==h?b.dld(a,g,t,q):b.zSc(a,g,t,q,!1,h,u,l):null==h?b.cld(a,g,t,q):b.ySc(a,g,t,q,!1,h,u,l))},HKc:function(a,b,d){var g=b.Zt,l=g.width,n=g.height,p=g.BZb,r=g.VV,t=e.nrb(r),q=Math.ceil(l/p),m=Math.ceil(n/p);b.Fj.L4=m;b.Fj.d$=q;for(var u=b.Fj.ik=0,v=0,w=0,x=0,A=0,z=0,C=0,D=0,E=u=0,F=
0,K=0,C=C=u=C=0,H,G=new d(p*p),J=n%p||p,I=l%p||p,g=g.e$,O,M=b.Fj.A_,L=b.Fj.cT,w=0;w<m;w++)for(A=w!==m-1?p:J,x=0;x<q;x++)for(z=x!==q-1?p:I,F=w*l*p+x*p,K=l-z,O=0;O<g;O++){1<g&&(L=new d(b.Fj.cT.buffer,l*n*O*t,l*n));C=a.byteLength-b.ik;v=new window.DataView(a,b.ik,Math.min(10,C));H={};C=0;D=v.getUint8(0);C++;u=D>>6&255;E=D>>2&15;if(E!==(x*p>>3&15))throw Error("integrity issue");D&=3;if(3<D)throw b.ik+=C,Error("Invalid block encoding ("+D+")");if(2===D)b.d5a.constant++,b.ik+=C;else if(0===D){b.d5a.Tqd++;
b.ik+=C;C=A*z*t;u=a.byteLength-b.ik;C=C<u?C:u;u=new window.ArrayBuffer(0===C%t?C:C+t-C%t);v=new window.Uint8Array(u);v.set(new window.Uint8Array(a,b.ik,C));H=new d(u);C=0;if(M)for(u=0;u<A;u++){for(v=0;v<z;v++)M[F]&&(L[F]=H[C++]),F++;F+=K}else for(u=0;u<A;u++){for(v=0;v<z;v++)L[F++]=H[C++];F+=K}b.ik+=C*t}else if(u=e.ied(r,u),H=e.jfd(H,C,u,v),C+=e.nrb(u),3===D)if(b.ik+=C,b.d5a.u$c++,M)for(u=0;u<A;u++){for(v=0;v<z;v++)M[F]&&(L[F]=H),F++;F+=K}else for(u=0;u<A;u++){for(v=0;v<z;v++)L[F++]=H;F+=K}else if(b.ik+=
C,e.Ivc(a,b,G,H,O),C=0,M)for(u=0;u<A;u++){for(v=0;v<z;v++)M[F]&&(L[F]=G[C++]),F++;F+=K}else for(u=0;u<A;u++){for(v=0;v<z;v++)L[F++]=G[C++];F+=K}}},mdd:function(a){return{Jka:a.Zt.Jka,xDa:a.Zt.xDa,VV:a.Zt.VV,height:a.Zt.height,width:a.Zt.width,Yua:a.Zt.Yua,BZb:a.Zt.BZb,LCa:a.Zt.LCa,Nua:a.Zt.Nua,mva:e.tfd(a.Zt.VV),Hsa:a.Hsa,mask:a.mask?{TE:a.mask.TE}:null,Fj:{d$:a.Fj.d$,L4:a.Fj.L4,maxValue:a.Zt.xcb,minValue:a.Zt.z8b,s_:a.s_}}},Euc:function(a){var b=a.Zt.xcb,d=a.Zt.e$,e=a.Zt.height*a.Zt.width,g=e*d,
n,p=0,r=a.Fj.A_;if(r)if(1<d)for(g=0;g<d;g++)for(p=g*e,n=0;n<e;n++)r[n]&&(a.Fj.cT[p+n]=b);else for(n=0;n<e;n++)r[n]&&(a.Fj.cT[n]=b);else if(a.Fj.cT.fill)a.Fj.cT.fill(b);else for(n=0;n<g;n++)a.Fj.cT[n]=b},rzc:function(a){switch(a){case 0:return window.Int8Array;case 1:return window.Uint8Array;case 2:return window.Int16Array;case 3:return window.Uint16Array;case 4:return window.Int32Array;case 5:return window.Uint32Array;case 6:return window.Float32Array;case 7:return window.Float64Array;default:return window.Float32Array}},
tfd:function(a){switch(a){case 0:return"S8";case 1:return"U8";case 2:return"S16";case 3:return"U16";case 4:return"S32";case 5:return"U32";case 6:return"F32";case 7:return"F64";default:return"F32"}},qid:function(a,b){if(null==b)return!1;switch(a){case 0:return-128<=b&&127>=b;case 1:return 0<=b&&255>=b;case 2:return-32768<=b&&32767>=b;case 3:return 0<=b&&65536>=b;case 4:return-2147483648<=b&&2147483647>=b;case 5:return 0<=b&&4294967296>=b;case 6:return-3.4027999387901484E38<=b&&3.4027999387901484E38>=
b;case 7:return 4.9E-324<=b&&1.7976931348623157E308>=b;default:return!1}},nrb:function(a){switch(a){case 0:case 1:return 1;case 2:case 3:return 2;case 4:case 5:case 6:return 4;case 7:return 8;default:return a}},ied:function(a,b){switch(a){case 2:case 4:return a-b;case 3:case 5:return a-2*b;case 6:return 0===b?a:1===b?2:1;case 7:return 0===b?a:a-2*b+1;default:return a}},jfd:function(a,b,d,e){switch(d){case 0:return e.getInt8(b);case 1:return e.getUint8(b);case 2:return e.getInt16(b,!0);case 3:return e.getUint16(b,
!0);case 4:return e.getInt32(b,!0);case 5:return e.txd(b,!0);case 6:return e.getFloat32(b,!0);case 7:return e.getFloat64(b,!0);default:throw Error("the decoder does not understand this pixel type");}}};return{decode:function(a,b){b=b||{};var d=b.s_,g={};g.ik=b.bSa||0;g.Fj={};if(!e.Mmd(a,g))return null;var l=g.Zt,n=l.xDa,p=e.rzc(l.VV);e.Qmd(a,g);l.Yua===l.width*l.height||g.Fj.A_||(g.Fj.A_=b.TFa);var r=l.width*l.height;g.Fj.cT=new p(r*l.e$);g.d5a={Qyd:0,Tqd:0,kjd:0,I8c:0,constant:0,u$c:0};if(0!==l.Yua)if(l.xcb===
l.z8b)e.Euc(g);else if(4<=n&&e.U9c(a,g))e.Euc(g);else{var t=new window.DataView(a,g.ik,2),q=t.getUint8(0);g.ik++;if(q)e.Jmd(a,g,p);else if(1<n&&1>=l.VV&&1E-5>Math.abs(l.Nua-.5)){t=t.getUint8(1);g.ik++;g.Gcd=t;if(2<t||4>n&&1<t)throw Error("Invalid Huffman flag "+t);t?e.Nmd(a,g,p):e.HKc(a,g,p)}else e.HKc(a,g,p)}g.Hsa=g.ik;b.bSa?(n=g.Zt.LCa+b.bSa-g.ik,1<=Math.abs(n)&&(g.Hsa=b.bSa+g.Zt.LCa)):(n=g.Zt.LCa-g.ik,1<=Math.abs(n)&&(g.Hsa=g.Zt.LCa));n={width:l.width,height:l.height,Z_b:g.Fj.cT,minValue:l.z8b,
maxValue:l.xcb,JAd:l.Yua,Wvc:l.e$,Xvc:{yIc:l.yIc,rZb:l.rZb},TFa:g.Fj.A_};if(g.Fj.A_&&e.qid(l.VV,d)){l=g.Fj.A_;for(p=0;p<r;p++)l[p]||(n.Z_b[p]=d);n.s_=d}g.s_=d;b.ULc&&(n.JPa=e.mdd(g));return n}}}();return{decode:function(g,d){if(!_geo.geotoolkit.util.Math.Q8a())throw Error("Big endian system is not supported.");d=d||{};var e=d.bSa||0,c=new window.Uint8Array(g,e,10),c=String.fromCharCode.apply(null,c),f,k;if("CntZImage"===c.trim())f=b,k=1;else if("Lerc2"===c.substring(0,5))f=a,k=2;else throw Error("Unexpected file identifier string: "+
c);for(var h=0,l=g.byteLength-10,n,c=[],p,r={width:0,height:0,Fj:[],mva:d.mva,mask:null,Ts:[]};e<l;){var t=f.decode(g,{bSa:e,D5a:n,TFa:p,bod:0===h,aod:0===h,ULc:!0,mva:d.mva||null,s_:d.s_||null}),e=t.JPa.Hsa;0===h&&(n=t.D5a,p=t.TFa,r.width=t.width,r.height=t.height,r.Wvc=t.Wvc||1,r.mva=t.mva||t.JPa.mva,r.mask=t.TFa);1<k&&t.JPa.mask&&0<t.JPa.mask.TE&&c.push(t.TFa);h++;r.Fj.push(t.Z_b);r.Ts.push({minValue:t.minValue,maxValue:t.maxValue,s_:t.s_,Xvc:t.Xvc})}if(1<k&&1<c.length){k=r.width*r.height;r.ivd=
c;p=new window.Uint8Array(k);p.set(c[0]);for(n=1;n<c.length;n++)for(e=c[n],f=0;f<k;f++)p[f]&=e[f];r.TFa=p}return r}}}();
_geo.geotoolkit.map.util.nB=function(){function b(){}var a,g;_geo.geotoolkit.da(b,"geotoolkit.map.util.XML");b.parse=function(b){a=a||new _geo.geotoolkit.window.DOMParser;b=a.parseFromString(b,"text/xml");if("parsererror"===b.nodeName||0<b.getElementsByTagName("parsererror").length)throw Error("Wrong XML received!");return b};b.AW=function(a,b,c){if(!a)return c?[]:null;g=g||new _geo.geotoolkit.util.hX;b=b.split(", ");if(!g.isIE&&!g.isEdge)return b=b.map(function(a){return":scope > "+a}),b=b.join(", "),
c?a.querySelectorAll(b):a.querySelector(b);a="#document"===a.nodeName?a.childNodes:[a];for(var f=[],k=0;k<a.length;++k)for(var h=a[k].childNodes,l=0;l<h.length;++l)if(0<=b.indexOf(h[l].nodeName)){if(!c)return h[l];f.push(h[l])}return c?f:null};b.Ji=function(a){if(a.children)return a.children;var b=[];a=a.childNodes;for(var c=0;c<a.length;++c)"#text"!==a[c].nodeName&&"#comment"!==a[c].nodeName&&b.push(a[c]);return b};b.lIa=function(a){var e=b.Ji(a);if(0===e.length)return a.textContent;a={};for(var c=
0;c<e.length;++c){var f=e[c].nodeName.toLowerCase(),g=b.lIa(e[c]);null!=g&&(null==a[f]?a[f]=g:Array.isArray(a[f])?a[f].push(g):a[f]=[a[f],g])}return a};return b}();
_geo.geotoolkit.map.Map=function(){function b(a){var b={model:null,north:void 0,south:void 0,east:void 0,west:void 0,annotationssizes:{west:0,east:0,north:0,south:0},tools:{horizontalscroll:{visible:!1},verticalscroll:{visible:!1}},bounds:new _geo.geotoolkit.util.Rect(0,0,300,300),border:{color:"white"},system:_geo.geotoolkit.map.Mw.wba,maplimits:null,layerscontainer:null,wrapped:!1,viewcache:!1,viewcachesize:{width:256,height:256},zoom:{min:0,max:window.Infinity,speed:1.5,time:400},viewcachemode:_geo.geotoolkit.scene.Cache.Uga.Egb,
viewcachememorylimit:null,viewcacheasync:!1,tooltip:{divelement:null,offsetx:10,offsety:-10,alignment:_geo.geotoolkit.util.Da.Gg,mode:_geo.geotoolkit.controls.ia.er.IT,max:1,autoupdate:!0},webmap:null,scaleunit:_geo.geotoolkit.util.zf.Za().Tb("px")};this.wmb=d;this.zR=this.M2=this.wpa=this.dNa=null;this.wda=0;this.la=_geo.geotoolkit.Sb(a,b);this.yi=null!=this.la.layerscontainer?this.la.layerscontainer:new _geo.geotoolkit.scene.Group;null==this.la.model&&(this.la.wrapped?(this.la.model=new _geo.geotoolkit.scene.lGb({clipchild:!0,
wrapped:this.la.wrapped}),this.la.model.pab(this.yi,!0)):this.la.model=new _geo.geotoolkit.scene.Group);!0===this.la.viewcache&&this.yi.Tl(new _geo.geotoolkit.scene.Rk(this.la.viewcachesize.width,this.la.viewcachesize.height,this.la.viewcachemode,this.la.viewcachememorylimit,this.la.viewcacheasync));null==this.la.layerscontainer&&this.la.model.oh(0,this.yi);_geo.geotoolkit.oa.Wg.call(this,this.la);this.Mc().Qf(!0);this.TR=new _geo.geotoolkit.scene.oDb({keepAspectRatio:!0,horizontalAlignment:"center",
verticalAlignment:"center",wrapped:this.la.wrapped});this.vQ(this.TR);a=this.la.system;this.Lja="string"===typeof a?_geo.geotoolkit.map.Nd.ue.lq().Lu(a):a;this.ct=function(){this.P7b()}.bind(this);this.jqc=function(){this.mOa.Czb()}.bind(this);this.setOptions(this.la);null!=this.la.webmap&&_geo.geotoolkit.map.util.Lhb.load(this,this.la.webmap);null==this.la.maplimits&&this.jC(this.Lja.xr())}var a=1.25,g=3,d=_geo.geotoolkit.util.zf.Za().Tb("px");_geo.geotoolkit.fa(b,_geo.geotoolkit.oa.Wg);_geo.geotoolkit.da(b,
"geotoolkit.map.Map");b.$={mJc:"LayerAdded",nJc:"LayerRemoved",m_b:"LayersModified",aF:"onZoomStart",au:"onZoomEnd",ks:"onDoubleClick",sW:"onResize"};b.prototype.baa=function(a,b){return this.cb(a,b,this.Lja)};b.prototype.bcb=function(a,b){return this.cb(a,this.Lja,b)};b.prototype.cb=function(a,b,d){b=b instanceof _geo.geotoolkit.map.Nd.tq?b:_geo.geotoolkit.map.Nd.ue.lq().Lu(b);d=d instanceof _geo.geotoolkit.map.Nd.tq?d:_geo.geotoolkit.map.Nd.ue.lq().Lu(d);if(null!=b&&null!=d){if(null==this.M2||this.M2.jI()!==
b||this.M2.Dv()!==d)this.M2=d.Tea(b);return this.M2.transform(a)}return null};b.prototype.$od=function(a){null==a&&null!=this.zR&&this.zR.getParent().removeChild(this.zR);a instanceof _geo.geotoolkit.scene.shapes.Image&&(null!=this.zR&&this.zR.getParent().removeChild(this.zR),this.zR=a,this.zR.Cd(_geo.geotoolkit.util.Da.cl),this.zR.Ss(!0),this.zR.yc(this.Mc().ga().za(),this.Mc().ga().wa()),this.Mc().getParent().va(this.zR));return this};b.prototype.jCc=function(){return this.zR};b.prototype.zoom=
function(a,b,d){var g=a;if(0!==this.la.zoom.min||window.Infinity!==this.la.zoom.max){var h=this.Fta(),l=1/(h*a);1>a&&l>this.la.zoom.max?g=1/(this.la.zoom.max*h):1<a&&l<this.la.zoom.min&&(g=1/(this.la.zoom.min*h))}this.vt(g,g,b,d);return this};b.prototype.iga=function(a,b){this.Mc().h0();b&&(a/=this.hAc());a=this.wmb.convert(a,d);0!==this.la.zoom.min&&(a=Math.min(a,1/this.la.zoom.min));window.Infinity!==this.la.zoom.max&&(a=Math.max(a,1/this.la.zoom.max));var f=Math.abs(a/this.Mc().Ya().Ab()),g=Math.abs(a/
this.Mc().Ya().Pb());this.vt(f,g);return this};b.prototype.Fta=function(a){this.Mc().h0();var b=Math.abs(this.Mc().Ya().Ab());a&&(b*=this.hAc());return d.convert(b,this.wmb)};b.prototype.jb=function(){var a={};a.maplimits=null===this.dNa?null:this.dNa.clone();a.mapimage=this.zR;a.system=this.Lja;a.mapscale=this.Fta();a.mapscaleobject=this.b2;a.scaleunit=this.FA();return a};b.prototype.setOptions=function(a){void 0!==a.mapimage&&this.$od(a.mapimage);void 0!==a.maplimits&&(this.dNa=a.maplimits,this.jC(this.la.maplimits));
this.Mc().mk(this.Lja.JYb());null!=a.scaleunit&&this.oga(a.scaleunit);void 0!==a.mapscale&&this.iga(a.mapscale);void 0!==a.mapscaleobject&&this.o4b(a.mapscaleobject);return this};b.prototype.sW=function(a,c){this.Ea(a);null!==c&&this.iga(c);var d=this.Mc(),g=d.getParent(),h=g.ga();g.Sa(h);d.Ea(h);null!=this.b2&&this.b2.yc(h.sa(),h.wa());null!=this.zR&&this.zR.yc(h.za(),h.wa());this.Ja(b.$.sW,this,a)};b.prototype.Lu=function(){return this.Lja};b.prototype.Sg=function(){_geo.geotoolkit.oa.Wg.prototype.Sg.call(this);
this.Ze.mk(!0);var a=_geo.geotoolkit.selection.from(this.tb).He('node => id(node) == "manipulator_layer"').B_()[0],c=this.xp.o7a(_geo.geotoolkit.controls.ia.ei.$.YE);this.xp.removeListener(_geo.geotoolkit.controls.ia.ei.$.YE,c).addListener(_geo.geotoolkit.controls.ia.ei.$.YE,function(a,b){var c=b.iD();if("wheel"===c||"mousewheel"===c||"onmousewheel"===c||"DOMMouseScroll"===c){var c=this.xp.UK(b),d=b.th();this.ywc(c,d.deltaY||-d.wheelDelta||d.detail,b)}else this.EPb(),this.wda=0,c=b.Mk(),this.$A(c.x,
c.y),this.or.Qwa()}.bind(this));this.xp.addListener(_geo.geotoolkit.controls.ia.ei.$.ks,function(a,c){var d=this.xp.UK(c);this.wda=0;this.Ja(b.$.ks,this,c);this.ywc(d,-Math.sign(this.la.zoom.speed),c)}.bind(this));this.xp.txb(!0);this.OF.cc(!0).addListener(_geo.geotoolkit.controls.ia.ew.$.aF,function(a,c){this.Ja(b.$.aF,this,c)}.bind(this)).addListener(_geo.geotoolkit.controls.ia.ew.$.au,function(a,c){this.Ja(b.$.au,this,c)}.bind(this));c=this.qw.o7a(_geo.geotoolkit.controls.ia.fc.$.Uu);this.qw.removeListener(_geo.geotoolkit.controls.ia.fc.$.Uu,
c).addListener(_geo.geotoolkit.controls.ia.fc.$.Uu,function(a){a.isEnabled()&&(this.xp.cc(!0),this.OF.cc(!0),this.fM.cc(!1))}.bind(this));c=this.fM.o7a(_geo.geotoolkit.controls.ia.fc.$.Uu);this.fM.removeListener(_geo.geotoolkit.controls.ia.fc.$.Uu,c).setMode(_geo.geotoolkit.controls.ia.tF.TVa).addListener(_geo.geotoolkit.controls.ia.fc.$.Uu,function(a){a.isEnabled()?(this.xp.cc(!1),this.qw.cc(!1),this.OF.cc(!1)):(this.xp.cc(!0),this.OF.cc(!0))}.bind(this));this.Slb=(new _geo.geotoolkit.controls.ia.Soa(a)).cc(!1).addListener(_geo.geotoolkit.controls.ia.fc.$.Xn,
function(a){a.isEnabled()?(this.Sma(),this.fM.cc(!1),this.qw.cc(!1),this.xp.cc(!1),this.OF.cc(!1)):null!=this.nr&&(this.or.cc(this.nr.Epb),this.fM.cc(this.nr.p1b),this.qw.cc(this.nr.selection),this.xp.cc(this.nr.tvb),this.OF.cc(this.nr.VJc),this.nr=null)}.bind(this));a=this.xY.f8a(this.xp);this.xY.gs(a,this.Slb);this.mOa=new _geo.geotoolkit.controls.ia.hZa({divelement:this.la.tooltip.divelement,offsetx:this.la.tooltip.offsetx,offsety:this.la.tooltip.offsety,alignment:this.la.tooltip.alignment,mode:this.la.tooltip.mode,
autoupdate:this.la.tooltip.autoupdate,group:this.yi,callback:function(a,b,c){var d=this.isb(),e="",g=this.la.tooltip.max;b=b.target&&c.qG(b)?c.FRa():c.YQa();for(--d;0<=d&&0<g;--d){c=this.AA(d);var r=c.j4();if(null!==r){var t=c.Un(a,b);t&&(t.length>g&&(t.sort(_geo.geotoolkit.map.util.oF.quc),t.length=g),g-=t.length);e="function"===typeof r?r.call(c,t,e,a):r.format(t,e,a)}}return e}.bind(this)});this.xY.gs(a+1,this.mOa)};b.prototype.d4b=function(a){for(var b=0;b<this.isb();++b){var d=this.AA(b);d instanceof
_geo.geotoolkit.map.layers.kba&&d.yod(a)}this.ma();return this};b.prototype.ZF=function(a){return this.pYb(a,null)};b.prototype.jC=function(a){var b,d=this.Mc().Yb(),d=d?d.Ab():0;(d=!_geo.geotoolkit.util.Math.equals(d,this.la.wrapped?3:1))&&(b=this.Fta(!0));a&&this.la.wrapped&&!_geo.geotoolkit.util.Math.equals(a.aa(),this.Lu().xr().aa())&&(this.TR.setOptions({wrapped:!1}),this.Mc().D6b(!1));_geo.geotoolkit.oa.Wg.prototype.jC.call(this,a);d&&this.iga(b,!0);this.ma();return this};b.prototype.FM=function(){if(null==
this.dNa){var a=this.ga();if(null==a)return null;null==this.wpa&&this.P7b();return this.wpa}return this.dNa.Mi()};b.prototype.o4b=function(a){null!=this.b2&&this.b2.getParent().removeChild(this.b2);this.b2=a;null!=this.b2&&(a=_geo.geotoolkit.scene.shapes.Fn.U8(this.Mc().ga(),a.tw()),this.b2.yc(a),this.Mc().getParent().va(this.b2),this.b2.gIc(this));return this};b.prototype.hCc=function(){var a=this.Mc().Nb(!0);return a.getCenter()};b.prototype.NSa=function(a,b,d){function g(a,b,c,d){function e(){var b=
Math.min(Date.now(),F),g=c?n-(b-E):b-E,g=c?1-g*(p*g+r):g*(p*g+r);D.setX(a.getX()+g*f).setY(a.getY()+g*h).qb(a.aa()+g*k).Db(a.ba()+g*l);t.Mc().os(D,null);b<F?t.V1a=(0,window.setTimeout)(e):(t.V1a=null,d())}var f=b.getX()-a.getX(),h=b.getY()-a.getY(),k=b.aa()-a.aa(),l=b.ba()-a.ba(),D=new _geo.geotoolkit.util.Rect,E=Date.now(),F=E+n;t.V1a=(0,window.setTimeout)(e)}a=this.cb(a,b,this.Lja)||a;if(null==a)return this;this.EPb();b=this.Mc().Nb(!0);var h=b.clone().Wu(a.getX(),a.getY());a=this.Mc().xa();h.sa()<
a.sa()?h.setX(a.sa()):h.za()>a.za()&&h.setX(a.za()-h.aa());h.qa()<a.qa()?h.setY(a.qa()):h.wa()>a.wa()&&h.setY(a.wa()-h.ba());if(!0!==d)return this.Mc().os(h,null),this;var l=b.clone().union(h);d=(b.aa()||1)/(b.ba()||1);l.aa()/l.ba()<d?l.Db(l.aa()/d):l.qb(l.ba()*d);l.Wu((b.Pc()+h.Pc())/2,(b.Qc()+h.Qc())/2);d=new _geo.geotoolkit.util.Rect(h.sa(),h.qa(),b.sa(),b.qa());d=Math.max(d.aa()/h.aa()||1,d.ba()/h.ba()||1);var n=1500;1>d?n=500:3>d&&(n=1E3);var p=-.5/(n*n),r=1.5/n,t=this;this.cd.Vl(!0);g(b,l,!1,
function(){g(l,h,!0,function(){t.cd.Vl(!1)})});return this};b.prototype.isb=function(){return this.yi.Uc()};b.prototype.AA=function(a){return this.yi.vc(a)};b.prototype.iLc=function(a){if(null!=a){var c=this.yi.children.indexOf(a);0<=c&&(this.yi.removeChild(a),this.ma(),a.hb(_geo.geotoolkit.scene.Node.$.ss,this.ct),a.hb(_geo.geotoolkit.map.Qa.$.p6,this.jqc));a.VA(null);this.Ja(b.$.nJc,this,this.yi.children.slice(0))}return this};b.prototype.pYb=function(a,c){if(a instanceof _geo.geotoolkit.map.layers.Gx){var d=
this.yi.nq(a);this.yi.removeChild(a);null!=c&&c<this.yi.Uc()&&0<=c?(this.yi.oh(c,a),this.Ja(b.$.m_b,this,this.yi.children.slice(0))):0>c?(this.yi.oh(0,a),this.Ja(b.$.m_b,this,this.yi.children.slice(0))):this.yi.va(a);-1===d&&(a.VA(this.Lja),this.P7b(),a.kb(_geo.geotoolkit.scene.Node.$.ss,this.ct),a.kb(_geo.geotoolkit.map.Qa.$.p6,this.jqc),this.Ja(b.$.mJc,this,this.yi.children.slice(0)))}else _geo.geotoolkit.log("Layer can not be inserted! It must be based on geotoolkit.map.layers.AbstractLayer");
return this};b.prototype.ywc=function(d,c,f){this.EPb();this.wda=0===this.wda?Math.sign(c):0<this.wda===0<c?_geo.geotoolkit.util.Math.clamp(this.wda*a,-g,g):0;if(0!==this.wda){var k=this.la.zoom.time;c=this.wda*this.la.zoom.speed;var h=0<c?1/c:-c,l=1;c=h;if(0!==this.la.zoom.min||window.Infinity!==this.la.zoom.max){var l=this.Fta(),n=1/(l*h);1>h&&n>this.la.zoom.max?c=1/(this.la.zoom.max*l):1<h&&n<this.la.zoom.min&&(c=1/(this.la.zoom.min*l));l=Math.log(c)/Math.log(h);if(_geo.geotoolkit.util.Math.equals(l,
0))return}this.Ja(b.$.aF,this,f);if(0>=k)this.vt(c,c,d.x,d.y),this.wda=0,this.Ja(b.$.au,this);else{var p=this,r=Date.now(),t=r+k*l,q=function(){var a=Math.min(Date.now(),t),c=Math.pow(h,(a-r)/k);p.vt(c,c,d.x,d.y);a<t?(r=a,p.X3a=(0,window.setTimeout)(q)):(p.wda=0,p.X3a=null,p.d4b(!0),p.Ja(b.$.au,p))};this.d4b(!1);this.X3a=(0,window.setTimeout)(q)}}};b.prototype.Cl=function(){null!=this.b2&&this.b2.gIc(this)};b.prototype.P7b=function(){if(null==this.dNa){var a=this.i9c();a&&a.isEmpty()&&(a=this.wpa);
if(null==this.wpa&&this.wpa!==a||null!==this.wpa&&!this.wpa.Pj(a))this.wpa=a,this.jC(a)}return this};b.prototype.EPb=function(){null!=this.X3a&&((0,window.clearTimeout)(this.X3a),this.X3a=null,this.d4b(!0),this.Ja(b.$.au,this));null!=this.V1a&&((0,window.clearTimeout)(this.V1a),this.V1a=null)};b.prototype.i9c=function(){for(var a=null,b=this.yi.Uc(),d=0;d<b;d++)if(this.yi.vc(d)instanceof _geo.geotoolkit.map.layers.Gx){var g=this.yi.vc(d).xa();null!=g&&(null==a?a=g.clone():a.union(g))}if((b=this.Lja.xr())&&
!b.isEmpty()&&a&&!a.isEmpty()){var h=b.aa()/b.ba(),l=a.aa()/a.ba(),d=a.aa(),g=a.ba();h>l?(d=a.ba()*h,d>b.aa()&&(d=b.aa(),g=d/h)):h<l&&(g=a.aa()/h,g>b.ba()&&(g=b.ba(),d=g*h));h=(d-a.aa())/2;l=(g-a.ba())/2;0!==h&&(a.getX()-b.getX()<h?(a.setX(b.getX()),a.qb(d)):b.za()-a.za()<h?(a.setX(b.za()-d),a.qb(d)):a.fe(h,0));0!==l&&(a.getY()-b.getY()<l?(a.setY(b.getY()),a.Db(g)):b.wa()-a.wa()<l?(a.setY(b.wa()-g),a.Db(g)):a.fe(0,l))}return a};b.prototype.hAc=function(){var a=this.Mc().Nb(),b,d;2E3>a.ba()?(b=this.cb(a.getCenter(),
this.Lu(),_geo.geotoolkit.map.Mw.cB),b=Math.abs(1/Math.cos(b.getY()*Math.PI/180))):4E3>a.ba()?(b=a.di(),d=a.Sn(),b=this.cb(b,this.Lu(),_geo.geotoolkit.map.Mw.cB),d=this.cb(d,this.Lu(),_geo.geotoolkit.map.Mw.cB),b=(Math.abs(1/Math.cos(b.getY()*Math.PI/180))+Math.abs(1/Math.cos(d.getY()*Math.PI/180)))/2):(b=a.di(),d=a.Sn(),a=a.getCenter(),b=this.cb(b,this.Lu(),_geo.geotoolkit.map.Mw.cB),d=this.cb(d,this.Lu(),_geo.geotoolkit.map.Mw.cB),a=this.cb(a,this.Lu(),_geo.geotoolkit.map.Mw.cB),b=(Math.abs(1/Math.cos(b.getY()*
Math.PI/180))+Math.abs(1/Math.cos(d.getY()*Math.PI/180))+Math.abs(4*(1/Math.cos(a.getY()*Math.PI/180))))/6);return b};b.prototype.FA=function(){return this.wmb};b.prototype.oga=function(a){a=_geo.geotoolkit.util.zf.Za().Tb(a);this.wmb=null!=a?a:d;return this};b.prototype.Ea=function(a){var b=this.Fta();_geo.geotoolkit.oa.Wg.prototype.Ea.call(this,a);this.iga(b);return this};return b}();_geo.geotoolkit.map.Zq=_geo.geotoolkit.map.Zq||{};_geo.geotoolkit.map.Zq.PXc=_geo.geotoolkit.map.Wa.Zq.rXa;
_geo.geotoolkit.map.Zq.L0c=_geo.geotoolkit.map.Wa.Zq.Pcb;_geo.geotoolkit.map.Zq.B_c=_geo.geotoolkit.map.Wa.Zq.eAb;_geo.geotoolkit.map.Wa.UXc=_geo.geotoolkit.map.Wa.Zq.Ieb;_geo.geotoolkit.map.Wa.C_c=_geo.geotoolkit.map.Wa.Zq.M0;_geo.geotoolkit.map.qka=_geo.geotoolkit.map.qka||{};_geo.geotoolkit.map.qka.bVc=_geo.geotoolkit.map.Nd.tq;_geo.geotoolkit.map.qka.cVc=_geo.geotoolkit.map.Nd.ue;_geo.geotoolkit.map.qka.AXc=_geo.geotoolkit.map.Nd.cB;_geo.geotoolkit.map.qka.Q1c=_geo.geotoolkit.map.Nd.cza;
_geo.geotoolkit.map.qka.jLa=_geo.geotoolkit.map.Nd.jLa;_geo.geotoolkit.map.qka.pba=_geo.geotoolkit.map.Nd.pba;_geo.geotoolkit.map.qka.JYc=_geo.geotoolkit.map.Nd.PXa;_geo.geotoolkit.map.Ff=_geo.geotoolkit.map.Ff||{};_geo.geotoolkit.map.Ff.H0c=_geo.geotoolkit.map.Wa.Ff.yT;_geo.geotoolkit.map.Ff.r_c=_geo.geotoolkit.map.Wa.Ff.Fc;_geo.geotoolkit.map.Ff.PYc=_geo.geotoolkit.map.Wa.Ff.ou;_geo.geotoolkit.map.Ff.p_c=_geo.geotoolkit.map.Wa.Ff.na;_geo.geotoolkit.map.Ff.WTc=_geo.geotoolkit.map.Wa.Ff.$G;
_geo.geotoolkit.map.layers.VXc=_geo.geotoolkit.renderer.uL;_geo.geotoolkit.map.layers.A0c=_geo.geotoolkit.scene.filters.Vz;_geo.geotoolkit.map.layers.RTc=_geo.geotoolkit.map.layers.Gx;_geo.geotoolkit.map.layers.I0c=_geo.geotoolkit.map.layers.kba;_geo.geotoolkit.map.layers.d2c=_geo.geotoolkit.map.layers.Dk;_geo.geotoolkit.map.layers.c2c=_geo.geotoolkit.map.layers.Ty;_geo.geotoolkit.map.layers.ZTc=_geo.geotoolkit.map.layers.bB;_geo.geotoolkit.map.layers.$Tc=_geo.geotoolkit.map.layers.Hx;
_geo.geotoolkit.map.layers.G0c=_geo.geotoolkit.map.layers.Shape;_geo.geotoolkit.map.layers.zXc=_geo.geotoolkit.map.layers.eH;_geo.geotoolkit.map.Wa.TXc=_geo.geotoolkit.map.Wa.filters.uL;_geo.geotoolkit.map.Wa.eXc=_geo.geotoolkit.map.Wa.filters.RAb;_geo.geotoolkit.map.Wa.XTc=_geo.geotoolkit.map.Wa.filters.eGb;_geo.geotoolkit.map.Wa.w1c=_geo.geotoolkit.map.Wa.filters.fAb;_geo.geotoolkit.map.Wa.eUc=_geo.geotoolkit.map.Wa.filters.tAb;_geo.geotoolkit.map.Wa.GUc=_geo.geotoolkit.map.Wa.filters.meb;
_geo.geotoolkit.map.Wa.vZc=_geo.geotoolkit.map.Wa.filters.dYa;_geo.geotoolkit.map.Wa.WXc=_geo.geotoolkit.map.Wa.sJa;_geo.geotoolkit.map.Wa.QTc=_geo.geotoolkit.map.Wa.MN;_geo.geotoolkit.map.Wa.m_c=_geo.geotoolkit.map.Wa.na;_geo.geotoolkit.map.Wa.oZc=_geo.geotoolkit.map.Wa.jO;_geo.geotoolkit.map.Wa.NYc=_geo.geotoolkit.map.Wa.ou;_geo.geotoolkit.map.Wa.nZc=_geo.geotoolkit.map.Wa.iO;_geo.geotoolkit.map.Wa.q_c=_geo.geotoolkit.map.Wa.Fc;_geo.geotoolkit.map.Wa.pZc=_geo.geotoolkit.map.Wa.ZQ;
_geo.geotoolkit.map.Wa.VTc=_geo.geotoolkit.map.Wa.$G;_geo.geotoolkit.map.Wa.SXc=_geo.geotoolkit.map.Wa.Nn.tJa;_geo.geotoolkit.map.Wa.RXc=_geo.geotoolkit.map.Wa.Nn.Zxa;_geo.geotoolkit.map.Wa.n_c=_geo.geotoolkit.map.Wa.Nn.na;_geo.geotoolkit.map.Wa.DXc=_geo.geotoolkit.map.Wa.Nn.Fc;_geo.geotoolkit.map.Wa.EXc=_geo.geotoolkit.map.Wa.Nn.ou;_geo.geotoolkit.map.Wa.OYc=_geo.geotoolkit.map.Wa.Nn.Kaa;_geo.geotoolkit.map.Wa.BXc=_geo.geotoolkit.map.Wa.Nn.lb;_geo.geotoolkit.map.Wa.Hu.AVc=_geo.geotoolkit.map.Wa.Hu.T5;
_geo.geotoolkit.map.Wa.Hu.cXc=_geo.geotoolkit.map.Wa.Hu.Cdb;_geo.geotoolkit.map.Wa.Hu.l_c=_geo.geotoolkit.map.Wa.Hu.bAb;_geo.geotoolkit.map.Wa.Hu.E_c=_geo.geotoolkit.map.Wa.Hu.hB;_geo.geotoolkit.map.Wa.Qa=_geo.geotoolkit.map.Wa.Qa||{};_geo.geotoolkit.map.Wa.Qa.BVc=_geo.geotoolkit.map.Qa.Wh;_geo.geotoolkit.map.Wa.Qa.dXc=_geo.geotoolkit.map.Qa.RIa;_geo.geotoolkit.map.Wa.Qa.yXc=_geo.geotoolkit.map.Qa.eH;_geo.geotoolkit.map.Wa.Qa.aUc=_geo.geotoolkit.map.Qa.Hx;_geo.geotoolkit.map.Wa.Hu.$=_geo.geotoolkit.map.layers.YG.$;
(function(){var b="geotoolkit",a="Events",g="tools",d=_geo.geotoolkit.wr,e=_geo.geotoolkit.$r,c=null,f=null;e(c=_geo.geotoolkit.map.Nd.Rgb.prototype,"getA",c.yn,{yn:0});e(c,"getB",c.Mq,{Mq:0});e(c,"getE",c.H6a,{H6a:0});e(c,"getF",c.lUb,{lUb:0});d(b+".map.coordinatesystems.AbstractSystem",_geo.geotoolkit.map.Nd.tq);e(c=_geo.geotoolkit.map.Nd.tq.prototype,"getName",c.getName,{getName:0});e(c,"getUnits",c.DS,{DS:0});e(c,"getEpsgCode",c.KM,{KM:0});e(c,"getTransformer",c.Tea,{Tea:0});e(c,"isVerticalAxisUp",
c.JYb,{JYb:0});e(c,"getDefaultModelLimits",c.xr,{xr:0});e(c,"transform",c.transform,{transform:0});e(c,"inverseTransform",c.je,{je:0});d(b+".map.coordinatesystems.AbstractSystem.fromObject",_geo.geotoolkit.map.Nd.tq.ab);d(b+".map.GeodeticSystem",_geo.geotoolkit.map.Mw);d(b+".map.GeodeticSystem.WGS84",(f=_geo.geotoolkit.map.Mw).wba);d(b+".map.GeodeticSystem.LatLon",f.cB);d(b+".map.GeodeticSystem.UTM",f.cza);d(b+".map.GeodeticSystem.None",f.None);d(b+".map.coordinatesystems.Registry",_geo.geotoolkit.map.Nd.ue);
e(c=_geo.geotoolkit.map.Nd.ue.prototype,"getCoordinateSystem",c.Lu,{Lu:0});e(c,"registerCoordinateSystem",c.C$a,{C$a:0});d(b+".map.coordinatesystems.Registry.getDefault",_geo.geotoolkit.map.Nd.ue.lq);d(b+".map.coordinatesystems.LatLon",(f=_geo.geotoolkit.map.Nd).cB);e(c=_geo.geotoolkit.map.Nd.cB.prototype,"getTransformer",c.Tea,{Tea:0});e(c,"transform",c.transform,{transform:0});e(c,"inverseTransform",c.je,{je:0});d(b+".map.coordinatesystems.UTM",f.cza);e(c=_geo.geotoolkit.map.Nd.cza.prototype,"transform",
c.transform,{transform:0});e(c,"getZone",c.ZFc,{ZFc:0});e(c,"setZone",c.gRc,{gRc:0});e(c,"setSouthernHemisphere",c.iQc,{iQc:0});e(c,"isSouthernHemisphere",c.FHc,{FHc:0});e(c,"inverseTransform",c.je,{je:0});d(b+".map.coordinatesystems.WebMercator",f.jLa);e(c=_geo.geotoolkit.map.Nd.jLa.prototype,"transform",c.transform,{transform:0});e(c,"inverseTransform",c.je,{je:0});e(c=_geo.geotoolkit.map.Nd.scc.prototype,"transform",c.transform,{transform:0});e(c,"inverseTransform",c.je,{je:0});e(c=_geo.geotoolkit.map.Nd.Lic.prototype,
"transform",c.transform,{transform:0});e(c,"inverseTransform",c.je,{je:0});d(b+".map.coordinatesystems.WKT",f.iLa);e(c=_geo.geotoolkit.map.Nd.iLa.prototype,"transform",c.transform,{transform:0});e(c,"inverseTransform",c.je,{je:0});e(c,"getSpheroid",c.wEc,{wEc:0});e(c,"getToWGS84",c.gFc,{gFc:0});e(c,"getPrimeMeridian",c.tDc,{tDc:0});e(c,"getSpheroidUnits",c.xEc,{xEc:0});d(b+".map.coordinatesystems.WKT.parse",_geo.geotoolkit.map.Nd.iLa.parse);d(b+".map.coordinatesystems.AxisDirection",_geo.geotoolkit.map.Nd.r0);
d(b+".map.coordinatesystems.AxisDirection.North",(f=_geo.geotoolkit.map.Nd.r0).Se);d(b+".map.coordinatesystems.AxisDirection.South",f.Yc);d(b+".map.coordinatesystems.AxisDirection.West",f.Rc);d(b+".map.coordinatesystems.AxisDirection.East",f.pd);d(b+".map.coordinatesystems.Transformer",(f=_geo.geotoolkit.map.Nd).pba);e(c=_geo.geotoolkit.map.Nd.pba.prototype,"transform",c.transform,{transform:0});e(c,"transformPoint",c.cb,{cb:0});e(c,"transformRect",c.ob,{ob:0});e(c,"transformPolygon",c.x7b,{x7b:0});
e(c,"setInitialCoordinateSystem",c.KW,{KW:0});e(c,"getInitialCoordinateSystem",c.jI,{jI:0});e(c,"setTargetCoordinateSystem",c.KHa,{KHa:0});e(c,"getTargetCoordinateSystem",c.Dv,{Dv:0});d(b+".map.coordinatesystems.LatLonTransformer",f.PXa);e(c=_geo.geotoolkit.map.Nd.PXa.prototype,"transform",c.transform,{transform:0});d(b+".map.features.IFeature",(f=_geo.geotoolkit.map.Wa).sJa);e(c=_geo.geotoolkit.map.Wa.sJa.prototype,"getId",c.od,{od:0});e(c,"getAttributes",c.getAttributes,{getAttributes:0});e(c,"getGeometry",
c.yd,{yd:0});d(b+".map.features.AbstractFeature",f.MN);e(c=_geo.geotoolkit.map.Wa.MN.prototype,"getId",c.od,{od:0});e(c,"getGeometry",c.yd,{yd:0});e(c,"getAttributes",c.getAttributes,{getAttributes:0});e(c,"applyMapCS",c.nA,{nA:0});d(b+".map.features.Point",f.na);e(c=_geo.geotoolkit.map.Wa.na.prototype,"applyMapCS",c.nA,{nA:0});d(b+".map.features.MultiPoint",f.jO);e(c=_geo.geotoolkit.map.Wa.jO.prototype,"applyMapCS",c.nA,{nA:0});d(b+".map.features.LineString",f.ou);e(c=_geo.geotoolkit.map.Wa.ou.prototype,
"applyMapCS",c.nA,{nA:0});d(b+".map.features.MultiLineString",f.iO);e(c=_geo.geotoolkit.map.Wa.iO.prototype,"applyMapCS",c.nA,{nA:0});d(b+".map.features.Polygon",f.Fc);e(c=_geo.geotoolkit.map.Wa.Fc.prototype,"applyMapCS",c.nA,{nA:0});d(b+".map.features.MultiPolygon",f.ZQ);e(c=_geo.geotoolkit.map.Wa.ZQ.prototype,"applyMapCS",c.nA,{nA:0});d(b+".map.features.Aggregation",f.$G);e(c=_geo.geotoolkit.map.Wa.$G.prototype,"getAggregation",c.XPa,{XPa:0});e(c,"setExpanded",c.JW,{JW:0});d(b+".map.features.strategies.IGetAnnotation",
(f=_geo.geotoolkit.map.Wa.Zq).rXa);e(c=_geo.geotoolkit.map.Wa.Zq.rXa.prototype,"getAnnotation",c.vb,{vb:0});d(b+".map.features.strategies.AnnotationByAttribute",f.eAb);e(c=_geo.geotoolkit.map.Wa.Zq.eAb.prototype,"getAnnotation",c.vb,{vb:0});d(b+".map.features.strategies.AnnotationById",f.Pcb);e(c=_geo.geotoolkit.map.Wa.Zq.Pcb.prototype,"getAnnotation",c.vb,{vb:0});d(b+".map.features.strategies.IGetId",f.Ieb);e(c=_geo.geotoolkit.map.Wa.Zq.Ieb.prototype,"getFeatureId",c.EP,{EP:0});d(b+".map.features.strategies.IdByAttribute",
f.M0);e(c=_geo.geotoolkit.map.Wa.Zq.M0.prototype,"getFeatureId",c.EP,{EP:0});e(c,"getPropertyName",c.xDc,{xDc:0});e(c,"getAttributeName",c.X8,{X8:0});d(b+".map.features.formatters.SingleField",(f=_geo.geotoolkit.map.Wa.Lka).Kgb);e(c=_geo.geotoolkit.map.Wa.Lka.Kgb.prototype,"format",c.format,{format:0});d(b+".map.features.formatters.Table",f.DFb);e(c=_geo.geotoolkit.map.Wa.Lka.DFb.prototype,"format",c.format,{format:0});d(b+".map.features.formatters.Table.fromObject",_geo.geotoolkit.map.Wa.Lka.DFb.ab);
d(b+".map.features.filters.IFilter",(f=_geo.geotoolkit.map.Wa.filters).uL);e(c=_geo.geotoolkit.map.Wa.filters.uL.prototype,"filterFeatures",c.EE,{EE:0});e(c,"reset",c.reset,{reset:0});d(b+".map.features.filters.AnnotationFit",f.fAb);e(c=_geo.geotoolkit.map.Wa.filters.fAb.prototype,"filterFeatures",c.EE,{EE:0});e(c,"reset",c.reset,{reset:0});d(b+".map.features.filters.BiggestGeometry",f.tAb);e(c=_geo.geotoolkit.map.Wa.filters.tAb.prototype,"filterFeatures",c.EE,{EE:0});e(c,"reset",c.reset,{reset:0});
d(b+".map.features.filters.ByType",f.RAb);e(c=_geo.geotoolkit.map.Wa.filters.RAb.prototype,"filterFeatures",c.EE,{EE:0});e(c,"reset",c.reset,{reset:0});d(b+".map.features.filters.EvenOddGeometry",f.meb);e(c=_geo.geotoolkit.map.Wa.filters.meb.prototype,"filterFeatures",c.EE,{EE:0});e(c,"reset",c.reset,{reset:0});d(b+".map.features.filters.NoAnnotationOverlap",f.dYa);e(c=_geo.geotoolkit.map.Wa.filters.dYa.prototype,"filterFeatures",c.EE,{EE:0});e(c,"reset",c.reset,{reset:0});d(b+".map.features.filters.VisibilityArea",
f.eGb);e(c=_geo.geotoolkit.map.Wa.filters.eGb.prototype,"setOptions",c.setOptions,{setOptions:0});e(c,"getOptions",c.jb,{jb:0});e(c,"filterFeatures",c.EE,{EE:0});e(c,"reset",c.reset,{reset:0});d(b+".map.features.adapters.IGeometryToShape",(f=_geo.geotoolkit.map.Wa.Nn).Zxa);e(c=_geo.geotoolkit.map.Wa.Nn.Zxa.prototype,"apply",c.apply,{apply:0});d(b+".map.features.adapters.IGeometryToText",f.tJa);e(c=_geo.geotoolkit.map.Wa.Nn.tJa.prototype,"apply",c.apply,{apply:0});d(b+".map.features.adapters.Center",
f.lb);d(b+".map.features.adapters.Center.Mode",_geo.geotoolkit.map.Wa.Nn.lb.$D);d(b+".map.features.adapters.Center.Mode.Centroid",(f=_geo.geotoolkit.map.Wa.Nn.lb.$D).PUc);d(b+".map.features.adapters.Center.Mode.Incenter",f.$bc);d(b+".map.features.adapters.Center.Mode.CentroidOrIncenter",f.L9b);d(b+".map.features.adapters.Center.Mode.Mixed",f.RDb);e(c=_geo.geotoolkit.map.Wa.Nn.lb.prototype,"apply",c.apply,{apply:0});d(b+".map.features.adapters.Edge",(f=_geo.geotoolkit.map.Wa.Nn).Kaa);e(c=_geo.geotoolkit.map.Wa.Nn.Kaa.prototype,
"setOptions",c.setOptions,{setOptions:0});e(c,"apply",c.apply,{apply:0});d(b+".map.features.adapters.Point",f.na);e(c=_geo.geotoolkit.map.Wa.Nn.na.prototype,"setOptions",c.setOptions,{setOptions:0});e(c,"apply",c.apply,{apply:0});d(b+".map.features.adapters.LineString",f.ou);e(c=_geo.geotoolkit.map.Wa.Nn.ou.prototype,"apply",c.apply,{apply:0});d(b+".map.features.adapters.Polygon",f.Fc);e(c=_geo.geotoolkit.map.Wa.Nn.Fc.prototype,"apply",c.apply,{apply:0});d(b+".map.features.adapters.Path",f.Path);
e(c=_geo.geotoolkit.map.Wa.Nn.Path.prototype,"apply",c.apply,{apply:0});d(b+".map.features.converters.BaseConverter",(f=_geo.geotoolkit.map.Wa.Hu).T5);e(c=_geo.geotoolkit.map.Wa.Hu.T5.prototype,"saveConvertedFeatures",c.Rma,{Rma:0});e(c,"getFeatures",c.xA,{xA:0});e(c,"removeFeatures",c.Mma,{Mma:0});e(c,"clear",c.clear,{clear:0});d(b+".map.features.converters.CompositeConverter",f.Cdb);e(c=_geo.geotoolkit.map.Wa.Hu.Cdb.prototype,"addFeatureConverter",c.job,{job:0});e(c,"removeFeatureConverter",c.aLc,
{aLc:0});e(c,"getFeatures",c.xA,{xA:0});d(b+".map.features.converters.RDP",f.hB);e(c=_geo.geotoolkit.map.Wa.Hu.hB.prototype,"saveConvertedFeatures",c.Rma,{Rma:0});e(c,"getFeatures",c.xA,{xA:0});e(c,"removeFeatures",c.Mma,{Mma:0});e(c,"clear",c.clear,{clear:0});d(b+".map.features.converters.Aggregator",f.bAb);e(c=_geo.geotoolkit.map.Wa.Hu.bAb.prototype,"saveConvertedFeatures",c.Rma,{Rma:0});e(c,"getFeatures",c.xA,{xA:0});e(c,"removeFeatures",c.Mma,{Mma:0});e(c,"getOptions",c.jb,{jb:0});e(c,"setOptions",
c.setOptions,{setOptions:0});e(c,"clear",c.clear,{clear:0});d(b+".map.sources.connectors.AbstractConnector",(f=_geo.geotoolkit.map.Qa.ed).LN);e(c=_geo.geotoolkit.map.Qa.ed.LN.prototype,"send",c.send,{send:0});e(c,"abort",c.abort,{abort:0});d(b+".map.sources.connectors.HttpRequest",f.L0);e(c=_geo.geotoolkit.map.Qa.ed.L0.prototype,"send",c.send,{send:0});e(c,"abort",c.abort,{abort:0});e(c,"abortConnection",c.m8,{m8:0});d(b+".map.sources.connectors.DOMImage",f.Hxa);e(c=_geo.geotoolkit.map.Qa.ed.Hxa.prototype,
"send",c.send,{send:0});e(c,"abortConnection",c.m8,{m8:0});d(b+".map.sources.connectors.PreloadedImage",f.IEb);e(c=_geo.geotoolkit.map.Qa.ed.IEb.prototype,"send",c.send,{send:0});e(c,"abort",c.abort,{abort:0});d(b+".map.sources.connectors.Stub",f.tFb);e(c=_geo.geotoolkit.map.Qa.ed.tFb.prototype,"send",c.send,{send:0});e(c,"abort",c.abort,{abort:0});d(b+".map.sources.connectors.WebSocket",f.WebSocket);e(c=_geo.geotoolkit.map.Qa.ed.WebSocket.prototype,"send",c.send,{send:0});e(c,"abortConnection",c.m8,
{m8:0});d(b+".map.sources.connectors.Proxy",f.LEb);e(c=_geo.geotoolkit.map.Qa.ed.LEb.prototype,"send",c.send,{send:0});e(c,"abort",c.abort,{abort:0});d(b+".map.sources.connectors.ArcGISToken",f.jxa);e(c=_geo.geotoolkit.map.Qa.ed.jxa.prototype,"send",c.send,{send:0});e(c,"abort",c.abort,{abort:0});d(b+".map.sources.loaders.AbstractLoader",(f=_geo.geotoolkit.map.Qa.jl).EQ);e(c=_geo.geotoolkit.map.Qa.jl.EQ.prototype,"parse",c.parse,{parse:0});e(c,"getSettingsUrl",c.ME,{ME:0});e(c,"getRequestOptions",
c.vla,{vla:0});e(c,"setQueryParameter",c.P$,{P$:0});e(c,"cloneQueryParameters",c.ZCa,{ZCa:0});e(c,"getCopyright",c.gQa,{gQa:0});d(b+".map.sources.loaders.ArcGISFeature",f.Hx);e(c=_geo.geotoolkit.map.Qa.jl.Hx.prototype,"parse",c.parse,{parse:0});e(c,"getSettingsUrl",c.ME,{ME:0});e(c,"getRequestOptions",c.vla,{vla:0});d(b+".map.sources.loaders.ArcGISImage",f.bB);e(c=_geo.geotoolkit.map.Qa.jl.bB.prototype,"parse",c.parse,{parse:0});e(c,"clear",c.clear,{clear:0});e(c,"getSettingsUrl",c.ME,{ME:0});e(c,
"getRequestOptions",c.vla,{vla:0});d(b+".map.sources.loaders.ArcGISTile",f.gAb);e(c=_geo.geotoolkit.map.Qa.jl.gAb.prototype,"parse",c.parse,{parse:0});d(b+".map.sources.loaders.WMS",f.Ty);e(c=_geo.geotoolkit.map.Qa.jl.Ty.prototype,"parse",c.parse,{parse:0});e(c,"getSettingsUrl",c.ME,{ME:0});d(b+".map.sources.loaders.WFS",f.FL);e(c=_geo.geotoolkit.map.Qa.jl.FL.prototype,"parse",c.parse,{parse:0});e(c,"getSettingsUrl",c.ME,{ME:0});d(b+".map.sources.loaders.Bing",f.wC);e(c=_geo.geotoolkit.map.Qa.jl.wC.prototype,
"parse",c.parse,{parse:0});e(c,"getSettingsUrl",c.ME,{ME:0});d(b+".map.sources.loaders.Stream",f.zq);e(c=_geo.geotoolkit.map.Qa.jl.zq.prototype,"parse",c.parse,{parse:0});d(b+".map.sources.loaders.VectorTile",f.yF);e(c=_geo.geotoolkit.map.Qa.jl.yF.prototype,"parse",c.parse,{parse:0});e(c,"getSettingsUrl",c.ME,{ME:0});d(b+".map.sources.formats.AbstractFormat",(f=_geo.geotoolkit.map.Qa.Bg).Xv);e(c=_geo.geotoolkit.map.Qa.Bg.Xv.prototype,"query",c.Ve,{Ve:0});e(c,"parse",c.parse,{parse:0});e(c,"dispose",
c.dispose,{dispose:0});e(c,"abort",c.abort,{abort:0});e(c,"setQueryParameter",c.P$,{P$:0});e(c,"cloneQueryParameters",c.ZCa,{ZCa:0});d(b+".map.sources.formats.ArcGISImage",f.bB);e(c=_geo.geotoolkit.map.Qa.Bg.bB.prototype,"query",c.Ve,{Ve:0});e(c,"queryGeometry",c.$S,{$S:0});e(c,"abortGeometryQueries",c.Yja,{Yja:0});e(c,"identify",c.G9,{G9:0});d(b+".map.sources.formats.ArcGISFeature",f.Hx);e(c=_geo.geotoolkit.map.Qa.Bg.Hx.prototype,"query",c.Ve,{Ve:0});e(c,"abort",c.abort,{abort:0});d(b+".map.sources.formats.GeoJSON",
f.eH);e(c=_geo.geotoolkit.map.Qa.Bg.eH.prototype,"parse",c.parse,{parse:0});d(b+".map.sources.formats.WMS",f.Ty);e(c=_geo.geotoolkit.map.Qa.Bg.Ty.prototype,"query",c.Ve,{Ve:0});d(b+".map.sources.formats.KML",f.xX);e(c=_geo.geotoolkit.map.Qa.Bg.xX.prototype,"parse",c.parse,{parse:0});d(b+".map.sources.formats.WFS",f.FL);e(c=_geo.geotoolkit.map.Qa.Bg.FL.prototype,"query",c.Ve,{Ve:0});e(c,"dispose",c.dispose,{dispose:0});d(b+".map.sources.formats.Tile",f.Dk);e(c=_geo.geotoolkit.map.Qa.Bg.Dk.prototype,
"query",c.Ve,{Ve:0});d(b+".map.sources.formats.CSV",f.QN);d(b+".map.sources.formats.CSV.setDelimiter",_geo.geotoolkit.map.Qa.Bg.QN.Jod);e(c=_geo.geotoolkit.map.Qa.Bg.QN.prototype,"parse",c.parse,{parse:0});d(b+".map.sources.formats.GeoRSS",(f=_geo.geotoolkit.map.Qa.Bg).J0);e(c=_geo.geotoolkit.map.Qa.Bg.J0.prototype,"parse",c.parse,{parse:0});d(b+".map.sources.formats.Stream",f.zq);e(c=_geo.geotoolkit.map.Qa.Bg.zq.prototype,"parse",c.parse,{parse:0});d(b+".map.sources.formats.VectorTile",f.yF);e(c=
_geo.geotoolkit.map.Qa.Bg.yF.prototype,"query",c.Ve,{Ve:0});d(b+".map.sources.formats.Lerc",f.Raa);e(c=_geo.geotoolkit.map.Qa.Bg.Raa.prototype,"query",c.Ve,{Ve:0});e(c,"setQueryParameter",c.P$,{P$:0});e(c=_geo.geotoolkit.map.Qa.Ej.$W.prototype,"dispose",c.dispose,{dispose:0});e(c,"query",c.Ve,{Ve:0});e(c=_geo.geotoolkit.map.Qa.Ej.Wh.prototype,"query",c.Ve,{Ve:0});e(c,"initFormat",c.hN,{hN:0});e(c,"getFromGrid",c.Hrb,{Hrb:0});e(c,"setFromGrid",c.lxb,{lxb:0});e(c,"queryFeaturesFromBox",c.s$a,{s$a:0});
e(c,"filterUnique",c.oSb,{oSb:0});e(c,"getFormat",c.O6a,{O6a:0});e(c,"abort",c.abort,{abort:0});e(c=_geo.geotoolkit.map.Qa.Ej.Image.prototype,"query",c.Ve,{Ve:0});e(c,"initFormat",c.hN,{hN:0});e(c,"abort",c.abort,{abort:0});e(c,"clear",c.clear,{clear:0});e(c=_geo.geotoolkit.map.Qa.Ej.Dk.prototype,"query",c.Ve,{Ve:0});e(c,"initFormat",c.hN,{hN:0});e(c,"calculateZoomLevel",c.RCa,{RCa:0});e(c,"findSuitableZoomLevel",c.vSb,{vSb:0});e(c,"requestTiles",c.qwb,{qwb:0});e(c,"requestTile",c.yva,{yva:0});e(c,
"abortOutOfBoundTiles",c.SNb,{SNb:0});e(c,"isTileNeeded",c.Bua,{Bua:0});e(c,"isLayerReady",c.N8a,{N8a:0});e(c,"updateVisibleTileLimits",c.$7b,{$7b:0});e(c,"clear",c.clear,{clear:0});e(c,"abort",c.abort,{abort:0});e(c,"getLayer",c.AA,{AA:0});e(c,"getGridSize",c.PM,{PM:0});e(c,"getZoomLevel",c.E9,{E9:0});e(c,"getFormatter",c.ela,{ela:0});e(c,"setFormatter",c.oHa,{oHa:0});e(c=_geo.geotoolkit.map.Qa.Ej.wC.prototype,"calculateZoomLevel",c.RCa,{RCa:0});e(c,"getGridSize",c.PM,{PM:0});e(c=_geo.geotoolkit.map.Qa.Ej.yF.prototype,
"initFormat",c.hN,{hN:0});e(c,"createPoolTile",c.Cpb,{Cpb:0});e(c,"getLayer",c.AA,{AA:0});e(c,"getGridSize",c.PM,{PM:0});e(c,"requestTile",c.yva,{yva:0});e(c,"isTileNeeded",c.Bua,{Bua:0});e(c=_geo.geotoolkit.map.Qa.Ej.bB.prototype,"queryGeometry",c.$S,{$S:0});e(c,"identify",c.G9,{G9:0});e(c,"initFormat",c.hN,{hN:0});d(b+".map.sources."+a+"",_geo.geotoolkit.map.Qa.$);d(b+".map.sources."+a+".FeatureAdded",(f=_geo.geotoolkit.map.Qa.$).aw);d(b+".map.sources."+a+".FeatureRemoved",f.GT);d(b+".map.sources."+
a+".FeaturesCleared",f.G0);d(b+".map.sources."+a+".ImageLoaded",f.Ws);d(b+".map.sources."+a+".ImageCleared",f.Meb);d(b+".map.sources."+a+".TilesUpdated",f.RX);d(b+".map.sources."+a+".InfoUpdated",f.p6);d(b+".map.sources.AbstractSource",_geo.geotoolkit.map.Qa.O5);e(c=_geo.geotoolkit.map.Qa.O5.prototype,"setServerURL",c.OW,{OW:0});e(c,"isDataLoaded",c.wFa,{wFa:0});e(c,"getServerURL",c.u9,{u9:0});e(c,"loadServerData",c.LFa,{LFa:0});e(c,"getModelLimits",c.xa,{xa:0});e(c,"setMapCoordinateSystem",c.VA,
{VA:0});e(c,"getMapCoordinateSystem",c.lI,{lI:0});e(c,"setInitialCoordinateSystem",c.KW,{KW:0});e(c,"getInitialCoordinateSystem",c.jI,{jI:0});e(c,"getTransformerToMap",c.rXb,{rXb:0});e(c,"getTransformerFromMap",c.mFc,{mFc:0});e(c,"clear",c.clear,{clear:0});e(c,"update",c.update,{update:0});e(c,"dispose",c.dispose,{dispose:0});e(c,"getCopyright",c.gQa,{gQa:0});d(b+".map.features.QueryMode",_geo.geotoolkit.map.Wa.Toa);d(b+".map.features.QueryMode.All",(f=_geo.geotoolkit.map.Wa.Toa).Qna);d(b+".map.features.QueryMode.Bbox",
f.Z8b);d(b+".map.features.QueryMode.Tile",f.Dk);d(b+".map.features.QueryMode.Grid",f.Mx);d(b+".map.sources.Vector",(f=_geo.geotoolkit.map.Qa).Wh);e(c=_geo.geotoolkit.map.Qa.Wh.prototype,"queryFeatures",c.$Sa,{$Sa:0});e(c,"addFeatures",c.lob,{lob:0});e(c,"removeFeature",c.oTa,{oTa:0});e(c,"clear",c.clear,{clear:0});e(c,"clearFeatures",c.lka,{lka:0});e(c,"loadData",c.Iua,{Iua:0});e(c,"requestData",c.zLc,{zLc:0});e(c,"setUniqueField",c.v5,{v5:0});e(c,"getUniqueField",c.eua,{eua:0});e(c,"setRequestResolution",
c.FHa,{FHa:0});e(c,"getRequestResolution",c.DWb,{DWb:0});d(b+".map.sources.Image",f.Image);e(c=_geo.geotoolkit.map.Qa.Image.prototype,"clear",c.clear,{clear:0});e(c,"setInflateRatio",c.L3b,{L3b:0});e(c,"getInflateRatio",c.bVb,{bVb:0});e(c,"showLayers",c.gL,{gL:0});e(c,"hideLayers",c.mFa,{mFa:0});e(c,"getVisibleLayers",c.TP,{TP:0});e(c,"getLayers",c.getLayers,{getLayers:0});d(b+".map.sources.Tile",f.Dk);e(c=_geo.geotoolkit.map.Qa.Dk.prototype,"clear",c.clear,{clear:0});e(c,"setProperties",c.ja,{ja:0});
d(b+".map.sources.CompositeSource",f.RIa);e(c=_geo.geotoolkit.map.Qa.RIa.prototype,"addFeatureSource",c.kob,{kob:0});e(c,"removeFeatureSource",c.bLc,{bLc:0});e(c,"getFeatureSourceList",c.kAc,{kAc:0});e(c,"setMapCoordinateSystem",c.VA,{VA:0});e(c,"setInitialCoordinateSystem",c.KW,{KW:0});e(c,"setRequestResolution",c.FHa,{FHa:0});e(c,"setUniqueField",c.v5,{v5:0});e(c,"clear",c.clear,{clear:0});e(c,"dispose",c.dispose,{dispose:0});d(b+".map.sources.ArcGISFeature",f.Hx);e(c=_geo.geotoolkit.map.Qa.Hx.prototype,
"setRequestFields",c.QPc,{QPc:0});e(c,"getRequestFields",c.oRa,{oRa:0});e(c,"getLayers",c.getLayers,{getLayers:0});e(c,"getLayerSource",c.AEa,{AEa:0});e(c,"isMultilayerSource",c.O8a,{O8a:0});e(c,"getGlobalAlpha",c.Irb,{Irb:0});e(c,"getScaleRange",c.gtb,{gtb:0});e(c,"getAnnotationShape",c.Pka,{Pka:0});e(c,"showLayers",c.gL,{gL:0});e(c,"getInitialModelLimits",c.b7a,{b7a:0});e(c,"getVisibleLayers",c.TP,{TP:0});e(c,"dispose",c.dispose,{dispose:0});e(c,"queryLegend",c.hQ,{hQ:0});d(b+".map.sources.ArcGISImage",
f.bB);e(c=_geo.geotoolkit.map.Qa.bB.prototype,"queryLegend",c.hQ,{hQ:0});e(c,"queryGeometry",c.$S,{$S:0});e(c,"abortGeometryQueries",c.Yja,{Yja:0});e(c,"identify",c.G9,{G9:0});e(c,"getInitialModelLimits",c.b7a,{b7a:0});e(c,"setTooltipLayers",c.f6b,{f6b:0});d(b+".map.sources.GeoJSON",f.eH);d(b+".map.sources.KML",f.xX);d(b+".map.sources.WFS",f.FL);e(c=_geo.geotoolkit.map.Qa.FL.prototype,"setFeatureTypes",c.dxb,{dxb:0});e(c,"getFeatureTypes",c.qUb,{qUb:0});d(b+".map.sources.WMS",f.Ty);e(c=_geo.geotoolkit.map.Qa.Ty.prototype,
"setImageFormat",c.Wva,{Wva:0});e(c,"getImageFormat",c.tEa,{tEa:0});e(c,"setTransparent",c.NHa,{NHa:0});e(c,"getTransparent",c.bFa,{bFa:0});e(c,"setVersion",c.setVersion,{setVersion:0});e(c,"getVersion",c.f_,{f_:0});d(b+".map.sources.CSV",f.QN);e(c=_geo.geotoolkit.map.Qa.QN.prototype,"setLatitudeField",c.Axb,{Axb:0});e(c,"getLatitudeField",c.sVb,{sVb:0});e(c,"setLongitudeField",c.Jxb,{Jxb:0});e(c,"getLongitudeField",c.FVb,{FVb:0});d(b+".map.sources.GeoRSS",f.J0);d(b+".map.sources.Stream",f.zq);d(b+
".map.sources.Bing",f.wC);d(b+".map.sources.Bing.ImagerySet",_geo.geotoolkit.map.Qa.wC.iha);d(b+".map.sources.Bing.ImagerySet.Aerial",(f=_geo.geotoolkit.map.Qa.wC.iha).I8b);d(b+".map.sources.Bing.ImagerySet.AerialWithLabels",f.aAb);d(b+".map.sources.Bing.ImagerySet.AerialWithLabelsOnDemand",f.UTc);d(b+".map.sources.Bing.ImagerySet.Birdseye",f.c9b);d(b+".map.sources.Bing.ImagerySet.BirdseyeWithLabels",f.e9b);d(b+".map.sources.Bing.ImagerySet.BirdseyeV2",f.d9b);d(b+".map.sources.Bing.ImagerySet.CanvasDark",
f.DUc);d(b+".map.sources.Bing.ImagerySet.CanvasLight",f.FUc);d(b+".map.sources.Bing.ImagerySet.CanvasGray",f.EUc);d(b+".map.sources.Bing.ImagerySet.Road",f.ygc);d(b+".map.sources.Bing.ImagerySet.RoadOnDemand",f.g0c);d(b+".map.sources.Bing.ImagerySet.OrdnanceSurvey",f.KZc);e(c=_geo.geotoolkit.map.Qa.wC.prototype,"setImagerySet",c.D3b,{D3b:0});e(c,"setKey",c.V3b,{V3b:0});e(c,"setCulture",c.w2b,{w2b:0});e(c,"setCenterPoint",c.oab,{oab:0});d(b+".map.sources.VectorTile",(f=_geo.geotoolkit.map.Qa).yF);
d(b+".map.sources.Lerc",f.Raa);d(b+".map.features.templates.BaseTemplate",(f=_geo.geotoolkit.map.Wa.Ff).yT);e(c=_geo.geotoolkit.map.Wa.Ff.yT.prototype,"getOptions",c.jb,{jb:0});e(c,"setOptions",c.setOptions,{setOptions:0});e(c,"getShape",c.Ob,{Ob:0});e(c,"getGeometryToShape",c.ila,{ila:0});e(c,"getGeometryToText",c.OM,{OM:0});e(c,"getTextShape",c.en,{en:0});e(c,"getShapeCallback",c.Vta,{Vta:0});d(b+".map.features.templates.Point",f.na);d(b+".map.features.templates.LineString",f.ou);d(b+".map.features.templates.Polygon",
f.Fc);d(b+".map.features.templates.Aggregation",f.$G);e(c=_geo.geotoolkit.map.Wa.Ff.$G.prototype,"setOptions",c.setOptions,{setOptions:0});d(b+".map.layers.AbstractLayer",(f=_geo.geotoolkit.map.layers).Gx);e(c=_geo.geotoolkit.map.layers.Gx.prototype,"getWorldTransform",c.mb,{mb:0});e(c,"getVisibleModelLimits",c.Nb,{Nb:0});e(c,"getModelLimits",c.xa,{xa:0});e(c,"setModelLimits",c.Sa,{Sa:0});e(c,"getDefaultModelLimits",c.xr,{xr:0});e(c,"calculateDefaultModelLimits",c.jK,{jK:0});e(c,"getLayerAlpha",c.EBc,
{EBc:0});e(c,"setLayerAlpha",c.HOc,{HOc:0});e(c,"getOptions",c.jb,{jb:0});e(c,"setOptions",c.setOptions,{setOptions:0});e(c,"getCoordinateSystem",c.Lu,{Lu:0});e(c,"setVerticalFlip",c.mk,{mk:0});e(c,"isVerticalFlip",c.Cr,{Cr:0});e(c,"render",c.render,{render:0});e(c,"renderContent",c.Qh,{Qh:0});e(c,"setCache",c.Tl,{Tl:0});e(c,"invalidate",c.ma,{ma:0});e(c,"getCache",c.EM,{EM:0});e(c,"clearCache",c.oV,{oV:0});e(c,"getProperties",c.ka,{ka:0});e(c,"setProperties",c.ja,{ja:0});e(c,"getMapCoordinateSystem",
c.lI,{lI:0});e(c,"setMapCoordinateSystem",c.VA,{VA:0});e(c,"transformPoint",c.cb,{cb:0});e(c,"transformToMap",c.baa,{baa:0});e(c,"transformFromMap",c.bcb,{bcb:0});e(c,"setServerURL",c.OW,{OW:0});e(c,"getServerURL",c.u9,{u9:0});e(c,"dispose",c.dispose,{dispose:0});e(c,"getDataSource",c.Hf,{Hf:0});e(c,"hitTest",c.Un,{Un:0});e(c,"getTooltipFormatter",c.j4,{j4:0});d(b+".map.layers.AbstractFeatureLayer",f.YG);d(b+".map.layers.AbstractFeatureLayer."+a+"",_geo.geotoolkit.map.layers.YG.$);d(b+".map.layers.AbstractFeatureLayer."+
a+".FeaturesUpdated",_geo.geotoolkit.map.layers.YG.$.fha);e(c=_geo.geotoolkit.map.layers.YG.prototype,"getFeatures",c.xA,{xA:0});e(c,"getGeometryToText",c.OM,{OM:0});e(c,"getFeatureById",c.jAc,{jAc:0});e(c,"queryFeatures",c.$Sa,{$Sa:0});e(c,"renderFeatures",c.u$,{u$:0});e(c,"renderAnnotations",c.MGa,{MGa:0});e(c,"renderContent",c.Qh,{Qh:0});e(c,"setMapCoordinateSystem",c.VA,{VA:0});e(c,"getTooltipFormatter",c.j4,{j4:0});e(c,"getProperties",c.ka,{ka:0});e(c,"setProperties",c.ja,{ja:0});e(c,"setOptions",
c.setOptions,{setOptions:0});e(c,"toGeoJSON",c.Vbb,{Vbb:0});e(c,"dispose",c.dispose,{dispose:0});d(b+".map.layers.Template",(f=_geo.geotoolkit.map.layers).kba);e(c=_geo.geotoolkit.map.layers.kba.prototype,"resetFeatureTemplates",c.HLc,{HLc:0});e(c,"getTemplate",c.Yta,{Yta:0});e(c,"setTemplate",c.HUa,{HUa:0});e(c,"calculateDefaultModelLimits",c.jK,{jK:0});e(c,"updateGeometry",c.uh,{uh:0});e(c,"addFeature",c.Ada,{Ada:0});e(c,"removeFeature",c.oTa,{oTa:0});e(c,"clearFeatures",c.lka,{lka:0});e(c,"render",
c.render,{render:0});e(c,"renderContent",c.Qh,{Qh:0});e(c,"renderFeatures",c.u$,{u$:0});e(c,"getModelLimits",c.xa,{xa:0});e(c,"getGeometryToText",c.OM,{OM:0});e(c,"renderAnnotations",c.MGa,{MGa:0});e(c,"hitTest",c.Un,{Un:0});e(c,"setMapCoordinateSystem",c.VA,{VA:0});e(c,"onFeaturesUpdated",c.iGa,{iGa:0});e(c,"invalidate",c.ma,{ma:0});d(b+".map.layers.Image",f.Image);e(c=_geo.geotoolkit.map.layers.Image.prototype,"render",c.render,{render:0});e(c,"renderContent",c.Qh,{Qh:0});e(c,"getLayers",c.getLayers,
{getLayers:0});e(c,"getVisibleLayers",c.TP,{TP:0});e(c,"showLayers",c.gL,{gL:0});e(c,"hideLayers",c.mFa,{mFa:0});e(c,"getProperties",c.ka,{ka:0});e(c,"setProperties",c.ja,{ja:0});d(b+".map.layers.Vector",f.Wh);e(c=_geo.geotoolkit.map.layers.Wh.prototype,"loadData",c.Iua,{Iua:0});e(c,"setUniqueField",c.v5,{v5:0});e(c,"getUniqueField",c.eua,{eua:0});e(c,"getProperties",c.ka,{ka:0});e(c,"setProperties",c.ja,{ja:0});d(b+".map.layers.Tile",f.Dk);e(c=_geo.geotoolkit.map.layers.Dk.prototype,"render",c.render,
{render:0});e(c,"renderContent",c.Qh,{Qh:0});e(c,"getMinLod",c.A7a,{A7a:0});e(c,"getMaxLod",c.x7a,{x7a:0});e(c,"getTileResolution",c.$Ec,{$Ec:0});e(c,"setImageFormatter",c.lOc,{lOc:0});e(c,"getImageFormatter",c.WUb,{WUb:0});e(c,"getProperties",c.ka,{ka:0});e(c,"setProperties",c.ja,{ja:0});e(c,"setLods",c.QOc,{QOc:0});e(c,"getZoomLevel",c.E9,{E9:0});e(c,"setTileResolution",c.GQc,{GQc:0});d(b+".map.layers.Shape",f.Shape);e(c=_geo.geotoolkit.map.layers.Shape.prototype,"enumerateNodes",c.Xk,{Xk:0});e(c,
"calculateDefaultModelLimits",c.jK,{jK:0});e(c,"setMapCoordinateSystem",c.VA,{VA:0});e(c,"getShapes",c.fs,{fs:0});e(c,"addShape",c.addShape,{addShape:0});e(c,"removeShape",c.lLc,{lLc:0});e(c,"clearShapes",c.cuc,{cuc:0});e(c,"renderContent",c.Qh,{Qh:0});e(c,"getTooltipFormatter",c.j4,{j4:0});e(c,"hitTest",c.Un,{Un:0});e(c,"dispose",c.dispose,{dispose:0});d(b+".map.layers.WMS",f.Ty);e(c=_geo.geotoolkit.map.layers.Ty.prototype,"setImageFormat",c.Wva,{Wva:0});e(c,"getImageFormat",c.tEa,{tEa:0});e(c,"setTransparent",
c.NHa,{NHa:0});e(c,"getTransparent",c.bFa,{bFa:0});e(c,"setVersion",c.setVersion,{setVersion:0});e(c,"getVersion",c.f_,{f_:0});e(c,"getProperties",c.ka,{ka:0});e(c,"setProperties",c.ja,{ja:0});d(b+".map.layers.WFS",f.FL);e(c=_geo.geotoolkit.map.layers.FL.prototype,"getProperties",c.ka,{ka:0});e(c,"setProperties",c.ja,{ja:0});d(b+".map.layers.ArcGISImage",f.bB);e(c=_geo.geotoolkit.map.layers.bB.prototype,"queryLegend",c.hQ,{hQ:0});e(c,"hitTest",c.Un,{Un:0});e(c,"getTooltipFormatter",c.j4,{j4:0});d(b+
".map.layers.ArcGISFeature",f.Hx);e(c=_geo.geotoolkit.map.layers.Hx.prototype,"getRequestFields",c.oRa,{oRa:0});e(c,"getProperties",c.ka,{ka:0});e(c,"setProperties",c.ja,{ja:0});e(c,"showLayers",c.gL,{gL:0});e(c,"getVisibleLayers",c.TP,{TP:0});e(c,"renderFeatures",c.u$,{u$:0});e(c,"queryLegend",c.hQ,{hQ:0});d(b+".map.layers.GeoJSON",f.eH);e(c=_geo.geotoolkit.map.layers.eH.prototype,"loadGeoJson",c.XHc,{XHc:0});d(b+".map.layers.KML",f.xX);d(b+".map.layers.CSV",f.QN);e(c=_geo.geotoolkit.map.layers.QN.prototype,
"getProperties",c.ka,{ka:0});e(c,"setProperties",c.ja,{ja:0});d(b+".map.layers.GeoRSS",f.J0);d(b+".map.layers.Stream",f.zq);d(b+".map.layers.Bing",f.wC);e(c=_geo.geotoolkit.map.layers.wC.prototype,"renderContent",c.Qh,{Qh:0});d(b+".map.layers.VectorTile",f.yF);e(c=_geo.geotoolkit.map.layers.yF.prototype,"getFeatures",c.xA,{xA:0});d(b+".map."+g+".AggregationSelection",_geo.geotoolkit.map.ia.K8b);e(c=_geo.geotoolkit.map.ia.K8b.prototype,"setEnabled",c.cc,{cc:0});d(b+".map.util.FeatureUtil.createIfNotExists",
(f=_geo.geotoolkit.map.util.oF).Zuc);d(b+".map.util.FeatureUtil.comparePriority",f.quc);d(b+".map.util.FeatureUtil.toHash",f.gzb);d(b+".map.util.FeatureUtil.equalsGeometry",f.nqb);d(b+".map.util.FeatureUtil.findFeature",f.pSb);d(b+".map.util.FeatureUtil.paramsToEncode",f.C_b);d(b+".map.util.FeatureUtil.encodeParamsRequest",f.GPa);d(b+".map.util.FeatureUtil.checkTextBoundsCollision",f.XCa);d(b+".map.util.ArcGIS",_geo.geotoolkit.map.util.Gz);d(b+".map.util.ArcGIS.parse",_geo.geotoolkit.map.util.Gz.parse);
d(b+".map.util.Geometry",_geo.geotoolkit.map.util.Geometry);d(b+".map.util.Geometry.getCachedGeometryBounds",(f=_geo.geotoolkit.map.util.Geometry).zV);d(b+".map.util.Geometry.isClockwise",f.aHc);d(b+".map.util.Query",(f=_geo.geotoolkit.map.util).xha);e(c=_geo.geotoolkit.map.util.xha.prototype,"setGeometry",c.Xq,{Xq:0});e(c,"setProperties",c.ja,{ja:0});e(c,"setName",c.yb,{yb:0});e(c,"getName",c.getName,{getName:0});e(c,"getGeometry",c.yd,{yd:0});e(c,"getProperties",c.ka,{ka:0});e(c,"setFilter",c.setFilter,
{setFilter:0});e(c,"getFilter",c.getFilter,{getFilter:0});d(b+".map.util.MapScale",f.hdc);e(c=_geo.geotoolkit.map.util.hdc.prototype,"setMapScale",c.iga,{iga:0});e(c,"render",c.render,{render:0});d(b+".map.util.GeoJSON",f.eH);d(b+".map.util.GeoJSON.parse",(f=_geo.geotoolkit.map.util.eH).parse);d(b+".map.util.GeoJSON.toGeoJSON",f.Vbb);d(b+".map.util.KML",_geo.geotoolkit.map.util.xX);d(b+".map.util.KML.parse",_geo.geotoolkit.map.util.xX.parse);d(b+".map.util.GeoRSS.parse",(f=_geo.geotoolkit.map.util.J0).parse);
d(b+".map.util.GeoRSS.parseElements",f.J_b);d(b+".map.util.GeoRSS.parseElement",f.RA);d(b+".map.util.GeoRSS.parseSimple",f.IJc);d(b+".map.util.GeoRSS.parseGeometry",f.vma);d(b+".map.util.GeoRSS.parseW3C",f.OJc);d(b+".map.util.GML.parse",(f=_geo.geotoolkit.map.util.pbc).parse);d(b+".map.util.GML.parsePoint",f.kva);d(b+".map.util.GML.parseEnvelope",f.AJc);d(b+".map.util.GML.parsePointGeometry",f.Avb);d(b+".map.util.GML.parseLineString",f.W9a);d(b+".map.util.GML.parsePolygon",f.$9a);d(b+".map.util.GML.parseBoundary",
f.F_b);d(b+".map.util.GML.addFeature",f.Ada);d(b+".map.util.WebMap",_geo.geotoolkit.map.util.Lhb);d(b+".map.util.WebMap.load",(f=_geo.geotoolkit.map.util.Lhb).load);d(b+".map.util.WebMap.setBingMapsKey",f.wod);d(b+".map.util.Mapbox.parse",(f=_geo.geotoolkit.map.util.KDb).parse);d(b+".map.util.Mapbox.clipTileGeometry",f.npb);d(b+".map.util.Mapbox.parseStyles",f.Dvb);d(b+".map.util.Mapbox.applyTemplate",f.Bsc);d(b+".map.util.Mapbox.parseTemplate",f.LJc);d(b+".map.util.Mapbox.parseLayout",f.DJc);d(b+
".map.util.Mapbox.parseTextStyle",f.MJc);d(b+".map.util.Mapbox.mergeTextStyles",f.vIc);d(b+".map.util.Mapbox.parseLineStyle",f.EJc);d(b+".map.util.Mapbox.mergeLineStyle",f.xZb);d(b+".map.util.Mapbox.parseColor",f.Ph);d(b+".map.util.Mapbox.parseValue",f.vW);d(b+".map.util.Mapbox.parseFilter",f.vvb);d(b+".map.util.XML.parse",(f=_geo.geotoolkit.map.util.nB).parse);d(b+".map.util.XML.queryScope",f.AW);d(b+".map.util.XML.getChildren",f.Ji);d(b+".map.util.XML.xmlToObject",f.lIa);d(b+".map.Map",_geo.geotoolkit.map.Map);
d(b+".map.Map."+a+"",_geo.geotoolkit.map.Map.$);d(b+".map.Map."+a+".onLayerAdded",(f=_geo.geotoolkit.map.Map.$).mJc);d(b+".map.Map."+a+".onLayerRemoved",f.nJc);d(b+".map.Map."+a+".onLayersModified",f.m_b);d(b+".map.Map."+a+".onZoomStart",f.aF);d(b+".map.Map."+a+".onZoomEnd",f.au);d(b+".map.Map."+a+".onDoubleClick",f.ks);d(b+".map.Map."+a+".onResize",f.sW);e(c=_geo.geotoolkit.map.Map.prototype,"transformToMap",c.baa,{baa:0});e(c,"transformFromMap",c.bcb,{bcb:0});e(c,"transformPoint",c.cb,{cb:0});e(c,
"getMapImage",c.jCc,{jCc:0});e(c,"zoom",c.zoom,{zoom:0});e(c,"setMapScale",c.iga,{iga:0});e(c,"getMapScale",c.Fta,{Fta:0});e(c,"getOptions",c.jb,{jb:0});e(c,"setOptions",c.setOptions,{setOptions:0});e(c,"onResize",c.sW,{sW:0});e(c,"getCoordinateSystem",c.Lu,{Lu:0});e(c,"initializeTools",c.Sg,{Sg:0});e(c,"addLayer",c.ZF,{ZF:0});e(c,"setCenterModelLimits",c.jC,{jC:0});e(c,"getCenterModelLimits",c.FM,{FM:0});e(c,"setMapScaleObject",c.o4b,{o4b:0});e(c,"getMapCenter",c.hCc,{hCc:0});e(c,"panTo",c.NSa,{NSa:0});
e(c,"getLayerCount",c.isb,{isb:0});e(c,"getLayer",c.AA,{AA:0});e(c,"removeLayer",c.iLc,{iLc:0});e(c,"insertLayer",c.pYb,{pYb:0});e(c,"getScaleUnit",c.FA,{FA:0});e(c,"setScaleUnit",c.oga,{oga:0});e(c,"setBounds",c.Ea,{Ea:0});d(b+".map.strategies.IAnnotationStrategy",(f=_geo.geotoolkit.map.Zq).PXc);d(b+".map.strategies.SimpleAnnotationStrategy",f.L0c);d(b+".map.strategies.PropertyToAnnotation",f.B_c);d(b+".map.features.IGetFeatureId",(f=_geo.geotoolkit.map.Wa).UXc);d(b+".map.features.PropertyToFeatureId",
f.C_c);d(b+".map.coordinatesystem.CoordinateSystem",(f=_geo.geotoolkit.map.qka).bVc);d(b+".map.coordinatesystem.CoordinateSystemRegistry",f.cVc);d(b+".map.coordinatesystem.GeographicCoordinateSystem",f.AXc);d(b+".map.coordinatesystem.UTMCoordinateSystem",f.Q1c);d(b+".map.coordinatesystem.WebMercator",f.jLa);d(b+".map.coordinatesystem.Transformer",f.pba);d(b+".map.coordinatesystem.LatLongTransformer",f.JYc);d(b+".map.templates.ShapeTemplate",(f=_geo.geotoolkit.map.Ff).H0c);d(b+".map.templates.PolygonTemplate",
f.r_c);d(b+".map.templates.LineStringTemplate",f.PYc);d(b+".map.templates.PointTemplate",f.p_c);d(b+".map.templates.AggregationTemplate",f.WTc);d(b+".map.layers.ILayerFilter",(f=_geo.geotoolkit.map.layers).VXc);d(b+".map.layers.ScaleRangeLayerFilter",f.A0c);d(b+".map.layers.AbstractMapLayer",f.RTc);d(b+".map.layers.ShapeTemplateFeatureLayer",f.I0c);d(b+".map.layers.WMTSLayer",f.d2c);d(b+".map.layers.WMSLayer",f.c2c);d(b+".map.layers.ArcGISDynamicLayer",f.ZTc);d(b+".map.layers.ArcGISFeatureLayer",
f.$Tc);d(b+".map.layers.ShapeLayer",f.G0c);d(b+".map.layers.GeoJSONLayer",f.zXc);d(b+".map.features.IFeaturesFilter",(f=_geo.geotoolkit.map.Wa).TXc);d(b+".map.features.FeatureTypeFeaturesFilter",f.eXc);d(b+".map.features.AnchoredShapeFeaturesFilter",f.XTc);d(b+".map.features.TextFitFeaturesFilter",f.w1c);d(b+".map.features.BiggestGeometryTextFilter",f.eUc);d(b+".map.features.CascadeGeometryTextFilter",f.GUc);d(b+".map.features.NoOverlapTextFilter",f.vZc);d(b+".map.features.IMapFeature",f.WXc);d(b+
".map.features.AbstractMapFeature",f.QTc);d(b+".map.features.PointMapFeature",f.m_c);d(b+".map.features.MultiPointMapFeature",f.oZc);d(b+".map.features.LineStringMapFeature",f.NYc);d(b+".map.features.MultiLineStringMapFeature",f.nZc);d(b+".map.features.PolygonMapFeature",f.q_c);d(b+".map.features.MultiPolygonMapFeature",f.pZc);d(b+".map.features.AggregationMapFeature",f.VTc);d(b+".map.features.IFeatureGeometryToText",f.SXc);d(b+".map.features.IFeatureGeometryToShape",f.RXc);d(b+".map.features.PointMapFeatureToAnchor",
f.n_c);d(b+".map.features.GeometryToPolygon",f.DXc);d(b+".map.features.GeometryToPolyline",f.EXc);d(b+".map.features.LineStringMapFeatureToAnchor",f.OYc);d(b+".map.features.GeometryCenterToAnchor",f.BXc);d(b+".map.features.converters.DefaultFeatureConverter",(f=_geo.geotoolkit.map.Wa.Hu).AVc);d(b+".map.features.converters.FeatureConverterGroup",f.cXc);d(b+".map.features.converters.PointAggregationConverter",f.l_c);d(b+".map.features.converters.RDPFeatureConverter",f.E_c);d(b+".map.features.sources.DefaultFeatureSource",
(f=_geo.geotoolkit.map.Wa.Qa).BVc);d(b+".map.features.sources.FeatureSourceGroup",f.dXc);d(b+".map.features.sources.GeoJSONFeatureSource",f.yXc);d(b+".map.features.sources.ArcGISFeatureSource",f.aUc);d(b+".map.features.converters."+a+"",_geo.geotoolkit.map.Wa.Hu.$)})();

    return _geo;
}));
/* eslint-enable */
/* tslint:enable */